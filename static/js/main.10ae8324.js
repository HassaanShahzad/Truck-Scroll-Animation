/*! For license information please see main.10ae8324.js.LICENSE.txt */
(function(){var e={2114:function(e,t,n){var r=n(7061).default,i=n(7424).default,a=n(6690).default,o=n(9728).default,s=n(8416).default,l=n(1589).default,u=n(861).default,c=n(4704).default,f=r().mark(Qt),d=r().mark(Ht),h=Object.defineProperty,p=Object.defineProperties,v=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,A=function(e,t,n){return t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n};!function(e,t){for(var n in function(e){h(e,"__esModule",{value:!0})}(e),t)h(e,n,{get:t[n],enumerable:!0})}(t,{Atom:function(){return Ot},PointerProxy:function(){return jt},Ticker:function(){return Zt},getPointerParts:function(){return it},isPointer:function(){return st},isPrism:function(){return ct},iterateAndCountTicks:function(){return Qt},iterateOver:function(){return Ht},pointer:function(){return ot},pointerToPrism:function(){return zt},prism:function(){return Pt},val:function(){return Gt}});var b=Array.isArray,x="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,_="object"==typeof self&&self&&self.Object===Object&&self,w=x||_||Function("return this")(),S=w.Symbol,E=Object.prototype,C=E.hasOwnProperty,T=E.toString,M=S?S.toStringTag:void 0;var I=function(e){var t=C.call(e,M),n=e[M];try{e[M]=void 0;var r=!0}catch(a){}var i=T.call(e);return r&&(t?e[M]=n:delete e[M]),i},k=Object.prototype.toString;var B=function(e){return k.call(e)},R=S?S.toStringTag:void 0;var P=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":R&&R in Object(e)?I(e):B(e)};var D=function(e){return null!=e&&"object"==typeof e};var L=function(e){return"symbol"==typeof e||D(e)&&"[object Symbol]"==P(e)},N=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,F=/^\w*$/;var O=function(e,t){if(b(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!L(e))||(F.test(e)||!N.test(e)||null!=t&&e in Object(t))};var U=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var z=function(e){if(!U(e))return!1;var t=P(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},G=w["__core-js_shared__"],Q=function(){var e=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var Z=function(e){return!!Q&&Q in e},H=Function.prototype.toString;var j=function(e){if(null!=e){try{return H.call(e)}catch(t){}try{return e+""}catch(t){}}return""},V=/^\[object .+?Constructor\]$/,W=Function.prototype,X=Object.prototype,Y=W.toString,K=X.hasOwnProperty,J=RegExp("^"+Y.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var q=function(e){return!(!U(e)||Z(e))&&(z(e)?J:V).test(j(e))};var $=function(e,t){return null==e?void 0:e[t]};var ee=function(e,t){var n=$(e,t);return q(n)?n:void 0},te=ee(Object,"create");var ne=function(){this.__data__=te?te(null):{},this.size=0};var re=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ie=Object.prototype.hasOwnProperty;var ae=function(e){var t=this.__data__;if(te){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ie.call(t,e)?t[e]:void 0},oe=Object.prototype.hasOwnProperty;var se=function(e){var t=this.__data__;return te?void 0!==t[e]:oe.call(t,e)};var le=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=te&&void 0===t?"__lodash_hash_undefined__":t,this};function ue(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ue.prototype.clear=ne,ue.prototype.delete=re,ue.prototype.get=ae,ue.prototype.has=se,ue.prototype.set=le;var ce=ue;var fe=function(){this.__data__=[],this.size=0};var de=function(e,t){return e===t||e!==e&&t!==t};var he=function(e,t){for(var n=e.length;n--;)if(de(e[n][0],t))return n;return-1},pe=Array.prototype.splice;var ve=function(e){var t=this.__data__,n=he(t,e);return!(n<0)&&(n==t.length-1?t.pop():pe.call(t,n,1),--this.size,!0)};var me=function(e){var t=this.__data__,n=he(t,e);return n<0?void 0:t[n][1]};var ge=function(e){return he(this.__data__,e)>-1};var ye=function(e,t){var n=this.__data__,r=he(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Ae(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ae.prototype.clear=fe,Ae.prototype.delete=ve,Ae.prototype.get=me,Ae.prototype.has=ge,Ae.prototype.set=ye;var be=Ae,xe=ee(w,"Map");var _e=function(){this.size=0,this.__data__={hash:new ce,map:new(xe||be),string:new ce}};var we=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Se=function(e,t){var n=e.__data__;return we(t)?n["string"==typeof t?"string":"hash"]:n.map};var Ee=function(e){var t=Se(this,e).delete(e);return this.size-=t?1:0,t};var Ce=function(e){return Se(this,e).get(e)};var Te=function(e){return Se(this,e).has(e)};var Me=function(e,t){var n=Se(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ie.prototype.clear=_e,Ie.prototype.delete=Ee,Ie.prototype.get=Ce,Ie.prototype.has=Te,Ie.prototype.set=Me;var ke=Ie;function Be(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Be.Cache||ke),n}Be.Cache=ke;var Re=Be;var Pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,De=/\\(\\)?/g,Le=function(e){var t=Re(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Pe,(function(e,n,r,i){t.push(r?i.replace(De,"$1"):n||e)})),t}));var Ne=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},Fe=S?S.prototype:void 0,Oe=Fe?Fe.toString:void 0;var Ue=function e(t){if("string"==typeof t)return t;if(b(t))return Ne(t,e)+"";if(L(t))return Oe?Oe.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var ze=function(e){return null==e?"":Ue(e)};var Ge=function(e,t){return b(e)?e:O(e,t)?[e]:Le(ze(e))};var Qe=function(e){if("string"==typeof e||L(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var Ze=function(e,t){for(var n=0,r=(t=Ge(t,e)).length;null!=e&&n<r;)e=e[Qe(t[n++])];return n&&n==r?e:void 0};var He=function(e,t,n){var r=null==e?void 0:Ze(e,t);return void 0===r?n:r};var je=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),Ve=Function.prototype,We=Object.prototype,Xe=Ve.toString,Ye=We.hasOwnProperty,Ke=Xe.call(Object);var Je=function(e){if(!D(e)||"[object Object]"!=P(e))return!1;var t=je(e);if(null===t)return!0;var n=Ye.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Xe.call(n)==Ke};var qe=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},$e=new WeakMap,et=new WeakMap,tt=Symbol("pointerMeta"),nt={get:function(e,t){if(t===tt)return $e.get(e);var n=et.get(e);n||(n=new Map,et.set(e,n));var r=n.get(t);if(void 0!==r)return r;var i=$e.get(e),a=at({root:i.root,path:[].concat(u(i.path),[t])});return n.set(t,a),a}},rt=function(e){return e[tt]},it=function(e){var t=rt(e);return{root:t.root,path:t.path}};function at(e){var t,n={root:e.root,path:null!=(t=e.path)?t:[]},r={};return $e.set(r,n),new Proxy(r,nt)}var ot=at,st=function(e){return e&&!!rt(e)};var lt=function e(t,n,r){if(0===n.length)return r(t);if(Array.isArray(t)){var i=l(n),a=i[0],o=i.slice(1);a=parseInt(String(a),10),isNaN(a)&&(a=0);var f=t[a],d=e(f,o,r);if(f===d)return t;var h=u(t);return h.splice(a,1,d),h}if("object"===typeof t&&null!==t){var b=l(n),x=b[0],_=b.slice(1),w=t[x],S=e(w,_,r);return w===S?t:function(e,t){return p(e,v(t))}(function(e,t){for(var n in t||(t={}))g.call(t,n)&&A(e,n,t[n]);if(m){var r,i=c(m(t));try{for(i.s();!(r=i.n()).done;)n=r.value,y.call(t,n)&&A(e,n,t[n])}catch(a){i.e(a)}finally{i.f()}}return e}({},t),s({},x,S))}var E=l(n),C=E[0],T=E.slice(1);return s({},C,e(void 0,T,r))},ut=function(){"use strict";function e(){a(this,e),this._head=void 0}return o(e,[{key:"peek",value:function(){return this._head&&this._head.data}},{key:"pop",value:function(){var e=this._head;if(e)return this._head=e.next,e.data}},{key:"push",value:function(e){var t={next:this._head,data:e};this._head=t}}]),e}();function ct(e){return!(!e||!e.isPrism||!0!==e.isPrism)}function ft(){var e=new ut,t=function(){};return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:function(){e.push(t)},stopIgnoringDependencies:function(){e.peek()!==t||e.pop()},reportResolutionStart:function(n){var r=e.peek();r&&r(n),e.push(t)},reportResolutionEnd:function(t){e.pop()},pushCollector:function(t){e.push(t)},popCollector:function(t){if(e.peek()!==t)throw new Error("Popped collector is not on top of the stack");e.pop()}}}var dt=function(){var e="__dataverse_discoveryMechanism_sharedStack",t="undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};if(t){var r=t[e];if(r&&"object"===typeof r&&"Dataverse_discoveryMechanism"===r.type)return r;var i=ft();return t[e]=i,i}return ft()}(),ht=dt.startIgnoringDependencies,pt=dt.stopIgnoringDependencies,vt=dt.reportResolutionEnd,mt=dt.reportResolutionStart,gt=dt.pushCollector,yt=dt.popCollector,At=function(){},bt=function(){"use strict";function e(t,n){var r=this;a(this,e),this._fn=t,this._prismInstance=n,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new wt(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=function(e){r._possiblyStaleDeps.add(e),r._markAsStale()};var i,o=c(this._dependencies);try{for(o.s();!(i=o.n()).done;){i.value._addDependent(this._reactToDependencyGoingStale)}}catch(s){o.e(s)}finally{o.f()}ht(),this.getValue(),pt()}return o(e,[{key:"hasDependents",get:function(){return this._dependents.size>0}},{key:"removeDependent",value:function(e){this._dependents.delete(e)}},{key:"addDependent",value:function(e){this._dependents.add(e)}},{key:"destroy",value:function(){var e,t=c(this._dependencies);try{for(t.s();!(e=t.n()).done;){e.value._removeDependent(this._reactToDependencyGoingStale)}}catch(n){t.e(n)}finally{t.f()}St(this._scope)}},{key:"getValue",value:function(){if(!this._isFresh){var e=this._recalculate();this._lastValue=e,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}},{key:"_recalculate",value:function(){var e,t=this;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){var n=!1;ht();var r,i=c(this._possiblyStaleDeps);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(this._cacheOfDendencyValues.get(a)!==a.getValue()){n=!0;break}}}catch(v){i.e(v)}finally{i.f()}if(pt(),this._possiblyStaleDeps.clear(),!n)return this._lastValue}var o=new Set;this._cacheOfDendencyValues.clear();var s=function(e){o.add(e),t._addDependency(e)};gt(s),Ct.push(this._scope);try{e=this._fn()}catch(m){console.error(m)}finally{Ct.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}yt(s);var l,u=c(this._dependencies);try{for(u.s();!(l=u.n()).done;){var f=l.value;o.has(f)||this._removeDependency(f)}}catch(v){u.e(v)}finally{u.f()}this._dependencies=o,ht();var d,h=c(o);try{for(h.s();!(d=h.n()).done;){var p=d.value;this._cacheOfDendencyValues.set(p,p.getValue())}}catch(v){h.e(v)}finally{h.f()}return pt(),e}},{key:"forceStale",value:function(){this._forciblySetToStale=!0,this._markAsStale()}},{key:"_markAsStale",value:function(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;var e,t=c(this._dependents);try{for(t.s();!(e=t.n()).done;){(0,e.value)(this._prismInstance)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"_addDependency",value:function(e){this._dependencies.has(e)||(this._dependencies.add(e),e._addDependent(this._reactToDependencyGoingStale))}},{key:"_removeDependency",value:function(e){this._dependencies.has(e)&&(this._dependencies.delete(e),e._removeDependent(this._reactToDependencyGoingStale))}}]),e}(),xt={},_t=function(){"use strict";function e(t){a(this,e),this._fn=t,this.isPrism=!0,this._state={hot:!1,handle:void 0}}return o(e,[{key:"isHot",get:function(){return this._state.hot}},{key:"onChange",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=function(){e.onThisOrNextTick(o)},a=xt,o=function(){var e=n.getValue();e!==a&&(a=e,t(e))};this._addDependent(i),r&&(a=this.getValue(),t(a));return function(){n._removeDependent(i)}}},{key:"onStale",value:function(e){var t=this,n=function(){return e()};return this._addDependent(n),function(){t._removeDependent(n)}}},{key:"keepHot",value:function(){return this.onStale((function(){}))}},{key:"_addDependent",value:function(e){this._state.hot||this._goHot(),this._state.handle.addDependent(e)}},{key:"_goHot",value:function(){var e=new bt(this._fn,this);this._state={hot:!0,handle:e}}},{key:"_removeDependent",value:function(e){var t=this._state;if(t.hot){var n=t.handle;n.removeDependent(e),n.hasDependents||(this._state={hot:!1,handle:void 0},n.destroy())}}},{key:"getValue",value:function(){mt(this);var e,t=this._state;return e=t.hot?t.handle.getValue():function(e){var t,n=new kt;Ct.push(n);try{t=e()}catch(r){console.error(r)}finally{Ct.pop()!==n&&console.warn("The Prism hook stack has slipped. This is a bug.")}return t}(this._fn),vt(this),e}}]),e}(),wt=function(){"use strict";function e(t){a(this,e),this._hotHandle=t,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}return o(e,[{key:"ref",value:function(e,t){var n=this._refs.get(e);if(void 0!==n)return n;var r={current:t};return this._refs.set(e,r),r}},{key:"effect",value:function(e,t,n){var r=this.effects.get(e);void 0===r&&(r={cleanup:At,deps:void 0},this.effects.set(e,r)),Tt(r.deps,n)&&(r.cleanup(),ht(),r.cleanup=Et(t,At).value,pt(),r.deps=n)}},{key:"memo",value:function(e,t,n){var r=this.memos.get(e);return void 0===r&&(r={cachedValue:null,deps:void 0},this.memos.set(e,r)),Tt(r.deps,n)&&(ht(),r.cachedValue=Et(t,void 0).value,pt(),r.deps=n),r.cachedValue}},{key:"state",value:function(e,t){var n=this,r=this.memo("state/"+e,(function(){var e={current:t};return{value:e,setValue:function(t){e.current=t,n._hotHandle.forceStale()}}}),[]),i=r.value,a=r.setValue;return[i.current,a]}},{key:"sub",value:function(t){return this.subs[t]||(this.subs[t]=new e(this._hotHandle)),this.subs[t]}},{key:"cleanupEffects",value:function(){var e,t=c(this.effects.values());try{for(t.s();!(e=t.n()).done;){Et(e.value.cleanup,void 0)}}catch(n){t.e(n)}finally{t.f()}this.effects.clear()}},{key:"source",value:function(e,t){var n=this;return this.effect("$$source/blah",(function(){return e((function(){n._hotHandle.forceStale()}))}),[e]),t()}}]),e}();function St(e){for(var t=0,n=Object.values(e.subs);t<n.length;t++){St(n[t])}e.cleanupEffects()}function Et(e,t){try{return{value:e(),ok:!0}}catch(n){return setTimeout((function(){throw n})),{value:t,ok:!1}}}var Ct=new ut;function Tt(e,t){if(void 0===e||void 0===t)return!0;var n=e.length;if(n!==t.length)return!0;for(var r=0;r<n;r++)if(e[r]!==t[r])return!0;return!1}function Mt(e,t,n){var r=Ct.peek();if(!r)throw new Error("prism.memo() is called outside of a prism() call.");return r.memo(e,t,n)}var It=function(e){return new _t(e)},kt=function(){"use strict";function e(){a(this,e)}return o(e,[{key:"effect",value:function(e,t,n){console.warn("prism.effect() does not run in cold prisms")}},{key:"memo",value:function(e,t,n){return t()}},{key:"state",value:function(e,t){return[t,function(){}]}},{key:"ref",value:function(e,t){return{current:t}}},{key:"sub",value:function(t){return new e}},{key:"source",value:function(e,t){return t()}}]),e}();It.ref=function(e,t){var n=Ct.peek();if(!n)throw new Error("prism.ref() is called outside of a prism() call.");return n.ref(e,t)},It.effect=function(e,t,n){var r=Ct.peek();if(!r)throw new Error("prism.effect() is called outside of a prism() call.");return r.effect(e,t,n)},It.memo=Mt,It.ensurePrism=function(){if(!Ct.peek())throw new Error("The parent function is called outside of a prism() call.")},It.state=function(e,t){var n=Ct.peek();if(!n)throw new Error("prism.state() is called outside of a prism() call.");return n.state(e,t)},It.scope=function(e,t){var n=Ct.peek();if(!n)throw new Error("prism.scope() is called outside of a prism() call.");var r=n.sub(e);Ct.push(r);var i=Et(t,void 0).value;return Ct.pop(),i},It.sub=function(e,t,n){return Mt(e,(function(){return It(t)}),n).getValue()},It.inPrism=function(){return!!Ct.peek()},It.source=function(e,t){var n=Ct.peek();if(!n)throw new Error("prism.source() is called outside of a prism() call.");return n.source(e,t)};var Bt,Rt,Pt=It;(Rt=Bt||(Bt={}))[Rt.Dict=0]="Dict",Rt[Rt.Array=1]="Array",Rt[Rt.Other=2]="Other";var Dt=function(e){return Array.isArray(e)?1:Je(e)?0:2},Lt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dt(e);return 0===n&&"string"===typeof t||1===n&&Nt(t)?e[t]:void 0},Nt=function(e){var t="number"===typeof e?e:parseInt(e,10);return!isNaN(t)&&t>=0&&t<1/0&&(0|t)===t},Ft=function(){"use strict";function e(t,n){a(this,e),this._parent=t,this._path=n,this.children=new Map,this.identityChangeListeners=new Set}return o(e,[{key:"addIdentityChangeListener",value:function(e){this.identityChangeListeners.add(e)}},{key:"removeIdentityChangeListener",value:function(e){this.identityChangeListeners.delete(e),this._checkForGC()}},{key:"removeChild",value:function(e){this.children.delete(e),this._checkForGC()}},{key:"getChild",value:function(e){return this.children.get(e)}},{key:"getOrCreateChild",value:function(t){var n=this.children.get(t);return n||(n=n=new e(this,this._path.concat([t])),this.children.set(t,n)),n}},{key:"_checkForGC",value:function(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(qe(this._path))}}]),e}(),Ot=function(){"use strict";function e(t){var n=this;a(this,e),this.$$isPointerToPrismProvider=!0,this.pointer=ot({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=function(e,t){var r=it(e).path,i=n._getOrCreateScopeForPath(r);i.identityChangeListeners.add(t);return function(){i.identityChangeListeners.delete(t)}},this._currentState=t,this._rootScope=new Ft(void 0,[])}return o(e,[{key:"set",value:function(e){var t=this._currentState;this._currentState=e,this._checkUpdates(this._rootScope,t,e)}},{key:"get",value:function(){return this._currentState}},{key:"getByPointer",value:function(e){var t=st(e)?e:e(this.pointer),n=it(t).path;return this._getIn(n)}},{key:"_getIn",value:function(e){return 0===e.length?this.get():He(this.get(),e)}},{key:"reduce",value:function(e){this.set(e(this.get()))}},{key:"reduceByPointer",value:function(e,t){var n=st(e)?e:e(this.pointer),r=it(n).path,i=function(e,t,n){return 0===t.length?n(e):lt(e,t,n)}(this.get(),r,t);this.set(i)}},{key:"setByPointer",value:function(e,t){this.reduceByPointer(e,(function(){return t}))}},{key:"_checkUpdates",value:function(e,t,n){if(t!==n){var r,a=c(e.identityChangeListeners);try{for(a.s();!(r=a.n()).done;){(0,r.value)(n)}}catch(m){a.e(m)}finally{a.f()}if(0!==e.children.size){var o=Dt(t),s=Dt(n);if(2!==o||o!==s){var l,u=c(e.children);try{for(u.s();!(l=u.n()).done;){var f=i(l.value,2),d=f[0],h=f[1],p=Lt(t,d,o),v=Lt(n,d,s);this._checkUpdates(h,p,v)}}catch(m){u.e(m)}finally{u.f()}}}}}},{key:"_getOrCreateScopeForPath",value:function(e){var t,n=this._rootScope,r=c(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.getOrCreateChild(i)}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"pointerToPrism",value:function(e){var t=this,n=it(e).path,r=function(n){return t._onPointerValueChange(e,n)},i=function(){return t._getIn(n)};return Pt((function(){return Pt.source(r,i)}))}}]),e}(),Ut=new WeakMap;var zt=function(e){var t,n=rt(e),r=Ut.get(n);if(!r){var i=n.root;if("object"!==typeof(t=i)||null===t||!0!==t.$$isPointerToPrismProvider)throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");r=i.pointerToPrism(e),Ut.set(n,r)}return r},Gt=function(e){return st(e)?zt(e).getValue():ct(e)?e.getValue():e};function Qt(e){var t,n,i,a;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!st(e)){r.next=4;break}t=zt(e),r.next=9;break;case 4:if(!ct(e)){r.next=8;break}t=e,r.next=9;break;case 8:throw new Error("Only pointers and prisms are supported");case 9:n=0,i=t.onStale((function(){n++})),r.prev=11;case 12:return a=n,n=0,r.next=17,{value:t.getValue(),ticks:a};case 17:r.next=12;break;case 19:return r.prev=19,i(),r.finish(19);case 22:case"end":return r.stop()}}),f,null,[[11,,19,22]])}var Zt=function(){"use strict";function e(t){a(this,e),this._conf=t,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}return o(e,[{key:"dormant",get:function(){return this._dormant}},{key:"onThisOrNextTick",value:function(e){this._scheduledForThisOrNextTick.add(e),this._dormant&&this._goActive()}},{key:"onNextTick",value:function(e){this._scheduledForNextTick.add(e),this._dormant&&this._goActive()}},{key:"offThisOrNextTick",value:function(e){this._scheduledForThisOrNextTick.delete(e)}},{key:"offNextTick",value:function(e){this._scheduledForNextTick.delete(e)}},{key:"time",get:function(){return this._ticking?this._timeAtCurrentTick:performance.now()}},{key:"_goActive",value:function(){var e,t;this._dormant&&(this._dormant=!1,null==(t=null==(e=this._conf)?void 0:e.onActive)||t.call(e))}},{key:"_goDormant",value:function(){var e,t;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,null==(t=null==(e=this._conf)?void 0:e.onDormant)||t.call(e))}},{key:"tick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();if(this.__ticks++,!this._dormant&&0===this._scheduledForNextTick.size&&0===this._scheduledForThisOrNextTick.size&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=180))this._goDormant();else{this._ticking=!0,this._timeAtCurrentTick=e;var t,n=c(this._scheduledForNextTick);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._scheduledForThisOrNextTick.add(r)}}catch(i){n.e(i)}finally{n.f()}this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}}},{key:"_tick",value:function(e){var t=this.time;if(e>10&&console.warn("_tick() recursing for 10 times"),e>100)throw new Error("Maximum recursion limit for _tick()");var n=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;var r,i=c(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}if(this._scheduledForThisOrNextTick.size>0)return this._tick(e+1)}}]),e}();function Ht(e){var t,n,i;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!st(e)){r.next=4;break}t=zt(e),r.next=9;break;case 4:if(!ct(e)){r.next=8;break}t=e,r.next=9;break;case 8:throw new Error("Only pointers and prisms are supported");case 9:n=new Zt,i=t.onChange(n,(function(e){})),r.prev=11;case 12:return n.tick(),r.next=16,t.getValue();case 16:r.next=12;break;case 18:return r.prev=18,i(),r.finish(18);case 21:case"end":return r.stop()}}),d,null,[[11,,18,21]])}var jt=function(){"use strict";function e(t){a(this,e),this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new Ot(t),this.pointer=ot({root:this,path:[]})}return o(e,[{key:"setPointer",value:function(e){this._currentPointerBox.set(e)}},{key:"pointerToPrism",value:function(e){var t=this,n=rt(e).path;return Pt((function(){var e=t._currentPointerBox.prism.getValue(),r=n.reduce((function(e,t){return e[t]}),e);return Gt(r)}))}}]),e}()},7823:function(e){"use strict";e.exports=function(e,t){if(null===e||"undefined"===typeof e)throw new TypeError("expected first argument to be an object.");if("undefined"===typeof t||"undefined"===typeof Symbol)return e;if("function"!==typeof Object.getOwnPropertySymbols)return e;for(var n=Object.prototype.propertyIsEnumerable,r=Object(e),i=arguments.length,a=0;++a<i;)for(var o=Object(arguments[a]),s=Object.getOwnPropertySymbols(o),l=0;l<s.length;l++){var u=s[l];n.call(o,u)&&(r[u]=o[u])}return r}},9998:function(e,t){"use strict";t.Z=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=(e.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?a===t.replace(/\/.*$/,""):i===t}))}return!0}},7494:function(e){function t(e,t,n){var r,i,a,o,s;function l(){var u=Date.now()-o;u<t&&u>=0?r=setTimeout(l,t-u):(r=null,n||(s=e.apply(a,i),a=i=null))}null==t&&(t=100);var u=function(){a=this,i=arguments,o=Date.now();var u=n&&!r;return r||(r=setTimeout(l,t)),u&&(s=e.apply(a,i),a=i=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=e.apply(a,i),a=i=null,clearTimeout(r),r=null)},u}t.debounce=t,e.exports=t},5456:function(e,t,n){"use strict";var r=n(9583);function i(e,t){for(var n in t)a(t,n)&&(e[n]=t[n])}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e){r(e)||(e={});for(var t=arguments.length,n=1;n<t;n++){var a=arguments[n];r(a)&&i(e,a)}return e}},9583:function(e){"use strict";e.exports=function(e){return"undefined"!==typeof e&&null!==e&&("object"===typeof e||"function"===typeof e)}},1617:function(e,t,n){"use strict";n.d(t,{HT:function(){return B}});var r=Uint8Array,i=Uint16Array,a=Uint32Array,o=new r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(e,t){for(var n=new i(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new a(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)o[s]=s-n[r]<<5|r;return[n,o]},c=u(o,2),f=c[0],d=c[1];f[28]=258,d[258]=28;for(var h=u(s,0),p=h[0],v=(h[1],new i(32768)),m=0;m<32768;++m){var g=(43690&m)>>>1|(21845&m)<<1;g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4,v[m]=((65280&g)>>>8|(255&g)<<8)>>>1}var y=function(e,t,n){for(var r=e.length,a=0,o=new i(t);a<r;++a)++o[e[a]-1];var s,l=new i(t);for(a=0;a<t;++a)l[a]=l[a-1]+o[a-1]<<1;if(n){s=new i(1<<t);var u=15-t;for(a=0;a<r;++a)if(e[a])for(var c=a<<4|e[a],f=t-e[a],d=l[e[a]-1]++<<f,h=d|(1<<f)-1;d<=h;++d)s[v[d]>>>u]=c}else for(s=new i(r),a=0;a<r;++a)e[a]&&(s[a]=v[l[e[a]-1]++]>>>15-e[a]);return s},A=new r(288);for(m=0;m<144;++m)A[m]=8;for(m=144;m<256;++m)A[m]=9;for(m=256;m<280;++m)A[m]=7;for(m=280;m<288;++m)A[m]=8;var b=new r(32);for(m=0;m<32;++m)b[m]=5;var x=y(A,9,1),_=y(b,5,1),w=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},S=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},E=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},C=function(e){return(e/8|0)+(7&e&&1)},T=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var o=new(e instanceof i?i:e instanceof a?a:r)(n-t);return o.set(e.subarray(t,n)),o},M=function(e,t,n){var i=e.length;if(!i||n&&!n.l&&i<5)return t||new r(0);var a=!t||n,u=!n||n.i;n||(n={}),t||(t=new r(3*i));var c=function(e){var n=t.length;if(e>n){var i=new r(Math.max(2*n,e));i.set(t),t=i}},d=n.f||0,h=n.p||0,v=n.b||0,m=n.l,g=n.d,A=n.m,b=n.n,M=8*i;do{if(!m){n.f=d=S(e,h,1);var I=S(e,h+1,3);if(h+=3,!I){var k=e[(G=C(h)+4)-4]|e[G-3]<<8,B=G+k;if(B>i){if(u)throw"unexpected EOF";break}a&&c(v+k),t.set(e.subarray(G,B),v),n.b=v+=k,n.p=h=8*B;continue}if(1==I)m=x,g=_,A=9,b=5;else{if(2!=I)throw"invalid block type";var R=S(e,h,31)+257,P=S(e,h+10,15)+4,D=R+S(e,h+5,31)+1;h+=14;for(var L=new r(D),N=new r(19),F=0;F<P;++F)N[l[F]]=S(e,h+3*F,7);h+=3*P;var O=w(N),U=(1<<O)-1,z=y(N,O,1);for(F=0;F<D;){var G,Q=z[S(e,h,U)];if(h+=15&Q,(G=Q>>>4)<16)L[F++]=G;else{var Z=0,H=0;for(16==G?(H=3+S(e,h,3),h+=2,Z=L[F-1]):17==G?(H=3+S(e,h,7),h+=3):18==G&&(H=11+S(e,h,127),h+=7);H--;)L[F++]=Z}}var j=L.subarray(0,R),V=L.subarray(R);A=w(j),b=w(V),m=y(j,A,1),g=y(V,b,1)}if(h>M){if(u)throw"unexpected EOF";break}}a&&c(v+131072);for(var W=(1<<A)-1,X=(1<<b)-1,Y=h;;Y=h){var K=(Z=m[E(e,h)&W])>>>4;if((h+=15&Z)>M){if(u)throw"unexpected EOF";break}if(!Z)throw"invalid length/literal";if(K<256)t[v++]=K;else{if(256==K){Y=h,m=null;break}var J=K-254;if(K>264){var q=o[F=K-257];J=S(e,h,(1<<q)-1)+f[F],h+=q}var $=g[E(e,h)&X],ee=$>>>4;if(!$)throw"invalid distance";h+=15&$;V=p[ee];if(ee>3){q=s[ee];V+=E(e,h)&(1<<q)-1,h+=q}if(h>M){if(u)throw"unexpected EOF";break}a&&c(v+131072);for(var te=v+J;v<te;v+=4)t[v]=t[v-V],t[v+1]=t[v+1-V],t[v+2]=t[v+2-V],t[v+3]=t[v+3-V];v=te}}n.l=m,n.p=Y,n.b=v,m&&(d=1,n.m=A,n.d=g,n.n=b)}while(!d);return v==t.length?t:T(t,0,v)},I=new r(0),k=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function B(e,t){return M((k(e),e.subarray(2,-4)),t)}var R="undefined"!=typeof TextDecoder&&new TextDecoder;try{R.decode(I,{stream:!0}),1}catch(P){}},8845:function(e){"use strict";e.exports=function(e,t,n){for(var r in e)if(!1===t.call(n,e[r],r,e))break}},9944:function(e){function t(e){return e?Array.isArray(e)?e.join("."):e:""}e.exports=function(e,n,r,i,a){if(null===(o=e)||"object"!==typeof o&&"function"!==typeof o||!n)return e;var o;if(n=t(n),r&&(n+="."+t(r)),i&&(n+="."+t(i)),a&&(n+="."+t(a)),n in e)return e[n];for(var s=n.split("."),l=s.length,u=-1;e&&++u<l;){for(var c=s[u];"\\"===c[c.length-1];)c=c.slice(0,-1)+"."+s[++u];e=e[c]}return e}},9105:function(e,t,n){"use strict";var r=n(4807);e.exports=function(e){return r(e)||"function"===typeof e||Array.isArray(e)}},4807:function(e,t,n){"use strict";var r=n(8863);function i(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==i(e)&&("function"===typeof(t=e.constructor)&&(!1!==i(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},8863:function(e){"use strict";e.exports=function(e){return null!=e&&"object"===typeof e&&!1===Array.isArray(e)}},8089:function(e,t,n){"use strict";var r=n(9105),i=n(7046),a=n(9944),o=n(7809);e.exports=function(e,t,n){if(!r(e))throw new TypeError("expected an object");if("string"!==typeof t||null==n)return i.apply(null,arguments);if("string"===typeof n)return o(e,t,n),e;var s=a(e,t);return r(n)&&r(s)&&(n=i({},s,n)),o(e,t,n),e}},7046:function(e,t,n){"use strict";var r=n(9105),i=n(8845);function a(e,t){for(var n=arguments.length,r=0;++r<n;){var a=arguments[r];s(a)&&i(a,o,e)}return e}function o(e,t){if(function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}(t)){var n=this[t];s(e)&&s(n)?a(n,e):this[t]=e}}function s(e){return r(e)&&!Array.isArray(e)}e.exports=a},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5585);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function A(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(h,e)&&(d.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var N,F=Object.assign;function O(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?O(e):""}function G(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function Q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case B:return null!==(t=e.displayName||null)?t:Q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return Q(e(t))}catch(n){}}return null}function Z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function j(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=j(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=j(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&A(e,"checked",t,!1)}function q(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ae=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,we=null;function Se(e){if(e=vi(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=gi(t),xe(e.stateNode,e.type,t))}}function Ee(e){_e?we?we.push(e):we=[e]:_e=e}function Ce(){if(_e){var e=_e,t=we;if(we=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Me(){}var Ie=!1;function ke(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Te(e,t,n)}finally{Ie=!1,(null!==_e||null!==we)&&(Me(),Ce())}}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(c)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(tc){Re=!1}function De(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Le=!1,Ne=null,Fe=!1,Oe=null,Ue={onError:function(e){Le=!0,Ne=e}};function ze(e,t,n,r,i,a,o,s,l){Le=!1,Ne=null,De.apply(Ue,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Ge(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ze(i),e;if(o===r)return Ze(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?je(e):null}function je(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=je(e);if(null!==t)return t;e=e.sibling}return null}var Ve=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Ke=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,qe=i.unstable_ImmediatePriority,$e=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,rt=null,it=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ot(e)/st|0)|0},ot=Math.log,st=Math.LN2;var lt=64,ut=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ct(s):0!==(a&=o)&&(r=ct(a))}else 0!==(o=n&~i)?r=ct(o):0!==a&&(r=ct(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function At(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,xt,_t,wt,St,Et=!1,Ct=[],Tt=null,Mt=null,It=null,kt=new Map,Bt=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=vi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Nt(e){var t=pi(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ae=r,n.target.dispatchEvent(r),Ae=null,t.shift()}return!0}function Ot(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Et=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Mt&&Ft(Mt)&&(Mt=null),null!==It&&Ft(It)&&(It=null),kt.forEach(Ot),Bt.forEach(Ot)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Gt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Mt&&zt(Mt,e),null!==It&&zt(It,e),kt.forEach(t),Bt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Nt(n),null===n.blockedOn&&Rt.shift()}var Qt=b.ReactCurrentBatchConfig,Zt=!0;function Ht(e,t,n,r){var i=yt,a=Qt.transition;Qt.transition=null;try{yt=1,Vt(e,t,n,r)}finally{yt=i,Qt.transition=a}}function jt(e,t,n,r){var i=yt,a=Qt.transition;Qt.transition=null;try{yt=4,Vt(e,t,n,r)}finally{yt=i,Qt.transition=a}}function Vt(e,t,n,r){if(Zt){var i=Xt(e,t,n,r);if(null===i)zr(e,t,r,Wt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return Mt=Lt(Mt,e,t,n,r,i),!0;case"mouseover":return It=Lt(It,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return kt.set(a,Lt(kt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Bt.set(a,Lt(Bt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=vi(i);if(null!==a&&bt(a),null===(a=Xt(e,t,n,r))&&zr(e,t,r,Wt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Wt=null;function Xt(e,t,n,r){if(Wt=null,null!==(e=pi(e=be(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case qe:return 1;case $e:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Kt=null,Jt=null,qt=null;function $t(){if(qt)return qt;var e,t,n=Jt,r=n.length,i="value"in Kt?Kt.value:Kt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return qt=i.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var an,on,sn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(ln),cn=F({},ln,{view:0,detail:0}),fn=rn(cn),dn=F({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(an=e.screenX-sn.screenX,on=e.screenY-sn.screenY):on=an=0,sn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),hn=rn(dn),pn=rn(F({},dn,{dataTransfer:0})),vn=rn(F({},cn,{relatedTarget:0})),mn=rn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=rn(F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),yn=rn(F({},ln,{data:0})),An={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function wn(){return _n}var Sn=rn(F({},cn,{key:function(e){if(e.key){var t=An[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),En=rn(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=rn(F({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),Tn=rn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=rn(F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),In=[9,13,27,32],kn=c&&"CompositionEvent"in window,Bn=null;c&&"documentMode"in document&&(Bn=document.documentMode);var Rn=c&&"TextEvent"in window&&!Bn,Pn=c&&(!kn||Bn&&8<Bn&&11>=Bn),Dn=String.fromCharCode(32),Ln=!1;function Nn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var On=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Zn=null;function Hn(e){Dr(e,0)}function jn(e){if(W(mi(e)))return e}function Vn(e,t){if("change"===e)return t}var Wn=!1;if(c){var Xn;if(c){var Yn="oninput"in document;if(!Yn){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),Yn="function"===typeof Kn.oninput}Xn=Yn}else Xn=!1;Wn=Xn&&(!document.documentMode||9<document.documentMode)}function Jn(){Qn&&(Qn.detachEvent("onpropertychange",qn),Zn=Qn=null)}function qn(e){if("value"===e.propertyName&&jn(Zn)){var t=[];Gn(t,Zn,e,be(e)),ke(Hn,t)}}function $n(e,t,n){"focusin"===e?(Jn(),Zn=n,(Qn=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Jn()}function er(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jn(Zn)}function tr(e,t){if("click"===e)return jn(t)}function nr(e,t){if("input"===e||"change"===e)return jn(t)}var rr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ir(e,t){if(rr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!rr(e[i],t[i]))return!1}return!0}function ar(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function or(e,t){var n,r=ar(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ar(r)}}function sr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?sr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function cr(e){var t=lr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&sr(n.ownerDocument.documentElement,n)){if(null!==r&&ur(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=or(n,a);var o=or(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=c&&"documentMode"in document&&11>=document.documentMode,dr=null,hr=null,pr=null,vr=!1;function mr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==dr||dr!==X(r)||("selectionStart"in(r=dr)&&ur(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},pr&&ir(pr,r)||(pr=r,0<(r=Qr(hr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=dr)))}function gr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yr={animationend:gr("Animation","AnimationEnd"),animationiteration:gr("Animation","AnimationIteration"),animationstart:gr("Animation","AnimationStart"),transitionend:gr("Transition","TransitionEnd")},Ar={},br={};function xr(e){if(Ar[e])return Ar[e];if(!yr[e])return e;var t,n=yr[e];for(t in n)if(n.hasOwnProperty(t)&&t in br)return Ar[e]=n[t];return e}c&&(br=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);var _r=xr("animationend"),wr=xr("animationiteration"),Sr=xr("animationstart"),Er=xr("transitionend"),Cr=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Cr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Tr.length;Ir++){var kr=Tr[Ir];Mr(kr.toLowerCase(),"on"+(kr[0].toUpperCase()+kr.slice(1)))}Mr(_r,"onAnimationEnd"),Mr(wr,"onAnimationIteration"),Mr(Sr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Er,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function Pr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(ze.apply(this,arguments),Le){if(!Le)throw Error(a(198));var c=Ne;Le=!1,Ne=null,Fe||(Fe=!0,Oe=c)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Pr(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Pr(i,s,u),a=l}}}if(Fe)throw e=Oe,Fe=!1,Oe=null,e}function Lr(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function Nr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Or(e){if(!e[Fr]){e[Fr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Rr.has(t)||Nr(t,!1,e),Nr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Nr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=jt;break;default:i=Vt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=pi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}ke((function(){var r=a,i=be(n),o=[];e:{var s=Cr.get(e);if(void 0!==s){var l=un,u=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case _r:case wr:case Sr:l=mn;break;case Er:l=Tn;break;case"scroll":l=fn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=gn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var c=0!==(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==d&&(null!=(v=Be(p,d))&&c.push(Gr(p,v,h)))),f)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Ae||!(u=n.relatedTarget||n.fromElement)||!pi(u)&&!u[ci])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?pi(u):null)&&(u!==(f=Ge(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=hn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=En,v="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==l?s:mi(l),h=null==u?s:mi(u),(s=new c(v,p+"leave",l,n,i)).target=f,s.relatedTarget=h,v=null,pi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=h,c.relatedTarget=f,v=c),f=v,l&&u)e:{for(d=u,p=0,h=c=l;h;h=Zr(h))p++;for(h=0,v=d;v;v=Zr(v))h++;for(;0<p-h;)c=Zr(c),p--;for(;0<h-p;)d=Zr(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Zr(c),d=Zr(d)}c=null}else c=null;null!==l&&Hr(o,s,l,c,!1),null!==u&&null!==f&&Hr(o,f,u,c,!0)}if("select"===(l=(s=r?mi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Vn;else if(zn(s))if(Wn)m=nr;else{m=er;var g=$n}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=tr);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?mi(r):window,e){case"focusin":(zn(g)||"true"===g.contentEditable)&&(dr=g,hr=r,pr=null);break;case"focusout":pr=hr=dr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,mr(o,n,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":mr(o,n,i)}var y;if(kn)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else On?Nn(e,n)&&(A="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(A="onCompositionStart");A&&(Pn&&"ko"!==n.locale&&(On||"onCompositionStart"!==A?"onCompositionEnd"===A&&On&&(y=$t()):(Jt="value"in(Kt=i)?Kt.value:Kt.textContent,On=!0)),0<(g=Qr(r,A)).length&&(A=new yn(A,e,null,n,i),o.push({event:A,listeners:g}),y?A.data=y:null!==(y=Fn(n))&&(A.data=y))),(y=Rn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(Ln=!0,Dn);case"textInput":return(e=t.data)===Dn&&Ln?null:e;default:return null}}(e,n):function(e,t){if(On)return"compositionend"===e||!kn&&Nn(e,t)?(e=$t(),qt=Jt=Kt=null,On=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new yn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Dr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Be(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Be(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Zr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Be(n,a))&&o.unshift(Gr(n,l,s)):i||null!=(l=Be(n,a))&&o.push(Gr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var jr=/\r\n?/g,Vr=/\u0000|\uFFFD/g;function Wr(e){return("string"===typeof e?e:""+e).replace(jr,"\n").replace(Vr,"")}function Xr(e,t,n){if(t=Wr(t),Wr(e)!==t&&n)throw Error(a(425))}function Yr(){}var Kr=null,Jr=null;function qr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var $r="function"===typeof setTimeout?setTimeout:void 0,ei="function"===typeof clearTimeout?clearTimeout:void 0,ti="function"===typeof Promise?Promise:void 0,ni="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ti?function(e){return ti.resolve(null).then(e).catch(ri)}:$r;function ri(e){setTimeout((function(){throw e}))}function ii(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Gt(t)}function ai(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function oi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),li="__reactFiber$"+si,ui="__reactProps$"+si,ci="__reactContainer$"+si,fi="__reactEvents$"+si,di="__reactListeners$"+si,hi="__reactHandles$"+si;function pi(e){var t=e[li];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ci]||n[li]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=oi(e);null!==e;){if(n=e[li])return n;e=oi(e)}return t}n=(e=n).parentNode}return null}function vi(e){return!(e=e[li]||e[ci])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function mi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function gi(e){return e[ui]||null}var yi=[],Ai=-1;function bi(e){return{current:e}}function xi(e){0>Ai||(e.current=yi[Ai],yi[Ai]=null,Ai--)}function _i(e,t){Ai++,yi[Ai]=e.current,e.current=t}var wi={},Si=bi(wi),Ei=bi(!1),Ci=wi;function Ti(e,t){var n=e.type.contextTypes;if(!n)return wi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ii(){xi(Ei),xi(Si)}function ki(e,t,n){if(Si.current!==wi)throw Error(a(168));_i(Si,t),_i(Ei,n)}function Bi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,Z(e)||"Unknown",i));return F({},n,r)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wi,Ci=Si.current,_i(Si,e),_i(Ei,Ei.current),!0}function Pi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Bi(e,t,Ci),r.__reactInternalMemoizedMergedChildContext=e,xi(Ei),xi(Si),_i(Si,e)):xi(Ei),_i(Ei,n)}var Di=null,Li=!1,Ni=!1;function Fi(e){null===Di?Di=[e]:Di.push(e)}function Oi(){if(!Ni&&null!==Di){Ni=!0;var e=0,t=yt;try{var n=Di;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Di=null,Li=!1}catch(i){throw null!==Di&&(Di=Di.slice(e+1)),Ve(qe,Oi),i}finally{yt=t,Ni=!1}}return null}var Ui=[],zi=0,Gi=null,Qi=0,Zi=[],Hi=0,ji=null,Vi=1,Wi="";function Xi(e,t){Ui[zi++]=Qi,Ui[zi++]=Gi,Gi=e,Qi=t}function Yi(e,t,n){Zi[Hi++]=Vi,Zi[Hi++]=Wi,Zi[Hi++]=ji,ji=e;var r=Vi;e=Wi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var a=32-at(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Vi=1<<32-at(t)+i|n<<i|r,Wi=a+e}else Vi=1<<a|n<<i|r,Wi=e}function Ki(e){null!==e.return&&(Xi(e,1),Yi(e,1,0))}function Ji(e){for(;e===Gi;)Gi=Ui[--zi],Ui[zi]=null,Qi=Ui[--zi],Ui[zi]=null;for(;e===ji;)ji=Zi[--Hi],Zi[Hi]=null,Wi=Zi[--Hi],Zi[Hi]=null,Vi=Zi[--Hi],Zi[Hi]=null}var qi=null,$i=null,ea=!1,ta=null;function na(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ra(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,qi=e,$i=ai(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,qi=e,$i=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ji?{id:Vi,overflow:Wi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,qi=e,$i=null,!0);default:return!1}}function ia(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function aa(e){if(ea){var t=$i;if(t){var n=t;if(!ra(e,t)){if(ia(e))throw Error(a(418));t=ai(n.nextSibling);var r=qi;t&&ra(e,t)?na(r,n):(e.flags=-4097&e.flags|2,ea=!1,qi=e)}}else{if(ia(e))throw Error(a(418));e.flags=-4097&e.flags|2,ea=!1,qi=e}}}function oa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;qi=e}function sa(e){if(e!==qi)return!1;if(!ea)return oa(e),ea=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!qr(e.type,e.memoizedProps)),t&&(t=$i)){if(ia(e))throw la(),Error(a(418));for(;t;)na(e,t),t=ai(t.nextSibling)}if(oa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){$i=ai(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}$i=null}}else $i=qi?ai(e.stateNode.nextSibling):null;return!0}function la(){for(var e=$i;e;)e=ai(e.nextSibling)}function ua(){$i=qi=null,ea=!1}function ca(e){null===ta?ta=[e]:ta.push(e)}var fa=b.ReactCurrentBatchConfig;function da(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ha=bi(null),pa=null,va=null,ma=null;function ga(){ma=va=pa=null}function ya(e){var t=ha.current;xi(ha),e._currentValue=t}function Aa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ba(e,t){pa=e,ma=va=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ms=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(ma!==e)if(e={context:e,memoizedValue:t,next:null},null===va){if(null===pa)throw Error(a(308));va=e,pa.dependencies={lanes:0,firstContext:e}}else va=va.next=e;return t}var _a=null;function wa(e){null===_a?_a=[e]:_a.push(e)}function Sa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,wa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ea(e,r)}function Ea(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ca=!1;function Ta(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ka(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ea(e,n)}return null===(i=r.interleaved)?(t.next=t,wa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ea(e,n)}function Ba(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ra(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pa(e,t,n,r){var i=e.updateQueue;Ca=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var f=i.baseState;for(o=0,c=u=l=null,s=a;;){var d=s.lane,h=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(d=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=v.payload)?p.call(h,f,d):p)||void 0===d)break e;f=F({},f,d);break e;case 2:Ca=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=h,l=f):c=c.next=h,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Pl|=o,e.lanes=o,e.memoizedState=f}}function Da(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var La=(new r.Component).refs;function Na(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Fa={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Jl(),i=ql(e),a=Ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ka(e,a,i))&&($l(t,e,i,r),Ba(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Jl(),i=ql(e),a=Ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ka(e,a,i))&&($l(t,e,i,r),Ba(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Jl(),r=ql(e),i=Ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=ka(e,i,r))&&($l(t,e,r,n),Ba(t,e,r))}};function Oa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ir(n,r)||!ir(i,a))}function Ua(e,t,n){var r=!1,i=wi,a=t.contextType;return"object"===typeof a&&null!==a?a=xa(a):(i=Mi(t)?Ci:Si.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ti(e,i):wi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Fa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function za(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fa.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=La,Ta(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=xa(a):(a=Mi(t)?Ci:Si.current,i.context=Ti(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Na(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Fa.enqueueReplaceState(i,i.state,null),Pa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===La&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Za(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ha(e){return(0,e._init)(e._payload)}function ja(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ku(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Du(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===w?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Ha(a)===t.type)?((r=i(t,n.props)).ref=Qa(e,t,n),r.return=e,r):((r=Bu(n.type,n.key,n.props,null,e.mode,r)).ref=Qa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ru(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Du(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Bu(t.type,t.key,t.props,null,e.mode,n)).ref=Qa(e,null,t),n.return=e,n;case _:return(t=Lu(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ru(t,e.mode,n,null)).return=e,t;Za(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?u(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null;case R:return h(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Za(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Za(t,r)}return null}function v(i,a,s,l){for(var u=null,c=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=h(i,f,s[v],l);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(i,f),a=o(g,a,v),null===c?u=g:c.sibling=g,c=g,f=m}if(v===s.length)return n(i,f),ea&&Xi(i,v),u;if(null===f){for(;v<s.length;v++)null!==(f=d(i,s[v],l))&&(a=o(f,a,v),null===c?u=f:c.sibling=f,c=f);return ea&&Xi(i,v),u}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],l))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?u=m:c.sibling=m,c=m);return e&&f.forEach((function(e){return t(i,e)})),ea&&Xi(i,v),u}function m(i,s,l,u){var c=L(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var f=c=null,v=s,m=s=0,g=null,y=l.next();null!==v&&!y.done;m++,y=l.next()){v.index>m?(g=v,v=null):g=v.sibling;var A=h(i,v,y.value,u);if(null===A){null===v&&(v=g);break}e&&v&&null===A.alternate&&t(i,v),s=o(A,s,m),null===f?c=A:f.sibling=A,f=A,v=g}if(y.done)return n(i,v),ea&&Xi(i,m),c;if(null===v){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,u))&&(s=o(y,s,m),null===f?c=y:f.sibling=y,f=y);return ea&&Xi(i,m),c}for(v=r(i,v);!y.done;m++,y=l.next())null!==(y=p(v,i,m,y.value,u))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===f?c=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(i,e)})),ea&&Xi(i,m),c}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===w&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===w){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&Ha(u)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Qa(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===w?((a=Ru(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Bu(o.type,o.key,o.props,null,r.mode,l)).ref=Qa(r,a,o),l.return=r,r=l)}return s(r);case _:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Lu(o,r.mode,l)).return=r,r=a}return s(r);case R:return e(r,a,(c=o._init)(o._payload),l)}if(te(o))return v(r,a,o,l);if(L(o))return m(r,a,o,l);Za(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Du(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var Va=ja(!0),Wa=ja(!1),Xa={},Ya=bi(Xa),Ka=bi(Xa),Ja=bi(Xa);function qa(e){if(e===Xa)throw Error(a(174));return e}function $a(e,t){switch(_i(Ja,t),_i(Ka,e),_i(Ya,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Ya),_i(Ya,t)}function eo(){xi(Ya),xi(Ka),xi(Ja)}function to(e){qa(Ja.current);var t=qa(Ya.current),n=le(t,e.type);t!==n&&(_i(Ka,e),_i(Ya,n))}function no(e){Ka.current===e&&(xi(Ya),xi(Ka))}var ro=bi(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var so=b.ReactCurrentDispatcher,lo=b.ReactCurrentBatchConfig,uo=0,co=null,fo=null,ho=null,po=!1,vo=!1,mo=0,go=0;function yo(){throw Error(a(321))}function Ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rr(e[n],t[n]))return!1;return!0}function bo(e,t,n,r,i,o){if(uo=o,co=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?rs:is,e=n(r,i),vo){o=0;do{if(vo=!1,mo=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,so.current=as,e=n(r,i)}while(vo)}if(so.current=ns,t=null!==fo&&null!==fo.next,uo=0,ho=fo=co=null,po=!1,t)throw Error(a(300));return e}function xo(){var e=0!==mo;return mo=0,e}function _o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?co.memoizedState=ho=e:ho=ho.next=e,ho}function wo(){if(null===fo){var e=co.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?co.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?co.memoizedState=ho=e:ho=ho.next=e}return ho}function So(e,t){return"function"===typeof t?t(e):t}function Eo(e){var t=wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var f=c.lane;if((uo&f)===f)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,co.lanes|=f,Pl|=f}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,rr(r,t.memoizedState)||(ms=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,co.lanes|=o,Pl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Co(e){var t=wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);rr(o,t.memoizedState)||(ms=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Mo(e,t){var n=co,r=wo(),i=t(),o=!rr(r.memoizedState,i);if(o&&(r.memoizedState=i,ms=!0),r=r.queue,zo(Bo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Lo(9,ko.bind(null,n,r,i,t),void 0,null),null===Cl)throw Error(a(349));0!==(30&uo)||Io(n,t,i)}return i}function Io(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ko(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&Po(e)}function Bo(e,t,n){return n((function(){Ro(t)&&Po(e)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rr(e,n)}catch(r){return!0}}function Po(e){var t=Ea(e,1);null!==t&&$l(t,e,1,-1)}function Do(e){var t=_o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=qo.bind(null,co,e),[t.memoizedState,e]}function Lo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function No(){return wo().memoizedState}function Fo(e,t,n,r){var i=_o();co.flags|=e,i.memoizedState=Lo(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=wo();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&Ao(r,o.deps))return void(i.memoizedState=Lo(t,n,a,r))}co.flags|=e,i.memoizedState=Lo(1|t,n,a,r)}function Uo(e,t){return Fo(8390656,8,e,t)}function zo(e,t){return Oo(2048,8,e,t)}function Go(e,t){return Oo(4,2,e,t)}function Qo(e,t){return Oo(4,4,e,t)}function Zo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,Zo.bind(null,t,e),n)}function jo(){}function Vo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&uo)?(e.baseState&&(e.baseState=!1,ms=!0),e.memoizedState=n):(rr(n,t)||(n=pt(),co.lanes|=n,Pl|=n,e.baseState=!0),t)}function Yo(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=lo.transition;lo.transition={};try{e(!1),t()}finally{yt=n,lo.transition=r}}function Ko(){return wo().memoizedState}function Jo(e,t,n){var r=ql(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$o(e))es(t,n);else if(null!==(n=Sa(e,t,n,r))){$l(n,e,r,Jl()),ts(n,t,r)}}function qo(e,t,n){var r=ql(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($o(e))es(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,rr(s,o)){var l=t.interleaved;return null===l?(i.next=i,wa(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Sa(e,t,i,r))&&($l(n,e,r,i=Jl()),ts(n,t,r))}}function $o(e){var t=e.alternate;return e===co||null!==t&&t===co}function es(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ts(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ns={readContext:xa,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},rs={readContext:xa,useCallback:function(e,t){return _o().memoizedState=[e,void 0===t?null:t],e},useContext:xa,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4194308,4,Zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fo(4,2,e,t)},useMemo:function(e,t){var n=_o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jo.bind(null,co,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_o().memoizedState=e},useState:Do,useDebugValue:jo,useDeferredValue:function(e){return _o().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Yo.bind(null,e[1]),_o().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=co,i=_o();if(ea){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Cl)throw Error(a(349));0!==(30&uo)||Io(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Bo.bind(null,r,o,e),[e]),r.flags|=2048,Lo(9,ko.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=_o(),t=Cl.identifierPrefix;if(ea){var n=Wi;t=":"+t+"R"+(n=(Vi&~(1<<32-at(Vi)-1)).toString(32)+n),0<(n=mo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=go++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},is={readContext:xa,useCallback:Vo,useContext:xa,useEffect:zo,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Wo,useReducer:Eo,useRef:No,useState:function(){return Eo(So)},useDebugValue:jo,useDeferredValue:function(e){return Xo(wo(),fo.memoizedState,e)},useTransition:function(){return[Eo(So)[0],wo().memoizedState]},useMutableSource:To,useSyncExternalStore:Mo,useId:Ko,unstable_isNewReconciler:!1},as={readContext:xa,useCallback:Vo,useContext:xa,useEffect:zo,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Wo,useReducer:Co,useRef:No,useState:function(){return Co(So)},useDebugValue:jo,useDeferredValue:function(e){var t=wo();return null===fo?t.memoizedState=e:Xo(t,fo.memoizedState,e)},useTransition:function(){return[Co(So)[0],wo().memoizedState]},useMutableSource:To,useSyncExternalStore:Mo,useId:Ko,unstable_isNewReconciler:!1};function os(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function ss(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var us="function"===typeof WeakMap?WeakMap:Map;function cs(e,t,n){(n=Ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Ql=r),ls(0,t)},n}function fs(e,t,n){(n=Ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ls(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ls(0,t),"function"!==typeof r&&(null===Zl?Zl=new Set([this]):Zl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ds(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new us;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_u.bind(null,e,t,n),t.then(e,e))}function hs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ps(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ia(-1,1)).tag=2,ka(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vs=b.ReactCurrentOwner,ms=!1;function gs(e,t,n,r){t.child=null===e?Wa(t,null,n,r):Va(t,e.child,n,r)}function ys(e,t,n,r,i){n=n.render;var a=t.ref;return ba(t,i),r=bo(e,t,n,r,a,i),n=xo(),null===e||ms?(ea&&n&&Ki(t),t.flags|=1,gs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function As(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Iu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Bu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,bs(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ir)(o,r)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=ku(a,r)).ref=t.ref,e.return=t,t.child=e}function bs(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ir(a,r)&&e.ref===t.ref){if(ms=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(ms=!0)}}return ws(e,t,n,r,i)}function xs(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(kl,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i(kl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,_i(kl,Il),Il|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_i(kl,Il),Il|=r;return gs(e,t,i,n),t.child}function _s(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ws(e,t,n,r,i){var a=Mi(n)?Ci:Si.current;return a=Ti(t,a),ba(t,i),n=bo(e,t,n,r,a,i),r=xo(),null===e||ms?(ea&&r&&Ki(t),t.flags|=1,gs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Ss(e,t,n,r,i){if(Mi(n)){var a=!0;Ri(t)}else a=!1;if(ba(t,i),null===t.stateNode)zs(e,t),Ua(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=xa(u):u=Ti(t,u=Mi(n)?Ci:Si.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&za(t,o,r,u),Ca=!1;var d=t.memoizedState;o.state=d,Pa(t,r,o,i),l=t.memoizedState,s!==r||d!==l||Ei.current||Ca?("function"===typeof c&&(Na(t,n,c,r),l=t.memoizedState),(s=Ca||Oa(t,n,s,r,d,l,u))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ma(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:da(t.type,s),o.props=u,f=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=xa(l):l=Ti(t,l=Mi(n)?Ci:Si.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||d!==l)&&za(t,o,r,l),Ca=!1,d=t.memoizedState,o.state=d,Pa(t,r,o,i);var p=t.memoizedState;s!==f||d!==p||Ei.current||Ca?("function"===typeof h&&(Na(t,n,h,r),p=t.memoizedState),(u=Ca||Oa(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Es(e,t,n,r,a,i)}function Es(e,t,n,r,i,a){_s(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Pi(t,n,!1),Gs(e,t,a);r=t.stateNode,vs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Va(t,e.child,null,a),t.child=Va(t,null,s,a)):gs(e,t,s,a),t.memoizedState=r.state,i&&Pi(t,n,!0),t.child}function Cs(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),$a(e,t.containerInfo)}function Ts(e,t,n,r,i){return ua(),ca(i),t.flags|=256,gs(e,t,n,r),t.child}var Ms,Is,ks,Bs,Rs={dehydrated:null,treeContext:null,retryLane:0};function Ps(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ds(e,t,n){var r,i=t.pendingProps,o=ro.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),_i(ro,1&o),null===e)return aa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Pu(l,i,0,null),e=Ru(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ps(n),t.memoizedState=Rs,e):Ls(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Ns(e,t,s,r=ss(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Pu({mode:"visible",children:r.children},i,0,null),(o=Ru(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Va(t,e.child,null,s),t.child.memoizedState=Ps(s),t.memoizedState=Rs,o);if(0===(1&t.mode))return Ns(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ns(e,t,s,r=ss(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),ms||l){if(null!==(r=Cl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ea(e,i),$l(r,e,i,-1))}return du(),Ns(e,t,s,r=ss(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Su.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,$i=ai(i.nextSibling),qi=t,ea=!0,ta=null,null!==e&&(Zi[Hi++]=Vi,Zi[Hi++]=Wi,Zi[Hi++]=ji,Vi=e.id,Wi=e.overflow,ji=t),t=Ls(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=ku(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=ku(r,s):(s=Ru(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ps(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Rs,i}return e=(s=e.child).sibling,i=ku(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ls(e,t){return(t=Pu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ns(e,t,n,r){return null!==r&&ca(r),Va(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Aa(e.return,t,n)}function Os(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Us(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gs(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,n,t);else if(19===e.tag)Fs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Os(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Os(t,!0,n,null,a);break;case"together":Os(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=ku(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ku(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qs(e,t){if(!ea)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hs(e,t,n){var r=t.pendingProps;switch(Ji(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zs(t),null;case 1:case 17:return Mi(t.type)&&Ii(),Zs(t),null;case 3:return r=t.stateNode,eo(),xi(Ei),xi(Si),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(sa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ta&&(ru(ta),ta=null))),Is(e,t),Zs(t),null;case 5:no(t);var i=qa(Ja.current);if(n=t.type,null!==e&&null!=t.stateNode)ks(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Zs(t),null}if(e=qa(Ya.current),sa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[li]=t,r[ui]=o,e=0!==(1&t.mode),n){case"dialog":Lr("cancel",r),Lr("close",r);break;case"iframe":case"object":case"embed":Lr("load",r);break;case"video":case"audio":for(i=0;i<Br.length;i++)Lr(Br[i],r);break;case"source":Lr("error",r);break;case"img":case"image":case"link":Lr("error",r),Lr("load",r);break;case"details":Lr("toggle",r);break;case"input":K(r,o),Lr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Lr("invalid",r);break;case"textarea":ie(r,o),Lr("invalid",r)}for(var l in ge(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Lr("scroll",r)}switch(n){case"input":V(r),$(r,o,!0);break;case"textarea":V(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Yr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[li]=t,e[ui]=r,Ms(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Lr("cancel",e),Lr("close",e),i=r;break;case"iframe":case"object":case"embed":Lr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Br.length;i++)Lr(Br[i],e);i=r;break;case"source":Lr("error",e),i=r;break;case"img":case"image":case"link":Lr("error",e),Lr("load",e),i=r;break;case"details":Lr("toggle",e),i=r;break;case"input":K(e,r),i=Y(e,r),Lr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Lr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Lr("invalid",e)}for(o in ge(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ve(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&ce(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Lr("scroll",e):null!=c&&A(e,o,c,l))}switch(n){case"input":V(e),$(e,r,!1);break;case"textarea":V(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Yr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Zs(t),null;case 6:if(e&&null!=t.stateNode)Bs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=qa(Ja.current),qa(Ya.current),sa(t)){if(r=t.stateNode,n=t.memoizedProps,r[li]=t,(o=r.nodeValue!==n)&&null!==(e=qi))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[li]=t,t.stateNode=r}return Zs(t),null;case 13:if(xi(ro),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ea&&null!==$i&&0!==(1&t.mode)&&0===(128&t.flags))la(),ua(),t.flags|=98560,o=!1;else if(o=sa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[li]=t}else ua(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Zs(t),o=!1}else null!==ta&&(ru(ta),ta=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Bl&&(Bl=3):du())),null!==t.updateQueue&&(t.flags|=4),Zs(t),null);case 4:return eo(),Is(e,t),null===e&&Or(t.stateNode.containerInfo),Zs(t),null;case 10:return ya(t.type._context),Zs(t),null;case 19:if(xi(ro),null===(o=t.memoizedState))return Zs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Qs(o,!1);else{if(0!==Bl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=io(e))){for(t.flags|=128,Qs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Ke()>Ul&&(t.flags|=128,r=!0,Qs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ea)return Zs(t),null}else 2*Ke()-o.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,Qs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ke(),t.sibling=null,n=ro.current,_i(ro,r?1&n|2:1&n),t):(Zs(t),null);case 22:case 23:return lu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Zs(t),6&t.subtreeFlags&&(t.flags|=8192)):Zs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function js(e,t){switch(Ji(t),t.tag){case 1:return Mi(t.type)&&Ii(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),xi(Ei),xi(Si),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(xi(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ua()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(ro),null;case 4:return eo(),null;case 10:return ya(t.type._context),null;case 22:case 23:return lu(),null;default:return null}}Ms=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Is=function(){},ks=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,qa(Ya.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Yr)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Lr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Bs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Vs=!1,Ws=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Ys=null;function Ks(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xu(e,t,r)}else n.current=null}function Js(e,t,n){try{n()}catch(r){xu(e,t,r)}}var qs=!1;function $s(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Js(t,n,a)}i=i.next}while(i!==r)}}function el(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function nl(e){var t=e.alternate;null!==t&&(e.alternate=null,nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[li],delete t[ui],delete t[fi],delete t[di],delete t[hi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Yr));else if(4!==r&&null!==(e=e.child))for(al(e,t,n),e=e.sibling;null!==e;)al(e,t,n),e=e.sibling}function ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}var sl=null,ll=!1;function ul(e,t,n){for(n=n.child;null!==n;)cl(e,t,n),n=n.sibling}function cl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:Ws||Ks(n,t);case 6:var r=sl,i=ll;sl=null,ul(e,t,n),ll=i,null!==(sl=r)&&(ll?(e=sl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):sl.removeChild(n.stateNode));break;case 18:null!==sl&&(ll?(e=sl,n=n.stateNode,8===e.nodeType?ii(e.parentNode,n):1===e.nodeType&&ii(e,n),Gt(e)):ii(sl,n.stateNode));break;case 4:r=sl,i=ll,sl=n.stateNode.containerInfo,ll=!0,ul(e,t,n),sl=r,ll=i;break;case 0:case 11:case 14:case 15:if(!Ws&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Js(n,t,o),i=i.next}while(i!==r)}ul(e,t,n);break;case 1:if(!Ws&&(Ks(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xu(n,t,s)}ul(e,t,n);break;case 21:ul(e,t,n);break;case 22:1&n.mode?(Ws=(r=Ws)||null!==n.memoizedState,ul(e,t,n),Ws=r):ul(e,t,n);break;default:ul(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Eu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function dl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:sl=l.stateNode,ll=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,ll=!0;break e}l=l.return}if(null===sl)throw Error(a(160));cl(o,s,i),sl=null,ll=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){xu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)hl(t,e),t=t.sibling}function hl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dl(t,e),pl(e),4&r){try{$s(3,e,e.return),el(3,e)}catch(m){xu(e,e.return,m)}try{$s(5,e,e.return)}catch(m){xu(e,e.return,m)}}break;case 1:dl(t,e),pl(e),512&r&&null!==n&&Ks(n,n.return);break;case 5:if(dl(t,e),pl(e),512&r&&null!==n&&Ks(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){xu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),ye(l,s);var c=ye(l,o);for(s=0;s<u.length;s+=2){var f=u[s],d=u[s+1];"style"===f?ve(i,d):"dangerouslySetInnerHTML"===f?ce(i,d):"children"===f?fe(i,d):A(i,f,d,c)}switch(l){case"input":q(i,o);break;case"textarea":ae(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[ui]=o}catch(m){xu(e,e.return,m)}}break;case 6:if(dl(t,e),pl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){xu(e,e.return,m)}}break;case 3:if(dl(t,e),pl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(m){xu(e,e.return,m)}break;case 4:default:dl(t,e),pl(e);break;case 13:dl(t,e),pl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Ol=Ke())),4&r&&fl(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ws=(c=Ws)||f,dl(t,e),Ws=c):dl(t,e),pl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!==(1&e.mode))for(Ys=e,f=e.child;null!==f;){for(d=Ys=f;null!==Ys;){switch(p=(h=Ys).child,h.tag){case 0:case 11:case 14:case 15:$s(4,h,h.return);break;case 1:Ks(h,h.return);var v=h.stateNode;if("function"===typeof v.componentWillUnmount){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){xu(r,n,m)}}break;case 5:Ks(h,h.return);break;case 22:if(null!==h.memoizedState){yl(d);continue}}null!==p?(p.return=h,Ys=p):yl(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=pe("display",s))}catch(m){xu(e,e.return,m)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){xu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dl(t,e),pl(e),4&r&&fl(e);case 21:}}function pl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),ol(e,il(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;al(e,il(e),o);break;default:throw Error(a(161))}}catch(s){xu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Ys=e,ml(e,t,n)}function ml(e,t,n){for(var r=0!==(1&e.mode);null!==Ys;){var i=Ys,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Vs;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ws;s=Vs;var u=Ws;if(Vs=o,(Ws=l)&&!u)for(Ys=i;null!==Ys;)l=(o=Ys).child,22===o.tag&&null!==o.memoizedState?Al(i):null!==l?(l.return=o,Ys=l):Al(i);for(;null!==a;)Ys=a,ml(a,t,n),a=a.sibling;Ys=i,Vs=s,Ws=u}gl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ys=a):gl(e)}}function gl(e){for(;null!==Ys;){var t=Ys;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ws||el(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ws)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:da(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Da(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Da(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&Gt(d)}}}break;default:throw Error(a(163))}Ws||512&t.flags&&tl(t)}catch(h){xu(t,t.return,h)}}if(t===e){Ys=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ys=n;break}Ys=t.return}}function yl(e){for(;null!==Ys;){var t=Ys;if(t===e){Ys=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ys=n;break}Ys=t.return}}function Al(e){for(;null!==Ys;){var t=Ys;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{el(4,t)}catch(l){xu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){xu(t,i,l)}}var a=t.return;try{tl(t)}catch(l){xu(t,a,l)}break;case 5:var o=t.return;try{tl(t)}catch(l){xu(t,o,l)}}}catch(l){xu(t,t.return,l)}if(t===e){Ys=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ys=s;break}Ys=t.return}}var bl,xl=Math.ceil,_l=b.ReactCurrentDispatcher,wl=b.ReactCurrentOwner,Sl=b.ReactCurrentBatchConfig,El=0,Cl=null,Tl=null,Ml=0,Il=0,kl=bi(0),Bl=0,Rl=null,Pl=0,Dl=0,Ll=0,Nl=null,Fl=null,Ol=0,Ul=1/0,zl=null,Gl=!1,Ql=null,Zl=null,Hl=!1,jl=null,Vl=0,Wl=0,Xl=null,Yl=-1,Kl=0;function Jl(){return 0!==(6&El)?Ke():-1!==Yl?Yl:Yl=Ke()}function ql(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Ml?Ml&-Ml:null!==fa.transition?(0===Kl&&(Kl=pt()),Kl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function $l(e,t,n,r){if(50<Wl)throw Wl=0,Xl=null,Error(a(185));mt(e,n,r),0!==(2&El)&&e===Cl||(e===Cl&&(0===(2&El)&&(Dl|=n),4===Bl&&iu(e,Ml)),eu(e,r),1===n&&0===El&&0===(1&t.mode)&&(Ul=Ke()+500,Li&&Oi()))}function eu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-at(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Cl?Ml:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Li=!0,Fi(e)}(au.bind(null,e)):Fi(au.bind(null,e)),ni((function(){0===(6&El)&&Oi()})),n=null;else{switch(At(r)){case 1:n=qe;break;case 4:n=$e;break;case 16:default:n=et;break;case 536870912:n=nt}n=Cu(n,tu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tu(e,t){if(Yl=-1,Kl=0,0!==(6&El))throw Error(a(327));var n=e.callbackNode;if(Au()&&e.callbackNode!==n)return null;var r=ft(e,e===Cl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=hu(e,r);else{t=r;var i=El;El|=2;var o=fu();for(Cl===e&&Ml===t||(zl=null,Ul=Ke()+500,uu(e,t));;)try{vu();break}catch(l){cu(e,l)}ga(),_l.current=o,El=i,null!==Tl?t=0:(Cl=null,Ml=0,t=Bl)}if(0!==t){if(2===t&&(0!==(i=ht(e))&&(r=i,t=nu(e,i))),1===t)throw n=Rl,uu(e,0),iu(e,r),eu(e,Ke()),n;if(6===t)iu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!rr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=hu(e,r))&&(0!==(o=ht(e))&&(r=o,t=nu(e,o))),1===t))throw n=Rl,uu(e,0),iu(e,r),eu(e,Ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:yu(e,Fl,zl);break;case 3:if(iu(e,r),(130023424&r)===r&&10<(t=Ol+500-Ke())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Jl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=$r(yu.bind(null,e,Fl,zl),t);break}yu(e,Fl,zl);break;case 4:if(iu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Ke()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=$r(yu.bind(null,e,Fl,zl),r);break}yu(e,Fl,zl);break;default:throw Error(a(329))}}}return eu(e,Ke()),e.callbackNode===n?tu.bind(null,e):null}function nu(e,t){var n=Nl;return e.current.memoizedState.isDehydrated&&(uu(e,t).flags|=256),2!==(e=hu(e,t))&&(t=Fl,Fl=n,null!==t&&ru(t)),e}function ru(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function iu(e,t){for(t&=~Ll,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function au(e){if(0!==(6&El))throw Error(a(327));Au();var t=ft(e,0);if(0===(1&t))return eu(e,Ke()),null;var n=hu(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=nu(e,r))}if(1===n)throw n=Rl,uu(e,0),iu(e,t),eu(e,Ke()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yu(e,Fl,zl),eu(e,Ke()),null}function ou(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Ul=Ke()+500,Li&&Oi())}}function su(e){null!==jl&&0===jl.tag&&0===(6&El)&&Au();var t=El;El|=1;var n=Sl.transition,r=yt;try{if(Sl.transition=null,yt=1,e)return e()}finally{yt=r,Sl.transition=n,0===(6&(El=t))&&Oi()}}function lu(){Il=kl.current,xi(kl)}function uu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ei(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(Ji(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ii();break;case 3:eo(),xi(Ei),xi(Si),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:xi(ro);break;case 10:ya(r.type._context);break;case 22:case 23:lu()}n=n.return}if(Cl=e,Tl=e=ku(e.current,null),Ml=Il=t,Bl=0,Rl=null,Ll=Dl=Pl=0,Fl=Nl=null,null!==_a){for(t=0;t<_a.length;t++)if(null!==(r=(n=_a[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}_a=null}return e}function cu(e,t){for(;;){var n=Tl;try{if(ga(),so.current=ns,po){for(var r=co.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(uo=0,ho=fo=co=null,vo=!1,mo=0,wl.current=null,null===n||null===n.return){Bl=1,Rl=t,Tl=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Ml,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,f=l,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=hs(s);if(null!==p){p.flags&=-257,ps(p,s,l,0,t),1&p.mode&&ds(o,c,t),u=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(u),t.updateQueue=m}else v.add(u);break e}if(0===(1&t)){ds(o,c,t),du();break e}u=Error(a(426))}else if(ea&&1&l.mode){var g=hs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ps(g,s,l,0,t),ca(os(u,l));break e}}o=u=os(u,l),4!==Bl&&(Bl=2),null===Nl?Nl=[o]:Nl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ra(o,cs(0,u,t));break e;case 1:l=u;var y=o.type,A=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==A&&"function"===typeof A.componentDidCatch&&(null===Zl||!Zl.has(A)))){o.flags|=65536,t&=-t,o.lanes|=t,Ra(o,fs(o,l,t));break e}}o=o.return}while(null!==o)}gu(n)}catch(b){t=b,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function fu(){var e=_l.current;return _l.current=ns,null===e?ns:e}function du(){0!==Bl&&3!==Bl&&2!==Bl||(Bl=4),null===Cl||0===(268435455&Pl)&&0===(268435455&Dl)||iu(Cl,Ml)}function hu(e,t){var n=El;El|=2;var r=fu();for(Cl===e&&Ml===t||(zl=null,uu(e,t));;)try{pu();break}catch(i){cu(e,i)}if(ga(),El=n,_l.current=r,null!==Tl)throw Error(a(261));return Cl=null,Ml=0,Bl}function pu(){for(;null!==Tl;)mu(Tl)}function vu(){for(;null!==Tl&&!Xe();)mu(Tl)}function mu(e){var t=bl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?gu(e):Tl=t,wl.current=null}function gu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hs(n,t,Il)))return void(Tl=n)}else{if(null!==(n=js(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Bl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Bl&&(Bl=5)}function yu(e,t,n){var r=yt,i=Sl.transition;try{Sl.transition=null,yt=1,function(e,t,n,r){do{Au()}while(null!==jl);if(0!==(6&El))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Cl&&(Tl=Cl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hl||(Hl=!0,Cu(et,(function(){return Au(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Sl.transition,Sl.transition=null;var s=yt;yt=1;var l=El;El|=4,wl.current=null,function(e,t){if(Kr=Zt,ur(e=lr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==o||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===i&&(l=s),h===o&&++f===r&&(u=s),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jr={focusedElem:e,selectionRange:n},Zt=!1,Ys=t;null!==Ys;)if(e=(t=Ys).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ys=e;else for(;null!==Ys;){t=Ys;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,A=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:da(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(x){xu(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ys=e;break}Ys=t.return}v=qs,qs=!1}(e,n),hl(n,e),cr(Jr),Zt=!!Kr,Jr=Kr=null,e.current=n,vl(n,e,i),Ye(),El=l,yt=s,Sl.transition=o}else e.current=n;if(Hl&&(Hl=!1,jl=e,Vl=i),o=e.pendingLanes,0===o&&(Zl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),eu(e,Ke()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Ql,Ql=null,e;0!==(1&Vl)&&0!==e.tag&&Au(),o=e.pendingLanes,0!==(1&o)?e===Xl?Wl++:(Wl=0,Xl=e):Wl=0,Oi()}(e,t,n,r)}finally{Sl.transition=i,yt=r}return null}function Au(){if(null!==jl){var e=At(Vl),t=Sl.transition,n=yt;try{if(Sl.transition=null,yt=16>e?16:e,null===jl)var r=!1;else{if(e=jl,jl=null,Vl=0,0!==(6&El))throw Error(a(331));var i=El;for(El|=4,Ys=e.current;null!==Ys;){var o=Ys,s=o.child;if(0!==(16&Ys.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Ys=c;null!==Ys;){var f=Ys;switch(f.tag){case 0:case 11:case 15:$s(8,f,o)}var d=f.child;if(null!==d)d.return=f,Ys=d;else for(;null!==Ys;){var h=(f=Ys).sibling,p=f.return;if(nl(f),f===c){Ys=null;break}if(null!==h){h.return=p,Ys=h;break}Ys=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Ys=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Ys=s;else e:for(;null!==Ys;){if(0!==(2048&(o=Ys).flags))switch(o.tag){case 0:case 11:case 15:$s(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ys=y;break e}Ys=o.return}}var A=e.current;for(Ys=A;null!==Ys;){var b=(s=Ys).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Ys=b;else e:for(s=A;null!==Ys;){if(0!==(2048&(l=Ys).flags))try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(_){xu(l,l.return,_)}if(l===s){Ys=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Ys=x;break e}Ys=l.return}}if(El=i,Oi(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(_){}r=!0}return r}finally{yt=n,Sl.transition=t}}return!1}function bu(e,t,n){e=ka(e,t=cs(0,t=os(n,t),1),1),t=Jl(),null!==e&&(mt(e,1,t),eu(e,t))}function xu(e,t,n){if(3===e.tag)bu(e,e,n);else for(;null!==t;){if(3===t.tag){bu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zl||!Zl.has(r))){t=ka(t,e=fs(t,e=os(n,e),1),1),e=Jl(),null!==t&&(mt(t,1,e),eu(t,e));break}}t=t.return}}function _u(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Jl(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(Ml&n)===n&&(4===Bl||3===Bl&&(130023424&Ml)===Ml&&500>Ke()-Ol?uu(e,0):Ll|=n),eu(e,t)}function wu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Jl();null!==(e=Ea(e,t))&&(mt(e,t,n),eu(e,n))}function Su(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),wu(e,n)}function Eu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),wu(e,n)}function Cu(e,t){return Ve(e,t)}function Tu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,t,n,r){return new Tu(e,t,n,r)}function Iu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ku(e,t){var n=e.alternate;return null===n?((n=Mu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Iu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return Ru(n.children,i,o,t);case S:s=8,i|=8;break;case E:return(e=Mu(12,n,t,2|i)).elementType=E,e.lanes=o,e;case I:return(e=Mu(13,n,t,i)).elementType=I,e.lanes=o,e;case k:return(e=Mu(19,n,t,i)).elementType=k,e.lanes=o,e;case P:return Pu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case M:s=11;break e;case B:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Mu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ru(e,t,n,r){return(e=Mu(7,e,r,t)).lanes=n,e}function Pu(e,t,n,r){return(e=Mu(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Du(e,t,n){return(e=Mu(6,e,null,t)).lanes=n,e}function Lu(e,t,n){return(t=Mu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fu(e,t,n,r,i,a,o,s,l){return e=new Nu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Mu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ta(a),e}function Ou(e){if(!e)return wi;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Mi(n))return Bi(e,n,t)}return t}function Uu(e,t,n,r,i,a,o,s,l){return(e=Fu(n,r,!0,e,0,a,0,s,l)).context=Ou(null),n=e.current,(a=Ia(r=Jl(),i=ql(n))).callback=void 0!==t&&null!==t?t:null,ka(n,a,i),e.current.lanes=i,mt(e,i,r),eu(e,r),e}function zu(e,t,n,r){var i=t.current,a=Jl(),o=ql(i);return n=Ou(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=ka(i,t,o))&&($l(e,i,o,a),Ba(e,i,o)),o}function Gu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Zu(e,t){Qu(e,t),(e=e.alternate)&&Qu(e,t)}bl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ei.current)ms=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ms=!1,function(e,t,n){switch(t.tag){case 3:Cs(t),ua();break;case 5:to(t);break;case 1:Mi(t.type)&&Ri(t);break;case 4:$a(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(ha,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ds(e,t,n):(_i(ro,1&ro.current),null!==(e=Gs(e,t,n))?e.sibling:null);_i(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Us(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,xs(e,t,n)}return Gs(e,t,n)}(e,t,n);ms=0!==(131072&e.flags)}else ms=!1,ea&&0!==(1048576&t.flags)&&Yi(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zs(e,t),e=t.pendingProps;var i=Ti(t,Si.current);ba(t,n),i=bo(null,t,r,e,i,n);var o=xo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mi(r)?(o=!0,Ri(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ta(t),i.updater=Fa,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Es(null,t,r,!0,o,n)):(t.tag=0,ea&&o&&Ki(t),gs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Iu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===B)return 14}return 2}(r),e=da(r,e),i){case 0:t=ws(null,t,r,e,n);break e;case 1:t=Ss(null,t,r,e,n);break e;case 11:t=ys(null,t,r,e,n);break e;case 14:t=As(null,t,r,da(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:da(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:da(r,i),n);case 3:e:{if(Cs(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ma(e,t),Pa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ts(e,t,r,n,i=os(Error(a(423)),t));break e}if(r!==i){t=Ts(e,t,r,n,i=os(Error(a(424)),t));break e}for($i=ai(t.stateNode.containerInfo.firstChild),qi=t,ea=!0,ta=null,n=Wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ua(),r===i){t=Gs(e,t,n);break e}gs(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&aa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,qr(r,i)?s=null:null!==o&&qr(r,o)&&(t.flags|=32),_s(e,t),gs(e,t,s,n),t.child;case 6:return null===e&&aa(t),null;case 13:return Ds(e,t,n);case 4:return $a(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Va(t,null,r,n):gs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ys(e,t,r,i=t.elementType===r?i:da(r,i),n);case 7:return gs(e,t,t.pendingProps,n),t.child;case 8:case 12:return gs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,_i(ha,r._currentValue),r._currentValue=s,null!==o)if(rr(o.value,s)){if(o.children===i.children&&!Ei.current){t=Gs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Ia(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Aa(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Aa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}gs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ba(t,n),r=r(i=xa(i)),t.flags|=1,gs(e,t,r,n),t.child;case 14:return i=da(r=t.type,t.pendingProps),As(e,t,r,i=da(r.type,i),n);case 15:return bs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:da(r,i),zs(e,t),t.tag=1,Mi(r)?(e=!0,Ri(t)):e=!1,ba(t,n),Ua(t,r,i),Ga(t,r,i,n),Es(null,t,r,!0,e,n);case 19:return Us(e,t,n);case 22:return xs(e,t,n)}throw Error(a(156,t.tag))};var Hu="function"===typeof reportError?reportError:function(e){console.error(e)};function ju(e){this._internalRoot=e}function Vu(e){this._internalRoot=e}function Wu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yu(){}function Ku(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Gu(o);s.call(e)}}zu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gu(o);a.call(e)}}var o=Uu(t,r,e,0,null,!1,0,"",Yu);return e._reactRootContainer=o,e[ci]=o.current,Or(8===e.nodeType?e.parentNode:e),su(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Gu(l);s.call(e)}}var l=Fu(e,0,!1,null,0,!1,0,"",Yu);return e._reactRootContainer=l,e[ci]=l.current,Or(8===e.nodeType?e.parentNode:e),su((function(){zu(t,l,n,r)})),l}(n,t,e,i,r);return Gu(o)}Vu.prototype.render=ju.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zu(e,t,null,null)},Vu.prototype.unmount=ju.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;su((function(){zu(null,e,null,null)})),t[ci]=null}},Vu.prototype.unstable_scheduleHydration=function(e){if(e){var t=wt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Nt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ct(t.pendingLanes);0!==n&&(gt(t,1|n),eu(t,Ke()),0===(6&El)&&(Ul=Ke()+500,Oi()))}break;case 13:su((function(){var t=Ea(e,1);if(null!==t){var n=Jl();$l(t,e,1,n)}})),Zu(e,1)}},xt=function(e){if(13===e.tag){var t=Ea(e,134217728);if(null!==t)$l(t,e,134217728,Jl());Zu(e,134217728)}},_t=function(e){if(13===e.tag){var t=ql(e),n=Ea(e,t);if(null!==n)$l(n,e,t,Jl());Zu(e,t)}},wt=function(){return yt},St=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},xe=function(e,t,n){switch(t){case"input":if(q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gi(r);if(!i)throw Error(a(90));W(r),q(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=ou,Me=su;var Ju={usingClientEntryPoint:!1,Events:[vi,mi,gi,Ee,Ce,ou]},qu={findFiberByHostInstance:pi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$u={bundleType:qu.bundleType,version:qu.version,rendererPackageName:qu.rendererPackageName,rendererConfig:qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:qu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{rt=ec.inject($u),it=ec}catch(tc){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ju,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Wu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Wu(e))throw Error(a(299));var n=!1,r="",i=Hu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fu(e,1,!1,null,0,n,0,r,i),e[ci]=t.current,Or(8===e.nodeType?e.parentNode:e),new ju(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return su(e)},t.hydrate=function(e,t,n){if(!Xu(t))throw Error(a(200));return Ku(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Wu(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Hu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Uu(t,null,e,1,null!=n?n:null,i,0,o,s),e[ci]=t.current,Or(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Vu(t)},t.render=function(e,t,n){if(!Xu(t))throw Error(a(200));return Ku(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(a(40));return!!e._reactRootContainer&&(su((function(){Ku(null,null,e,!1,(function(){e._reactRootContainer=null,e[ci]=null}))})),!0)},t.unstable_batchedUpdates=ou,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Ku(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.s=r.createRoot,r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},67:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,d=null,h=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,A="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(m=!1,b(e),!v)if(null!==r(u))v=!0,P(_);else{var t=r(c);null!==t&&D(x,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,y(C),C=-1),p=!0;var a=h;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!I());){var o=d.callback;if("function"===typeof o){d.callback=null,h=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var f=r(c);null!==f&&D(x,f.startTime-n),l=!1}return l}finally{d=null,h=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,E=null,C=-1,T=5,M=-1;function I(){return!(t.unstable_now()-M<T)}function k(){if(null!==E){var e=t.unstable_now();M=e;var n=!0;try{n=E(!0,e)}finally{n?w():(S=!1,E=null)}}else S=!1}if("function"===typeof A)w=function(){A(k)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,R=B.port2;B.port1.onmessage=k,w=function(){R.postMessage(null)}}else w=function(){g(k,0)};function P(e){E=e,S||(S=!0,w())}function D(e,n){C=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(m?(y(C),C=-1):m=!0,D(x,a-o))):(e.sortIndex=s,n(u,e),v||p||(v=!0,P(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},5585:function(e,t,n){"use strict";e.exports=n(67)},4976:function(e,t){"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},3721:function(e,t,n){e.exports=function(e){var t={},r=n(2791),i=n(5296),a=Object.assign;function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),p=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var b=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var x=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}function w(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case c:return"Fragment";case u:return"Portal";case d:return"Profiler";case f:return"StrictMode";case m:return"Suspense";case g:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case h:return(e._context.displayName||"Context")+".Provider";case v:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:w(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return w(e(t))}catch(n){}}return null}function S(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w(t);case 8:return t===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function E(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function C(e){if(E(e)!==e)throw Error(o(188))}function T(e){var t=e.alternate;if(!t){if(null===(t=E(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return C(i),e;if(a===r)return C(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}function M(e){return null!==(e=T(e))?I(e):null}function I(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=I(e);if(null!==t)return t;e=e.sibling}return null}function k(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=k(e);if(null!==t)return t}e=e.sibling}return null}var B,R=Array.isArray,P=e.getPublicInstance,D=e.getRootHostContext,L=e.getChildHostContext,N=e.prepareForCommit,F=e.resetAfterCommit,O=e.createInstance,U=e.appendInitialChild,z=e.finalizeInitialChildren,G=e.prepareUpdate,Q=e.shouldSetTextContent,Z=e.createTextInstance,H=e.scheduleTimeout,j=e.cancelTimeout,V=e.noTimeout,W=e.isPrimaryRenderer,X=e.supportsMutation,Y=e.supportsPersistence,K=e.supportsHydration,J=e.getInstanceFromNode,q=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,re=e.supportsTestSelectors,ie=e.findFiberRoot,ae=e.getBoundingRect,oe=e.getTextContent,se=e.isHiddenSubtree,le=e.matchAccessibilityRole,ue=e.setFocusIfFocusable,ce=e.setupIntersectionObserver,fe=e.appendChild,de=e.appendChildToContainer,he=e.commitTextUpdate,pe=e.commitMount,ve=e.commitUpdate,me=e.insertBefore,ge=e.insertInContainerBefore,ye=e.removeChild,Ae=e.removeChildFromContainer,be=e.resetTextContent,xe=e.hideInstance,_e=e.hideTextInstance,we=e.unhideInstance,Se=e.unhideTextInstance,Ee=e.clearContainer,Ce=e.cloneInstance,Te=e.createContainerChildSet,Me=e.appendChildToContainerChildSet,Ie=e.finalizeContainerChildren,ke=e.replaceContainerChildren,Be=e.cloneHiddenInstance,Re=e.cloneHiddenTextInstance,Pe=e.canHydrateInstance,De=e.canHydrateTextInstance,Le=e.canHydrateSuspenseInstance,Ne=e.isSuspenseInstancePending,Fe=e.isSuspenseInstanceFallback,Oe=e.registerSuspenseInstanceRetry,Ue=e.getNextHydratableSibling,ze=e.getFirstHydratableChild,Ge=e.getFirstHydratableChildWithinContainer,Qe=e.getFirstHydratableChildWithinSuspenseInstance,Ze=e.hydrateInstance,He=e.hydrateTextInstance,je=e.hydrateSuspenseInstance,Ve=e.getNextHydratableInstanceAfterSuspenseInstance,We=e.commitHydratedContainer,Xe=e.commitHydratedSuspenseInstance,Ye=e.clearSuspenseBoundary,Ke=e.clearSuspenseBoundaryFromContainer,Je=e.shouldDeleteUnhydratedTailInstances,qe=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],at=-1;function ot(e){return{current:e}}function st(e){0>at||(e.current=it[at],it[at]=null,at--)}function lt(e,t){at++,it[at]=e.current,e.current=t}var ut={},ct=ot(ut),ft=ot(!1),dt=ut;function ht(e,t){var n=e.type.contextTypes;if(!n)return ut;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function pt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vt(){st(ft),st(ct)}function mt(e,t,n){if(ct.current!==ut)throw Error(o(168));lt(ct,t),lt(ft,n)}function gt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,S(e)||"Unknown",i));return a({},n,r)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ut,dt=ct.current,lt(ct,e),lt(ft,ft.current),!0}function At(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=gt(e,t,dt),r.__reactInternalMemoizedMergedChildContext=e,st(ft),st(ct),lt(ct,e)):st(ft),lt(ft,n)}var bt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xt(e)/_t|0)|0},xt=Math.log,_t=Math.LN2;var wt=64,St=4194304;function Et(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ct(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=Et(s):0!==(a&=o)&&(r=Et(a))}else 0!==(o=n&~i)?r=Et(o):0!==a&&(r=Et(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-bt(t)),r|=e[n],t&=~i;return r}function Tt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function It(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-bt(t)]=n}function Bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Rt=0;function Pt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Dt=i.unstable_scheduleCallback,Lt=i.unstable_cancelCallback,Nt=i.unstable_shouldYield,Ft=i.unstable_requestPaint,Ot=i.unstable_now,Ut=i.unstable_ImmediatePriority,zt=i.unstable_UserBlockingPriority,Gt=i.unstable_NormalPriority,Qt=i.unstable_IdlePriority,Zt=null,Ht=null;var jt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Vt=null,Wt=!1,Xt=!1;function Yt(e){null===Vt?Vt=[e]:Vt.push(e)}function Kt(){if(!Xt&&null!==Vt){Xt=!0;var e=0,t=Rt;try{var n=Vt;for(Rt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vt=null,Wt=!1}catch(i){throw null!==Vt&&(Vt=Vt.slice(e+1)),Dt(Ut,Kt),i}finally{Rt=t,Xt=!1}}return null}var Jt=s.ReactCurrentBatchConfig;function qt(e,t){if(jt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!jt(e[i],t[i]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=ot(null),nn=null,rn=null,an=null;function on(){an=rn=nn=null}function sn(e,t,n){W?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;st(tn),W?e._currentValue=t:e._currentValue2=t}function un(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cn(e,t){nn=e,an=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ni=!0),e.firstContext=null)}function fn(e){var t=W?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(o(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var dn=null,hn=!1;function pn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Xa&&0!==(1&e.mode)&&0===(2&Wa)?(null===(e=n.interleaved)?(t.next=t,null===dn?dn=[n]:dn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Bt(e,n)}}function An(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,r){var i=e.updateQueue;hn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?o=c:s.next=c,s=u;var f=e.alternate;null!==f&&((l=(f=f.updateQueue).lastBaseUpdate)!==s&&(null===l?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(null!==o){var d=i.baseState;for(s=0,f=c=u=null,l=o;;){var h=l.lane,p=l.eventTime;if((r&h)===h){null!==f&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,m=l;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(v=m.payload)){d=v.call(p,d,h);break e}d=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=m.payload)?v.call(p,d,h):v)||void 0===h)break e;d=a({},d,h);break e;case 2:hn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===f?(c=f=p,u=d):f=f.next=p,s|=h;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(h=l).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===f&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);to|=s,e.lanes=s,e.memoizedState=d}}function xn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var _n=(new r.Component).refs;function wn(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Sn={isMounted:function(e){return!!(e=e._reactInternals)&&E(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xo(),i=_o(e),a=mn(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),gn(e,a),null!==(t=wo(e,i,r))&&yn(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xo(),i=_o(e),a=mn(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),gn(e,a),null!==(t=wo(e,i,r))&&yn(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xo(),r=_o(e),i=mn(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),gn(e,i),null!==(t=wo(e,r,n))&&yn(t,e,r)}};function En(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!qt(n,r)||!qt(i,a))}function Cn(e,t,n){var r=!1,i=ut,a=t.contextType;return"object"===typeof a&&null!==a?a=fn(a):(i=pt(t)?dt:ct.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?ht(e,i):ut),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Sn,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Tn(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Sn.enqueueReplaceState(t,t.state,null)}function Mn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=_n,pn(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=fn(a):(a=pt(t)?dt:ct.current,i.context=ht(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(wn(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Sn.enqueueReplaceState(i,i.state,null),bn(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var In=[],kn=0,Bn=null,Rn=0,Pn=[],Dn=0,Ln=null,Nn=1,Fn="";function On(e,t){In[kn++]=Rn,In[kn++]=Bn,Bn=e,Rn=t}function Un(e,t,n){Pn[Dn++]=Nn,Pn[Dn++]=Fn,Pn[Dn++]=Ln,Ln=e;var r=Nn;e=Fn;var i=32-bt(r)-1;r&=~(1<<i),n+=1;var a=32-bt(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Nn=1<<32-bt(t)+i|n<<i|r,Fn=a+e}else Nn=1<<a|n<<i|r,Fn=e}function zn(e){null!==e.return&&(On(e,1),Un(e,1,0))}function Gn(e){for(;e===Bn;)Bn=In[--kn],In[kn]=null,Rn=In[--kn],In[kn]=null;for(;e===Ln;)Ln=Pn[--Dn],Pn[Dn]=null,Fn=Pn[--Dn],Pn[Dn]=null,Nn=Pn[--Dn],Pn[Dn]=null}var Qn=null,Zn=null,Hn=!1,jn=!1,Vn=null;function Wn(e,t){var n=qo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Xn(e,t){switch(e.tag){case 5:return null!==(t=Pe(t,e.type,e.pendingProps))&&(e.stateNode=t,Qn=e,Zn=ze(t),!0);case 6:return null!==(t=De(t,e.pendingProps))&&(e.stateNode=t,Qn=e,Zn=null,!0);case 13:if(null!==(t=Le(t))){var n=null!==Ln?{id:Nn,overflow:Fn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=qo(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Qn=e,Zn=null,!0}return!1;default:return!1}}function Yn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Kn(e){if(Hn){var t=Zn;if(t){var n=t;if(!Xn(e,t)){if(Yn(e))throw Error(o(418));t=Ue(n);var r=Qn;t&&Xn(e,t)?Wn(r,n):(e.flags=-4097&e.flags|2,Hn=!1,Qn=e)}}else{if(Yn(e))throw Error(o(418));e.flags=-4097&e.flags|2,Hn=!1,Qn=e}}}function Jn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Qn=e}function qn(e){if(!K||e!==Qn)return!1;if(!Hn)return Jn(e),Hn=!0,!1;if(3!==e.tag&&(5!==e.tag||Je(e.type)&&!Q(e.type,e.memoizedProps))){var t=Zn;if(t){if(Yn(e)){for(e=Zn;e;)e=Ue(e);throw Error(o(418))}for(;t;)Wn(e,t),t=Ue(t)}}if(Jn(e),13===e.tag){if(!K)throw Error(o(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));Zn=Ve(e)}else Zn=Qn?Ue(e.stateNode):null;return!0}function $n(){K&&(Zn=Qn=null,jn=Hn=!1)}function er(e){null===Vn?Vn=[e]:Vn.push(e)}function tr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===_n&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function nr(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rr(e){return(0,e._init)(e._payload)}function ir(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=es(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function f(e,t,n,r){return null===t||6!==t.tag?((t=is(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n,r){var a=n.type;return a===c?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&rr(a)===t.type)?((r=i(t,n.props)).ref=tr(e,t,n),r.return=e,r):((r=ts(n.type,n.key,n.props,null,e.mode,r)).ref=tr(e,t,n),r.return=e,r)}function h(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=as(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,a){return null===t||7!==t.tag?((t=ns(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function v(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=is(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=ts(t.type,t.key,t.props,null,e.mode,n)).ref=tr(e,null,t),n.return=e,n;case u:return(t=as(t,e.mode,n)).return=e,t;case A:return v(e,(0,t._init)(t._payload),n)}if(R(t)||_(t))return(t=ns(t,e.mode,n,null)).return=e,t;nr(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:f(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?d(e,t,n,r):null;case u:return n.key===i?h(e,t,n,r):null;case A:return m(e,t,(i=n._init)(n._payload),r)}if(R(n)||_(n))return null!==i?null:p(e,t,n,r,null);nr(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return f(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case l:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case u:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return g(e,t,n,(0,r._init)(r._payload),i)}if(R(r)||_(r))return p(t,e=e.get(n)||null,r,i,null);nr(t,r)}return null}function y(i,o,s,l){for(var u=null,c=null,f=o,d=o=0,h=null;null!==f&&d<s.length;d++){f.index>d?(h=f,f=null):h=f.sibling;var p=m(i,f,s[d],l);if(null===p){null===f&&(f=h);break}e&&f&&null===p.alternate&&t(i,f),o=a(p,o,d),null===c?u=p:c.sibling=p,c=p,f=h}if(d===s.length)return n(i,f),Hn&&On(i,d),u;if(null===f){for(;d<s.length;d++)null!==(f=v(i,s[d],l))&&(o=a(f,o,d),null===c?u=f:c.sibling=f,c=f);return Hn&&On(i,d),u}for(f=r(i,f);d<s.length;d++)null!==(h=g(f,i,d,s[d],l))&&(e&&null!==h.alternate&&f.delete(null===h.key?d:h.key),o=a(h,o,d),null===c?u=h:c.sibling=h,c=h);return e&&f.forEach((function(e){return t(i,e)})),Hn&&On(i,d),u}function b(i,s,l,u){var c=_(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var f=c=null,d=s,h=s=0,p=null,y=l.next();null!==d&&!y.done;h++,y=l.next()){d.index>h?(p=d,d=null):p=d.sibling;var A=m(i,d,y.value,u);if(null===A){null===d&&(d=p);break}e&&d&&null===A.alternate&&t(i,d),s=a(A,s,h),null===f?c=A:f.sibling=A,f=A,d=p}if(y.done)return n(i,d),Hn&&On(i,h),c;if(null===d){for(;!y.done;h++,y=l.next())null!==(y=v(i,y.value,u))&&(s=a(y,s,h),null===f?c=y:f.sibling=y,f=y);return Hn&&On(i,h),c}for(d=r(i,d);!y.done;h++,y=l.next())null!==(y=g(d,i,h,y.value,u))&&(e&&null!==y.alternate&&d.delete(null===y.key?h:y.key),s=a(y,s,h),null===f?c=y:f.sibling=y,f=y);return e&&d.forEach((function(e){return t(i,e)})),Hn&&On(i,h),c}return function e(r,a,o,f){if("object"===typeof o&&null!==o&&o.type===c&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case l:e:{for(var d=o.key,h=a;null!==h;){if(h.key===d){if((d=o.type)===c){if(7===h.tag){n(r,h.sibling),(a=i(h,o.props.children)).return=r,r=a;break e}}else if(h.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===A&&rr(d)===h.type){n(r,h.sibling),(a=i(h,o.props)).ref=tr(r,h,o),a.return=r,r=a;break e}n(r,h);break}t(r,h),h=h.sibling}o.type===c?((a=ns(o.props.children,r.mode,f,o.key)).return=r,r=a):((f=ts(o.type,o.key,o.props,null,r.mode,f)).ref=tr(r,a,o),f.return=r,r=f)}return s(r);case u:e:{for(h=o.key;null!==a;){if(a.key===h){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=as(o,r.mode,f)).return=r,r=a}return s(r);case A:return e(r,a,(h=o._init)(o._payload),f)}if(R(o))return y(r,a,o,f);if(_(o))return b(r,a,o,f);nr(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=is(o,r.mode,f)).return=r,r=a),s(r)):n(r,a)}}var ar=ir(!0),or=ir(!1),sr={},lr=ot(sr),ur=ot(sr),cr=ot(sr);function fr(e){if(e===sr)throw Error(o(174));return e}function dr(e,t){lt(cr,t),lt(ur,e),lt(lr,sr),e=D(t),st(lr),lt(lr,e)}function hr(){st(lr),st(ur),st(cr)}function pr(e){var t=fr(cr.current),n=fr(lr.current);n!==(t=L(n,e.type,t))&&(lt(ur,e),lt(lr,t))}function vr(e){ur.current===e&&(st(lr),st(ur))}var mr=ot(0);function gr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ne(n)||Fe(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yr=[];function Ar(){for(var e=0;e<yr.length;e++){var t=yr[e];W?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yr.length=0}var br=s.ReactCurrentDispatcher,xr=s.ReactCurrentBatchConfig,_r=0,wr=null,Sr=null,Er=null,Cr=!1,Tr=!1,Mr=0,Ir=0;function kr(){throw Error(o(321))}function Br(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jt(e[n],t[n]))return!1;return!0}function Rr(e,t,n,r,i,a){if(_r=a,wr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,br.current=null===e||null===e.memoizedState?pi:vi,e=n(r,i),Tr){a=0;do{if(Tr=!1,Mr=0,25<=a)throw Error(o(301));a+=1,Er=Sr=null,t.updateQueue=null,br.current=mi,e=n(r,i)}while(Tr)}if(br.current=hi,t=null!==Sr&&null!==Sr.next,_r=0,Er=Sr=wr=null,Cr=!1,t)throw Error(o(300));return e}function Pr(){var e=0!==Mr;return Mr=0,e}function Dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Er?wr.memoizedState=Er=e:Er=Er.next=e,Er}function Lr(){if(null===Sr){var e=wr.alternate;e=null!==e?e.memoizedState:null}else e=Sr.next;var t=null===Er?wr.memoizedState:Er.next;if(null!==t)Er=t,Sr=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Sr=e).memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},null===Er?wr.memoizedState=Er=e:Er=Er.next=e}return Er}function Nr(e,t){return"function"===typeof t?t(e):t}function Fr(e){var t=Lr(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Sr,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var f=c.lane;if((_r&f)===f)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,wr.lanes|=f,to|=f}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,jt(r,t.memoizedState)||(Ni=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,wr.lanes|=a,to|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Or(e){var t=Lr(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);jt(a,t.memoizedState)||(Ni=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ur(){}function zr(e,t){var n=wr,r=Lr(),i=t(),a=!jt(r.memoizedState,i);if(a&&(r.memoizedState=i,Ni=!0),r=r.queue,Jr(Zr.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==Er&&1&Er.memoizedState.tag){if(n.flags|=2048,Vr(9,Qr.bind(null,n,r,i,t),void 0,null),null===Xa)throw Error(o(349));0!==(30&_r)||Gr(n,t,i)}return i}function Gr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wr.updateQueue)?(t={lastEffect:null,stores:null},wr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qr(e,t,n,r){t.value=n,t.getSnapshot=r,Hr(t)&&wo(e,1,-1)}function Zr(e,t,n){return n((function(){Hr(t)&&wo(e,1,-1)}))}function Hr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jt(e,n)}catch(r){return!0}}function jr(e){var t=Dr();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:e},t.queue=e,e=e.dispatch=li.bind(null,wr,e),[t.memoizedState,e]}function Vr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=wr.updateQueue)?(t={lastEffect:null,stores:null},wr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Wr(){return Lr().memoizedState}function Xr(e,t,n,r){var i=Dr();wr.flags|=e,i.memoizedState=Vr(1|t,n,void 0,void 0===r?null:r)}function Yr(e,t,n,r){var i=Lr();r=void 0===r?null:r;var a=void 0;if(null!==Sr){var o=Sr.memoizedState;if(a=o.destroy,null!==r&&Br(r,o.deps))return void(i.memoizedState=Vr(t,n,a,r))}wr.flags|=e,i.memoizedState=Vr(1|t,n,a,r)}function Kr(e,t){return Xr(8390656,8,e,t)}function Jr(e,t){return Yr(2048,8,e,t)}function qr(e,t){return Yr(4,2,e,t)}function $r(e,t){return Yr(4,4,e,t)}function ei(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ti(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Yr(4,4,ei.bind(null,t,e),n)}function ni(){}function ri(e,t){var n=Lr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Br(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ii(e,t){var n=Lr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Br(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ai(e,t){var n=Rt;Rt=0!==n&&4>n?n:4,e(!0);var r=xr.transition;xr.transition={};try{e(!1),t()}finally{Rt=n,xr.transition=r}}function oi(){return Lr().memoizedState}function si(e,t,n){var r=_o(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ui(e)?ci(t,n):(fi(e,t,n),null!==(e=wo(e,r,n=xo()))&&di(e,t,r))}function li(e,t,n){var r=_o(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ui(e))ci(t,i);else{fi(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,jt(s,o))return}catch(l){}null!==(e=wo(e,r,n=xo()))&&di(e,t,r)}}function ui(e){var t=e.alternate;return e===wr||null!==t&&t===wr}function ci(e,t){Tr=Cr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fi(e,t,n){null!==Xa&&0!==(1&e.mode)&&0===(2&Wa)?(null===(e=t.interleaved)?(n.next=n,null===dn?dn=[t]:dn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function di(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Bt(e,n)}}var hi={readContext:fn,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},pi={readContext:fn,useCallback:function(e,t){return Dr().memoizedState=[e,void 0===t?null:t],e},useContext:fn,useEffect:Kr,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Xr(4194308,4,ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xr(4,2,e,t)},useMemo:function(e,t){var n=Dr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=si.bind(null,wr,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Dr().memoizedState=e},useState:jr,useDebugValue:ni,useDeferredValue:function(e){var t=jr(e),n=t[0],r=t[1];return Kr((function(){var t=xr.transition;xr.transition={};try{r(e)}finally{xr.transition=t}}),[e]),n},useTransition:function(){var e=jr(!1),t=e[0];return e=ai.bind(null,e[1]),Dr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=wr,i=Dr();if(Hn){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Xa)throw Error(o(349));0!==(30&_r)||Gr(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Kr(Zr.bind(null,r,a,e),[e]),r.flags|=2048,Vr(9,Qr.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Dr(),t=Xa.identifierPrefix;if(Hn){var n=Fn;t=":"+t+"R"+(n=(Nn&~(1<<32-bt(Nn)-1)).toString(32)+n),0<(n=Mr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ir++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vi={readContext:fn,useCallback:ri,useContext:fn,useEffect:Jr,useImperativeHandle:ti,useInsertionEffect:qr,useLayoutEffect:$r,useMemo:ii,useReducer:Fr,useRef:Wr,useState:function(){return Fr(Nr)},useDebugValue:ni,useDeferredValue:function(e){var t=Fr(Nr),n=t[0],r=t[1];return Jr((function(){var t=xr.transition;xr.transition={};try{r(e)}finally{xr.transition=t}}),[e]),n},useTransition:function(){return[Fr(Nr)[0],Lr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:zr,useId:oi,unstable_isNewReconciler:!1},mi={readContext:fn,useCallback:ri,useContext:fn,useEffect:Jr,useImperativeHandle:ti,useInsertionEffect:qr,useLayoutEffect:$r,useMemo:ii,useReducer:Or,useRef:Wr,useState:function(){return Or(Nr)},useDebugValue:ni,useDeferredValue:function(e){var t=Or(Nr),n=t[0],r=t[1];return Jr((function(){var t=xr.transition;xr.transition={};try{r(e)}finally{xr.transition=t}}),[e]),n},useTransition:function(){return[Or(Nr)[0],Lr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:zr,useId:oi,unstable_isNewReconciler:!1};function gi(e,t){try{var n="",r=t;do{n+=$t(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function yi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var Ai,bi,xi,_i,wi="function"===typeof WeakMap?WeakMap:Map;function Si(e,t,n){(n=mn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){co||(co=!0,fo=r),yi(0,t)},n}function Ei(e,t,n){(n=mn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){yi(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){yi(0,t),"function"!==typeof r&&(null===ho?ho=new Set([this]):ho.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ci(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new wi;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Vo.bind(null,e,t,n),t.then(e,e))}function Ti(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Mi(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=mn(-1,1)).tag=2,gn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function Ii(e){e.flags|=4}function ki(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(X)Ai=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)U(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},bi=function(){},xi=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var a=t.stateNode,o=fr(lr.current);n=G(a,n,e,r,i,o),(t.updateQueue=n)&&Ii(t)}},_i=function(e,t,n,r){n!==r&&Ii(t)};else if(Y){Ai=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Be(a,i.type,i.memoizedProps,i)),U(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=Re(a,i.memoizedProps,i)),U(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),Ai(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Bi=function e(t,n,r,i){for(var a=n.child;null!==a;){if(5===a.tag){var o=a.stateNode;r&&i&&(o=Be(o,a.type,a.memoizedProps,a)),Me(t,o)}else if(6===a.tag)o=a.stateNode,r&&i&&(o=Re(o,a.memoizedProps,a)),Me(t,o);else if(4!==a.tag)if(22===a.tag&&null!==a.memoizedState)null!==(o=a.child)&&(o.return=a),e(t,a,!0,!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};bi=function(e,t){var n=t.stateNode;if(!ki(e,t)){e=n.containerInfo;var r=Te(e);Bi(r,t,!1,!1),n.pendingChildren=r,Ii(t),Ie(e,r)}},xi=function(e,t,n,r,i){var a=e.stateNode,o=e.memoizedProps;if((e=ki(e,t))&&o===r)t.stateNode=a;else{var s=t.stateNode,l=fr(lr.current),u=null;o!==r&&(u=G(s,n,o,r,i,l)),e&&null===u?t.stateNode=a:(a=Ce(a,u,n,o,r,t,e,s),z(a,n,r,i,l)&&Ii(t),t.stateNode=a,e?Ii(t):Ai(a,t,!1,!1))}},_i=function(e,t,n,r){n!==r?(e=fr(cr.current),n=fr(lr.current),t.stateNode=Z(r,e,n,t),Ii(t)):t.stateNode=e.stateNode}}else bi=function(){},xi=function(){},_i=function(){};function Ri(e,t){if(!Hn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Pi(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Di(e,t,n){var r=t.pendingProps;switch(Gn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(t),null;case 1:case 17:return pt(t.type)&&vt(),Pi(t),null;case 3:return r=t.stateNode,hr(),st(ft),st(ct),Ar(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(qn(t)?Ii(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Vn&&(Mo(Vn),Vn=null))),bi(e,t),Pi(t),null;case 5:vr(t),n=fr(cr.current);var i=t.type;if(null!==e&&null!=t.stateNode)xi(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Pi(t),null}if(e=fr(lr.current),qn(t)){if(!K)throw Error(o(175));e=Ze(t.stateNode,t.type,t.memoizedProps,n,e,t,!jn),t.updateQueue=e,null!==e&&Ii(t)}else{var a=O(i,r,n,e,t);Ai(a,t,!1,!1),t.stateNode=a,z(a,i,r,n,e)&&Ii(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Pi(t),null;case 6:if(e&&null!=t.stateNode)_i(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=fr(cr.current),n=fr(lr.current),qn(t)){if(!K)throw Error(o(176));if(e=t.stateNode,r=t.memoizedProps,(n=He(e,r,t,!jn))&&null!==(i=Qn))switch(a=0!==(1&i.mode),i.tag){case 3:qe(i.stateNode.containerInfo,e,r,a);break;case 5:$e(i.type,i.memoizedProps,i.stateNode,e,r,a)}n&&Ii(t)}else t.stateNode=Z(r,e,n,t)}return Pi(t),null;case 13:if(st(mr),r=t.memoizedState,Hn&&null!==Zn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Zn;e;)e=Ue(e);return $n(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=qn(t),null===e){if(!r)throw Error(o(318));if(!K)throw Error(o(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(317));je(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Pi(t),null}return null!==Vn&&(Mo(Vn),Vn=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?qn(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&mr.current)?0===$a&&($a=3):No())),null!==t.updateQueue&&(t.flags|=4),Pi(t),null);case 4:return hr(),bi(e,t),null===e&&q(t.stateNode.containerInfo),Pi(t),null;case 10:return ln(t.type._context),Pi(t),null;case 19:if(st(mr),null===(i=t.memoizedState))return Pi(t),null;if(r=0!==(128&t.flags),null===(a=i.rendering))if(r)Ri(i,!1);else{if(0!==$a||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=gr(e))){for(t.flags|=128,Ri(i,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return lt(mr,1&mr.current|2),t.child}e=e.sibling}null!==i.tail&&Ot()>so&&(t.flags|=128,r=!0,Ri(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=gr(a))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Ri(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!Hn)return Pi(t),null}else 2*Ot()-i.renderingStartTime>so&&1073741824!==n&&(t.flags|=128,r=!0,Ri(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ot(),t.sibling=null,e=mr.current,lt(mr,r?1&e|2:1&e),t):(Pi(t),null);case 22:case 23:return Ro(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ja)&&(Pi(t),X&&6&t.subtreeFlags&&(t.flags|=8192)):Pi(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}var Li=s.ReactCurrentOwner,Ni=!1;function Fi(e,t,n,r){t.child=null===e?or(t,null,n,r):ar(t,e.child,n,r)}function Oi(e,t,n,r,i){n=n.render;var a=t.ref;return cn(t,i),r=Rr(e,t,n,r,a,i),n=Pr(),null===e||Ni?(Hn&&n&&zn(t),t.flags|=1,Fi(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function Ui(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||$o(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ts(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,zi(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:qt)(o,r)&&e.ref===t.ref)return ia(e,t,i)}return t.flags|=1,(e=es(a,r)).ref=t.ref,e.return=t,t.child=e}function zi(e,t,n,r,i){if(null!==e&&qt(e.memoizedProps,r)&&e.ref===t.ref){if(Ni=!1,0===(e.lanes&i))return t.lanes=e.lanes,ia(e,t,i);0!==(131072&e.flags)&&(Ni=!0)}return Zi(e,t,n,r,i)}function Gi(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(qa,Ja),Ja|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(qa,Ja),Ja|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,lt(qa,Ja),Ja|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,lt(qa,Ja),Ja|=r;return Fi(e,t,i,n),t.child}function Qi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Zi(e,t,n,r,i){var a=pt(n)?dt:ct.current;return a=ht(t,a),cn(t,i),n=Rr(e,t,n,r,a,i),r=Pr(),null===e||Ni?(Hn&&r&&zn(t),t.flags|=1,Fi(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function Hi(e,t,n,r,i){if(pt(n)){var a=!0;yt(t)}else a=!1;if(cn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Cn(t,n,r),Mn(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=fn(u):u=ht(t,u=pt(n)?dt:ct.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Tn(t,o,r,u),hn=!1;var d=t.memoizedState;o.state=d,bn(t,r,o,i),l=t.memoizedState,s!==r||d!==l||ft.current||hn?("function"===typeof c&&(wn(t,n,c,r),l=t.memoizedState),(s=hn||En(t,n,s,r,d,l,u))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,vn(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:en(t.type,s),o.props=u,f=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=fn(l):l=ht(t,l=pt(n)?dt:ct.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||d!==l)&&Tn(t,o,r,l),hn=!1,d=t.memoizedState,o.state=d,bn(t,r,o,i);var p=t.memoizedState;s!==f||d!==p||ft.current||hn?("function"===typeof h&&(wn(t,n,h,r),p=t.memoizedState),(u=hn||En(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return ji(e,t,n,r,a,i)}function ji(e,t,n,r,i,a){Qi(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&At(t,n,!1),ia(e,t,a);r=t.stateNode,Li.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ar(t,e.child,null,a),t.child=ar(t,null,s,a)):Fi(e,t,s,a),t.memoizedState=r.state,i&&At(t,n,!0),t.child}function Vi(e){var t=e.stateNode;t.pendingContext?mt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mt(0,t.context,!1),dr(e,t.containerInfo)}function Wi(e,t,n,r,i){return $n(),er(i),t.flags|=256,Fi(e,t,n,r),t.child}var Xi={dehydrated:null,treeContext:null,retryLane:0};function Yi(e){return{baseLanes:e,cachePool:null}}function Ki(e,t,n){var r,i=t.pendingProps,a=mr.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),lt(mr,1&a),null===e)return Kn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Fe(e)?t.lanes=8:t.lanes=1073741824,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=a):s=rs(a,i,0,null),e=ns(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Yi(n),t.memoizedState=Xi,e):Ji(t,a));if(null!==(a=e.memoizedState)){if(null!==(r=a.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,ea(e,t,n,Error(o(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,a=t.mode,i=rs({mode:"visible",children:i.children},a,0,null),(s=ns(s,a,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&ar(t,e.child,null,n),t.child.memoizedState=Yi(n),t.memoizedState=Xi,s);if(0===(1&t.mode))t=ea(e,t,n,null);else if(Fe(r))t=ea(e,t,n,Error(o(419)));else if(i=0!==(n&e.childLanes),Ni||i){if(null!==(i=Xa)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!==(s&(i.suspendedLanes|n))?0:s)&&i!==a.retryLane&&(a.retryLane=i,wo(e,i,-1))}No(),t=ea(e,t,n,Error(o(421)))}else Ne(r)?(t.flags|=128,t.child=e.child,t=Xo.bind(null,e),Oe(r,t),t=null):(n=a.treeContext,K&&(Zn=Qe(r),Qn=t,Hn=!0,Vn=null,jn=!1,null!==n&&(Pn[Dn++]=Nn,Pn[Dn++]=Fn,Pn[Dn++]=Ln,Nn=n.id,Fn=n.overflow,Ln=t)),(t=Ji(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=$i(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?Yi(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Xi,i):(n=qi(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=$i(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?Yi(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Xi,i):(n=qi(e,t,i.children,n),t.memoizedState=null,n)}function Ji(e,t){return(t=rs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qi(e,t,n,r){var i=e.child;return e=i.sibling,n=es(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function $i(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=es(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=es(o,r):(r=ns(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ea(e,t,n,r){return null!==r&&er(r),ar(t,e.child,null,n),(e=Ji(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ta(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),un(e.return,t,n)}function na(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ra(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fi(e,t,r.children,n),0!==(2&(r=mr.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ta(e,n,t);else if(19===e.tag)ta(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(mr,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===gr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),na(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===gr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}na(t,!0,n,null,a);break;case"together":na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ia(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),to|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=es(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=es(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aa(e,t){switch(Gn(t),t.tag){case 1:return pt(t.type)&&vt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return hr(),st(ft),st(ct),Ar(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return vr(t),null;case 13:if(st(mr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return st(mr),null;case 4:return hr(),null;case 10:return ln(t.type._context),null;case 22:case 23:return Ro(),null;default:return null}}var oa=!1,sa=!1,la="function"===typeof WeakSet?WeakSet:Set,ua=null;function ca(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){jo(e,t,r)}else n.current=null}function fa(e,t,n){try{n()}catch(r){jo(e,t,r)}}var da=!1;function ha(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&fa(t,n,a)}i=i.next}while(i!==r)}}function pa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function va(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=P(n);else e=n;"function"===typeof t?t(e):t.current=e}}function ma(e,t,n){if(Ht&&"function"===typeof Ht.onCommitFiberUnmount)try{Ht.onCommitFiberUnmount(Zt,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&fa(t,n,a),r=r.next}while(r!==e)}break;case 1:if(ca(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){jo(t,n,o)}break;case 5:ca(t,n);break;case 4:X?Sa(e,t,n):Y&&Y&&(t=t.stateNode.containerInfo,n=Te(t),ke(t,n))}}function ga(e,t,n){for(var r=t;;)if(ma(e,r,n),null===r.child||X&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function ya(e){var t=e.alternate;null!==t&&(e.alternate=null,ya(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Aa(e){return 5===e.tag||3===e.tag||4===e.tag}function ba(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Aa(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function xa(e){if(X){e:{for(var t=e.return;null!==t;){if(Aa(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(be(t),n.flags&=-33),wa(e,n=ba(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,_a(e,n=ba(e),t);break;default:throw Error(o(161))}}}function _a(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ge(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(_a(e,t,n),e=e.sibling;null!==e;)_a(e,t,n),e=e.sibling}function wa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?me(n,e,t):fe(n,e);else if(4!==r&&null!==(e=e.child))for(wa(e,t,n),e=e.sibling;null!==e;)wa(e,t,n),e=e.sibling}function Sa(e,t,n){for(var r,i,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(o(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag)ga(e,a,n),i?Ae(r,a.stateNode):ye(r,a.stateNode);else if(18===a.tag)i?Ke(r,a.stateNode):Ye(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(ma(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function Ea(e,t){if(X){switch(t.tag){case 0:case 11:case 14:case 15:return ha(3,t,t.return),pa(3,t),void ha(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&ve(n,a,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(o(162));return n=t.memoizedProps,void he(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(K&&null!==e&&e.memoizedState.isDehydrated&&We(t.stateNode.containerInfo));case 13:case 19:return void Ca(t)}throw Error(o(163))}switch(t.tag){case 0:case 11:case 14:case 15:return ha(3,t,t.return),pa(3,t),void ha(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Ca(t);case 3:K&&null!==e&&e.memoizedState.isDehydrated&&We(t.stateNode.containerInfo)}e:if(Y){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,ke(t.containerInfo,t.pendingChildren);break e}throw Error(o(163))}}function Ca(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new la),t.forEach((function(t){var r=Yo.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ta(e,t,n){ua=e,Ma(e,t,n)}function Ma(e,t,n){for(var r=0!==(1&e.mode);null!==ua;){var i=ua,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||oa;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||sa;s=oa;var u=sa;if(oa=o,(sa=l)&&!u)for(ua=i;null!==ua;)l=(o=ua).child,22===o.tag&&null!==o.memoizedState?Ba(i):null!==l?(l.return=o,ua=l):Ba(i);for(;null!==a;)ua=a,Ma(a,t,n),a=a.sibling;ua=i,oa=s,sa=u}Ia(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,ua=a):Ia(e)}}function Ia(e){for(;null!==ua;){var t=ua;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:sa||pa(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!sa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&xn(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=P(t.child.stateNode);break;case 1:n=t.child.stateNode}xn(t,s,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&pe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(K&&null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var f=c.dehydrated;null!==f&&Xe(f)}}}break;default:throw Error(o(163))}sa||512&t.flags&&va(t)}catch(d){jo(t,t.return,d)}}if(t===e){ua=null;break}if(null!==(n=t.sibling)){n.return=t.return,ua=n;break}ua=t.return}}function ka(e){for(;null!==ua;){var t=ua;if(t===e){ua=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ua=n;break}ua=t.return}}function Ba(e){for(;null!==ua;){var t=ua;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{pa(4,t)}catch(l){jo(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){jo(t,i,l)}}var a=t.return;try{va(t)}catch(l){jo(t,a,l)}break;case 5:var o=t.return;try{va(t)}catch(l){jo(t,o,l)}}}catch(l){jo(t,t.return,l)}if(t===e){ua=null;break}var s=t.sibling;if(null!==s){s.return=t.return,ua=s;break}ua=t.return}}var Ra=0,Pa=1,Da=2,La=3,Na=4;if("function"===typeof Symbol&&Symbol.for){var Fa=Symbol.for;Ra=Fa("selector.component"),Pa=Fa("selector.has_pseudo_class"),Da=Fa("selector.role"),La=Fa("selector.test_id"),Na=Fa("selector.text")}function Oa(e){var t=J(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(o(364));return t}if(null===(e=ie(e)))throw Error(o(362));return e.stateNode.current}function Ua(e,t){switch(t.$$typeof){case Ra:if(e.type===t.value)return!0;break;case Pa:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],a=t[i];if(5!==r.tag||!se(r)){for(;null!=a&&Ua(r,a);)a=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case Da:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Na:if((5===e.tag||6===e.tag)&&(null!==(e=oe(e))&&0<=e.indexOf(t.value)))return!0;break;case La:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function za(e){switch(e.$$typeof){case Ra:return"<"+(w(e.value)||"Unknown")+">";case Pa:return":has("+(za(e)||"")+")";case Da:return'[role="'+e.value+'"]';case Na:return'"'+e.value+'"';case La:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function Ga(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=e[r++],o=t[a];if(5!==i.tag||!se(i)){for(;null!=o&&Ua(i,o);)o=t[++a];if(a===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}return n}function Qa(e,t){if(!re)throw Error(o(363));e=Ga(e=Oa(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)se(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Za=Math.ceil,Ha=s.ReactCurrentDispatcher,ja=s.ReactCurrentOwner,Va=s.ReactCurrentBatchConfig,Wa=0,Xa=null,Ya=null,Ka=0,Ja=0,qa=ot(0),$a=0,eo=null,to=0,no=0,ro=0,io=null,ao=null,oo=0,so=1/0;function lo(){so=Ot()+500}var uo,co=!1,fo=null,ho=null,po=!1,vo=null,mo=0,go=0,yo=null,Ao=-1,bo=0;function xo(){return 0!==(6&Wa)?Ot():-1!==Ao?Ao:Ao=Ot()}function _o(e){return 0===(1&e.mode)?1:0!==(2&Wa)&&0!==Ka?Ka&-Ka:null!==Jt.transition?(0===bo&&(e=wt,0===(4194240&(wt<<=1))&&(wt=64),bo=e),bo):0!==(e=Rt)?e:$()}function wo(e,t,n){if(50<go)throw go=0,yo=null,Error(o(185));var r=So(e,t);return null===r?null:(kt(r,t,n),0!==(2&Wa)&&r===Xa||(r===Xa&&(0===(2&Wa)&&(no|=t),4===$a&&Io(r,Ka)),Eo(r,n),1===t&&0===Wa&&0===(1&e.mode)&&(lo(),Wt&&Kt())),r)}function So(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Eo(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-bt(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=Tt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=Ct(e,e===Xa?Ka:0);if(0===r)null!==n&&Lt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Lt(n),1===t)0===e.tag?function(e){Wt=!0,Yt(e)}(ko.bind(null,e)):Yt(ko.bind(null,e)),te?ne((function(){0===Wa&&Kt()})):Dt(Ut,Kt),n=null;else{switch(Pt(r)){case 1:n=Ut;break;case 4:n=zt;break;case 16:default:n=Gt;break;case 536870912:n=Qt}n=Ko(n,Co.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Co(e,t){if(Ao=-1,bo=0,0!==(6&Wa))throw Error(o(327));var n=e.callbackNode;if(Zo()&&e.callbackNode!==n)return null;var r=Ct(e,e===Xa?Ka:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Fo(e,r);else{t=r;var i=Wa;Wa|=2;var a=Lo();for(Xa===e&&Ka===t||(lo(),Po(e,t));;)try{Uo();break}catch(l){Do(e,l)}on(),Ha.current=a,Wa=i,null!==Ya?t=0:(Xa=null,Ka=0,t=$a)}if(0!==t){if(2===t&&(0!==(i=Mt(e))&&(r=i,t=To(e,i))),1===t)throw n=eo,Po(e,0),Io(e,r),Eo(e,Ot()),n;if(6===t)Io(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!jt(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Fo(e,r))&&(0!==(a=Mt(e))&&(r=a,t=To(e,a))),1===t))throw n=eo,Po(e,0),Io(e,r),Eo(e,Ot()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Qo(e,ao);break;case 3:if(Io(e,r),(130023424&r)===r&&10<(t=oo+500-Ot())){if(0!==Ct(e,0))break;if(((i=e.suspendedLanes)&r)!==r){xo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=H(Qo.bind(null,e,ao),t);break}Qo(e,ao);break;case 4:if(Io(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-bt(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ot()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Za(r/1960))-r)){e.timeoutHandle=H(Qo.bind(null,e,ao),r);break}Qo(e,ao);break;default:throw Error(o(329))}}}return Eo(e,Ot()),e.callbackNode===n?Co.bind(null,e):null}function To(e,t){var n=io;return e.current.memoizedState.isDehydrated&&(Po(e,t).flags|=256),2!==(e=Fo(e,t))&&(t=ao,ao=n,null!==t&&Mo(t)),e}function Mo(e){null===ao?ao=e:ao.push.apply(ao,e)}function Io(e,t){for(t&=~ro,t&=~no,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),r=1<<n;e[n]=-1,t&=~r}}function ko(e){if(0!==(6&Wa))throw Error(o(327));Zo();var t=Ct(e,0);if(0===(1&t))return Eo(e,Ot()),null;var n=Fo(e,t);if(0!==e.tag&&2===n){var r=Mt(e);0!==r&&(t=r,n=To(e,r))}if(1===n)throw n=eo,Po(e,0),Io(e,t),Eo(e,Ot()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qo(e,ao),Eo(e,Ot()),null}function Bo(e){null!==vo&&0===vo.tag&&0===(6&Wa)&&Zo();var t=Wa;Wa|=1;var n=Va.transition,r=Rt;try{if(Va.transition=null,Rt=1,e)return e()}finally{Rt=r,Va.transition=n,0===(6&(Wa=t))&&Kt()}}function Ro(){Ja=qa.current,st(qa)}function Po(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==V&&(e.timeoutHandle=V,j(n)),null!==Ya)for(n=Ya.return;null!==n;){var r=n;switch(Gn(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vt();break;case 3:hr(),st(ft),st(ct),Ar();break;case 5:vr(r);break;case 4:hr();break;case 13:case 19:st(mr);break;case 10:ln(r.type._context);break;case 22:case 23:Ro()}n=n.return}if(Xa=e,Ya=e=es(e.current,null),Ka=Ja=t,$a=0,eo=null,ro=no=to=0,ao=io=null,null!==dn){for(t=0;t<dn.length;t++)if(null!==(r=(n=dn[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}dn=null}return e}function Do(e,t){for(;;){var n=Ya;try{if(on(),br.current=hi,Cr){for(var r=wr.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Cr=!1}if(_r=0,Er=Sr=wr=null,Tr=!1,Mr=0,ja.current=null,null===n||null===n.return){$a=1,eo=t,Ya=null;break}e:{var a=e,s=n.return,l=n,u=t;if(t=Ka,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,f=l,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=Ti(s);if(null!==p){p.flags&=-257,Mi(p,s,l,0,t),1&p.mode&&Ci(a,c,t),u=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(u),t.updateQueue=m}else v.add(u);break e}if(0===(1&t)){Ci(a,c,t),No();break e}u=Error(o(426))}else if(Hn&&1&l.mode){var g=Ti(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),Mi(g,s,l,0,t),er(u);break e}}a=u,4!==$a&&($a=2),null===io?io=[a]:io.push(a),u=gi(u,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,An(l,Si(0,u,t));break e;case 1:a=u;var y=l.type,A=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==A&&"function"===typeof A.componentDidCatch&&(null===ho||!ho.has(A)))){l.flags|=65536,t&=-t,l.lanes|=t,An(l,Ei(l,a,t));break e}}l=l.return}while(null!==l)}Go(n)}catch(b){t=b,Ya===n&&null!==n&&(Ya=n=n.return);continue}break}}function Lo(){var e=Ha.current;return Ha.current=hi,null===e?hi:e}function No(){0!==$a&&3!==$a&&2!==$a||($a=4),null===Xa||0===(268435455&to)&&0===(268435455&no)||Io(Xa,Ka)}function Fo(e,t){var n=Wa;Wa|=2;var r=Lo();for(Xa===e&&Ka===t||Po(e,t);;)try{Oo();break}catch(i){Do(e,i)}if(on(),Wa=n,Ha.current=r,null!==Ya)throw Error(o(261));return Xa=null,Ka=0,$a}function Oo(){for(;null!==Ya;)zo(Ya)}function Uo(){for(;null!==Ya&&!Nt();)zo(Ya)}function zo(e){var t=uo(e.alternate,e,Ja);e.memoizedProps=e.pendingProps,null===t?Go(e):Ya=t,ja.current=null}function Go(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Di(n,t,Ja)))return void(Ya=n)}else{if(null!==(n=aa(n,t)))return n.flags&=32767,void(Ya=n);if(null===e)return $a=6,void(Ya=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ya=t);Ya=t=e}while(null!==t);0===$a&&($a=5)}function Qo(e,t){var n=Rt,r=Va.transition;try{Va.transition=null,Rt=1,function(e,t,n){do{Zo()}while(null!==vo);if(0!==(6&Wa))throw Error(o(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-bt(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,a),e===Xa&&(Ya=Xa=null,Ka=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||po||(po=!0,Ko(Gt,(function(){return Zo(),null}))),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=Va.transition,Va.transition=null;var s=Rt;Rt=1;var l=Wa;Wa|=4,ja.current=null,function(e,t){for(N(e.containerInfo),ua=t;null!==ua;)if(t=(e=ua).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,ua=t;else for(;null!==ua;){e=ua;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,a=e.stateNode,s=a.getSnapshotBeforeUpdate(e.elementType===e.type?r:en(e.type,r),i);a.__reactInternalSnapshotBeforeUpdate=s}break;case 3:X&&Ee(e.stateNode.containerInfo);break;default:throw Error(o(163))}}catch(l){jo(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,ua=t;break}ua=e.return}n=da,da=!1}(e,r),function(e,t){for(ua=t;null!==ua;){var n=(t=ua).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e;X?Sa(a,i,t):ga(a,i,t);var o=i.alternate;null!==o&&(o.return=null),i.return=null}catch(x){jo(i,t,x)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,ua=n;else for(;null!==ua;){t=ua;try{var s=t.flags;if(32&s&&X&&be(t.stateNode),512&s){var l=t.alternate;if(null!==l){var u=l.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}if(8192&s)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(oo=Ot())}break;case 22:var f=null!==t.memoizedState,d=t.alternate,h=null!==d&&null!==d.memoizedState;if(n=t,X)e:if(r=n,i=f,a=null,X)for(var p=r;;){if(5===p.tag){if(null===a){a=p;var v=p.stateNode;i?xe(v):we(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===a){var m=p.stateNode;i?_e(m):Se(m,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;a===p&&(a=null),p=p.return}a===p&&(a=null),p.sibling.return=p.return,p=p.sibling}if(f&&!h&&0!==(1&n.mode)){ua=n;for(var g=n.child;null!==g;){for(n=ua=g;null!==ua;){var y=(r=ua).child;switch(r.tag){case 0:case 11:case 14:case 15:ha(4,r,r.return);break;case 1:ca(r,r.return);var A=r.stateNode;if("function"===typeof A.componentWillUnmount){var b=r.return;try{A.props=r.memoizedProps,A.state=r.memoizedState,A.componentWillUnmount()}catch(x){jo(r,b,x)}}break;case 5:ca(r,r.return);break;case 22:if(null!==r.memoizedState){ka(n);continue}}null!==y?(y.return=r,ua=y):ka(n)}g=g.sibling}}}switch(4102&s){case 2:xa(t),t.flags&=-3;break;case 6:xa(t),t.flags&=-3,Ea(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Ea(t.alternate,t);break;case 4:Ea(t.alternate,t)}}catch(x){jo(t,t.return,x)}if(null!==(n=t.sibling)){n.return=t.return,ua=n;break}ua=t.return}}}(e,r),F(e.containerInfo),e.current=r,Ta(r,e,i),Ft(),Wa=l,Rt=s,Va.transition=a}else e.current=r;if(po&&(po=!1,vo=e,mo=i),a=e.pendingLanes,0===a&&(ho=null),function(e){if(Ht&&"function"===typeof Ht.onCommitFiberRoot)try{Ht.onCommitFiberRoot(Zt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Eo(e,Ot()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(co)throw co=!1,e=fo,fo=null,e;0!==(1&mo)&&0!==e.tag&&Zo(),a=e.pendingLanes,0!==(1&a)?e===yo?go++:(go=0,yo=e):go=0,Kt()}(e,t,n)}finally{Va.transition=r,Rt=n}return null}function Zo(){if(null!==vo){var e=Pt(mo),t=Va.transition,n=Rt;try{if(Va.transition=null,Rt=16>e?16:e,null===vo)var r=!1;else{if(e=vo,vo=null,mo=0,0!==(6&Wa))throw Error(o(331));var i=Wa;for(Wa|=4,ua=e.current;null!==ua;){var a=ua,s=a.child;if(0!==(16&ua.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(ua=c;null!==ua;){var f=ua;switch(f.tag){case 0:case 11:case 15:ha(8,f,a)}var d=f.child;if(null!==d)d.return=f,ua=d;else for(;null!==ua;){var h=(f=ua).sibling,p=f.return;if(ya(f),f===c){ua=null;break}if(null!==h){h.return=p,ua=h;break}ua=p}}}var v=a.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}ua=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,ua=s;else e:for(;null!==ua;){if(0!==(2048&(a=ua).flags))switch(a.tag){case 0:case 11:case 15:ha(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,ua=y;break e}ua=a.return}}var A=e.current;for(ua=A;null!==ua;){var b=(s=ua).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,ua=b;else e:for(s=A;null!==ua;){if(0!==(2048&(l=ua).flags))try{switch(l.tag){case 0:case 11:case 15:pa(9,l)}}catch(_){jo(l,l.return,_)}if(l===s){ua=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,ua=x;break e}ua=l.return}}if(Wa=i,Kt(),Ht&&"function"===typeof Ht.onPostCommitFiberRoot)try{Ht.onPostCommitFiberRoot(Zt,e)}catch(_){}r=!0}return r}finally{Rt=n,Va.transition=t}}return!1}function Ho(e,t,n){gn(e,t=Si(0,t=gi(n,t),1)),t=xo(),null!==(e=So(e,1))&&(kt(e,1,t),Eo(e,t))}function jo(e,t,n){if(3===e.tag)Ho(e,e,n);else for(;null!==t;){if(3===t.tag){Ho(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ho||!ho.has(r))){gn(t,e=Ei(t,e=gi(n,e),1)),e=xo(),null!==(t=So(t,1))&&(kt(t,1,e),Eo(t,e));break}}t=t.return}}function Vo(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=xo(),e.pingedLanes|=e.suspendedLanes&n,Xa===e&&(Ka&n)===n&&(4===$a||3===$a&&(130023424&Ka)===Ka&&500>Ot()-oo?Po(e,0):ro|=n),Eo(e,t)}function Wo(e,t){0===t&&(0===(1&e.mode)?t=1:(t=St,0===(130023424&(St<<=1))&&(St=4194304)));var n=xo();null!==(e=So(e,t))&&(kt(e,t,n),Eo(e,n))}function Xo(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Wo(e,n)}function Yo(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Wo(e,n)}function Ko(e,t){return Dt(e,t)}function Jo(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qo(e,t,n,r){return new Jo(e,t,n,r)}function $o(e){return!(!(e=e.prototype)||!e.isReactComponent)}function es(e,t){var n=e.alternate;return null===n?((n=qo(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ts(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)$o(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case c:return ns(n.children,i,a,t);case f:s=8,i|=8;break;case d:return(e=qo(12,n,t,2|i)).elementType=d,e.lanes=a,e;case m:return(e=qo(13,n,t,i)).elementType=m,e.lanes=a,e;case g:return(e=qo(19,n,t,i)).elementType=g,e.lanes=a,e;case b:return rs(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case h:s=10;break e;case p:s=9;break e;case v:s=11;break e;case y:s=14;break e;case A:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=qo(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function ns(e,t,n,r){return(e=qo(7,e,r,t)).lanes=n,e}function rs(e,t,n,r){return(e=qo(22,e,r,t)).elementType=b,e.lanes=n,e.stateNode={},e}function is(e,t,n){return(e=qo(6,e,null,t)).lanes=n,e}function as(e,t,n){return(t=qo(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function os(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=V,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=It(0),this.expirationTimes=It(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=It(0),this.identifierPrefix=r,this.onRecoverableError=i,K&&(this.mutableSourceEagerHydrationData=null)}function ss(e,t,n,r,i,a,o,s,l){return e=new os(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=qo(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},pn(a),e}function ls(e){if(!e)return ut;e:{if(E(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(pt(n))return gt(e,n,t)}return t}function us(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=M(t))?null:e.stateNode}function cs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function fs(e,t){cs(e,t),(e=e.alternate)&&cs(e,t)}function ds(e){return null===(e=M(e))?null:e.stateNode}function hs(){return null}return uo=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ft.current)Ni=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ni=!1,function(e,t,n){switch(t.tag){case 3:Vi(t),$n();break;case 5:pr(t);break;case 1:pt(t.type)&&yt(t);break;case 4:dr(t,t.stateNode.containerInfo);break;case 10:sn(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(lt(mr,1&mr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ki(e,t,n):(lt(mr,1&mr.current),null!==(e=ia(e,t,n))?e.sibling:null);lt(mr,1&mr.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return ra(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(mr,mr.current),r)break;return null;case 22:case 23:return t.lanes=0,Gi(e,t,n)}return ia(e,t,n)}(e,t,n);Ni=0!==(131072&e.flags)}else Ni=!1,Hn&&0!==(1048576&t.flags)&&Un(t,Rn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=ht(t,ct.current);cn(t,n),i=Rr(null,t,r,e,i,n);var a=Pr();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(a=!0,yt(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,pn(t),i.updater=Sn,t.stateNode=i,i._reactInternals=t,Mn(t,r,e,n),t=ji(null,t,r,!0,a,n)):(t.tag=0,Hn&&a&&zn(t),Fi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return $o(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===v)return 11;if(e===y)return 14}return 2}(r),e=en(r,e),i){case 0:t=Zi(null,t,r,e,n);break e;case 1:t=Hi(null,t,r,e,n);break e;case 11:t=Oi(null,t,r,e,n);break e;case 14:t=Ui(null,t,r,en(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Zi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 1:return r=t.type,i=t.pendingProps,Hi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 3:e:{if(Vi(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,vn(e,t),bn(t,r,null,n);var s=t.memoizedState;if(r=s.element,K&&a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Wi(e,t,r,n,i=Error(o(423)));break e}if(r!==i){t=Wi(e,t,r,n,i=Error(o(424)));break e}for(K&&(Zn=Ge(t.stateNode.containerInfo),Qn=t,Hn=!0,Vn=null,jn=!1),n=or(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),r===i){t=ia(e,t,n);break e}Fi(e,t,r,n)}t=t.child}return t;case 5:return pr(t),null===e&&Kn(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Q(r,i)?s=null:null!==a&&Q(r,a)&&(t.flags|=32),Qi(e,t),Fi(e,t,s,n),t.child;case 6:return null===e&&Kn(t),null;case 13:return Ki(e,t,n);case 4:return dr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ar(t,null,r,n):Fi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Oi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 7:return Fi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,sn(0,r,s=i.value),null!==a)if(jt(a.value,s)){if(a.children===i.children&&!ft.current){t=ia(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=mn(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),un(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),un(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}Fi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cn(t,n),r=r(i=fn(i)),t.flags|=1,Fi(e,t,r,n),t.child;case 14:return i=en(r=t.type,t.pendingProps),Ui(e,t,r,i=en(r.type,i),n);case 15:return zi(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:en(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pt(r)?(e=!0,yt(t)):e=!1,cn(t,n),Cn(t,r,i),Mn(t,r,i,n),ji(null,t,r,!0,e,n);case 19:return ra(e,t,n);case 22:return Gi(e,t,n)}throw Error(o(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(wo(e,134217728,xo()),fs(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=xo(),n=_o(e);wo(e,n,t),fs(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Et(t.pendingLanes);0!==n&&(Bt(t,1|n),Eo(t,Ot()),0===(6&Wa)&&(lo(),Kt()))}break;case 13:var r=xo();Bo((function(){return wo(e,1,r)})),fs(e,1)}},t.batchedUpdates=function(e,t){var n=Wa;Wa|=1;try{return e(t)}finally{0===(Wa=n)&&(lo(),Wt&&Kt())}},t.createComponentSelector=function(e){return{$$typeof:Ra,value:e}},t.createContainer=function(e,t,n,r,i,a,o){return ss(e,t,!1,null,0,r,0,a,o)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Pa,value:e}},t.createHydrationContainer=function(e,t,n,r,i,a,o,s,l){return(e=ss(n,r,!0,e,0,a,0,s,l)).context=ls(null),n=e.current,(a=mn(r=xo(),i=_o(n))).callback=void 0!==t&&null!==t?t:null,gn(n,a),e.current.lanes=i,kt(e,i,r),Eo(e,r),e},t.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:u,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Da,value:e}},t.createTestNameSelector=function(e){return{$$typeof:La,value:e}},t.createTextSelector=function(e){return{$$typeof:Na,value:e}},t.deferredUpdates=function(e){var t=Rt,n=Va.transition;try{return Va.transition=null,Rt=16,e()}finally{Rt=t,Va.transition=n}},t.discreteUpdates=function(e,t,n,r,i){var a=Rt,o=Va.transition;try{return Va.transition=null,Rt=1,e(t,n,r,i)}finally{Rt=a,Va.transition=o,0===Wa&&lo()}},t.findAllNodes=Qa,t.findBoundingRects=function(e,t){if(!re)throw Error(o(363));t=Qa(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ae(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,a=n.y,s=a+n.height,l=t-1;0<=l;l--)if(t!==l){var u=e[l],c=u.x,f=c+u.width,d=u.y,h=d+u.height;if(r>=c&&a>=d&&i<=f&&s<=h){e.splice(t,1);break}if(!(r!==c||n.width!==u.width||h<a||d>s)){d>a&&(u.height+=d-a,u.y=a),h<s&&(u.height=s-d),e.splice(t,1);break}if(!(a!==d||n.height!==u.height||f<r||c>i)){c>r&&(u.width+=c-r,u.x=r),f<i&&(u.width=i-c),e.splice(t,1);break}}return e},t.findHostInstance=us,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=T(e))?k(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return us(e)},t.flushControlled=function(e){var t=Wa;Wa|=1;var n=Va.transition,r=Rt;try{Va.transition=null,Rt=1,e()}finally{Rt=r,Va.transition=n,0===(Wa=t)&&(lo(),Kt())}},t.flushPassiveEffects=Zo,t.flushSync=Bo,t.focusWithin=function(e,t){if(!re)throw Error(o(363));for(t=Ga(e=Oa(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!se(n)){if(5===n.tag&&ue(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Rt},t.getFindAllNodesFailureDescription=function(e,t){if(!re)throw Error(o(363));var n=0,r=[];e=[Oa(e),0];for(var i=0;i<e.length;){var a=e[i++],s=e[i++],l=t[s];if((5!==a.tag||!se(a))&&(Ua(a,l)&&(r.push(za(l)),++s>n&&(n=s)),s<t.length))for(a=a.child;null!==a;)e.push(a,s),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(za(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?P(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:ds,findFiberByHostInstance:e.findFiberByHostInstance||hs,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Zt=t.inject(e),Ht=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,r){if(!re)throw Error(o(363));e=Qa(e,t);var i=ce(e,n,r).disconnect;return{disconnect:function(){i()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Rt;try{return Rt=e,t()}finally{Rt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,r){var i=t.current,a=xo(),o=_o(i);return n=ls(n),null===t.context?t.context=n:t.pendingContext=n,(t=mn(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),gn(i,t),null!==(e=wo(i,o,a))&&yn(e,i,o),o},t}},4585:function(e,t,n){"use strict";e.exports=n(4976)},258:function(e,t,n){"use strict";e.exports=n(3721)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function A(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=A.prototype=new y;b.constructor=A,v(b,g.prototype),b.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,w={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+M(l,0):a,x(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),I(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",x(e))for(var u=0;u<e.length;u++){var c=a+M(s=e[u],u);l+=I(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,c=a+M(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function B(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:w};t.Children={map:k,forEach:function(e,t,n){k(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=A,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:B}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,d=null,h=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,A="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(m=!1,b(e),!v)if(null!==r(u))v=!0,P(_);else{var t=r(c);null!==t&&D(x,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,y(C),C=-1),p=!0;var a=h;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!I());){var o=d.callback;if("function"===typeof o){d.callback=null,h=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var f=r(c);null!==f&&D(x,f.startTime-n),l=!1}return l}finally{d=null,h=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,E=null,C=-1,T=5,M=-1;function I(){return!(t.unstable_now()-M<T)}function k(){if(null!==E){var e=t.unstable_now();M=e;var n=!0;try{n=E(!0,e)}finally{n?w():(S=!1,E=null)}}else S=!1}if("function"===typeof A)w=function(){A(k)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,R=B.port2;B.port1.onmessage=k,w=function(){R.postMessage(null)}}else w=function(){g(k,0)};function P(e){E=e,S||(S=!0,w())}function D(e,n){C=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(m?(y(C),C=-1):m=!0,D(x,a-o))):(e.sortIndex=s,n(u,e),v||p||(v=!0,P(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},7809:function(e,t,n){"use strict";var r=n(8018),i=n(5456),a=n(4807),o=n(7240);function s(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}e.exports=function(e,t,n){if(!o(e))return e;if(Array.isArray(t)&&(t=[].concat.apply([],t).join(".")),"string"!==typeof t)return e;for(var l=r(t,{sep:".",brackets:!0}).filter(s),u=l.length,c=-1,f=e;++c<u;){var d=l[c];c===u-1?a(f[d])&&a(n)?f[d]=i({},f[d],n):f[d]=n:(o(f[d])||(f[d]={}),f=f[d])}return e}},7240:function(e){"use strict";e.exports=function(e){return"undefined"!==typeof e&&null!==e&&("object"===typeof e||"function"===typeof e)}},8018:function(e,t,n){"use strict";var r=n(9955);function i(e,t,n,r){var a=e.indexOf(t,n);return"\\"===e.charAt(a-1)?i(e,t,a+1):a}function a(e,t){return!0===t.keepDoubleQuotes&&'"'===e||(!0===t.keepSingleQuotes&&"'"===e||t.keepQuotes)}function o(e,t,n){return"function"===typeof e.keepEscaping?e.keepEscaping(t,n):!0===e.keepEscaping||"\\"===t[n+1]}e.exports=function(e,t,n){if("string"!==typeof e)throw new TypeError("expected a string");"function"===typeof t&&(n=t,t=null),"string"===typeof t&&(t={sep:t});var s,l=r({sep:"."},t),u=l.quotes||['"',"'","`"];!0===l.brackets?s={"<":">","(":")","[":"]","{":"}"}:l.brackets&&(s=l.brackets);var c,f=[],d=[],h=[""],p=l.sep,v=e.length,m=-1;function g(){if(s&&d.length)return s[d[d.length-1]]}for(;++m<v;){var y=e[m],A=e[m+1],b={val:y,idx:m,arr:h,str:e};if(f.push(b),"\\"!==y){if(s&&s[y]){d.push(y);var x=g(),_=m+1;if(-1!==e.indexOf(x,_+1))for(;d.length&&_<v;){var w=e[++_];if("\\"!==w)if(-1===u.indexOf(w)){if(x=g(),d.length&&-1===e.indexOf(x,_+1))break;s[w]?d.push(w):x===w&&d.pop()}else _=i(e,w,_+1);else w++}if(-1===(c=_)){h[h.length-1]+=y;continue}y=e.slice(m,c+1),b.val=y,b.idx=m=c}if(-1!==u.indexOf(y)){if(-1===(c=i(e,y,m+1))){h[h.length-1]+=y;continue}y=!0===a(y,l)?e.slice(m,c+1):e.slice(m+1,c),b.val=y,b.idx=m=c}"function"===typeof n&&(n(b,f),y=b.val,m=b.idx),b.val!==p||!1===b.split?h[h.length-1]+=b.val:h.push("")}else b.val=!0===o(l,e,m)?y+A:A,b.escaped=!0,"function"===typeof n&&n(b),h[h.length-1]+=b.val,m++}return h}},9955:function(e,t,n){"use strict";var r=n(9105),i=n(7823);function a(e,t){for(var n in t)u(t,n)&&(e[n]=t[n])}function o(e){return e&&"string"===typeof e}function s(e){var t={};for(var n in e)t[n]=e[n];return t}function l(e){return e&&"object"===typeof e||r(e)}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=Object.assign||function(e){if(null===e||"undefined"===typeof e)throw new TypeError("Cannot convert undefined or null to object");l(e)||(e={});for(var t=1;t<arguments.length;t++){var n=arguments[t];o(n)&&(n=s(n)),l(n)&&(a(e,n),i(e,n))}return e}},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function s(e){t(o,i,a,s,l,"next",e)}function l(e){t(o,i,a,s,l,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,n){var r=n(6015),i=n(9617);function a(t,n,o){return i()?(e.exports=a=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),i=n(9617),a=n(4993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,i=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function i(){"use strict";e.exports=i=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",f=l.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),o=new P(r||[]);return s(a,"_invoke",{value:I(e,n,o)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=h;var v="suspendedStart",m="suspendedYield",g="executing",y="completed",A={};function b(){}function x(){}function _(){}var w={};d(w,u,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(D([])));E&&E!==a&&o.call(E,u)&&(w=E);var C=_.prototype=b.prototype=Object.create(w);function T(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(i,a,s,l){var u=p(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==r(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(f).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,l)}))}l(u.arg)}var i;s(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function I(e,n,r){var i=v;return function(a,o){if(i===g)throw new Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===A)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var u=p(e,n,r);if("normal"===u.type){if(i=r.done?y:m,u.arg===A)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=y,r.method="throw",r.arg=u.arg)}}}function k(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),A;var a=p(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,A;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(o.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return x.prototype=_,s(C,"constructor",{value:_,configurable:!0}),s(_,"constructor",{value:x,configurable:!0}),x.displayName=d(_,f,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,d(e,f,"GeneratorFunction")),e.prototype=Object.create(C),e},n.awrap=function(e){return{__await:e}},T(M.prototype),d(M.prototype,c,(function(){return this})),n.AsyncIterator=M,n.async=function(e,t,r,i,a){void 0===a&&(a=Promise);var o=new M(h(e,t,r,i),a);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(C),d(C,f,"Generator"),d(C,u,(function(){return this})),d(C,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=D,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),A}},n}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),i=n(8872),a=n(6116),o=n(2218);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},1589:function(e,t,n){var r=n(5372),i=n(9498),a=n(6116),o=n(2218);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),i=n(9498),a=n(6116),o=n(2281);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,n){var r=n(3808),i=n(6015),a=n(6035),o=n(3515);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},6209:function(e,t,n){e=n.nmd(e);var r=n(8416).default,i=n(7061).default,a=n(7156).default,o=n(1655).default,s=n(6389).default,l=n(3496).default,u=n(861).default,c=n(1589).default,f=n(7424).default,d=n(6690).default,h=n(9728).default,p=n(4704).default,v=Object.create,m=Object.defineProperty,g=Object.defineProperties,y=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,_=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,E=function(e,t,n){return t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},C=function(e,t){for(var n in t||(t={}))w.call(t,n)&&E(e,n,t[n]);if(x){var r,i=p(x(t));try{for(i.s();!(r=i.n()).done;){n=r.value;S.call(t,n)&&E(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},T=function(e,t){return g(e,A(t))},M=function(e){return m(e,"__esModule",{value:!0})},I=function(e,t){return function(){return t||(0,e[Object.keys(e)[0]])((t={exports:{}}).exports,t),t.exports}},k=function(e,t){for(var n in M(e),t)m(e,n,{get:t[n],enumerable:!0})},B=function(e){return function(e,t,n){if(t&&"object"===typeof t||"function"===typeof t){var r,i=p(b(t));try{var a=function(){var i=r.value;w.call(e,i)||"default"===i||m(e,i,{get:function(){return t[i]},enumerable:!(n=y(t,i))||n.enumerable})};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}return e}(M(m(null!=e?v(_(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},R=function(e,t,n){return E(e,"symbol"!==typeof t?t+"":t,n),n},P=I({"../node_modules/timing-function/lib/UnitBezier.js":function(e,t){t.exports=function(){function e(e,t,n,r){this.set(e,t,n,r)}return e.prototype.set=function(e,t,n,r){this._cx=3*e,this._bx=3*(n-e)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*t,this._by=3*(r-t)-this._cy,this._ay=1-this._cy-this._by},e.epsilon=1e-6,e.prototype._sampleCurveX=function(e){return((this._ax*e+this._bx)*e+this._cx)*e},e.prototype._sampleCurveY=function(e){return((this._ay*e+this._by)*e+this._cy)*e},e.prototype._sampleCurveDerivativeX=function(e){return(3*this._ax*e+2*this._bx)*e+this._cx},e.prototype._solveCurveX=function(e,t){var n,r,i,a,o,s;for(i=void 0,a=void 0,o=void 0,s=void 0,n=void 0,r=void 0,o=e,r=0;r<8;){if(s=this._sampleCurveX(o)-e,Math.abs(s)<t)return o;if(n=this._sampleCurveDerivativeX(o),Math.abs(n)<t)break;o-=s/n,r++}if((o=e)<(i=0))return i;if(o>(a=1))return a;for(;i<a;){if(s=this._sampleCurveX(o),Math.abs(s-e)<t)return o;e>s?i=o:a=o,o=.5*(a-i)+i}return o},e.prototype.solve=function(e,t){return this._sampleCurveY(this._solveCurveX(e,t))},e.prototype.solveSimple=function(e){return this._sampleCurveY(this._solveCurveX(e,1e-6))},e}()}}),D=I({"../node_modules/levenshtein-edit-distance/index.js":function(e,t){var n,r;n=[],r=[],t.exports=function(e,t,i){var a,o,s,l,u,c,f,d;if(e===t)return 0;if(a=e.length,o=t.length,0===a)return o;if(0===o)return a;for(i&&(e=e.toLowerCase(),t=t.toLowerCase()),f=0;f<a;)r[f]=e.charCodeAt(f),n[f]=++f;for(d=0;d<o;)for(s=t.charCodeAt(d),l=u=d++,f=-1;++f<a;)c=s===r[f]?u:u+1,u=n[f],n[f]=l=u>l?c>l?l+1:c:c>u?u+1:c;return l}}}),L=I({"../node_modules/propose/propose.js":function(e,t){var n=D();t.exports=function(){var e,t,r,i,a,o=0,s=arguments[0],l=arguments[1],u=l.length,c=arguments[2];c&&(i=c.threshold,a=c.ignoreCase),void 0===i&&(i=0);for(var f=0;f<u;++f)(e=(t=a?n(s,l[f],!0):n(s,l[f]))>s.length?1-t/l[f].length:1-t/s.length)>o&&(o=e,r=l[f]);return o>=i?r:null}}}),N=I({"../node_modules/fast-deep-equal/index.js":function(e,t){"use strict";t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!==i--;){var o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}}});k(t,{createRafDriver:function(){return Oa},getProject:function(){return Fs},notify:function(){return Pa},onChange:function(){return Us},types:function(){return Ya},val:function(){return zs}});var F={};k(F,{createRafDriver:function(){return Oa},getProject:function(){return Fs},notify:function(){return Pa},onChange:function(){return Us},types:function(){return Ya},val:function(){return zs}});var O=B(n(2114)),U=new(function(){"use strict";function e(){d(this,e),R(this,"atom",new O.Atom({projects:{}}))}return h(e,[{key:"add",value:function(e,t){this.atom.setByPointer((function(t){return t.projects[e]}),t)}},{key:"get",value:function(e){return this.atom.get().projects[e]}},{key:"has",value:function(e){return!!this.get(e)}}]),e}()),z=new WeakMap;function G(e){return z.get(e)}function Q(e,t){z.set(e,t)}var Z=[],H=Array.isArray,j="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,V="object"==typeof self&&self&&self.Object===Object&&self,W=j||V||Function("return this")(),X=W.Symbol,Y=Object.prototype,K=Y.hasOwnProperty,J=Y.toString,q=X?X.toStringTag:void 0;var $=function(e){var t=K.call(e,q),n=e[q];try{e[q]=void 0;var r=!0}catch(a){}var i=J.call(e);return r&&(t?e[q]=n:delete e[q]),i},ee=Object.prototype.toString;var te=function(e){return ee.call(e)},ne=X?X.toStringTag:void 0;var re=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ne&&ne in Object(e)?$(e):te(e)};var ie=function(e){return null!=e&&"object"==typeof e};var ae=function(e){return"symbol"==typeof e||ie(e)&&"[object Symbol]"==re(e)},oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,se=/^\w*$/;var le=function(e,t){if(H(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ae(e))||(se.test(e)||!oe.test(e)||null!=t&&e in Object(t))};var ue=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var ce=function(e){if(!ue(e))return!1;var t=re(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},fe=W["__core-js_shared__"],de=function(){var e=/[^.]+$/.exec(fe&&fe.keys&&fe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var he=function(e){return!!de&&de in e},pe=Function.prototype.toString;var ve=function(e){if(null!=e){try{return pe.call(e)}catch(t){}try{return e+""}catch(t){}}return""},me=/^\[object .+?Constructor\]$/,ge=Function.prototype,ye=Object.prototype,Ae=ge.toString,be=ye.hasOwnProperty,xe=RegExp("^"+Ae.call(be).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var _e=function(e){return!(!ue(e)||he(e))&&(ce(e)?xe:me).test(ve(e))};var we=function(e,t){return null==e?void 0:e[t]};var Se=function(e,t){var n=we(e,t);return _e(n)?n:void 0},Ee=Se(Object,"create");var Ce=function(){this.__data__=Ee?Ee(null):{},this.size=0};var Te=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Me=Object.prototype.hasOwnProperty;var Ie=function(e){var t=this.__data__;if(Ee){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Me.call(t,e)?t[e]:void 0},ke=Object.prototype.hasOwnProperty;var Be=function(e){var t=this.__data__;return Ee?void 0!==t[e]:ke.call(t,e)};var Re=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ee&&void 0===t?"__lodash_hash_undefined__":t,this};function Pe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Pe.prototype.clear=Ce,Pe.prototype.delete=Te,Pe.prototype.get=Ie,Pe.prototype.has=Be,Pe.prototype.set=Re;var De=Pe;var Le=function(){this.__data__=[],this.size=0};var Ne=function(e,t){return e===t||e!==e&&t!==t};var Fe=function(e,t){for(var n=e.length;n--;)if(Ne(e[n][0],t))return n;return-1},Oe=Array.prototype.splice;var Ue=function(e){var t=this.__data__,n=Fe(t,e);return!(n<0)&&(n==t.length-1?t.pop():Oe.call(t,n,1),--this.size,!0)};var ze=function(e){var t=this.__data__,n=Fe(t,e);return n<0?void 0:t[n][1]};var Ge=function(e){return Fe(this.__data__,e)>-1};var Qe=function(e,t){var n=this.__data__,r=Fe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Ze(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ze.prototype.clear=Le,Ze.prototype.delete=Ue,Ze.prototype.get=ze,Ze.prototype.has=Ge,Ze.prototype.set=Qe;var He=Ze,je=Se(W,"Map");var Ve=function(){this.size=0,this.__data__={hash:new De,map:new(je||He),string:new De}};var We=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Xe=function(e,t){var n=e.__data__;return We(t)?n["string"==typeof t?"string":"hash"]:n.map};var Ye=function(e){var t=Xe(this,e).delete(e);return this.size-=t?1:0,t};var Ke=function(e){return Xe(this,e).get(e)};var Je=function(e){return Xe(this,e).has(e)};var qe=function(e,t){var n=Xe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function $e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}$e.prototype.clear=Ve,$e.prototype.delete=Ye,$e.prototype.get=Ke,$e.prototype.has=Je,$e.prototype.set=qe;var et=$e;function tt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(tt.Cache||et),n}tt.Cache=et;var nt=tt;var rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/\\(\\)?/g,at=function(e){var t=nt(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rt,(function(e,n,r,i){t.push(r?i.replace(it,"$1"):n||e)})),t}));var ot=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},st=X?X.prototype:void 0,lt=st?st.toString:void 0;var ut=function e(t){if("string"==typeof t)return t;if(H(t))return ot(t,e)+"";if(ae(t))return lt?lt.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var ct=function(e){return null==e?"":ut(e)};var ft=function(e,t){return H(e)?e:le(e,t)?[e]:at(ct(e))};var dt=function(e){if("string"==typeof e||ae(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var ht=function(e,t){for(var n=0,r=(t=ft(t,e)).length;null!=e&&n<r;)e=e[dt(t[n++])];return n&&n==r?e:void 0};var pt=function(e,t,n){var r=null==e?void 0:ht(e,t);return void 0===r?n:r};var vt=function(){"use strict";function e(){d(this,e),R(this,"_values",{})}return h(e,[{key:"get",value:function(e,t){if(this.has(e))return this._values[e];var n=t();return this._values[e]=n,n}},{key:"has",value:function(e){return this._values.hasOwnProperty(e)}}]),e}(),mt=B(n(2114)),gt=function(){try{var e=Se(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var yt=function(e,t,n){"__proto__"==t&&gt?gt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},At=Object.prototype.hasOwnProperty;var bt=function(e,t,n){var r=e[t];At.call(e,t)&&Ne(r,n)&&(void 0!==n||t in e)||yt(e,t,n)},xt=/^(?:0|[1-9]\d*)$/;var _t=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&xt.test(e))&&e>-1&&e%1==0&&e<t};var wt=function(e,t,n,r){if(!ue(e))return e;for(var i=-1,a=(t=ft(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var l=dt(t[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=o){var c=s[l];void 0===(u=r?r(c,l,s):void 0)&&(u=ue(c)?c:_t(t[i+1])?[]:{})}bt(s,l,u),s=s[l]}return e};var St=function(e,t,n){return null==e?e:wt(e,t,n)},Et=new WeakMap;function Ct(e){if(Et.has(e))return Et.get(e);var t="compound"===e.type?function(e){for(var t={},n=0,r=Object.entries(e.props);n<r.length;n++){var i=f(r[n],2),a=i[0],o=i[1];t[a]=Ct(o)}return t}(e):"enum"===e.type?function(e){for(var t={$case:e.defaultCase},n=0,r=Object.entries(e.cases);n<r.length;n++){var i=f(r[n],2),a=i[0],o=i[1];t[a]=Ct(o)}return t}(e):e.default;return Et.set(e,t),t}var Tt=B(n(2114)),Mt=B(P());function It(e,t,n){return(0,Tt.prism)((function(){var r=(0,Tt.val)(t),i=Tt.prism.memo("driver",(function(){return r?"BasicKeyframedTrack"===r.type?function(e,t,n){return(0,Tt.prism)((function(){var e=Tt.prism.ref("state",{started:!1}),r=e.current,i=n.getValue();return(!r.started||i<r.validFrom||r.validTo<=i)&&(e.current=r=function(e,t,n){var r=t.getValue();if(0===n.keyframes.length)return{started:!0,validFrom:-1/0,validTo:1/0,der:kt};var i=0;for(;;){var a=n.keyframes[i];if(!a)return Bt.error;var o=i===n.keyframes.length-1;if(r<a.position)return 0===i?Bt.beforeFirstKeyframe(a):Bt.error;if(a.position===r)return o?Bt.lastKeyframe(a):Bt.between(a,n.keyframes[i+1],t);if(i===n.keyframes.length-1)return Bt.lastKeyframe(a);var s=i+1;if(!(n.keyframes[s].position<=r))return Bt.between(a,n.keyframes[i+1],t);i=s}}(0,n,t)),r.der.getValue()}))}(0,r,n):(e.logger.error("Track type not yet supported."),(0,Tt.prism)((function(){}))):(0,Tt.prism)((function(){}))}),[r]);return i.getValue()}))}var kt=(0,Tt.prism)((function(){}));var Bt={beforeFirstKeyframe:function(e){return{started:!0,validFrom:-1/0,validTo:e.position,der:(0,Tt.prism)((function(){return{left:e.value,progression:0}}))}},lastKeyframe:function(e){return{started:!0,validFrom:e.position,validTo:1/0,der:(0,Tt.prism)((function(){return{left:e.value,progression:0}}))}},between:function(e,t,n){if(!e.connectedRight)return{started:!0,validFrom:e.position,validTo:t.position,der:(0,Tt.prism)((function(){return{left:e.value,progression:0}}))};var r=function(n){return(n-e.position)/(t.position-e.position)};if(!e.type||"bezier"===e.type){var i=new Mt.default(e.handles[2],e.handles[3],t.handles[0],t.handles[1]),a=(0,Tt.prism)((function(){var a=r(n.getValue()),o=i.solveSimple(a);return{left:e.value,right:t.value,progression:o}}));return{started:!0,validFrom:e.position,validTo:t.position,der:a}}var o=(0,Tt.prism)((function(){var i=r(n.getValue()),a=Math.floor(i);return{left:e.value,right:t.value,progression:a}}));return{started:!0,validFrom:e.position,validTo:t.position,der:o}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:kt}};function Rt(e,t,n){var r=n.get(e);if(r&&r.override===t)return r.merged;for(var i=C({},e),a=0,o=Object.keys(t);a<o.length;a++){var s=o[a],l=t[s],u=e[s];i[s]="object"===typeof l&&"object"===typeof u?Rt(u,l,n):void 0===l?u:l}return n.set(e,{override:t,merged:i}),i}function Pt(e,t){var n,r=e,i=p(t);try{for(i.s();!(n=i.n()).done;){r=r[n.value]}}catch(a){i.e(a)}finally{i.f()}return r}var Dt=B(n(2114)),Lt=B(n(2114)),Nt=B(n(2114)),Ft=/\s/;var Ot=function(e){for(var t=e.length;t--&&Ft.test(e.charAt(t)););return t},Ut=/^\s+/;var zt=function(e){return e?e.slice(0,Ot(e)+1).replace(Ut,""):e},Gt=/^[-+]0x[0-9a-f]+$/i,Qt=/^0b[01]+$/i,Zt=/^0o[0-7]+$/i,Ht=parseInt;var jt=function(e){if("number"==typeof e)return e;if(ae(e))return NaN;if(ue(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ue(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=zt(e);var n=Qt.test(e);return n||Zt.test(e)?Ht(e.slice(2),n?2:8):Gt.test(e)?NaN:+e},Vt=1/0;var Wt=function(e){return e?(e=jt(e))===Vt||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0};var Xt=function(e){var t=Wt(e),n=t%1;return t===t?n?t-n:t:0};var Yt=function(e){return e},Kt=Se(W,"WeakMap");var Jt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var qt=function(e){return null!=e&&Jt(e.length)&&!ce(e)},$t=Object.prototype;var en=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$t)};var tn=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var nn=function(e){return ie(e)&&"[object Arguments]"==re(e)},rn=Object.prototype,an=rn.hasOwnProperty,on=rn.propertyIsEnumerable,sn=nn(function(){return arguments}())?nn:function(e){return ie(e)&&an.call(e,"callee")&&!on.call(e,"callee")},ln=sn;var un=function(){return!1},cn=t&&!t.nodeType&&t,fn=cn&&e&&!e.nodeType&&e,dn=fn&&fn.exports===cn?W.Buffer:void 0,hn=(dn?dn.isBuffer:void 0)||un,pn={};pn["[object Float32Array]"]=pn["[object Float64Array]"]=pn["[object Int8Array]"]=pn["[object Int16Array]"]=pn["[object Int32Array]"]=pn["[object Uint8Array]"]=pn["[object Uint8ClampedArray]"]=pn["[object Uint16Array]"]=pn["[object Uint32Array]"]=!0,pn["[object Arguments]"]=pn["[object Array]"]=pn["[object ArrayBuffer]"]=pn["[object Boolean]"]=pn["[object DataView]"]=pn["[object Date]"]=pn["[object Error]"]=pn["[object Function]"]=pn["[object Map]"]=pn["[object Number]"]=pn["[object Object]"]=pn["[object RegExp]"]=pn["[object Set]"]=pn["[object String]"]=pn["[object WeakMap]"]=!1;var vn=function(e){return ie(e)&&Jt(e.length)&&!!pn[re(e)]};var mn=function(e){return function(t){return e(t)}},gn=t&&!t.nodeType&&t,yn=gn&&e&&!e.nodeType&&e,An=yn&&yn.exports===gn&&j.process,bn=function(){try{var e=yn&&yn.require&&yn.require("util").types;return e||An&&An.binding&&An.binding("util")}catch(t){}}(),xn=bn&&bn.isTypedArray,_n=xn?mn(xn):vn,wn=Object.prototype.hasOwnProperty;var Sn=function(e,t){var n=H(e),r=!n&&ln(e),i=!n&&!r&&hn(e),a=!n&&!r&&!i&&_n(e),o=n||r||i||a,s=o?tn(e.length,String):[],l=s.length;for(var u in e)!t&&!wn.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_t(u,l))||s.push(u);return s};var En=function(e,t){return function(n){return e(t(n))}},Cn=En(Object.keys,Object),Tn=Object.prototype.hasOwnProperty;var Mn=function(e){if(!en(e))return Cn(e);var t=[];for(var n in Object(e))Tn.call(e,n)&&"constructor"!=n&&t.push(n);return t};var In=function(e){return qt(e)?Sn(e):Mn(e)};var kn=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},Bn=En(Object.getPrototypeOf,Object),Rn=Function.prototype,Pn=Object.prototype,Dn=Rn.toString,Ln=Pn.hasOwnProperty,Nn=Dn.call(Object);var Fn=function(e){if(!ie(e)||"[object Object]"!=re(e))return!1;var t=Bn(e);if(null===t)return!0;var n=Ln.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Dn.call(n)==Nn};var On=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a};var Un=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:On(e,t,n)},zn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Gn=function(e){return zn.test(e)};var Qn=function(e){return e.split("")},Zn="\\ud800-\\udfff",Hn="["+Zn+"]",jn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Vn="\\ud83c[\\udffb-\\udfff]",Wn="[^"+Zn+"]",Xn="(?:\\ud83c[\\udde6-\\uddff]){2}",Yn="[\\ud800-\\udbff][\\udc00-\\udfff]",Kn="(?:"+jn+"|"+Vn+")"+"?",Jn="[\\ufe0e\\ufe0f]?",qn=Jn+Kn+("(?:\\u200d(?:"+[Wn,Xn,Yn].join("|")+")"+Jn+Kn+")*"),$n="(?:"+[Wn+jn+"?",jn,Xn,Yn,Hn].join("|")+")",er=RegExp(Vn+"(?="+Vn+")|"+$n+qn,"g");var tr=function(e){return e.match(er)||[]};var nr=function(e){return Gn(e)?tr(e):Qn(e)};var rr=function(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e};var ir=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=jt(n))===n?n:0),void 0!==t&&(t=(t=jt(t))===t?t:0),rr(jt(e),t,n)};var ar=function(){this.__data__=new He,this.size=0};var or=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var sr=function(e){return this.__data__.get(e)};var lr=function(e){return this.__data__.has(e)};var ur=function(e,t){var n=this.__data__;if(n instanceof He){var r=n.__data__;if(!je||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new et(r)}return n.set(e,t),this.size=n.size,this};function cr(e){var t=this.__data__=new He(e);this.size=t.size}cr.prototype.clear=ar,cr.prototype.delete=or,cr.prototype.get=sr,cr.prototype.has=lr,cr.prototype.set=ur;var fr=cr;var dr=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var hr=function(){return[]},pr=Object.prototype.propertyIsEnumerable,vr=Object.getOwnPropertySymbols,mr=vr?function(e){return null==e?[]:(e=Object(e),dr(vr(e),(function(t){return pr.call(e,t)})))}:hr;var gr=function(e,t,n){var r=t(e);return H(e)?r:kn(r,n(e))};var yr=function(e){return gr(e,In,mr)},Ar=Se(W,"DataView"),br=Se(W,"Promise"),xr=Se(W,"Set"),_r="[object Map]",wr="[object Promise]",Sr="[object Set]",Er="[object WeakMap]",Cr="[object DataView]",Tr=ve(Ar),Mr=ve(je),Ir=ve(br),kr=ve(xr),Br=ve(Kt),Rr=re;(Ar&&Rr(new Ar(new ArrayBuffer(1)))!=Cr||je&&Rr(new je)!=_r||br&&Rr(br.resolve())!=wr||xr&&Rr(new xr)!=Sr||Kt&&Rr(new Kt)!=Er)&&(Rr=function(e){var t=re(e),n="[object Object]"==t?e.constructor:void 0,r=n?ve(n):"";if(r)switch(r){case Tr:return Cr;case Mr:return _r;case Ir:return wr;case kr:return Sr;case Br:return Er}return t});var Pr=Rr,Dr=W.Uint8Array;var Lr=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var Nr=function(e){return this.__data__.has(e)};function Fr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new et;++t<n;)this.add(e[t])}Fr.prototype.add=Fr.prototype.push=Lr,Fr.prototype.has=Nr;var Or=Fr;var Ur=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var zr=function(e,t){return e.has(t)};var Gr=function(e,t,n,r,i,a){var o=1&n,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(e),c=a.get(t);if(u&&c)return u==t&&c==e;var f=-1,d=!0,h=2&n?new Or:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var p=e[f],v=t[f];if(r)var m=o?r(v,p,f,t,e,a):r(p,v,f,e,t,a);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!Ur(t,(function(e,t){if(!zr(h,t)&&(p===e||i(p,e,n,r,a)))return h.push(t)}))){d=!1;break}}else if(p!==v&&!i(p,v,n,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d};var Qr=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var Zr=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Hr=X?X.prototype:void 0,jr=Hr?Hr.valueOf:void 0;var Vr=function(e,t,n,r,i,a,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new Dr(e),new Dr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ne(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Qr;case"[object Set]":var l=1&r;if(s||(s=Zr),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;r|=2,o.set(e,t);var c=Gr(s(e),s(t),r,i,a,o);return o.delete(e),c;case"[object Symbol]":if(jr)return jr.call(e)==jr.call(t)}return!1},Wr=Object.prototype.hasOwnProperty;var Xr=function(e,t,n,r,i,a){var o=1&n,s=yr(e),l=s.length;if(l!=yr(t).length&&!o)return!1;for(var u=l;u--;){var c=s[u];if(!(o?c in t:Wr.call(t,c)))return!1}var f=a.get(e),d=a.get(t);if(f&&d)return f==t&&d==e;var h=!0;a.set(e,t),a.set(t,e);for(var p=o;++u<l;){var v=e[c=s[u]],m=t[c];if(r)var g=o?r(m,v,c,t,e,a):r(v,m,c,e,t,a);if(!(void 0===g?v===m||i(v,m,n,r,a):g)){h=!1;break}p||(p="constructor"==c)}if(h&&!p){var y=e.constructor,A=t.constructor;y==A||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof A&&A instanceof A||(h=!1)}return a.delete(e),a.delete(t),h},Yr="[object Arguments]",Kr="[object Array]",Jr="[object Object]",qr=Object.prototype.hasOwnProperty;var $r=function(e,t,n,r,i,a){var o=H(e),s=H(t),l=o?Kr:Pr(e),u=s?Kr:Pr(t),c=(l=l==Yr?Jr:l)==Jr,f=(u=u==Yr?Jr:u)==Jr,d=l==u;if(d&&hn(e)){if(!hn(t))return!1;o=!0,c=!1}if(d&&!c)return a||(a=new fr),o||_n(e)?Gr(e,t,n,r,i,a):Vr(e,t,l,n,r,i,a);if(!(1&n)){var h=c&&qr.call(e,"__wrapped__"),p=f&&qr.call(t,"__wrapped__");if(h||p){var v=h?e.value():e,m=p?t.value():t;return a||(a=new fr),i(v,m,n,r,a)}}return!!d&&(a||(a=new fr),Xr(e,t,n,r,i,a))};var ei=function e(t,n,r,i,a){return t===n||(null==t||null==n||!ie(t)&&!ie(n)?t!==t&&n!==n:$r(t,n,r,i,e,a))};var ti=function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var l=(s=n[i])[0],u=e[l],c=s[1];if(o&&s[2]){if(void 0===u&&!(l in e))return!1}else{var f=new fr;if(r)var d=r(u,c,l,e,t,f);if(!(void 0===d?ei(c,u,3,r,f):d))return!1}}return!0};var ni=function(e){return e===e&&!ue(e)};var ri=function(e){for(var t=In(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ni(i)]}return t};var ii=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var ai=function(e){var t=ri(e);return 1==t.length&&t[0][2]?ii(t[0][0],t[0][1]):function(n){return n===e||ti(n,e,t)}};var oi=function(e,t){return null!=e&&t in Object(e)};var si=function(e,t,n){for(var r=-1,i=(t=ft(t,e)).length,a=!1;++r<i;){var o=dt(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&Jt(i)&&_t(o,i)&&(H(e)||ln(e))};var li=function(e,t){return null!=e&&si(e,t,oi)};var ui=function(e,t){return le(e)&&ni(t)?ii(dt(e),t):function(n){var r=pt(n,e);return void 0===r&&r===t?li(n,e):ei(t,r,3)}};var ci=function(e){return function(t){return null==t?void 0:t[e]}};var fi=function(e){return function(t){return ht(t,e)}};var di=function(e){return le(e)?ci(dt(e)):fi(e)};var hi=function(e){return"function"==typeof e?e:null==e?Yt:"object"==typeof e?H(e)?ui(e[0],e[1]):ai(e):di(e)};var pi=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}();var vi=function(e,t){return e&&pi(e,t,In)},mi=function(){return W.Date.now()},gi=Math.max,yi=Math.min;var Ai=function(e,t,n){var r,i,a,o,s,l,u=0,c=!1,f=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=r,a=i;return r=i=void 0,u=t,o=e.apply(a,n)}function p(e){var n=e-l;return void 0===l||n>=t||n<0||f&&e-u>=a}function v(){var e=mi();if(p(e))return m(e);s=setTimeout(v,function(e){var n=t-(e-l);return f?yi(n,a-(e-u)):n}(e))}function m(e){return s=void 0,d&&r?h(e):(r=i=void 0,o)}function g(){var e=mi(),n=p(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(v,t),c?h(e):o}(l);if(f)return clearTimeout(s),s=setTimeout(v,t),h(l)}return void 0===s&&(s=setTimeout(v,t)),o}return t=jt(t)||0,ue(n)&&(c=!!n.leading,a=(f="maxWait"in n)?gi(jt(n.maxWait)||0,t):a,d="trailing"in n?!!n.trailing:d),g.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},g.flush=function(){return void 0===s?o:m(mi())},g};var bi=function(e){return"number"==typeof e&&e==Xt(e)};var xi=function(e,t){var n={};return t=hi(t,3),vi(e,(function(e,r,i){yt(n,r,t(e,r,i))})),n},_i=Math.floor;var wi=function(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=_i(t/2))&&(e+=e)}while(t);return n},Si=ci("length"),Ei="\\ud800-\\udfff",Ci="["+Ei+"]",Ti="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Mi="\\ud83c[\\udffb-\\udfff]",Ii="[^"+Ei+"]",ki="(?:\\ud83c[\\udde6-\\uddff]){2}",Bi="[\\ud800-\\udbff][\\udc00-\\udfff]",Ri="(?:"+Ti+"|"+Mi+")"+"?",Pi="[\\ufe0e\\ufe0f]?",Di=Pi+Ri+("(?:\\u200d(?:"+[Ii,ki,Bi].join("|")+")"+Pi+Ri+")*"),Li="(?:"+[Ii+Ti+"?",Ti,ki,Bi,Ci].join("|")+")",Ni=RegExp(Mi+"(?="+Mi+")|"+Li+Di,"g");var Fi=function(e){for(var t=Ni.lastIndex=0;Ni.test(e);)++t;return t};var Oi=function(e){return Gn(e)?Fi(e):Si(e)},Ui=Math.ceil;var zi=function(e,t){var n=(t=void 0===t?" ":ut(t)).length;if(n<2)return n?wi(t,e):t;var r=wi(t,Ui(e/Oi(t)));return Gn(t)?Un(nr(r),0,e).join(""):r.slice(0,e)};var Gi=function(e,t,n){e=ct(e);var r=(t=Xt(t))?Oi(e):0;return t&&r<t?zi(t-r,n)+e:e},Qi=function(){"use strict";function e(t){d(this,e),R(this,"_cache",new vt),R(this,"_keepHotUntapDebounce"),Q(this,t)}return h(e,[{key:"type",get:function(){return"Theatre_SheetObject_PublicAPI"}},{key:"props",get:function(){return G(this).propsP}},{key:"sheet",get:function(){return G(this).sheet.publicApi}},{key:"project",get:function(){return G(this).sheet.project.publicApi}},{key:"address",get:function(){return C({},G(this).address)}},{key:"_valuesPrism",value:function(){var e=this;return this._cache.get("_valuesPrism",(function(){var t=G(e);return(0,Nt.prism)((function(){return(0,Nt.val)(t.getValues().getValue())}))}))}},{key:"onValuesChange",value:function(e,t){return Us(this._valuesPrism(),e,t)}},{key:"value",get:function(){var e=this,t=this._valuesPrism();if(!t.isHot){null!=this._keepHotUntapDebounce&&this._keepHotUntapDebounce.flush();var n=t.keepHot();this._keepHotUntapDebounce=Ai((function(){n(),e._keepHotUntapDebounce=void 0}),5e3)}return this._keepHotUntapDebounce&&this._keepHotUntapDebounce(),t.getValue()}},{key:"initialValue",set:function(e){G(this).setInitialValue(e)}}]),e}();function Zi(e){return"compound"===e.type||"enum"===e.type}function Hi(e,t){if(e){var n=c(t),r=n[0],i=n.slice(1);if(void 0===r)return e;if(Zi(e))return Hi("enum"===e.type?e.cases[r]:e.props[r],i)}}new WeakMap;var ji,Vi,Wi,Xi,Yi,Ki,Ji,qi,$i=function(){"use strict";function e(t,n,r){d(this,e),this.sheet=t,this.template=n,this.nativeObject=r,R(this,"$$isPointerToPrismProvider",!0),R(this,"address"),R(this,"publicApi"),R(this,"_initialValue",new Lt.Atom({})),R(this,"_cache",new vt),R(this,"_logger"),R(this,"_internalUtilCtx"),this._logger=t._logger.named("SheetObject",n.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=T(C({},n.address),{sheetInstanceId:t.address.sheetInstanceId}),this.publicApi=new Qi(this)}return h(e,[{key:"type",get:function(){return"Theatre_SheetObject"}},{key:"getValues",value:function(){var e=this;return this._cache.get("getValues()",(function(){return(0,Lt.prism)((function(){var t=Rt((0,Lt.val)(e.template.getDefaultValues()),(0,Lt.val)(e._initialValue.pointer),Lt.prism.memo("withInitialCache",(function(){return new WeakMap}),[])),n=Rt(t,(0,Lt.val)(e.template.getStaticValues()),Lt.prism.memo("withStatics",(function(){return new WeakMap}),[])),r=Lt.prism.memo("seq",(function(){return e.getSequencedValues()}),[]),i=Lt.prism.memo("withSeqsCache",(function(){return new WeakMap}),[]);return function(e,t){var n=Dt.prism.memo(e,(function(){return new Dt.Atom(t)}),[]);return n.set(t),n}("finalAtom",n=Rt(n,(0,Lt.val)((0,Lt.val)(r)),i)).pointer}))}))}},{key:"getValueByPointer",value:function(e){var t=(0,Lt.val)(this.getValues()),n=(0,Lt.getPointerParts)(e).path;return(0,Lt.val)(Pt(t,n))}},{key:"pointerToPrism",value:function(e){var t=this,n=(0,Lt.getPointerParts)(e).path;return(0,Lt.prism)((function(){var e=(0,Lt.val)(t.getValues());return(0,Lt.val)(Pt(e,n))}))}},{key:"getSequencedValues",value:function(){var e=this;return(0,Lt.prism)((function(){var t=Lt.prism.memo("tracksToProcess",(function(){return e.template.getArrayOfValidSequenceTracks()}),[]),n=(0,Lt.val)(t),r=new Lt.Atom({}),i=(0,Lt.val)(e.template.configPointer);return Lt.prism.effect("processTracks",(function(){var t,a=[],o=p(n);try{var s=function(){var n=t.value,o=n.trackId,s=n.pathToProp,l=e._trackIdToPrism(o),u=Hi(i,s),c=u.deserializeAndSanitize,f=u.interpolate,d=function(){var e=l.getValue();if(!e)return r.setByPointer((function(e){return Pt(e,s)}),void 0);var t=c(e.left),n=void 0===t?u.default:t;if(void 0===e.right)return r.setByPointer((function(e){return Pt(e,s)}),n);var i=c(e.right),a=void 0===i?u.default:i;return r.setByPointer((function(e){return Pt(e,s)}),f(n,a,e.progression))},h=l.onStale(d);d(),a.push(h)};for(o.s();!(t=o.n()).done;)s()}catch(l){o.e(l)}finally{o.f()}return function(){for(var e=0,t=a;e<t.length;e++){(0,t[e])()}}}),[i].concat(u(n))),r.pointer}))}},{key:"_trackIdToPrism",value:function(e){var t=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[e],n=this.sheet.getSequence().positionPrism;return It(this._internalUtilCtx,t,n)}},{key:"propsP",get:function(){var e=this;return this._cache.get("propsP",(function(){return(0,Lt.pointer)({root:e,path:[]})}))}},{key:"validateValue",value:function(e,t){}},{key:"setInitialValue",value:function(e){this.validateValue(this.propsP,e),this._initialValue.set(e)}}]),e}();function ea(e){return function(t,n){return e(t,n())}}(Vi=ji||(ji={}))[Vi.GENERAL=1]="GENERAL",Vi[Vi.TODO=2]="TODO",Vi[Vi.TROUBLESHOOTING=4]="TROUBLESHOOTING",(Xi=Wi||(Wi={}))[Xi.INTERNAL=8]="INTERNAL",Xi[Xi.DEV=16]="DEV",Xi[Xi.PUBLIC=32]="PUBLIC",(Ki=Yi||(Yi={}))[Ki.TRACE=64]="TRACE",Ki[Ki.DEBUG=128]="DEBUG",Ki[Ki.WARN=256]="WARN",Ki[Ki.ERROR=512]="ERROR",(qi=Ji||(Ji={}))[qi.ERROR_PUBLIC=545]="ERROR_PUBLIC",qi[qi.ERROR_DEV=529]="ERROR_DEV",qi[qi._HMM=524]="_HMM",qi[qi._TODO=522]="_TODO",qi[qi._ERROR=521]="_ERROR",qi[qi.WARN_PUBLIC=289]="WARN_PUBLIC",qi[qi.WARN_DEV=273]="WARN_DEV",qi[qi._KAPOW=268]="_KAPOW",qi[qi._WARN=265]="_WARN",qi[qi.DEBUG_DEV=145]="DEBUG_DEV",qi[qi._DEBUG=137]="_DEBUG",qi[qi.TRACE_DEV=81]="TRACE_DEV",qi[qi._TRACE=73]="_TRACE";var ta={_hmm:na(524),_todo:na(522),_error:na(521),errorDev:na(529),errorPublic:na(545),_kapow:na(268),_warn:na(265),warnDev:na(273),warnPublic:na(289),_debug:na(137),debugDev:na(145),_trace:na(73),traceDev:na(81)};function na(e){return Object.freeze({audience:ra(e,8)?"internal":ra(e,16)?"dev":"public",category:ra(e,4)?"troubleshooting":ra(e,2)?"todo":"general",level:ra(e,512)?512:ra(e,256)?256:ra(e,128)?128:64})}function ra(e,t){return(e&t)===t}function ia(e,t){return(32===(32&t)||(16===(16&t)?e.dev:8===(8&t)&&e.internal))&&e.min<=t}var aa={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named:function(e,t,n){return this.create({names:[].concat(u(e.names),[{name:t,key:n}])})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed:function(e){if(e.length<5)return e;var t=e.replace(this.collapseOnRE,"");return this.cssMemo.has(t)||this.cssMemo.set(t,this.css(e)),t},css:function(e){var t,n,r,i,a=this.cssMemo.get(e);if(a)return a;var o="color:".concat(null!=(n=null==(t=this.color)?void 0:t.call(this,e))?n:"hsl(".concat((e.charCodeAt(0)+e.charCodeAt(e.length-1))%360,", 100%, 60%)"));return(null==(r=this.bold)?void 0:r.test(e))&&(o+=";font-weight:600"),(null==(i=this.italic)?void 0:i.test(e))&&(o+=";font-style:italic"),this.cssMemo.set(e,o),o}}};function oa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console,t=T(C({},aa),{includes:C({},aa.includes)}),n={styled:ua.bind(t,e),noStyle:ca.bind(t,e)},r=la.bind(t);function i(){return t.loggingConsoleStyle&&t.loggerConsoleStyle?n.styled:n.noStyle}return t.create=i(),{configureLogger:function(e){var n;"console"===e?(t.loggerConsoleStyle=aa.loggerConsoleStyle,t.create=i()):"console"===e.type?(t.loggerConsoleStyle=null!=(n=e.style)?n:aa.loggerConsoleStyle,t.create=i()):"keyed"===e.type?(t.creatExt=function(t){return e.keyed(t.names)},t.create=r):"named"===e.type&&(t.creatExt=sa.bind(null,e.named),t.create=r)},configureLogging:function(e){var n,r,a,o,s;t.includes.dev=null!=(n=e.dev)?n:aa.includes.dev,t.includes.internal=null!=(r=e.internal)?r:aa.includes.internal,t.includes.min=null!=(a=e.min)?a:aa.includes.min,t.include=null!=(o=e.include)?o:aa.include,t.loggingConsoleStyle=null!=(s=e.consoleStyle)?s:aa.loggingConsoleStyle,t.create=i()},getLogger:function(){return t.create({names:[]})}}}function sa(e,t){var n,r=[],i=p(t.names);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.name,s=a.key;r.push(null==s?o:"".concat(o," (").concat(s,")"))}}catch(l){i.e(l)}finally{i.f()}return e(r)}function la(e){var t=C(C({},this.includes),this.include(e)),n=this.filtered,r=this.named.bind(this,e),i=this.creatExt(e),a=ia(t,524),o=ia(t,522),s=ia(t,521),l=ia(t,529),u=ia(t,545),c=ia(t,265),f=ia(t,268),d=ia(t,273),h=ia(t,289),p=ia(t,137),v=ia(t,145),m=ia(t,73),g=ia(t,81),y=a?i.error.bind(i,ta._hmm):n.bind(e,524),A=o?i.error.bind(i,ta._todo):n.bind(e,522),b=s?i.error.bind(i,ta._error):n.bind(e,521),x=l?i.error.bind(i,ta.errorDev):n.bind(e,529),_=u?i.error.bind(i,ta.errorPublic):n.bind(e,545),w=f?i.warn.bind(i,ta._kapow):n.bind(e,268),S=c?i.warn.bind(i,ta._warn):n.bind(e,265),E=d?i.warn.bind(i,ta.warnDev):n.bind(e,273),T=h?i.warn.bind(i,ta.warnPublic):n.bind(e,273),M=p?i.debug.bind(i,ta._debug):n.bind(e,137),I=v?i.debug.bind(i,ta.debugDev):n.bind(e,145),k=m?i.trace.bind(i,ta._trace):n.bind(e,73),B=g?i.trace.bind(i,ta.traceDev):n.bind(e,81),R={_hmm:y,_todo:A,_error:b,errorDev:x,errorPublic:_,_kapow:w,_warn:S,warnDev:E,warnPublic:T,_debug:M,debugDev:I,_trace:k,traceDev:B,lazy:{_hmm:a?ea(y):y,_todo:o?ea(A):A,_error:s?ea(b):b,errorDev:l?ea(x):x,errorPublic:u?ea(_):_,_kapow:f?ea(w):w,_warn:c?ea(S):S,warnDev:d?ea(E):E,warnPublic:h?ea(T):T,_debug:p?ea(M):M,debugDev:v?ea(I):I,_trace:m?ea(k):k,traceDev:g?ea(B):B},named:r,utilFor:{internal:function(){return{debug:R._debug,error:R._error,warn:R._warn,trace:R._trace,named:function(e,t){return R.named(e,t).utilFor.internal()}}},dev:function(){return{debug:R.debugDev,error:R.errorDev,warn:R.warnDev,trace:R.traceDev,named:function(e,t){return R.named(e,t).utilFor.dev()}}},public:function(){return{error:R.errorPublic,warn:R.warnPublic,debug:function(e,t){R._warn('(public "debug" filtered out) '.concat(e),t)},trace:function(e,t){R._warn('(public "trace" filtered out) '.concat(e),t)},named:function(e,t){return R.named(e,t).utilFor.public()}}}}};return R}function ua(e,t){for(var n=C(C({},this.includes),this.include(t)),r=[],i="",a=0;a<t.names.length;a++){var o=t.names[a],s=o.name,l=o.key;if(i+=" %c".concat(s),r.push(this.style.css(s)),null!=l){var u="%c#".concat(l);i+=u,r.push(this.style.css(u))}}var c=this.filtered,f=this.named.bind(this,t),d=[i].concat(r);return fa(c,t,n,e,d,function(e){for(var t=e.slice(0),n=1;n<t.length;n++)t[n]+=";background-color:#e0005a;padding:2px;color:white";return t}(d),f)}function ca(e,t){for(var n=C(C({},this.includes),this.include(t)),r="",i=0;i<t.names.length;i++){var a=t.names[i],o=a.name,s=a.key;r+=" ".concat(o),null!=s&&(r+="#".concat(s))}var l=[r];return fa(this.filtered,t,n,e,l,l,this.named.bind(this,t))}function fa(e,t,n,r,i,a,o){var s,l,c,f,d,h,p,v,m,g,y,A,b,x=ia(n,524),_=ia(n,522),w=ia(n,521),S=ia(n,529),E=ia(n,545),C=ia(n,265),T=ia(n,268),M=ia(n,273),I=ia(n,289),k=ia(n,137),B=ia(n,145),R=ia(n,73),P=ia(n,81),D=x?(s=r.error).bind.apply(s,[r].concat(u(i))):e.bind(t,524),L=_?(l=r.error).bind.apply(l,[r].concat(u(i))):e.bind(t,522),N=w?(c=r.error).bind.apply(c,[r].concat(u(i))):e.bind(t,521),F=S?(f=r.error).bind.apply(f,[r].concat(u(i))):e.bind(t,529),O=E?(d=r.error).bind.apply(d,[r].concat(u(i))):e.bind(t,545),U=T?(h=r.warn).bind.apply(h,[r].concat(u(a))):e.bind(t,268),z=C?(p=r.warn).bind.apply(p,[r].concat(u(i))):e.bind(t,265),G=M?(v=r.warn).bind.apply(v,[r].concat(u(i))):e.bind(t,273),Q=I?(m=r.warn).bind.apply(m,[r].concat(u(i))):e.bind(t,273),Z=k?(g=r.info).bind.apply(g,[r].concat(u(i))):e.bind(t,137),H=B?(y=r.info).bind.apply(y,[r].concat(u(i))):e.bind(t,145),j=R?(A=r.debug).bind.apply(A,[r].concat(u(i))):e.bind(t,73),V=P?(b=r.debug).bind.apply(b,[r].concat(u(i))):e.bind(t,81),W={_hmm:D,_todo:L,_error:N,errorDev:F,errorPublic:O,_kapow:U,_warn:z,warnDev:G,warnPublic:Q,_debug:Z,debugDev:H,_trace:j,traceDev:V,lazy:{_hmm:x?ea(D):D,_todo:_?ea(L):L,_error:w?ea(N):N,errorDev:S?ea(F):F,errorPublic:E?ea(O):O,_kapow:T?ea(U):U,_warn:C?ea(z):z,warnDev:M?ea(G):G,warnPublic:I?ea(Q):Q,_debug:k?ea(Z):Z,debugDev:B?ea(H):H,_trace:R?ea(j):j,traceDev:P?ea(V):V},named:o,utilFor:{internal:function(){return{debug:W._debug,error:W._error,warn:W._warn,trace:W._trace,named:function(e,t){return W.named(e,t).utilFor.internal()}}},dev:function(){return{debug:W.debugDev,error:W.errorDev,warn:W.warnDev,trace:W.traceDev,named:function(e,t){return W.named(e,t).utilFor.dev()}}},public:function(){return{error:W.errorPublic,warn:W.warnPublic,debug:function(e,t){W._warn('(public "debug" filtered out) '.concat(e),t)},trace:function(e,t){W._warn('(public "trace" filtered out) '.concat(e),t)},named:function(e,t){return W.named(e,t).utilFor.public()}}}}};return W}var da=oa(console,{_debug:function(){},_error:function(){}});da.configureLogging({dev:!0,min:Yi.TRACE});var ha=da.getLogger().named("Theatre.js (default logger)").utilFor.dev(),pa=new WeakMap;function va(e,t,n){for(var r=0,i=Object.entries(t.props);r<i.length;r++){var a=f(i[r],2),o=a[0],s=a[1];if(!Zi(s)){var l=[].concat(u(e),[o]);n.set(JSON.stringify(l),n.size),ma(l,s,n)}}for(var c=0,d=Object.entries(t.props);c<d.length;c++){var h=f(d[c],2),p=h[0],v=h[1];if(Zi(v)){var m=[].concat(u(e),[p]);n.set(JSON.stringify(m),n.size),ma(m,v,n)}}}function ma(e,t,n){if("compound"===t.type)va(e,t,n);else{if("enum"===t.type)throw new Error("Enums aren't supported yet");n.set(JSON.stringify(e),n.size)}}var ga=function(){"use strict";function e(t,n,r,i,a){d(this,e),this.sheetTemplate=t,R(this,"address"),R(this,"type","Theatre_SheetObjectTemplate"),R(this,"_config"),R(this,"_temp_actions_atom"),R(this,"_cache",new vt),R(this,"project"),this.address=T(C({},t.address),{objectKey:n}),this._config=new mt.Atom(i),this._temp_actions_atom=new mt.Atom(a),this.project=t.project}return h(e,[{key:"staticConfig",get:function(){return this._config.get()}},{key:"configPointer",get:function(){return this._config.pointer}},{key:"_temp_actions",get:function(){return this._temp_actions_atom.get()}},{key:"_temp_actionsPointer",get:function(){return this._temp_actions_atom.pointer}},{key:"createInstance",value:function(e,t,n){return this._config.set(n),new $i(e,this,t)}},{key:"reconfigure",value:function(e){this._config.set(e)}},{key:"_temp_setActions",value:function(e){this._temp_actions_atom.set(e)}},{key:"getDefaultValues",value:function(){var e=this;return this._cache.get("getDefaultValues()",(function(){return(0,mt.prism)((function(){return function(e){return Ct(e)}((0,mt.val)(e.configPointer))}))}))}},{key:"getStaticValues",value:function(){var e=this;return this._cache.get("getStaticValues",(function(){return(0,mt.prism)((function(){var t,n=e.sheetTemplate.project.pointers.historic.sheetsById[e.address.sheetId],r=null!=(t=(0,mt.val)(n.staticOverrides.byObject[e.address.objectKey]))?t:{};return(0,mt.val)(e.configPointer).deserializeAndSanitize(r)||{}}))}))}},{key:"getArrayOfValidSequenceTracks",value:function(){var e=this;return this._cache.get("getArrayOfValidSequenceTracks",(function(){return(0,mt.prism)((function(){var t=e.project.pointers.historic.sheetsById[e.address.sheetId],n=(0,mt.val)(t.sequence.tracksByObject[e.address.objectKey].trackIdByPropPath);if(!n)return Z;var r=[];if(!n)return Z;for(var i=(0,mt.val)(e.configPointer),a=0,o=Object.entries(n);a<o.length;a++){var s=f(o[a],2),l=s[0],u=s[1],c=ya(l);if(c){var d=Hi(i,c);d&&!Zi(d)&&r.push({pathToProp:c,trackId:u})}}var h=function(e){var t=pa.get(e);if(t)return t;var n=new Map;return pa.set(e,n),va([],e,n),n}(i);return r.sort((function(e,t){var n=e.pathToProp,r=t.pathToProp;return h.get(JSON.stringify(n))>h.get(JSON.stringify(r))?1:-1})),0===r.length?Z:r}))}))}},{key:"getMapOfValidSequenceTracks_forStudio",value:function(){var e=this;return this._cache.get("getMapOfValidSequenceTracks_forStudio",(function(){return(0,mt.prism)((function(){var t,n=(0,mt.val)(e.getArrayOfValidSequenceTracks()),r={},i=p(n);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=a.pathToProp,s=a.trackId;St(r,o,s)}}catch(l){i.e(l)}finally{i.f()}return r}))}))}},{key:"getDefaultsAtPointer",value:function(e){var t=(0,mt.getPointerParts)(e).path,n=function(e,t){return 0===t.length?e:pt(e,t)}(this.getDefaultValues().getValue(),t);return n}}]),e}();function ya(e){try{return JSON.parse(e)}catch(t){return void ha.warn("property ".concat(JSON.stringify(e)," cannot be parsed. Skipping."))}}var Aa=B(n(2114));B(L());var ba=function(e){"use strict";o(n,e);var t=s(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n)}(l(Error)),xa=function(e){"use strict";o(n,e);var t=s(n);function n(){return d(this,n),t.apply(this,arguments)}return h(n)}(ba),_a=B(n(2114)),wa=B(n(2114)),Sa=B(n(2114)),Ea=B(n(2114));function Ca(){var e,t,n=new Promise((function(n,i){e=function(e){n(e),r.status="resolved"},t=function(e){i(e),r.status="rejected"}})),r={resolve:e,reject:t,promise:n,status:"pending"};return r}var Ta=function(){},Ma=B(n(2114)),Ia=function(){"use strict";function e(){d(this,e),R(this,"_stopPlayCallback",Ta),R(this,"_state",new Ma.Atom({position:0,playing:!1})),R(this,"statePointer"),this.statePointer=this._state.pointer}return h(e,[{key:"destroy",value:function(){}},{key:"pause",value:function(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=Ta}},{key:"gotoPosition",value:function(e){this._updatePositionInState(e)}},{key:"_updatePositionInState",value:function(e){this._state.setByPointer((function(e){return e.position}),e)}},{key:"getCurrentPosition",value:function(){return this._state.get().position}},{key:"playing",get:function(){return this._state.get().playing},set:function(e){this._state.setByPointer((function(e){return e.playing}),e)}},{key:"play",value:function(e,t,n,r,i){var a=this;this.playing&&this.pause(),this.playing=!0;var o=t[1]-t[0],s=this.getCurrentPosition();s<t[0]||s>t[1]?"normal"===r||"alternate"===r?this._updatePositionInState(t[0]):"reverse"!==r&&"alternateReverse"!==r||this._updatePositionInState(t[1]):"normal"===r||"alternate"===r?s===t[1]&&this._updatePositionInState(t[0]):s===t[0]&&this._updatePositionInState(t[1]);var l=Ca(),u=i.time,c=o*e,f=this.getCurrentPosition()-t[0];"reverse"!==r&&"alternateReverse"!==r||(f=t[1]-this.getCurrentPosition());var d=function(i){var s=Math.max(i-u,0)/1e3,d=Math.min(s*n+f,c);if(d!==c){var p=Math.floor(d/o),v=d/o%1*o;if("normal"!==r)if("reverse"===r)v=o-v;else{var m=p%2===0;"alternate"===r?m||(v=o-v):m&&(v=o-v)}a._updatePositionInState(v+t[0]),h()}else{if("normal"===r)a._updatePositionInState(t[1]);else if("reverse"===r)a._updatePositionInState(t[0]);else{var g=(e-1)%2===0;"alternate"===r?g?a._updatePositionInState(t[1]):a._updatePositionInState(t[0]):g?a._updatePositionInState(t[0]):a._updatePositionInState(t[1])}a.playing=!1,l.resolve(!0)}};this._stopPlayCallback=function(){i.offThisOrNextTick(d),i.offNextTick(d),a.playing&&l.resolve(!1)};var h=function(){return i.onNextTick(d)};return i.onThisOrNextTick(d),l.promise}},{key:"playDynamicRange",value:function(e,t){var n=this;this.playing&&this.pause(),this.playing=!0;var r=Ca(),i=e.keepHot();r.promise.then(i,i);var a=t.time,o=function(t){var r=Math.max(t-a,0);a=t;var i=r/1e3,o=n.getCurrentPosition(),l=e.getValue();if(o<l[0]||o>l[1])n.gotoPosition(l[0]);else{var u=o+i;u>l[1]&&(u=l[0]+(u-l[1])),n.gotoPosition(u)}s()};this._stopPlayCallback=function(){t.offThisOrNextTick(o),t.offNextTick(o),r.resolve(!1)};var s=function(){return t.onNextTick(o)};return t.onThisOrNextTick(o),r.promise}}]),e}(),ka=B(n(2114)),Ba="__TheatreJS_CoreBundle",Ra=function(e){return function(){for(var t,n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];switch(e){case"success":case"info":ha.debug(i.slice(0,2).join("\n"));break;case"warning":ha.warn(i.slice(0,2).join("\n"))}return"undefined"!==typeof window?null==(n=window.__TheatreJS_Notifications)?void 0:(t=n.notify)[e].apply(t,i):void 0}},Pa={warning:Ra("warning"),success:Ra("success"),info:Ra("info"),error:Ra("error")};"undefined"!==typeof window&&(window.addEventListener("error",(function(e){Pa.error("An error occurred","<pre>".concat(e.message,"</pre>\n\nSee **console** for details."))})),window.addEventListener("unhandledrejection",(function(e){Pa.error("An error occurred","<pre>".concat(e.reason,"</pre>\n\nSee **console** for details."))})));var Da,La=function(){"use strict";function e(t,n,r){d(this,e),this._decodedBuffer=t,this._audioContext=n,this._nodeDestination=r,R(this,"_mainGain"),R(this,"_state",new ka.Atom({position:0,playing:!1})),R(this,"statePointer"),R(this,"_stopPlayCallback",Ta),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}return h(e,[{key:"playDynamicRange",value:function(e,t){var n=this,r=Ca();this._playing&&this.pause(),this._playing=!0;var i=void 0,a=function(){null==i||i(),i=n._loopInRange(e.getValue(),t).stop},o=e.onStale(a);return a(),this._stopPlayCallback=function(){null==i||i(),o(),r.resolve(!1)},r.promise}},{key:"_loopInRange",value:function(e,t){var n=this,r=this.getCurrentPosition(),i=e[1]-e[0];(r<e[0]||r>e[1]||r===e[1])&&this._updatePositionInState(e[0]),r=this.getCurrentPosition();var a=this._audioContext.createBufferSource();a.buffer=this._decodedBuffer,a.connect(this._mainGain),a.playbackRate.value=1,a.loop=!0,a.loopStart=e[0],a.loopEnd=e[1];var o=t.time,s=r-e[0];a.start(0,r);var l=function(t){var r=(1*(Math.max(t-o,0)/1e3)+s)/i%1*i;n._updatePositionInState(r+e[0]),u()},u=function(){return t.onNextTick(l)};t.onThisOrNextTick(l);return{stop:function(){a.stop(),a.disconnect(),t.offThisOrNextTick(l),t.offNextTick(l)}}}},{key:"_playing",get:function(){return this._state.get().playing},set:function(e){this._state.setByPointer((function(e){return e.playing}),e)}},{key:"destroy",value:function(){}},{key:"pause",value:function(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=Ta}},{key:"gotoPosition",value:function(e){this._updatePositionInState(e)}},{key:"_updatePositionInState",value:function(e){this._state.reduce((function(t){return T(C({},t),{position:e})}))}},{key:"getCurrentPosition",value:function(){return this._state.get().position}},{key:"play",value:function(e,t,n,r,i){var a=this;this._playing&&this.pause(),this._playing=!0;var o=this.getCurrentPosition(),s=t[1]-t[0];if("normal"!==r)throw new xa('Audio-controlled sequences can only be played in the "normal" direction. \''.concat(r,"' given."));(o<t[0]||o>t[1]||o===t[1])&&this._updatePositionInState(t[0]),o=this.getCurrentPosition();var l=Ca(),u=this._audioContext.createBufferSource();u.buffer=this._decodedBuffer,u.connect(this._mainGain),u.playbackRate.value=n,e>1e3&&(Pa.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(e,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),e=1e3),e>1&&(u.loop=!0,u.loopStart=t[0],u.loopEnd=t[1]);var c=i.time,f=o-t[0],d=s*e;u.start(0,o,d-f);var h=function(e){var r=Math.max(e-c,0)/1e3,i=Math.min(r*n+f,d);if(i!==d){var o=i/s%1*s;a._updatePositionInState(o+t[0]),v()}else a._updatePositionInState(t[1]),a._playing=!1,p(),l.resolve(!0)},p=function(){u.stop(),u.disconnect()};this._stopPlayCallback=function(){p(),i.offThisOrNextTick(h),i.offNextTick(h),a._playing&&l.resolve(!1)};var v=function(){return i.onNextTick(h)};return i.onThisOrNextTick(h),l.promise}}]),e}(),Na=B(n(2114)),Fa=0;function Oa(e){var t,n=new Na.Ticker({onActive:function(){var t;null==(t=null==e?void 0:e.start)||t.call(e)},onDormant:function(){var t;null==(t=null==e?void 0:e.stop)||t.call(e)}}),r={tick:function(e){n.tick(e)},id:Fa++,name:null!=(t=null==e?void 0:e.name)?t:"CustomRafDriver-".concat(Fa),type:"Theatre_RafDriver_PublicAPI"};return Q(r,{type:"Theatre_RafDriver_PrivateAPI",publicApi:r,ticker:n,start:null==e?void 0:e.start,stop:null==e?void 0:e.stop}),r}function Ua(){return Da||function(e){if(Da)throw new Error("`setCoreRafDriver()` is already called.");var t=G(e);Da=t}(function(){var e=null,t=Oa({name:"DefaultCoreRafDriver",start:function(){"undefined"!==typeof window?e=window.requestAnimationFrame((function n(r){t.tick(r),e=window.requestAnimationFrame(n)})):(t.tick(0),setTimeout((function(){return t.tick(1)}),0))},stop:function(){"undefined"!==typeof window&&null!==e&&window.cancelAnimationFrame(e)}});return t}()),Da}function za(){return Ua().ticker}var Ga=function(){"use strict";function e(t){d(this,e),Q(this,t)}return h(e,[{key:"type",get:function(){return"Theatre_Sequence_PublicAPI"}},{key:"play",value:function(e){var t=G(this);if(t._project.isReady()){var n=(null==e?void 0:e.rafDriver)?G(e.rafDriver).ticker:za();return t.play(null!=e?e:{},n)}var r=Ca();return r.resolve(!0),r.promise}},{key:"pause",value:function(){G(this).pause()}},{key:"position",get:function(){return G(this).position},set:function(e){G(this).position=e}},{key:"attachAudio",value:function(){var e=a(i().mark((function e(t){var n,r,a,o,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qa(t);case 2:return n=e.sent,r=n.audioContext,a=n.destinationNode,o=n.decodedBuffer,s=n.gainNode,l=new La(o,r,s),G(this).replacePlaybackController(l),e.abrupt("return",{audioContext:r,destinationNode:a,decodedBuffer:o,gainNode:s});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pointer",get:function(){return G(this).pointer}}]),e}();function Qa(e){return Za.apply(this,arguments)}function Za(){return Za=a(i().mark((function e(t){var n,r,o,s,l,u,c,d,h,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){return(r=a(i().mark((function e(){var n,r,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.source instanceof AudioBuffer)){e.next=2;break}return e.abrupt("return",t.source);case 2:if(n=Ca(),"string"===typeof t.source){e.next=5;break}throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");case 5:return e.prev=5,e.next=8,fetch(t.source);case 8:r=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),console.error(e.t0),new Error("Could not fetch '".concat(t.source,"'. Network error logged above."));case 15:return e.prev=15,e.next=18,r.arrayBuffer();case 18:a=e.sent,e.next=25;break;case 21:throw e.prev=21,e.t1=e.catch(15),console.error(e.t1),new Error("Could not read '".concat(t.source,"' as an arrayBuffer."));case 25:return e.next=27,o;case 27:return e.sent.decodeAudioData(a,n.resolve,n.reject),e.prev=29,e.next=32,n.promise;case 32:s=e.sent,e.next=39;break;case 35:throw e.prev=35,e.t2=e.catch(29),console.error(e.t2),new Error("Could not decode ".concat(t.source," as an audio file."));case 39:return e.abrupt("return",s);case 40:case"end":return e.stop()}}),e,null,[[5,11],[15,21],[29,35]])})))).apply(this,arguments)},n=function(){return r.apply(this,arguments)},o=function(){if(t.audioContext)return Promise.resolve(t.audioContext);var e=new AudioContext;return"running"===e.state||"undefined"===typeof window?Promise.resolve(e):new Promise((function(t){var n=function(){e.resume()},r=["mousedown","keydown","touchstart"],i={capture:!0,passive:!1};r.forEach((function(e){window.addEventListener(e,n,i)})),e.addEventListener("statechange",(function(){"running"===e.state&&(r.forEach((function(e){window.removeEventListener(e,n,i)})),t(e))}))}))}(),s=n(),e.next=7,Promise.all([o,s]);case 7:return l=e.sent,u=f(l,2),c=u[0],d=u[1],h=t.destinationNode||c.destination,(p=c.createGain()).connect(h),e.abrupt("return",{audioContext:c,decodedBuffer:d,gainNode:p,destinationNode:h});case 15:case"end":return e.stop()}}),e)}))),Za.apply(this,arguments)}var Ha=function(){"use strict";function e(t,n,r,i,a){var o=this;d(this,e),this._project=t,this._sheet=n,this._lengthD=r,this._subUnitsPerUnitD=i,R(this,"address"),R(this,"publicApi"),R(this,"_playbackControllerBox"),R(this,"_prismOfStatePointer"),R(this,"_positionD"),R(this,"_positionFormatterD"),R(this,"_playableRangeD"),R(this,"pointer",(0,Sa.pointer)({root:this,path:[]})),R(this,"$$isPointerToPrismProvider",!0),R(this,"_logger"),R(this,"closestGridPosition",(function(e){var t=1/o.subUnitsPerUnit;return parseFloat((Math.round(e/t)*t).toFixed(3))})),this._logger=t._logger.named("Sheet",n.address.sheetId).named("Instance",n.address.sheetInstanceId),this.address=T(C({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new Ga(this),this._playbackControllerBox=new wa.Atom(null!=a?a:new Ia),this._prismOfStatePointer=(0,Ea.prism)((function(){return o._playbackControllerBox.prism.getValue().statePointer})),this._positionD=(0,Ea.prism)((function(){var e=o._prismOfStatePointer.getValue();return(0,Ea.val)(e.position)})),this._positionFormatterD=(0,Ea.prism)((function(){var e=(0,Ea.val)(o._subUnitsPerUnitD);return new ja(e)}))}return h(e,[{key:"pointerToPrism",value:function(e){var t=this,n=(0,_a.getPointerParts)(e).path;if(0===n.length)return(0,Ea.prism)((function(){return{length:(0,Ea.val)(t.pointer.length),playing:(0,Ea.val)(t.pointer.playing),position:(0,Ea.val)(t.pointer.position)}}));if(n.length>1)return(0,Ea.prism)((function(){}));var r=f(n,1)[0];return"length"===r?this._lengthD:"position"===r?this._positionD:"playing"===r?(0,Ea.prism)((function(){return(0,Ea.val)(t._prismOfStatePointer.getValue().playing)})):(0,Ea.prism)((function(){}))}},{key:"positionFormatter",get:function(){return this._positionFormatterD.getValue()}},{key:"prismOfStatePointer",get:function(){return this._prismOfStatePointer}},{key:"length",get:function(){return this._lengthD.getValue()}},{key:"positionPrism",get:function(){return this._positionD}},{key:"position",get:function(){return this._playbackControllerBox.get().getCurrentPosition()},set:function(e){var t=e;this.pause(),t>this.length&&(t=this.length);var n=this.length;this._playbackControllerBox.get().gotoPosition(t>n?n:t)}},{key:"subUnitsPerUnit",get:function(){return this._subUnitsPerUnitD.getValue()}},{key:"positionSnappedToGrid",get:function(){return this.closestGridPosition(this.position)}},{key:"getDurationCold",value:function(){return this._lengthD.getValue()}},{key:"playing",get:function(){return(0,Ea.val)(this._playbackControllerBox.get().statePointer.playing)}},{key:"_makeRangeFromSequenceTemplate",value:function(){var e=this;return(0,Ea.prism)((function(){return[0,(0,Ea.val)(e._lengthD)]}))}},{key:"playDynamicRange",value:function(e,t){return this._playbackControllerBox.get().playDynamicRange(e,t)}},{key:"play",value:function(){var e=a(i().mark((function e(t,n){var r,a,o,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.length,a=t&&t.range?t.range:[0,r],e.next=12;break;case 5:if(!(a[0]>=r)){e.next=7;break}throw new xa("Argument conf.range[0] in sequence.play(conf) cannot be longer than the duration of the sequence, which is ".concat(r,"s. ").concat(JSON.stringify(a[0])," given."));case 7:if(!("number"!==typeof a[1]||a[1]<=0)){e.next=9;break}throw new xa("Argument conf.range[1] in sequence.play(conf) must be a number larger than zero. ".concat(JSON.stringify(a[1])," given."));case 9:if(a[1]>r&&(Pa.warning("Couldn't play sequence in given range","Your animation will still play until the end of the sequence, however the argument `conf.range[1]` given in `sequence.play(conf)` (".concat(JSON.stringify(a[1]),"s) is longer than the duration of the sequence (").concat(r,"s).\n\nTo fix this, either set `conf.range[1]` to be less the duration of the sequence, or adjust the sequence duration in the UI."),[{url:"https://www.theatrejs.com/docs/latest/manual/sequences",title:"Sequences"},{url:"https://www.theatrejs.com/docs/latest/manual/sequences",title:"Playback API"}]),a[1]=r),!(a[1]<=a[0])){e.next=12;break}throw new xa("Argument conf.range[1] in sequence.play(conf) must be larger than conf.range[0]. ".concat(JSON.stringify(a)," given."));case 12:o=t&&"number"===typeof t.iterationCount?t.iterationCount:1,e.next=16;break;case 16:s=t&&"undefined"!==typeof t.rate?t.rate:1,e.next=22;break;case 20:if(!(s<0)){e.next=22;break}throw new xa("Argument conf.rate in sequence.play(conf) must be a number larger than 0. ".concat(JSON.stringify(s)," given. If you want the animation to play backwards, try setting conf.direction to 'reverse' or 'alternateReverse'."));case 22:l=t&&t.direction?t.direction:"normal",e.next=26;break;case 26:return e.next=28,this._play(o,[a[0],a[1]],s,l,n);case 28:return e.abrupt("return",e.sent);case 29:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_play",value:function(e,t,n,r,i){return this._playbackControllerBox.get().play(e,t,n,r,i)}},{key:"pause",value:function(){this._playbackControllerBox.get().pause()}},{key:"replacePlaybackController",value:function(e){this.pause();var t=this._playbackControllerBox.get();this._playbackControllerBox.set(e);var n=t.getCurrentPosition();t.destroy(),e.gotoPosition(n)}}]),e}(),ja=function(){"use strict";function e(t){d(this,e),this._fps=t}return h(e,[{key:"formatSubUnitForGrid",value:function(e){var t=e%1,n=1/this._fps;return Math.round(t/n)+"f"}},{key:"formatFullUnitForGrid",value:function(e){var t=e,n="";t>=Xa&&(n+=Math.floor(t/Xa)+"h",t%=Xa);t>=Wa&&(n+=Math.floor(t/Wa)+"m",t%=Wa);t>=Va&&(n+=Math.floor(t/Va)+"s",t%=Va);var r=1/this._fps;t>=r&&(n+=Math.floor(t/r)+"f",t%=r);return 0===n.length?"0s":n}},{key:"formatForPlayhead",value:function(e){var t=e,n="";if(t>=Xa){var r=Math.floor(t/Xa);n+=Gi(r.toString(),2,"0")+"h",t%=Xa}if(t>=Wa){var i=Math.floor(t/Wa);n+=Gi(i.toString(),2,"0")+"m",t%=Wa}else n.length>0&&(n+="00m");if(t>=Va){var a=Math.floor(t/Va);n+=Gi(a.toString(),2,"0")+"s",t%=Va}else n+="00s";var o=1/this._fps;if(t>=o){var s=Math.round(t/o);n+=Gi(s.toString(),2,"0")+"f",t%=o}else if(t/o>.98){n+=Gi(1..toString(),2,"0")+"f",t%=o}else n+="00f";return 0===n.length?"00s00f":n}},{key:"formatBasic",value:function(e){return e.toFixed(2)+"s"}}]),e}(),Va=1,Wa=60*Va,Xa=60*Wa,Ya={};function Ka(e,t){return e.length<=t?e:e.substr(0,t-3)+"..."}k(Ya,{boolean:function(){return mo},compound:function(){return ao},image:function(){return oo},number:function(){return lo},rgba:function(){return ho},string:function(){return Ao},stringLiteral:function(){return xo}});var Ja=function(e){return"string"===typeof e?'string("'.concat(Ka(e,10),'")'):"number"===typeof e?"number(".concat(Ka(String(e),10),")"):null===e?"null":void 0===e?"undefined":"boolean"===typeof e?String(e):Array.isArray(e)?"array":"object"===typeof e?"object":"unknown"};function qa(e){return T(C({},e),{toString:function(){return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).removeAlphaIfOpaque,n=void 0!==t&&t,r=(255*e.a|256).toString(16).slice(1),i=(255*e.r|256).toString(16).slice(1)+(255*e.g|256).toString(16).slice(1)+(255*e.b|256).toString(16).slice(1)+(n&&"ff"===r?"":r);return"#".concat(i)}(this,{removeAlphaIfOpaque:!0})}})}function $a(e){function t(e){return e>=.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e}return function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=f(e,2),n=t[0],r=t[1];return[n,ir(r,0,1)]})))}({r:t(e.r),g:t(e.g),b:t(e.b),a:e.a})}function eo(e){function t(e){return e>=.04045?Math.pow((e+.055)/1.055,2.4):e/12.92}return{r:t(e.r),g:t(e.g),b:t(e.b),a:e.a}}function to(e){var t=.4122214708*e.r+.5363325363*e.g+.0514459929*e.b,n=.2119034982*e.r+.6806995451*e.g+.1073969566*e.b,r=.0883024619*e.r+.2817188376*e.g+.6299787005*e.b,i=Math.cbrt(t),a=Math.cbrt(n),o=Math.cbrt(r);return{L:.2104542553*i+.793617785*a-.0040720468*o,a:1.9779984951*i-2.428592205*a+.4505937099*o,b:.0259040371*i+.7827717662*a-.808675766*o,alpha:e.a}}var no=Symbol("TheatrePropType_Basic");function ro(e){return"object"===typeof e&&!!e&&"TheatrePropType"===e[no]}function io(e){if("number"===typeof e)return lo(e);if("boolean"===typeof e)return mo(e);if("string"===typeof e)return Ao(e);if("object"===typeof e&&e){if(ro(e))return e;if(Fn(e))return ao(e);throw new xa("This value is not a valid prop type: ".concat(Ja(e)))}throw new xa("This value is not a valid prop type: ".concat(Ja(e)))}var ao=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=function(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var i=r[n],a=e[i];ro(a)?t[i]=a:t[i]=io(a)}return t}(e),a=new WeakMap;return r(t={type:"compound",props:i,valueType:null},no,"TheatrePropType"),r(t,"label",n.label),r(t,"default",xi(i,(function(e){return e.default}))),r(t,"deserializeAndSanitize",(function(e){if("object"===typeof e&&e){if(a.has(e))return a.get(e);for(var t={},n=!1,r=0,o=Object.entries(i);r<o.length;r++){var s=f(o[r],2),l=s[0],u=s[1];if(Object.prototype.hasOwnProperty.call(e,l)){var c=u.deserializeAndSanitize(e[l]);null!=c&&(n=!0,t[l]=c)}}return a.set(e,t),n?t:void 0}})),t},oo=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t={type:"image",default:{type:"image",id:e},valueType:null},no,"TheatrePropType"),r(t,"label",n.label),r(t,"interpolate",(function(e,t,r){var i;return{type:"image",id:(null!=(i=n.interpolate)?i:yo)(e.id,t.id,r)}})),r(t,"deserializeAndSanitize",so),t},so=function(e){if(e){var t=!0;if("string"===typeof e.id||[null,void 0].includes(e.id)||(t=!1),"image"!==e.type&&(t=!1),t)return e}},lo=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return T(C(r({type:"number",valueType:0,default:e},no,"TheatrePropType"),n||{}),{label:n.label,nudgeFn:null!=(t=n.nudgeFn)?t:_o,nudgeMultiplier:"number"===typeof n.nudgeMultiplier?n.nudgeMultiplier:void 0,interpolate:fo,deserializeAndSanitize:uo(n.range)})},uo=function(e){return e?function(t){if("number"===typeof t&&isFinite(t))return ir(t,e[0],e[1])}:co},co=function(e){return"number"===typeof e&&isFinite(e)?e:void 0},fo=function(e,t,n){return e+n*(t-e)},ho=function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{r:0,g:0,b:0,a:1},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={},a=0,o=["r","g","b","a"];a<o.length;a++){var s=o[a];i[s]=Math.min(Math.max(t[s],0),1)}return e={type:"rgba",valueType:null,default:qa(i)},r(e,no,"TheatrePropType"),r(e,"label",n.label),r(e,"interpolate",vo),r(e,"deserializeAndSanitize",po),e},po=function(e){if(e){for(var t=!0,n=0,r=["r","g","b","a"];n<r.length;n++){var i=r[n];Object.prototype.hasOwnProperty.call(e,i)&&"number"===typeof e[i]||(t=!1)}if(t){for(var a={},o=0,s=["r","g","b","a"];o<s.length;o++){var l=s[o];a[l]=Math.min(Math.max(e[l],0),1)}return qa(a)}}},vo=function(e,t,n){var r=to(eo(e)),i=to(eo(t));return qa($a(function(e){var t=e.L+.3963377774*e.a+.2158037573*e.b,n=e.L-.1055613458*e.a-.0638541728*e.b,r=e.L-.0894841775*e.a-1.291485548*e.b,i=t*t*t,a=n*n*n,o=r*r*r;return{r:4.0767416621*i-3.3077115913*a+.2309699292*o,g:-1.2684380046*i+2.6097574011*a-.3413193965*o,b:-.0041960863*i-.7034186147*a+1.707614701*o,a:e.alpha}}({L:(1-n)*r.L+n*i.L,a:(1-n)*r.a+n*i.a,b:(1-n)*r.b+n*i.b,alpha:(1-n)*r.alpha+n*i.alpha})))},mo=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t={type:"boolean",default:e,valueType:null},no,"TheatrePropType"),r(t,"label",i.label),r(t,"interpolate",null!=(n=i.interpolate)?n:yo),r(t,"deserializeAndSanitize",go),t},go=function(e){return"boolean"===typeof e?e:void 0};function yo(e){return e}var Ao=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t={type:"string",default:e,valueType:null},no,"TheatrePropType"),r(t,"label",i.label),r(t,"interpolate",null!=(n=i.interpolate)?n:yo),r(t,"deserializeAndSanitize",bo),t};function bo(e){return"string"===typeof e?e:void 0}function xo(e,t){var n,i,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n={type:"stringLiteral",default:e,valuesAndLabels:C({},t)},r(n,no,"TheatrePropType"),r(n,"valueType",null),r(n,"as",null!=(i=o.as)?i:"menu"),r(n,"label",o.label),r(n,"interpolate",null!=(a=o.interpolate)?a:yo),r(n,"deserializeAndSanitize",(function(e){if("string"===typeof e)return Object.prototype.hasOwnProperty.call(t,e)?e:void 0})),n}var _o=function(e){var t,n=e.config,r=e.deltaX,i=e.deltaFraction,a=e.magnitude,o=n.range;return n.nudgeMultiplier||!o||o.includes(1/0)||o.includes(-1/0)?r*a*(null!=(t=n.nudgeMultiplier)?t:1):i*(o[1]-o[0])*a};function wo(e,t){var n=e.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");return n}B(N()),new WeakMap;var So,Eo,Co=function(){"use strict";function e(t){d(this,e),Q(this,t)}return h(e,[{key:"type",get:function(){return"Theatre_Sheet_PublicAPI"}},{key:"object",value:function(e,t,n){var r=G(this),i=wo(e),a=r.getObject(i),o=null==n?void 0:n.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(a)return o&&a.template._temp_setActions(o),a.publicApi;var s=ao(t),l=r.createObject(i,null,s,o);return l.publicApi}},{key:"sequence",get:function(){return G(this).getSequence().publicApi}},{key:"project",get:function(){return G(this).project.publicApi}},{key:"address",get:function(){return C({},G(this).address)}},{key:"detachObject",value:function(e){var t=G(this),n=wo(e,'sheet.deleteObject("'.concat(e,'")'));if(!t.getObject(n))return Pa.warning("Couldn't delete object \"".concat(n,'"'),'There is no object with key "'.concat(n,'".\n\nTo fix this, make sure you are calling `sheet.deleteObject("').concat(n,'")` with the correct key.')),void console.warn('Object key "'.concat(n,'" does not exist.'));t.deleteObject(n)}}]),e}(),To=B(n(2114)),Mo=function(){"use strict";function e(t,n){d(this,e),this.template=t,this.instanceId=n,R(this,"_objects",new To.Atom({})),R(this,"_sequence"),R(this,"address"),R(this,"publicApi"),R(this,"project"),R(this,"objectsP",this._objects.pointer),R(this,"type","Theatre_Sheet"),R(this,"_logger"),this._logger=t.project._logger.named("Sheet",n),this._logger._trace("creating sheet"),this.project=t.project,this.address=T(C({},t.address),{sheetInstanceId:this.instanceId}),this.publicApi=new Co(this)}return h(e,[{key:"createObject",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.template.getObjectTemplate(e,t,n,r).createInstance(this,t,n);return this._objects.setByPointer((function(t){return t[e]}),i),i}},{key:"getObject",value:function(e){return this._objects.get()[e]}},{key:"deleteObject",value:function(e){this._objects.reduce((function(t){var n=C({},t);return delete n[e],n}))}},{key:"getSequence",value:function(){var e=this;if(!this._sequence){var t=(0,To.prism)((function(){var t=(0,To.val)(e.project.pointers.historic.sheetsById[e.address.sheetId].sequence.length);return Io(t)})),n=(0,To.prism)((function(){var t=(0,To.val)(e.project.pointers.historic.sheetsById[e.address.sheetId].sequence.subUnitsPerUnit);return ko(t)}));this._sequence=new Ha(this.template.project,this,t,n)}return this._sequence}}]),e}(),Io=function(e){return"number"===typeof e&&isFinite(e)&&e>0?e:10},ko=function(e){return"number"===typeof e&&bi(e)&&e>=1&&e<=1e3?e:30},Bo=function(){"use strict";function e(t,n){d(this,e),this.project=t,R(this,"type","Theatre_SheetTemplate"),R(this,"address"),R(this,"_instances",new Aa.Atom({})),R(this,"instancesP",this._instances.pointer),R(this,"_objectTemplates",new Aa.Atom({})),R(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=T(C({},t.address),{sheetId:n})}return h(e,[{key:"getInstance",value:function(e){var t=this._instances.get()[e];return t||(t=new Mo(this,e),this._instances.setByPointer((function(t){return t[e]}),t)),t}},{key:"getObjectTemplate",value:function(e,t,n,r){var i=this._objectTemplates.get()[e];return i||(i=new ga(this,e,t,n,r),this._objectTemplates.setByPointer((function(t){return t[e]}),i)),i}}]),e}(),Ro=B(n(2114)),Po=B(n(2114)),Do=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function Lo(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function No(e){return!!e&&!!e[As]}function Fo(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===bs}(e)||Array.isArray(e)||!!e[ys]||!!e.constructor[ys]||Qo(e)||Zo(e))}function Oo(e,t,n){void 0===n&&(n=!1),0===Uo(e)?(n?Object.keys:xs)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Uo(e){var t=e[As];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Qo(e)?2:Zo(e)?3:0}function zo(e,t){return 2===Uo(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Go(e,t,n){var r=Uo(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function Qo(e){return ps&&e instanceof Map}function Zo(e){return vs&&e instanceof Set}function Ho(e){return e.o||e.t}function jo(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=_s(e);delete t[As];for(var n=xs(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Vo(e,t){return void 0===t&&(t=!1),Xo(e)||No(e)||!Fo(e)||(Uo(e)>1&&(e.set=e.add=e.clear=e.delete=Wo),Object.freeze(e),t&&Oo(e,(function(e,t){return Vo(t,!0)}),!0)),e}function Wo(){Lo(2)}function Xo(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Yo(e){var t=ws[e];return t||Lo(18,e),t}function Ko(){return Eo}function Jo(e,t){t&&(Yo("Patches"),e.u=[],e.s=[],e.v=t)}function qo(e){$o(e),e.p.forEach(ts),e.p=null}function $o(e){e===Eo&&(Eo=e.l)}function es(e){return Eo={p:[],l:Eo,h:e,m:!0,_:0}}function ts(e){var t=e[As];0===t.i||1===t.i?t.j():t.O=!0}function ns(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||Yo("ES5").S(t,e,r),r?(n[As].P&&(qo(t),Lo(4)),Fo(e)&&(e=rs(t,e),t.l||as(t,e)),t.u&&Yo("Patches").M(n[As],e,t.u,t.s)):e=rs(t,n,[]),qo(t),t.u&&t.v(t.u,t.s),e!==gs?e:void 0}function rs(e,t,n){if(Xo(t))return t;var r=t[As];if(!r)return Oo(t,(function(i,a){return is(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return as(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=jo(r.k):r.o;Oo(3===r.i?new Set(i):i,(function(t,a){return is(e,r,i,t,a,n)})),as(e,i,!1),n&&e.u&&Yo("Patches").R(r,n,e.u,e.s)}return r.o}function is(e,t,n,r,i,a){if(No(i)){var o=rs(e,i,a&&t&&3!==t.i&&!zo(t.D,r)?a.concat(r):void 0);if(Go(n,r,o),!No(o))return;e.m=!1}if(Fo(i)&&!Xo(i)){if(!e.h.F&&e._<1)return;rs(e,i),t&&t.A.l||as(e,i)}}function as(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&Vo(t,n)}function os(e,t){var n=e[As];return(n?Ho(n):e)[t]}function ss(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ls(e){e.P||(e.P=!0,e.l&&ls(e.l))}function us(e){e.o||(e.o=jo(e.t))}function cs(e,t,n){var r=Qo(t)?Yo("MapSet").N(t,n):Zo(t)?Yo("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Ko(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=Ss;n&&(i=[r],a=Es);var o=Proxy.revocable(i,a),s=o.revoke,l=o.proxy;return r.k=l,r.j=s,l}(t,n):Yo("ES5").J(t,n);return(n?n.A:Ko()).p.push(r),r}function fs(e){return No(e)||Lo(22,e),function e(t){if(!Fo(t))return t;var n,r=t[As],i=Uo(t);if(r){if(!r.P&&(r.i<4||!Yo("ES5").K(r)))return r.t;r.I=!0,n=ds(t,i),r.I=!1}else n=ds(t,i);return Oo(n,(function(t,i){r&&function(e,t){return 2===Uo(e)?e.get(t):e[t]}(r.t,t)===i||Go(n,t,e(i))})),3===i?new Set(n):n}(e)}function ds(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return jo(e)}var hs="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),ps="undefined"!=typeof Map,vs="undefined"!=typeof Set,ms="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,gs=hs?Symbol.for("immer-nothing"):((So={})["immer-nothing"]=!0,So),ys=hs?Symbol.for("immer-draftable"):"__$immer_draftable",As=hs?Symbol.for("immer-state"):"__$immer_state",bs=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),xs="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,_s=Object.getOwnPropertyDescriptors||function(e){var t={};return xs(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},ws={},Ss={get:function(e,t){if(t===As)return e;var n=Ho(e);if(!zo(n,t))return function(e,t,n){var r,i=ss(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!Fo(r)?r:r===os(e.t,t)?(us(e),e.o[t]=cs(e.A.h,r,e)):r},has:function(e,t){return t in Ho(e)},ownKeys:function(e){return Reflect.ownKeys(Ho(e))},set:function(e,t,n){var r=ss(Ho(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=os(Ho(e),t),a=null==i?void 0:i[As];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,i)&&(void 0!==n||zo(e.t,t)))return!0;us(e),ls(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==os(e.t,t)||t in e.t?(e.D[t]=!1,us(e),ls(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Ho(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Lo(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Lo(12)}},Es={};Oo(Ss,(function(e,t){Es[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Es.deleteProperty=function(e,t){return Ss.deleteProperty.call(this,e[0],t)},Es.set=function(e,t,n){return Ss.set.call(this,e[0],t,n,e[0])};var Cs=function(){function e(e){var t=this;this.g=ms,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&Lo(6),void 0!==r&&"function"!=typeof r&&Lo(7),Fo(e)){var s=es(t),l=cs(t,e,void 0),u=!0;try{o=n(l),u=!1}finally{u?qo(s):$o(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return Jo(s,r),ns(e,s)}),(function(e){throw qo(s),e})):(Jo(s,r),ns(o,s))}if(!e||"object"!=typeof e){if((o=n(e))===gs)return;return void 0===o&&(o=e),t.F&&Vo(o,!0),o}Lo(21,e)},this.produceWithPatches=function(e,n){return"function"==typeof e?function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))}:[t.produce(e,n,(function(e,t){r=e,i=t})),r,i];var r,i},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Fo(e)||Lo(8),No(e)&&(e=fs(e));var t=es(this),n=cs(this,e,void 0);return n[As].C=!0,$o(t),n},t.finishDraft=function(e,t){var n=(e&&e[As]).A;return Jo(n,t),ns(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!ms&&Lo(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var i=Yo("Patches").$;return No(e)?i(e,t):this.produce(e,(function(e){return i(e,t.slice(n+1))}))},e}(),Ts=new Cs,Ms=(Ts.produce,Ts.produceWithPatches.bind(Ts),Ts.setAutoFreeze.bind(Ts),Ts.setUseProxies.bind(Ts),Ts.applyPatches.bind(Ts),Ts.createDraft.bind(Ts),Ts.finishDraft.bind(Ts),{currentProjectStateDefinitionVersion:"0.4.0"});function Is(e,t,n){return ks.apply(this,arguments)}function ks(){return(ks=a(i().mark((function e(t,n,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Do(0);case 2:t.transaction((function(e){var t,i=e.drafts,a=n.address.projectId;function o(){i.ephemeral.coreByProject[a].loadingState={type:"loaded"}}i.ephemeral.coreByProject[a]={lastExportedObject:null,loadingState:{type:"loading"}},i.ahistoric.coreByProject[a]={ahistoricStuff:""};var s,l,u,c=null==(No(s=i.historic)||Lo(23,s),t=s[As].t)?void 0:t.coreByProject[n.address.projectId];c?r&&-1==c.revisionHistory.indexOf(r.revisionHistory[0])?(l=r,i.ephemeral.coreByProject[a].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:l}):o():r?(u=r,i.ephemeral.coreByProject[a].loadingState={type:"loaded"},i.historic.coreByProject[a]=u):(i.ephemeral.coreByProject[a].loadingState={type:"loaded"},i.historic.coreByProject[a]={sheetsById:{},definitionVersion:Ms.currentProjectStateDefinitionVersion,revisionHistory:[]})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bs(){}function Rs(e){var t,n,r=(null==(t=null==e?void 0:e.logging)?void 0:t.internal)?null!=(n=e.logging.min)?n:Yi.WARN:1/0,i=r<=Yi.DEBUG,a=r<=Yi.ERROR,o=oa(void 0,{_debug:i?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):Bs,_error:a?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):Bs});if(e){var s=e.logger,l=e.logging;s&&o.configureLogger(s),l?o.configureLogging(l):o.configureLogging({dev:!1})}return o.getLogger().named("Theatre")}var Ps=function(){"use strict";function e(t){var n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;d(this,e),this.config=i,this.publicApi=a,R(this,"pointers"),R(this,"_pointerProxies"),R(this,"address"),R(this,"_studioReadyDeferred"),R(this,"_assetStorageReadyDeferred"),R(this,"_readyPromise"),R(this,"_sheetTemplates",new Po.Atom({})),R(this,"sheetTemplatesP",this._sheetTemplates.pointer),R(this,"_studio"),R(this,"assetStorage"),R(this,"type","Theatre_Project"),R(this,"_logger"),this._logger=Rs({logging:{dev:!0}}).named("Project",t),this._logger.traceDev("creating project"),this.address={projectId:t};var o=new Po.Atom({ahistoric:{ahistoricStuff:""},historic:null!=(n=i.state)?n:{sheetsById:{},definitionVersion:Ms.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=Ca(),this.assetStorage={getAssetUrl:function(e){var t;return"".concat(null==(t=i.assets)?void 0:t.baseUrl,"/").concat(e)},createAsset:function(){throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new Ro.PointerProxy(o.pointer.historic),ahistoric:new Ro.PointerProxy(o.pointer.ahistoric),ephemeral:new Ro.PointerProxy(o.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},U.add(t,this),this._studioReadyDeferred=Ca(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then((function(){})),i.state?setTimeout((function(){r._studio||(r._studioReadyDeferred.resolve(void 0),r._assetStorageReadyDeferred.resolve(void 0),r._logger._trace("ready deferred resolved with no state"))}),0):"undefined"===typeof window?console.error('Argument config.state in Theatre.getProject("'.concat(t,"\", config) is empty. You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state")):setTimeout((function(){if(!r._studio)throw new Error('Argument config.state in Theatre.getProject("'.concat(t,'", config) is empty. This is fine while you are using @theatre/core along with @theatre/studio. But since @theatre/studio is not loaded, the state of project "').concat(t,"\" will be empty.\n\nTo fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state\n"))}),1e3)}return h(e,[{key:"attachToStudio",value:function(e){var t=this;if(this._studio){if(this._studio!==e)throw new Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId))}else this._studio=e,e.initialized.then(a(i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Is(e,t,t.config.state);case 2:t._pointerProxies.historic.setPointer(e.atomP.historic.coreByProject[t.address.projectId]),t._pointerProxies.ahistoric.setPointer(e.atomP.ahistoric.coreByProject[t.address.projectId]),t._pointerProxies.ephemeral.setPointer(e.atomP.ephemeral.coreByProject[t.address.projectId]),e.createAssetStorage(t,null==(r=t.config.assets)?void 0:r.baseUrl).then((function(e){t.assetStorage=e,t._assetStorageReadyDeferred.resolve(void 0)})),t._studioReadyDeferred.resolve(void 0);case 7:case"end":return n.stop()}}),n)}))))}},{key:"isAttachedToStudio",get:function(){return!!this._studio}},{key:"ready",get:function(){return this._readyPromise}},{key:"isReady",value:function(){return"resolved"===this._studioReadyDeferred.status&&"resolved"===this._assetStorageReadyDeferred.status}},{key:"getOrCreateSheet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=this._sheetTemplates.get()[e];return n||(n=new Bo(this,e),this._sheetTemplates.reduce((function(t){return T(C({},t),r({},e,n))}))),n.getInstance(t)}}]),e}(),Ds=function(){"use strict";function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,e),Q(this,new Ps(t,n,this))}return h(e,[{key:"type",get:function(){return"Theatre_Project_PublicAPI"}},{key:"ready",get:function(){return G(this).ready}},{key:"isReady",get:function(){return G(this).isReady()}},{key:"address",get:function(){return C({},G(this).address)}},{key:"getAssetUrl",value:function(e){if(this.isReady)return e.id?G(this).assetStorage.getAssetUrl(e.id):void 0;console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.")}},{key:"sheet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=wo(e);return G(this).getOrCreateSheet(n,t).publicApi}}]),e}(),Ls=(B(N()),B(n(2114))),Ns=B(n(2114));function Fs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=U.get(e);if(n)return n.publicApi;var r=Rs().named("Project",e);return t.state?(Os(e,t.state),r._debug("deep validated config.state on disk")):r._debug("no config.state"),new Ds(e,t)}var Os=function(e,t){!function(e,t){if(Array.isArray(t)||null==t||t.definitionVersion!==Ms.currentProjectStateDefinitionVersion)throw new xa("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(e),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))}(e,t)};function Us(e,t,n){var r=n?G(n).ticker:za();if((0,Ls.isPointer)(e))return(0,Ns.pointerToPrism)(e).onChange(r,t,!0);if((0,Ns.isPrism)(e))return e.onChange(r,t,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function zs(e){if((0,Ls.isPointer)(e))return(0,Ns.pointerToPrism)(e).getValue();throw new Error("Called val(p) where p is not a pointer.")}var Gs=function(){"use strict";function e(){d(this,e),R(this,"_studio")}return h(e,[{key:"type",get:function(){return"Theatre_CoreBundle"}},{key:"version",get:function(){return"0.6.0"}},{key:"getBitsForStudio",value:function(e,t){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=e,t({projectsP:U.atom.pointer.projects,privateAPI:G,coreExports:F,getCoreRafDriver:Ua})}}]),e}();!function(){if("undefined"==typeof window)return;var e=window[Ba];if("undefined"!==typeof e)throw"object"===typeof e&&e&&"string"===typeof e.version?new Error("It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:\n1. You might have two separate versions of Theatre.js in node_modules.\n2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.\n\nNote that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module."):new Error("The variable window.".concat(Ba," seems to be already set by a module other than @theatre/core."));var t=new Gs;window[Ba]=t;var n=window.__TheatreJS_StudioBundle;n&&null!==n&&"Theatre_StudioBundle"===n.type&&n.registerCoreBundle(t)}()},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,l,"next",e)}function l(e){r(o,i,a,s,l,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},5647:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9611),i=n(8814);function a(e,t,n){return a=(0,i.Z)()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&(0,r.Z)(a,n.prototype),a},a.apply(null,arguments)}},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(181);function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}},9388:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1120),i=n(8814),a=n(2963);function o(e){var t=(0,i.Z)();return function(){var n,i=(0,r.Z)(e);if(t){var o=(0,r.Z)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return(0,a.Z)(this,n)}}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},8301:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(8415);function i(){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=(0,r.Z)(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},i.apply(this,arguments)}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9611);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},2963:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1002),i=n(7326);function a(e,t){if(t&&("object"===(0,r.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},4165:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(){i=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof A?t:A,a=Object.create(i.prototype),s=new R(r||[]);return o(a,"_invoke",{value:M(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",v="suspendedYield",m="executing",g="completed",y={};function A(){}function b(){}function x(){}var _={};f(_,l,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(P([])));S&&S!==n&&a.call(S,l)&&(_=S);var E=x.prototype=A.prototype=Object.create(_);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,o,s,l){var u=h(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==(0,r.Z)(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(f).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,l)}))}l(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function M(t,n,r){var i=p;return function(a,o){if(i===m)throw new Error("Generator is already running");if(i===g){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=I(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var u=h(t,n,r);if("normal"===u.type){if(i=r.done?g:v,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=g,r.method="throw",r.arg=u.arg)}}}function I(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError((0,r.Z)(t)+" is not iterable")}return b.prototype=x,o(E,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},C(T.prototype),f(T.prototype,u,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(d(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(E),f(E,c,"Generator"),f(E,l,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;B(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var i=n(181),a=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||(0,i.Z)(e,t)||(0,a.Z)()}},8415:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1120);function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.Z)(e)););return e}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var i=n(9199),a=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},8664:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1120),i=n(9611);var a=n(5647);function o(e){var t="function"===typeof Map?new Map:void 0;return o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return(0,a.Z)(e,arguments,(0,r.Z)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),(0,i.Z)(o,e)},o(e)}},3037:function(e,t,n){"use strict";n.d(t,{EPV:function(){return Go},I7w:function(){return Fd},_wu:function(){return Kp},b33:function(){return de},eei:function(){return Rr},xr3:function(){return Pd},z$f:function(){return zm}});var r=n(4942),i=n(3433),a=n(8664),o=n(9439),s=n(2963),l=n(1413),u=n(4165),c=n(5861),f=n(7762),d=n(7326),h=n(8301),p=n(1120),v=n(5671),m=n(3144),g=n(136),y=n(9388),A=n(7760),b=n(1617),x,_,w,S=null,E=Object.defineProperty,C=function(e,t,n){return t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},T=function(e,t,n){return C(e,"symbol"!==typeof t?t+"":t,n),n},M=null,I=null,k=null,B=null,R=0,P=1,D=new A.Vector3,L=new A.Line3,N=new A.Plane,F=new A.Vector3,O=new A.Triangle,U=null,z=null,G=null,Q=null,Z=null,H=null,j=new A.Vector3,V=null,W=null,X=new A.Vector3,Y=new A.Quaternion,K=new A.Vector3,J=new A.Vector3,q=new A.Quaternion,$=new A.Vector3,ee=null,te=null,ne=null,re=null,ie=null,ae=null,oe=null,se=null,le,ue;function ce(){!1===document.hidden&&this.reset()}function fe(){var e;if(void 0!==le)return le;try{var t,n=document.createElement("canvas");return le=!(!window.WebGLRenderingContext||!(t=n.getContext("webgl"))),t&&(null==(e=t.getExtension("WEBGL_lose_context"))||e.loseContext()),le}catch(r){return le=!1}}function de(){var e;if(void 0!==ue)return ue;try{var t,n=document.createElement("canvas");return ue=!(!window.WebGL2RenderingContext||!(t=n.getContext("webgl2"))),t&&(null==(e=t.getExtension("WEBGL_lose_context"))||e.loseContext()),ue}catch(r){return ue=!1}}function he(){return ve(1)}function pe(){return ve(2)}function ve(e){var t={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},n=document.createElement("div");n.id="webglmessage",n.style.fontFamily="monospace",n.style.fontSize="13px",n.style.fontWeight="normal",n.style.textAlign="center",n.style.background="#fff",n.style.color="#000",n.style.padding="1.5em",n.style.width="400px",n.style.margin="5em auto 0";var r='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';return r=(r=t[e]?r.replace("$0","graphics card"):r.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[e]),n.innerHTML=r,n}var me=null,ge=null;function ye(){var e=3e6,t=new BufferAttribute(new Float32Array(e),3);t.usage=DynamicDrawUsage;var n=new BufferAttribute(new Float32Array(e),3);n.usage=DynamicDrawUsage;var r=new BufferAttribute(new Float32Array(e),3);r.usage=DynamicDrawUsage;var i=new BufferGeometry;i.setAttribute("position",t),i.setAttribute("normal",n),i.setAttribute("color",r),i.drawRange.count=0;var a=new MeshStandardMaterial({vertexColors:!0}),o=new Mesh(i,a);o.frustumCulled=!1;var s=new Vector3,l=new Vector3,u=new Vector3,c=new Vector3,f=new Color(16777215),d=1;function h(e,a,o,h){if(0!==e.distanceToSquared(a)){for(var p=i.drawRange.count,v=function(e){for(var t=2*Math.PI,n=[],r=.01*e,i=0;i<10;i++){var a=i/10*t;n.push(new Vector3(Math.sin(a)*r,Math.cos(a)*r,0))}return n}(d),m=0,g=v.length;m<g;m++){var y=v[m],A=v[(m+1)%g];s.copy(y).applyMatrix4(h).add(a),l.copy(A).applyMatrix4(h).add(a),u.copy(A).applyMatrix4(o).add(e),c.copy(y).applyMatrix4(o).add(e),s.toArray(t.array,3*(p+0)),l.toArray(t.array,3*(p+1)),c.toArray(t.array,3*(p+2)),l.toArray(t.array,3*(p+3)),u.toArray(t.array,3*(p+4)),c.toArray(t.array,3*(p+5)),s.copy(y).applyMatrix4(h).normalize(),l.copy(A).applyMatrix4(h).normalize(),u.copy(A).applyMatrix4(o).normalize(),c.copy(y).applyMatrix4(o).normalize(),s.toArray(n.array,3*(p+0)),l.toArray(n.array,3*(p+1)),c.toArray(n.array,3*(p+2)),l.toArray(n.array,3*(p+3)),u.toArray(n.array,3*(p+4)),c.toArray(n.array,3*(p+5)),f.toArray(r.array,3*(p+0)),f.toArray(r.array,3*(p+1)),f.toArray(r.array,3*(p+2)),f.toArray(r.array,3*(p+3)),f.toArray(r.array,3*(p+4)),f.toArray(r.array,3*(p+5)),p+=6}i.drawRange.count=p}}var p=new Vector3(0,1,0),v=new Vector3,m=new Vector3,g=new Matrix4,y=new Matrix4;var A=0;return{mesh:o,moveTo:function(e){v.copy(e),g.lookAt(m,v,p),m.copy(e),y.copy(g)},lineTo:function(e){v.copy(e),g.lookAt(m,v,p),h(v,m,g,y),m.copy(v),y.copy(g)},setSize:function(e){d=e},update:function(){var e=A,a=i.drawRange.count;e!==a&&(t.updateRange.offset=3*e,t.updateRange.count=3*(a-e),t.needsUpdate=!0,n.updateRange.offset=3*e,n.updateRange.count=3*(a-e),n.needsUpdate=!0,r.updateRange.offset=3*e,r.updateRange.count=3*(a-e),r.needsUpdate=!0,A=i.drawRange.count)}}}var Ae=null,be=null,xe=null,_e=new A.Vector3,we=new A.Matrix4,Se=new A.Matrix4,Ee=new A.Vector3,Ce=new A.Vector3,Te=null,Me=new A.Vector3,Ie=new A.Quaternion,ke=new A.Vector3,Be=null,Re=null,Pe=new A.Matrix4,De=new A.Matrix4,Le=null,Ne=null,Fe=null,Oe=null,Ue=null,ze=null,Ge=null,Qe=null,Ze=null,He=null,je=4,Ve=1024,We=4,Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new Float32Array(Ve*We*e*je),n=new DataTexture(t,Ve,We*e,RGBAFormat,FloatType);return n.wrapS=RepeatWrapping,n.wrapT=RepeatWrapping,n.magFilter=NearestFilter,n.needsUpdate=!0,n},Ye=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.floor(Ve*(We/4));t.arcLengthDivisions=r/2,t.updateArcLengths();for(var i=t.getSpacedPoints(r),a=t.computeFrenetFrames(r,!0),o=0;o<r;o++){var s=Math.floor(o/Ve),l=o%Ve,u=i[o];Ke(e,l,u.x,u.y,u.z,0+s+We*n),u=a.tangents[o],Ke(e,l,u.x,u.y,u.z,1+s+We*n),u=a.normals[o],Ke(e,l,u.x,u.y,u.z,2+s+We*n),u=a.binormals[o],Ke(e,l,u.x,u.y,u.z,3+s+We*n)}e.needsUpdate=!0},Ke=function(e,t,n,r,i,a){var o=e.image.data,s=je*Ve*a;o[t*je+s+0]=n,o[t*je+s+1]=r,o[t*je+s+2]=i,o[t*je+s+3]=1},Je=function(e){return{spineTexture:{value:e},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}}};function qe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e.__ok||(e.__ok=!0,e.onBeforeCompile=function(e){if(!e.__modified){e.__modified=!0,Object.assign(e.uniforms,t);var r="\n\t\tuniform sampler2D spineTexture;\n\t\tuniform float pathOffset;\n\t\tuniform float pathSegment;\n\t\tuniform float spineOffset;\n\t\tuniform float spineLength;\n\t\tuniform int flow;\n\n\t\tfloat textureLayers = ".concat(We*n,".;\n\t\tfloat textureStacks = ").concat(We/4,".;\n\n\t\t").concat(e.vertexShader,"\n\t\t").replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,"\n        void main() {\n        #include <beginnormal_vertex>\n\n        vec4 worldPos = modelMatrix * vec4(position, 1.);\n\n        bool bend = flow > 0;\n        float xWeight = bend ? 0. : 1.;\n\n        #ifdef USE_INSTANCING\n        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];\n        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];\n        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;\n        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;\n        #else\n        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;\n        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;\n        #endif\n\n        mt = mod(mt, textureStacks);\n        float rowOffset = floor(mt);\n\n        #ifdef USE_INSTANCING\n        rowOffset += instanceMatrix[3][1] * ".concat(We,".;\n        #endif\n\n        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;\n        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;\n        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;\n        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;\n        mat3 basis = mat3(a, b, c);\n\n        vec3 transformed = basis\n          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)\n          + spinePos;\n\n        vec3 transformedNormal = normalMatrix * (basis * objectNormal);\n\t\t\t")).replace("#include <project_vertex>","vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;");e.vertexShader=r}})}var $e=null,et=new A.Matrix4,tt=null,nt=function(e,t){return e[t]},rt=function(e,t){var n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),a={},o={},s=e[0].morphTargetsRelative,l=new A.BufferGeometry,u=0;if(e.forEach((function(e,c){var f=0;if(n!==(null!==e.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var d in e.attributes){if(!r.has(d))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+d+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[d]&&(a[d]=[]),a[d].push(e.attributes[d]),f++}if(f!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(s!==e.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var h in e.morphAttributes){if(!i.has(h))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[h]&&(o[h]=[]),o[h].push(e.morphAttributes[h])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(e.userData),t){var p;if(e.index)p=e.index.count;else{if(void 0===e.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;p=e.attributes.position.count}l.addGroup(u,p,c),u+=p}})),n){var c=0,f=[];e.forEach((function(e){for(var t=e.index,n=0;n<t.count;++n)f.push(t.getX(n)+c);c+=e.attributes.position.count})),l.setIndex(f)}for(var d in a){var h=it(a[d]);if(!h)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" attribute."),null;l.setAttribute(d,h)}for(var p in o){var v=o[p][0].length;if(0===v)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[p]=[];for(var m=0;m<v;++m){for(var g=[],y=0;y<o[p].length;++y)g.push(o[p][y][m]);var b=it(g);if(!b)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+p+" morphAttribute."),null;l.morphAttributes[p].push(b)}}return l},it=function(e){var t=void 0,n=void 0,r=void 0,i=0;if(e.forEach((function(e){return void 0===t&&(t=e.array.constructor),t!==e.array.constructor?(console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null):(void 0===n&&(n=e.itemSize),n!==e.itemSize?(console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null):(void 0===r&&(r=e.normalized),r!==e.normalized?(console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null):void(i+=e.array.length)))})),t&&n){var a=new t(i),o=0;return e.forEach((function(e){a.set(e.array,o),o+=e.array.length})),new A.BufferAttribute(a,n,r)}},at=function(e){for(var t=void 0,n=0,r=0,i=0,a=e.length;i<a;++i){var o=e[i];if(void 0===t&&(t=o.array.constructor),t!==o.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;n+=o.array.length,r+=o.itemSize}for(var s=new A.InterleavedBuffer(new t(n),r),l=0,u=[],c=["getX","getY","getZ","getW"],f=["setX","setY","setZ","setW"],d=0,h=e.length;d<h;d++){var p=e[d],v=p.itemSize,m=p.count,g=new A.InterleavedBufferAttribute(s,v,l,p.normalized);u.push(g),l+=v;for(var y=0;y<m;y++)for(var b=0;b<v;b++){nt(g,f[b])(y,nt(p,c[b])(y))}}return u};function ot(e){var t=0;for(var n in e.attributes){var r=e.getAttribute(n);t+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}var i=e.getIndex();return t+=i?i.count*i.itemSize*i.array.BYTES_PER_ELEMENT:0}function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;t=Math.max(t,Number.EPSILON);for(var n={},r=e.getIndex(),i=e.getAttribute("position"),a=r?r.count:i.count,o=0,s=Object.keys(e.attributes),l={},u={},c=[],f=["getX","getY","getZ","getW"],d=0,h=s.length;d<h;d++){var p=s[d];l[p]=[];var v=e.morphAttributes[p];v&&(u[p]=new Array(v.length).fill(0).map((function(){return[]})))}for(var m=Math.log10(1/t),g=Math.pow(10,m),y=0;y<a;y++){for(var b=r?r.getX(y):y,x="",_=0,w=s.length;_<w;_++)for(var S=s[_],E=e.getAttribute(S),C=E.itemSize,T=0;T<C;T++)x+="".concat(~~(E[f[T]](b)*g),",");if(x in n)c.push(n[x]);else{for(var M=0,I=s.length;M<I;M++)for(var k=s[M],B=e.getAttribute(k),R=e.morphAttributes[k],P=B.itemSize,D=l[k],L=u[k],N=0;N<P;N++){var F=f[N];if(D.push(B[F](b)),R)for(var O=0,U=R.length;O<U;O++)L[O].push(R[O][F](b))}n[x]=o,c.push(o),o++}}for(var z=e.clone(),G=0,Q=s.length;G<Q;G++){var Z=s[G],H=e.getAttribute(Z),j=new H.array.constructor(l[Z]),V=new A.BufferAttribute(j,H.itemSize,H.normalized);if(z.setAttribute(Z,V),Z in u)for(var W=0;W<u[Z].length;W++){var X=e.morphAttributes[Z][W],Y=new X.array.constructor(u[Z][W]),K=new A.BufferAttribute(Y,X.itemSize,X.normalized);z.morphAttributes[Z][W]=K}}return z.setIndex(c),z}function lt(e,t){if(t===A.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===A.TriangleFanDrawMode||t===A.TriangleStripDrawMode){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(n)if(t===A.TriangleFanDrawMode)for(var l=1;l<=o;l++)s.push(n.getX(0)),s.push(n.getX(l)),s.push(n.getX(l+1));else for(var u=0;u<o;u++)u%2===0?(s.push(n.getX(u)),s.push(n.getX(u+1)),s.push(n.getX(u+2))):(s.push(n.getX(u+2)),s.push(n.getX(u+1)),s.push(n.getX(u)));s.length/3!==o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c.clearGroups(),c}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}function ut(e){if(!0!==e.geometry.isBufferGeometry)return console.error("THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry."),null;var t=new A.Vector3,n=new A.Vector3,r=new A.Vector3,i=new A.Vector3,a=new A.Vector3,o=new A.Vector3,s=new A.Vector3,l=new A.Vector3,u=new A.Vector3;function c(e,c,f,d,h,p,v,m,g){t.fromBufferAttribute(f,p),n.fromBufferAttribute(f,v),r.fromBufferAttribute(f,m);var y=e.morphTargetInfluences;if(c.morphTargets&&d&&y){s.set(0,0,0),l.set(0,0,0),u.set(0,0,0);for(var A=0,b=d.length;A<b;A++){var x=y[A],_=d[A];0!==x&&(i.fromBufferAttribute(_,p),a.fromBufferAttribute(_,v),o.fromBufferAttribute(_,m),h?(s.addScaledVector(i,x),l.addScaledVector(a,x),u.addScaledVector(o,x)):(s.addScaledVector(i.sub(t),x),l.addScaledVector(a.sub(n),x),u.addScaledVector(o.sub(r),x)))}t.add(s),n.add(l),r.add(u)}e.isSkinnedMesh&&(e.boneTransform(p,t),e.boneTransform(v,n),e.boneTransform(m,r)),g[3*p+0]=t.x,g[3*p+1]=t.y,g[3*p+2]=t.z,g[3*v+0]=n.x,g[3*v+1]=n.y,g[3*v+2]=n.z,g[3*m+0]=r.x,g[3*m+1]=r.y,g[3*m+2]=r.z}var f,d,h,p,v,m,g,y,b,x=e.geometry,_=e.material,w=x.index,S=x.attributes.position,E=x.morphAttributes.position,C=x.morphTargetsRelative,T=x.attributes.normal,M=x.morphAttributes.position,I=x.groups,k=x.drawRange,B=new Float32Array(S.count*S.itemSize),R=new Float32Array(T.count*T.itemSize);if(null!==w)if(Array.isArray(_))for(p=0,m=I.length;p<m;p++)for(b=_[(y=I[p]).materialIndex],v=Math.max(y.start,k.start),g=Math.min(y.start+y.count,k.start+k.count);v<g;v+=3)c(e,b,S,E,C,f=w.getX(v),d=w.getX(v+1),h=w.getX(v+2),B),c(e,b,T,M,C,f,d,h,R);else for(p=Math.max(0,k.start),m=Math.min(w.count,k.start+k.count);p<m;p+=3)c(e,_,S,E,C,f=w.getX(p),d=w.getX(p+1),h=w.getX(p+2),B),c(e,_,T,M,C,f,d,h,R);else if(void 0!==S)if(Array.isArray(_))for(p=0,m=I.length;p<m;p++)for(b=_[(y=I[p]).materialIndex],v=Math.max(y.start,k.start),g=Math.min(y.start+y.count,k.start+k.count);v<g;v+=3)c(e,b,S,E,C,f=v,d=v+1,h=v+2,B),c(e,b,T,M,C,f,d,h,R);else for(p=Math.max(0,k.start),m=Math.min(S.count,k.start+k.count);p<m;p+=3)c(e,_,S,E,C,f=p,d=p+1,h=p+2,B),c(e,_,T,M,C,f,d,h,R);return{positionAttribute:S,normalAttribute:T,morphedPositionAttribute:new A.Float32BufferAttribute(B,3),morphedNormalAttribute:new A.Float32BufferAttribute(R,3)}}function ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/3,n=Math.cos(t),r=100*(1+1e-10),i=[new A.Vector3,new A.Vector3,new A.Vector3],a=new A.Vector3,o=new A.Vector3,s=new A.Vector3,l=new A.Vector3;function u(e){var t=~~(e.x*r),n=~~(e.y*r),i=~~(e.z*r);return"".concat(t,",").concat(n,",").concat(i)}for(var c=e.index?e.toNonIndexed():e,f=c.attributes.position,d={},h=0,p=f.count/3;h<p;h++){var v=3*h,m=i[0].fromBufferAttribute(f,v+0),g=i[1].fromBufferAttribute(f,v+1),y=i[2].fromBufferAttribute(f,v+2);a.subVectors(y,g),o.subVectors(m,g);for(var b=(new A.Vector3).crossVectors(a,o).normalize(),x=0;x<3;x++){var _=u(i[x]);_ in d||(d[_]=[]),d[_].push(b)}}for(var w=new Float32Array(3*f.count),S=new A.BufferAttribute(w,3,!1),E=0,C=f.count/3;E<C;E++){var T=3*E,M=i[0].fromBufferAttribute(f,T+0),I=i[1].fromBufferAttribute(f,T+1),k=i[2].fromBufferAttribute(f,T+2);a.subVectors(k,I),o.subVectors(M,I),s.crossVectors(a,o).normalize();for(var B=0;B<3;B++){var R=d[u(i[B])];l.set(0,0,0);for(var P=0,D=R.length;P<D;P++){var L=R[P];s.dot(L)>n&&l.add(L)}l.normalize(),S.setXYZ(T+B,l.x,l.y,l.z)}}return c.setAttribute("normal",S),c}var ft=Object.freeze(Object.defineProperty({__proto__:null,computeMorphedAttributes:ut,estimateBytesUsed:ot,interleaveAttributes:at,mergeBufferAttributes:it,mergeBufferGeometries:rt,mergeVertices:st,toCreasedNormals:ct,toTrianglesDrawMode:lt},Symbol.toStringTag,{value:"Module"})),dt=new A.Vector3,ht=new A.Vector3;function pt(e,t){-1===e.indexOf(t)&&e.push(t)}function vt(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var mt=null,gt=null,yt=null,At=null,bt=null,xt=parseInt(A.REVISION.replace(/\D+/g,"")),_t,wt,St,Et;function Ct(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,c.Z)((0,u.Z)().mark((function e(t){var n,r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.arrayBuffer();case 2:return n=e.sent,r=btoa(String.fromCharCode.apply(String,(0,i.Z)(new Uint8Array(n)))),e.abrupt("return","data:".concat(t.type||"",";base64,").concat(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;wt||(wt=new A.PlaneGeometry(2,2,1,1)),St||(St=new A.ShaderMaterial({uniforms:{blitTexture:new A.Uniform(e)},vertexShader:"\n        varying vec2 vUv;\n        void main(){\n            vUv = uv;\n            gl_Position = vec4(position.xy * 1.0,0.,.999999);\n        }\n      ",fragmentShader:"\n          uniform sampler2D blitTexture; \n          varying vec2 vUv;\n\n          void main(){ \n              gl_FragColor = vec4(vUv.xy, 0, 1);\n              \n              #ifdef IS_SRGB\n              gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );\n              #else\n              gl_FragColor = texture2D( blitTexture, vUv);\n              #endif\n          }\n      "})),St.uniforms.blitTexture.value=e,St.defines.IS_SRGB="colorSpace"in e?"srgb"===e.colorSpace:3001===e.encoding,St.needsUpdate=!0,Et||((Et=new A.Mesh(wt,St)).frustrumCulled=!1);var r=new A.PerspectiveCamera,i=new A.Scene;i.add(Et),n||(n=_t=new A.WebGLRenderer({antialias:!1})),n.setSize(Math.min(e.image.width,t),Math.min(e.image.height,t)),n.clear(),n.render(i,r);var a=new A.Texture(n.domElement);return a.minFilter=e.minFilter,a.magFilter=e.magFilter,a.wrapS=e.wrapS,a.wrapT=e.wrapT,a.name=e.name,_t&&(_t.dispose(),_t=null),a}var It={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]},kt=function(){function e(){(0,v.Z)(this,e),this.pluginCallbacks=[],this.register((function(e){return new Jt(e)})),this.register((function(e){return new qt(e)})),this.register((function(e){return new tn(e)})),this.register((function(e){return new nn(e)})),this.register((function(e){return new rn(e)})),this.register((function(e){return new an(e)})),this.register((function(e){return new $t(e)})),this.register((function(e){return new en(e)})),this.register((function(e){return new on(e)})),this.register((function(e){return new sn(e)})),this.register((function(e){return new ln(e)}))}return(0,m.Z)(e,[{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){for(var i=new Kt,a=[],o=0,s=this.pluginCallbacks.length;o<s;o++)a.push(this.pluginCallbacks[o](i));i.setPlugins(a),i.write(e,t,r).catch(n)}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,r,i,t)}))}}]),e}(),Bt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Rt="KHR_mesh_quantization",Pt={};Pt[A.NearestFilter]=Bt.NEAREST,Pt[A.NearestMipmapNearestFilter]=Bt.NEAREST_MIPMAP_NEAREST,Pt[A.NearestMipmapLinearFilter]=Bt.NEAREST_MIPMAP_LINEAR,Pt[A.LinearFilter]=Bt.LINEAR,Pt[A.LinearMipmapNearestFilter]=Bt.LINEAR_MIPMAP_NEAREST,Pt[A.LinearMipmapLinearFilter]=Bt.LINEAR_MIPMAP_LINEAR,Pt[A.ClampToEdgeWrapping]=Bt.CLAMP_TO_EDGE,Pt[A.RepeatWrapping]=Bt.REPEAT,Pt[A.MirroredRepeatWrapping]=Bt.MIRRORED_REPEAT;var Dt={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Lt=new A.Color,Nt=12,Ft=1179937895,Ot=2,Ut=8,zt=1313821514,Gt=5130562;function Qt(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function Zt(e){return(new TextEncoder).encode(e).buffer}function Ht(e){return Qt(e.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function jt(e,t,n){for(var r={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)},i=t;i<t+n;i++)for(var a=0;a<e.itemSize;a++){var o=void 0;e.itemSize>4?o=e.array[i*e.itemSize+a]:(0===a?o=e.getX(i):1===a?o=e.getY(i):2===a?o=e.getZ(i):3===a&&(o=e.getW(i)),!0===e.normalized&&(o=A.MathUtils.normalize(o,e.array))),r.min[a]=Math.min(r.min[a],o),r.max[a]=Math.max(r.max[a],o)}return r}function Vt(e){return 4*Math.ceil(e/4)}function Wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Vt(e.byteLength);if(n!==e.byteLength){var r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(var i=e.byteLength;i<n;i++)r[i]=t;return r.buffer}return e}function Xt(){return"undefined"===typeof document&&"undefined"!==typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")}function Yt(e,t){return void 0!==e.toBlob?new Promise((function(n){return e.toBlob(n,t)})):("image/jpeg"===t?n=.92:"image/webp"===t&&(n=.8),e.convertToBlob({type:t,quality:n}));var n}var Kt=function(){function e(){(0,v.Z)(this,e),this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}return(0,m.Z)(e,[{key:"setPlugins",value:function(e){this.plugins=e}},{key:"write",value:function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t,n){var r,i,a,o,s,l,c,f,d,h=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]?h[2]:{},this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(t),e.next=6,Promise.all(this.pending);case 6:a=(i=this).buffers,o=i.json,r=i.options,s=i.extensionsUsed,l=i.extensionsRequired,c=new Blob(a,{type:"application/octet-stream"}),f=Object.keys(s),d=Object.keys(l),f.length>0&&(o.extensionsUsed=f),d.length>0&&(o.extensionsRequired=d),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=c.size),!0===r.binary?c.arrayBuffer().then((function(e){var t=Wt(e),r=new DataView(new ArrayBuffer(Ut));r.setUint32(0,t.byteLength,!0),r.setUint32(4,Gt,!0);var i=Wt(Zt(JSON.stringify(o)),32),a=new DataView(new ArrayBuffer(Ut));a.setUint32(0,i.byteLength,!0),a.setUint32(4,zt,!0);var s=new ArrayBuffer(Nt),l=new DataView(s);l.setUint32(0,Ft,!0),l.setUint32(4,Ot,!0);var u=Nt+a.byteLength+i.byteLength+r.byteLength+t.byteLength;l.setUint32(8,u,!0),new Blob([s,a,i,r,t],{type:"application/octet-stream"}).arrayBuffer().then(n)})):(o.buffers&&o.buffers.length>0&&Ct(c).then((function(e){o.buffers[0].uri=e})),n(o));case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"serializeUserData",value:function(e,t){if(0!==Object.keys(e.userData).length){var n=this.options,r=this.extensionsUsed;try{var i=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&i.gltfExtensions){for(var a in void 0===t.extensions&&(t.extensions={}),i.gltfExtensions)t.extensions[a]=i.gltfExtensions[a],r[a]=!0;delete i.gltfExtensions}Object.keys(i).length>0&&(t.extras=i)}catch(o){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+o.message)}}}},{key:"getUID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!1===this.uids.has(e)){var n=new Map;n.set(!0,this.uid++),n.set(!1,this.uid++),this.uids.set(e,n)}return this.uids.get(e).get(t)}},{key:"isNormalizedNormalAttribute",value:function(e){if(this.cache.attributesNormalized.has(e))return!1;for(var t=new A.Vector3,n=0,r=e.count;n<r;n++)if(Math.abs(t.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}},{key:"createNormalizedNormalAttribute",value:function(e){var t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);for(var n=e.clone(),r=new A.Vector3,i=0,a=n.count;i<a;i++)r.fromBufferAttribute(n,i),0===r.x&&0===r.y&&0===r.z?r.setX(1):r.normalize(),n.setXYZ(i,r.x,r.y,r.z);return t.attributesNormalized.set(e,n),n}},{key:"applyTextureTransform",value:function(e,t){var n=!1,r={};0===t.offset.x&&0===t.offset.y||(r.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(r.rotation=t.rotation,n=!0),1===t.repeat.x&&1===t.repeat.y||(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}},{key:"buildMetalRoughTexture",value:function(e,t){if(e===t)return e;function n(e){return("colorSpace"in e?"srgb"===e.colorSpace:3001===e.encoding)?function(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}:function(e){return e}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof A.CompressedTexture&&(e=Mt(e)),t instanceof A.CompressedTexture&&(t=Mt(t));var r=e?e.image:null,i=t?t.image:null,a=Math.max(r?r.width:0,i?i.width:0),o=Math.max(r?r.height:0,i?i.height:0),s=Xt();s.width=a,s.height=o;var l=s.getContext("2d");l.fillStyle="#00ffff",l.fillRect(0,0,a,o);var u=l.getImageData(0,0,a,o);if(r){l.drawImage(r,0,0,a,o);for(var c=n(e),f=l.getImageData(0,0,a,o).data,d=2;d<f.length;d+=4)u.data[d]=256*c(f[d]/256)}if(i){l.drawImage(i,0,0,a,o);for(var h=n(t),p=l.getImageData(0,0,a,o).data,v=1;v<p.length;v+=4)u.data[v]=256*h(p[v]/256)}l.putImageData(u,0,0);var m=(e||t).clone();return m.source=new A.Texture(s).source,"colorSpace"in m?m.colorSpace="":m.encoding=3e3,m.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),m}},{key:"processBuffer",value:function(e){var t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}},{key:"processBufferView",value:function(e,t,n,r,i){var a,o=this.json;switch(o.bufferViews||(o.bufferViews=[]),t){case Bt.BYTE:case Bt.UNSIGNED_BYTE:a=1;break;case Bt.SHORT:case Bt.UNSIGNED_SHORT:a=2;break;default:a=4}for(var s=Vt(r*e.itemSize*a),l=new DataView(new ArrayBuffer(s)),u=0,c=n;c<n+r;c++)for(var f=0;f<e.itemSize;f++){var d=void 0;e.itemSize>4?d=e.array[c*e.itemSize+f]:(0===f?d=e.getX(c):1===f?d=e.getY(c):2===f?d=e.getZ(c):3===f&&(d=e.getW(c)),!0===e.normalized&&(d=A.MathUtils.normalize(d,e.array))),t===Bt.FLOAT?l.setFloat32(u,d,!0):t===Bt.INT?l.setInt32(u,d,!0):t===Bt.UNSIGNED_INT?l.setUint32(u,d,!0):t===Bt.SHORT?l.setInt16(u,d,!0):t===Bt.UNSIGNED_SHORT?l.setUint16(u,d,!0):t===Bt.BYTE?l.setInt8(u,d):t===Bt.UNSIGNED_BYTE&&l.setUint8(u,d),u+=a}var h={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:s};return void 0!==i&&(h.target=i),i===Bt.ARRAY_BUFFER&&(h.byteStride=e.itemSize*a),this.byteOffset+=s,o.bufferViews.push(h),{id:o.bufferViews.length-1,byteLength:0}}},{key:"processBufferViewImage",value:function(e){var t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),e.arrayBuffer().then((function(e){var r=Wt(e),i={buffer:t.processBuffer(r),byteOffset:t.byteOffset,byteLength:r.byteLength};return t.byteOffset+=r.byteLength,n.bufferViews.push(i)-1}))}},{key:"processAccessor",value:function(e,t,n,r){var i,a=this.json;if(e.array.constructor===Float32Array)i=Bt.FLOAT;else if(e.array.constructor===Int32Array)i=Bt.INT;else if(e.array.constructor===Uint32Array)i=Bt.UNSIGNED_INT;else if(e.array.constructor===Int16Array)i=Bt.SHORT;else if(e.array.constructor===Uint16Array)i=Bt.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)i=Bt.BYTE;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);i=Bt.UNSIGNED_BYTE}if(void 0===n&&(n=0),void 0===r&&(r=e.count),0===r)return null;var o,s=jt(e,n,r);void 0!==t&&(o=e===t.index?Bt.ELEMENT_ARRAY_BUFFER:Bt.ARRAY_BUFFER);var l=this.processBufferView(e,i,n,r,o),u={bufferView:l.id,byteOffset:l.byteOffset,componentType:i,count:r,max:s.max,min:s.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(u.normalized=!0),a.accessors||(a.accessors=[]),a.accessors.push(u)-1}},{key:"processImage",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"image/png";if(null!==e){var i=this,a=i.cache,o=i.json,s=i.options,l=i.pending;a.images.has(e)||a.images.set(e,{});var u=a.images.get(e),c=r+":flipY/"+n.toString();if(void 0!==u[c])return u[c];o.images||(o.images=[]);var f={mimeType:r},d=Xt();d.width=Math.min(e.width,s.maxTextureSize),d.height=Math.min(e.height,s.maxTextureSize);var h=d.getContext("2d");if(!0===n&&(h.translate(0,d.height),h.scale(1,-1)),void 0!==e.data){t!==A.RGBAFormat&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>s.maxTextureSize||e.height>s.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);for(var p=new Uint8ClampedArray(e.height*e.width*4),v=0;v<p.length;v+=4)p[v+0]=e.data[v+0],p[v+1]=e.data[v+1],p[v+2]=e.data[v+2],p[v+3]=e.data[v+3];h.putImageData(new ImageData(p,e.width,e.height),0,0)}else h.drawImage(e,0,0,d.width,d.height);!0===s.binary?l.push(Yt(d,r).then((function(e){return i.processBufferViewImage(e)})).then((function(e){f.bufferView=e}))):void 0!==d.toDataURL?f.uri=d.toDataURL(r):l.push(Yt(d,r).then(Ct).then((function(e){f.uri=e})));var m=o.images.push(f)-1;return u[c]=m,m}throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}},{key:"processSampler",value:function(e){var t=this.json;t.samplers||(t.samplers=[]);var n={magFilter:Pt[e.magFilter],minFilter:Pt[e.minFilter],wrapS:Pt[e.wrapS],wrapT:Pt[e.wrapT]};return t.samplers.push(n)-1}},{key:"processTexture",value:function(e){var t=this.options,n=this.cache,r=this.json;if(n.textures.has(e))return n.textures.get(e);r.textures||(r.textures=[]),e instanceof A.CompressedTexture&&(e=Mt(e,t.maxTextureSize));var i=e.userData.mimeType;"image/webp"===i&&(i="image/png");var a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,i)};e.name&&(a.name=e.name),this._invokeAll((function(t){t.writeTexture&&t.writeTexture(e,a)}));var o=r.textures.push(a)-1;return n.textures.set(e,o),o}},{key:"processMaterial",value:function(e){var t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);var r={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var i=e.color.toArray().concat([e.opacity]);if(Qt(i,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=i),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=.5,r.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){var a=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),o={index:this.processTexture(a),channel:a.channel};this.applyTextureTransform(o,a),r.pbrMetallicRoughness.metallicRoughnessTexture=o}if(e.map){var s={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(s,e.map),r.pbrMetallicRoughness.baseColorTexture=s}if(e.emissive){var l=e.emissive;if(Math.max(l.r,l.g,l.b)>0&&(r.emissiveFactor=e.emissive.toArray()),e.emissiveMap){var u={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(u,e.emissiveMap),r.emissiveTexture=u}}if(e.normalMap){var c={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&1!==e.normalScale.x&&(c.scale=e.normalScale.x),this.applyTextureTransform(c,e.normalMap),r.normalTexture=c}if(e.aoMap){var f={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};1!==e.aoMapIntensity&&(f.strength=e.aoMapIntensity),this.applyTextureTransform(f,e.aoMap),r.occlusionTexture=f}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),e.side===A.DoubleSide&&(r.doubleSided=!0),""!==e.name&&(r.name=e.name),this.serializeUserData(e,r),this._invokeAll((function(t){t.writeMaterial&&t.writeMaterial(e,r)}));var d=n.materials.push(r)-1;return t.materials.set(e,d),d}},{key:"processMesh",value:function(e){var t=this.cache,n=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(var i=0,a=e.material.length;i<a;i++)r.push(e.material[i].uuid);else r.push(e.material.uuid);var o=r.join(":");if(t.meshes.has(o))return t.meshes.get(o);var s,u=e.geometry;s=e.isLineSegments?Bt.LINES:e.isLineLoop?Bt.LINE_LOOP:e.isLine?Bt.LINE_STRIP:e.isPoints?Bt.POINTS:e.material.wireframe?Bt.LINES:Bt.TRIANGLES;var c={},f={},d=[],h=[],p=(0,l.Z)((0,l.Z)({},xt>=152?{uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3"}:{uv:"TEXCOORD_0",uv2:"TEXCOORD_1"}),{},{color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"}),v=u.getAttribute("normal");void 0===v||this.isNormalizedNormalAttribute(v)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),u.setAttribute("normal",this.createNormalizedNormalAttribute(v)));var m=null;for(var g in u.attributes)if("morph"!==g.slice(0,5)){var y=u.attributes[g];g=p[g]||g.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(g)||(g="_"+g),t.attributes.has(this.getUID(y)))f[g]=t.attributes.get(this.getUID(y));else{m=null;var b=y.array;"JOINTS_0"!==g||b instanceof Uint16Array||b instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),m=new A.BufferAttribute(new Uint16Array(b),y.itemSize,y.normalized));var x=this.processAccessor(m||y,u);null!==x&&(g.startsWith("_")||this.detectMeshQuantization(g,y),f[g]=x,t.attributes.set(this.getUID(y),x))}}if(void 0!==v&&u.setAttribute("normal",v),0===Object.keys(f).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){var _=[],w=[],S={};if(void 0!==e.morphTargetDictionary)for(var E in e.morphTargetDictionary)S[e.morphTargetDictionary[E]]=E;for(var C=0;C<e.morphTargetInfluences.length;++C){var T={},M=!1;for(var I in u.morphAttributes)if("position"===I||"normal"===I){var k=u.morphAttributes[I][C],B=I.toUpperCase(),R=u.attributes[I];if(t.attributes.has(this.getUID(k,!0)))T[B]=t.attributes.get(this.getUID(k,!0));else{var P=k.clone();if(!u.morphTargetsRelative)for(var D=0,L=k.count;D<L;D++)for(var N=0;N<k.itemSize;N++)0===N&&P.setX(D,k.getX(D)-R.getX(D)),1===N&&P.setY(D,k.getY(D)-R.getY(D)),2===N&&P.setZ(D,k.getZ(D)-R.getZ(D)),3===N&&P.setW(D,k.getW(D)-R.getW(D));T[B]=this.processAccessor(P,u),t.attributes.set(this.getUID(R,!0),T[B])}}else M||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),M=!0);h.push(T),_.push(e.morphTargetInfluences[C]),void 0!==e.morphTargetDictionary&&w.push(S[C])}c.weights=_,w.length>0&&(c.extras={},c.extras.targetNames=w)}var F=Array.isArray(e.material);if(F&&0===u.groups.length)return null;for(var O=F?e.material:[e.material],U=F?u.groups:[{materialIndex:0,start:void 0,count:void 0}],z=0,G=U.length;z<G;z++){var Q={mode:s,attributes:f};if(this.serializeUserData(u,Q),h.length>0&&(Q.targets=h),null!==u.index){var Z=this.getUID(u.index);void 0===U[z].start&&void 0===U[z].count||(Z+=":"+U[z].start+":"+U[z].count),t.attributes.has(Z)?Q.indices=t.attributes.get(Z):(Q.indices=this.processAccessor(u.index,u,U[z].start,U[z].count),t.attributes.set(Z,Q.indices)),null===Q.indices&&delete Q.indices}var H=this.processMaterial(O[U[z].materialIndex]);null!==H&&(Q.material=H),d.push(Q)}c.primitives=d,n.meshes||(n.meshes=[]),this._invokeAll((function(t){t.writeMesh&&t.writeMesh(e,c)}));var j=n.meshes.push(c)-1;return t.meshes.set(o,j),j}},{key:"detectMeshQuantization",value:function(e,t){if(!this.extensionsUsed[Rt]){var n=void 0;switch(t.array.constructor){case Int8Array:n="byte";break;case Uint8Array:n="unsigned byte";break;case Int16Array:n="short";break;case Uint16Array:n="unsigned short";break;default:return}t.normalized&&(n+=" normalized");var r=e.split("_",1)[0];It[r]&&It[r].includes(n)&&(this.extensionsUsed[Rt]=!0,this.extensionsRequired[Rt]=!0)}}},{key:"processCamera",value:function(e){var t=this.json;t.cameras||(t.cameras=[]);var n=e.isOrthographicCamera,r={type:n?"orthographic":"perspective"};return n?r.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:A.MathUtils.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(r.name=e.type),t.cameras.push(r)-1}},{key:"processAnimation",value:function(e,t){var n=this.json,r=this.nodeMap;n.animations||(n.animations=[]);for(var i=(e=kt.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,a=[],o=[],s=0;s<i.length;++s){var l=i[s],u=A.PropertyBinding.parseTrackName(l.name),c=A.PropertyBinding.findNode(t,u.nodeName),f=Dt[u.propertyName];if("bones"===u.objectName&&(c=!0===c.isSkinnedMesh?c.skeleton.getBoneByName(u.objectIndex):void 0),!c||!f)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',l.name),null;var d=l.values.length/l.times.length;f===Dt.morphTargetInfluences&&(d/=c.morphTargetInfluences.length);var h=void 0;!0===l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(h="CUBICSPLINE",d/=3):h=l.getInterpolation()===A.InterpolateDiscrete?"STEP":"LINEAR",o.push({input:this.processAccessor(new A.BufferAttribute(l.times,1)),output:this.processAccessor(new A.BufferAttribute(l.values,d)),interpolation:h}),a.push({sampler:o.length-1,target:{node:r.get(c),path:f}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:o,channels:a}),n.animations.length-1}},{key:"processSkin",value:function(e){var t=this.json,n=this.nodeMap,r=t.nodes[n.get(e)],i=e.skeleton;if(void 0===i)return null;var a=e.skeleton.bones[0];if(void 0===a)return null;for(var o=[],s=new Float32Array(16*i.bones.length),l=new A.Matrix4,u=0;u<i.bones.length;++u)o.push(n.get(i.bones[u])),l.copy(i.boneInverses[u]),l.multiply(e.bindMatrix).toArray(s,16*u);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new A.BufferAttribute(s,16)),joints:o,skeleton:n.get(a)}),r.skin=t.skins.length-1}},{key:"processNode",value:function(e){var t=this.json,n=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);var i={};if(n.trs){var a=e.quaternion.toArray(),o=e.position.toArray(),s=e.scale.toArray();Qt(a,[0,0,0,1])||(i.rotation=a),Qt(o,[0,0,0])||(i.translation=o),Qt(s,[1,1,1])||(i.scale=s)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===Ht(e.matrix)&&(i.matrix=e.matrix.elements);if(""!==e.name&&(i.name=String(e.name)),this.serializeUserData(e,i),e.isMesh||e.isLine||e.isPoints){var l=this.processMesh(e);null!==l&&(i.mesh=l)}else e.isCamera&&(i.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){for(var u=[],c=0,f=e.children.length;c<f;c++){var d=e.children[c];if(d.visible||!1===n.onlyVisible){var h=this.processNode(d);null!==h&&u.push(h)}}u.length>0&&(i.children=u)}this._invokeAll((function(t){t.writeNode&&t.writeNode(e,i)}));var p=t.nodes.push(i)-1;return r.set(e,p),p}},{key:"processScene",value:function(e){var t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);var r={};""!==e.name&&(r.name=e.name),t.scenes.push(r);for(var i=[],a=0,o=e.children.length;a<o;a++){var s=e.children[a];if(s.visible||!1===n.onlyVisible){var l=this.processNode(s);null!==l&&i.push(l)}}i.length>0&&(r.nodes=i),this.serializeUserData(e,r)}},{key:"processObjects",value:function(e){var t=new A.Scene;t.name="AuxScene";for(var n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}},{key:"processInput",value:function(e){var t=this.options;e=e instanceof Array?e:[e],this._invokeAll((function(t){t.beforeParse&&t.beforeParse(e)}));for(var n=[],r=0;r<e.length;r++)e[r]instanceof A.Scene?this.processScene(e[r]):n.push(e[r]);n.length>0&&this.processObjects(n);for(var i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(var a=0;a<t.animations.length;++a)this.processAnimation(t.animations[a],e[0]);this._invokeAll((function(t){t.afterParse&&t.afterParse(e)}))}},{key:"_invokeAll",value:function(e){for(var t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}]),e}(),Jt=function(){function e(t){(0,v.Z)(this,e),this.writer=t,this.name="KHR_lights_punctual"}return(0,m.Z)(e,[{key:"writeNode",value:function(e,t){if(e.isLight)if(e.isDirectionalLight||e.isPointLight||e.isSpotLight){var n=this.writer,r=n.json,i=n.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,a.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),i[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},i[this.name]=!0);var o=r.extensions[this.name].lights;o.push(a),t.extensions=t.extensions||{},t.extensions[this.name]={light:o.length-1}}else console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e)}}]),e}(),qt=function(){function e(t){(0,v.Z)(this,e),this.writer=t,this.name="KHR_materials_unlit"}return(0,m.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshBasicMaterial){var n=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},n[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}}]),e}(),$t=function(){function e(t){(0,v.Z)(this,e),this.writer=t,this.name="KHR_materials_clearcoat"}return(0,m.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.clearcoat){var n=this.writer,r=n.extensionsUsed,i={};if(i.clearcoatFactor=e.clearcoat,e.clearcoatMap){var a={index:n.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};n.applyTextureTransform(a,e.clearcoatMap),i.clearcoatTexture=a}if(i.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){var o={index:n.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};n.applyTextureTransform(o,e.clearcoatRoughnessMap),i.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){var s={index:n.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};n.applyTextureTransform(s,e.clearcoatNormalMap),i.clearcoatNormalTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),en=function(){function e(t){(0,v.Z)(this,e),this.writer=t,this.name="KHR_materials_iridescence"}return(0,m.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.iridescence){var n=this.writer,r=n.extensionsUsed,i={};if(i.iridescenceFactor=e.iridescence,e.iridescenceMap){var a={index:n.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};n.applyTextureTransform(a,e.iridescenceMap),i.iridescenceTexture=a}if(i.iridescenceIor=e.iridescenceIOR,i.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],i.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){var o={index:n.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};n.applyTextureTransform(o,e.iridescenceThicknessMap),i.iridescenceThicknessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),tn=function(){function e(t){(0,v.Z)(this,e),this.writer=t,this.name="KHR_materials_transmission"}return(0,m.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.transmission){var n=this.writer,r=n.extensionsUsed,i={};if(i.transmissionFactor=e.transmission,e.transmissionMap){var a={index:n.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};n.applyTextureTransform(a,e.transmissionMap),i.transmissionTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),nn=function(){function e(t){(0,v.Z)(this,e),this.writer=t,this.name="KHR_materials_volume"}return(0,m.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.transmission){var n=this.writer,r=n.extensionsUsed,i={};if(i.thicknessFactor=e.thickness,e.thicknessMap){var a={index:n.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};n.applyTextureTransform(a,e.thicknessMap),i.thicknessTexture=a}i.attenuationDistance=e.attenuationDistance,i.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),rn=function(){function e(t){(0,v.Z)(this,e),this.writer=t,this.name="KHR_materials_ior"}return(0,m.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&1.5!==e.ior){var n=this.writer.extensionsUsed,r={};r.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}}]),e}(),an=function(){function e(t){(0,v.Z)(this,e),this.writer=t,this.name="KHR_materials_specular"}return(0,m.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&(1!==e.specularIntensity||!e.specularColor.equals(Lt)||e.specularIntensityMap||e.specularColorTexture)){var n=this.writer,r=n.extensionsUsed,i={};if(e.specularIntensityMap){var a={index:n.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};n.applyTextureTransform(a,e.specularIntensityMap),i.specularTexture=a}if(e.specularColorMap){var o={index:n.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};n.applyTextureTransform(o,e.specularColorMap),i.specularColorTexture=o}i.specularFactor=e.specularIntensity,i.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),on=function(){function e(t){(0,v.Z)(this,e),this.writer=t,this.name="KHR_materials_sheen"}return(0,m.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!=e.sheen){var n=this.writer,r=n.extensionsUsed,i={};if(e.sheenRoughnessMap){var a={index:n.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};n.applyTextureTransform(a,e.sheenRoughnessMap),i.sheenRoughnessTexture=a}if(e.sheenColorMap){var o={index:n.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};n.applyTextureTransform(o,e.sheenColorMap),i.sheenColorTexture=o}i.sheenRoughnessFactor=e.sheenRoughness,i.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),sn=function(){function e(t){(0,v.Z)(this,e),this.writer=t,this.name="KHR_materials_anisotropy"}return(0,m.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!=e.anisotropy){var n=this.writer,r=n.extensionsUsed,i={};if(e.anisotropyMap){var a={index:n.processTexture(e.anisotropyMap)};n.applyTextureTransform(a,e.anisotropyMap),i.anisotropyTexture=a}i.anisotropyStrength=e.anisotropy,i.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),ln=function(){function e(t){(0,v.Z)(this,e),this.writer=t,this.name="KHR_materials_emissive_strength"}return(0,m.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshStandardMaterial&&1!==e.emissiveIntensity){var n=this.writer.extensionsUsed,r={};r.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}}]),e}(),un=null,cn=null,fn=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"parse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{decodeSpeed:5,encodeSpeed:5,encoderMethod:e.MESH_EDGEBREAKER_ENCODING,quantization:[16,8,8,8,8],exportUvs:!0,exportNormals:!0,exportColor:!1};if(t instanceof A.BufferGeometry&&t.isBufferGeometry)throw new Error("DRACOExporter: The first parameter of parse() is now an instance of Mesh or Points.");if(void 0===DracoEncoderModule)throw new Error("THREE.DRACOExporter: required the draco_encoder to work.");var r,i,a=t.geometry,o=DracoEncoderModule(),s=new o.Encoder;if(!a.isBufferGeometry)throw new Error("THREE.DRACOExporter.parse(geometry, options): geometry is not a THREE.BufferGeometry instance.");if(t instanceof A.Mesh&&t.isMesh){r=new o.MeshBuilder,i=new o.Mesh;var l=a.getAttribute("position");r.AddFloatAttributeToMesh(i,o.POSITION,l.count,l.itemSize,l.array);var u=a.getIndex();if(null!==u)r.AddFacesToMesh(i,u.count/3,u.array);else{for(var c=new(l.count>65535?Uint32Array:Uint16Array)(l.count),f=0;f<c.length;f++)c[f]=f;r.AddFacesToMesh(i,l.count,c)}if(n.exportNormals){var d=a.getAttribute("normal");void 0!==d&&r.AddFloatAttributeToMesh(i,o.NORMAL,d.count,d.itemSize,d.array)}if(n.exportUvs){var h=a.getAttribute("uv");void 0!==h&&r.AddFloatAttributeToMesh(i,o.TEX_COORD,h.count,h.itemSize,h.array)}if(n.exportColor){var p=a.getAttribute("color");void 0!==p&&r.AddFloatAttributeToMesh(i,o.COLOR,p.count,p.itemSize,p.array)}}else{if(!(t instanceof A.Points&&t.isPoints))throw new Error("DRACOExporter: Unsupported object type.");r=new o.PointCloudBuilder,i=new o.PointCloud;var v=a.getAttribute("position");if(r.AddFloatAttribute(i,o.POSITION,v.count,v.itemSize,v.array),n.exportColor){var m=a.getAttribute("color");void 0!==m&&r.AddFloatAttribute(i,o.COLOR,m.count,m.itemSize,m.array)}}var g,y=new o.DracoInt8Array,b=void 0!==n.encodeSpeed?n.encodeSpeed:5,x=void 0!==n.decodeSpeed?n.decodeSpeed:5;if(s.SetSpeedOptions(b,x),void 0!==n.encoderMethod&&s.SetEncodingMethod(n.encoderMethod),void 0!==n.quantization)for(var _=0;_<5;_++)void 0!==n.quantization[_]&&s.SetAttributeQuantization(_,n.quantization[_]);if(g=t instanceof A.Mesh&&t.isMesh?s.EncodeMeshToDracoBuffer(i,y):s.EncodePointCloudToDracoBuffer(i,!0,y),o.destroy(i),0===g)throw new Error("THREE.DRACOExporter: Draco encoding failed.");for(var w=new Int8Array(new ArrayBuffer(g)),S=0;S<g;S++)w[S]=y.GetValue(S);return o.destroy(y),o.destroy(s),o.destroy(r),w}}]),e}(),dn=fn,hn=null,pn=null,vn=null,mn=null,gn=null,yn=null,An=null,bn=null;function xn(){var e=new THREE.Scene,t=new THREE.BoxGeometry;t.deleteAttribute("uv");var n=new THREE.MeshStandardMaterial({side:THREE.BackSide}),r=new THREE.MeshStandardMaterial,i=new THREE.PointLight(16777215,5,28,2);i.position.set(.418,16.199,.3),e.add(i);var a=new THREE.Mesh(t,n);a.position.set(-.757,13.219,.717),a.scale.set(31.713,28.305,28.591),e.add(a);var o=new THREE.Mesh(t,r);o.position.set(-10.906,2.009,1.846),o.rotation.set(0,-.195,0),o.scale.set(2.328,7.905,4.651),e.add(o);var s=new THREE.Mesh(t,r);s.position.set(-5.607,-.754,-.758),s.rotation.set(0,.994,0),s.scale.set(1.97,1.534,3.955),e.add(s);var l=new THREE.Mesh(t,r);l.position.set(6.167,.857,7.803),l.rotation.set(0,.561,0),l.scale.set(3.927,6.285,3.687),e.add(l);var u=new THREE.Mesh(t,r);u.position.set(-2.017,.018,6.124),u.rotation.set(0,.333,0),u.scale.set(2.002,4.566,2.064),e.add(u);var c=new THREE.Mesh(t,r);c.position.set(2.291,-.756,-2.621),c.rotation.set(0,-.286,0),c.scale.set(1.546,1.552,1.496),e.add(c);var f=new THREE.Mesh(t,r);f.position.set(-2.193,-.369,-5.547),f.rotation.set(0,.516,0),f.scale.set(3.875,3.487,2.986),e.add(f);var d=new THREE.Mesh(t,y(50));d.position.set(-16.116,14.37,8.208),d.scale.set(.1,2.428,2.739),e.add(d);var h=new THREE.Mesh(t,y(50));h.position.set(-16.109,18.021,-8.207),h.scale.set(.1,2.425,2.751),e.add(h);var p=new THREE.Mesh(t,y(17));p.position.set(14.904,12.198,-1.832),p.scale.set(.15,4.265,6.331),e.add(p);var v=new THREE.Mesh(t,y(43));v.position.set(-.462,8.89,14.52),v.scale.set(4.38,5.441,.088),e.add(v);var m=new THREE.Mesh(t,y(20));m.position.set(3.235,11.486,-12.541),m.scale.set(2.5,2,.1),e.add(m);var g=new THREE.Mesh(t,y(100));function y(e){var t=new THREE.MeshBasicMaterial;return t.color.setScalar(e),t}return g.position.set(0,20,0),g.scale.set(1,.1,1),e.add(g),e}var _n=null,wn=new A.Quaternion,Sn=new A.Vector3,En=new A.Vector3,Cn=new A.Vector3,Tn=new A.Vector3,Mn=new A.Vector3,In=new A.Quaternion,kn=new A.Vector3,Bn=new A.Vector3,Rn=new A.Vector3,Pn=new A.Matrix4,Dn=null;function Ln(e,t){return Rn.setFromMatrixPosition(e.matrixWorld).applyMatrix4(t)}function Nn(e,t,n,r){var i=Ln(n,r);e[3*t+0]=i.x,e[3*t+1]=i.y,e[3*t+2]=i.z}var Fn=null,On=null,Un=null,zn=null,Gn=null,Qn=null,Zn=new A.Vector3,Hn=new A.Quaternion,jn=new A.Vector3,Vn=new A.Matrix4,Wn=null,Xn=null,Yn=null,Kn=0;function Jn(){return Kn>=Yn.length&&Yn.push(new Quaternion),Yn[Kn++]}var qn=new Map;function $n(e,t,n,r){var i=e.skeleton.bones,a=e.geometry.userData.MMD.bones[t],o=i[t];if(!qn.has(t)){var s=Jn();if(qn.set(t,s.copy(o.quaternion)),r&&a.grant&&!a.grant.isLocal&&a.grant.affectRotation){var l=a.grant.parentIndex,u=a.grant.ratio;qn.has(l)||$n(e,l,n,r),r.addGrantRotation(o,qn.get(l),u)}if(n&&a.ik){e.updateMatrixWorld(!0),n.updateOne(a.ik);for(var c=a.ik.links,f=0,d=c.length;f<d;f++){var h=c[f];if(!1!==h.enabled){var p=h.index;qn.has(p)&&qn.set(p,qn.get(p).copy(i[p].quaternion))}}}s.copy(o.quaternion)}}var er=null,tr=new A.Quaternion,nr=null,rr=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,v.Z)(this,n),(r=t.call(this,e)).isReflector=!0,r.type="Reflector",r.camera=new A.PerspectiveCamera;var a=(0,d.Z)(r),o=void 0!==i.color?new A.Color(i.color):new A.Color(8355711),s=i.textureWidth||512,l=i.textureHeight||512,u=i.clipBias||0,c=i.shader||n.ReflectorShader,f=void 0!==i.multisample?i.multisample:4,h=new A.Plane,p=new A.Vector3,m=new A.Vector3,g=new A.Vector3,y=new A.Matrix4,b=new A.Vector3(0,0,-1),x=new A.Vector4,_=new A.Vector3,w=new A.Vector3,S=new A.Vector4,E=new A.Matrix4,C=r.camera,T=new A.WebGLRenderTarget(s,l,{samples:f,type:A.HalfFloatType}),M=new A.ShaderMaterial({uniforms:A.UniformsUtils.clone(c.uniforms),fragmentShader:c.fragmentShader,vertexShader:c.vertexShader});return M.uniforms.tDiffuse.value=T.texture,M.uniforms.color.value=o,M.uniforms.textureMatrix.value=E,r.material=M,r.onBeforeRender=function(e,t,n){if(m.setFromMatrixPosition(a.matrixWorld),g.setFromMatrixPosition(n.matrixWorld),y.extractRotation(a.matrixWorld),p.set(0,0,1),p.applyMatrix4(y),_.subVectors(m,g),!(_.dot(p)>0)){_.reflect(p).negate(),_.add(m),y.extractRotation(n.matrixWorld),b.set(0,0,-1),b.applyMatrix4(y),b.add(g),w.subVectors(m,b),w.reflect(p).negate(),w.add(m),C.position.copy(_),C.up.set(0,1,0),C.up.applyMatrix4(y),C.up.reflect(p),C.lookAt(w),C.far=n.far,C.updateMatrixWorld(),C.projectionMatrix.copy(n.projectionMatrix),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(C.projectionMatrix),E.multiply(C.matrixWorldInverse),E.multiply(a.matrixWorld),h.setFromNormalAndCoplanarPoint(p,m),h.applyMatrix4(C.matrixWorldInverse),x.set(h.normal.x,h.normal.y,h.normal.z,h.constant);var r=C.projectionMatrix;S.x=(Math.sign(x.x)+r.elements[8])/r.elements[0],S.y=(Math.sign(x.y)+r.elements[9])/r.elements[5],S.z=-1,S.w=(1+r.elements[10])/r.elements[14],x.multiplyScalar(2/x.dot(S)),r.elements[2]=x.x,r.elements[6]=x.y,r.elements[10]=x.z+1-u,r.elements[14]=x.w,a.visible=!1;var i=e.getRenderTarget(),o=e.xr.enabled,s=e.shadowMap.autoUpdate,l=e.toneMapping,c=!1;c="outputColorSpace"in e?"srgb"===e.outputColorSpace:3001===e.outputEncoding,e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,"outputColorSpace"in e?e.outputColorSpace="linear-srgb":e.outputEncoding=3e3,e.toneMapping=A.NoToneMapping,e.setRenderTarget(T),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,C),e.xr.enabled=o,e.shadowMap.autoUpdate=s,e.toneMapping=l,"outputColorSpace"in e?e.outputColorSpace=c?"srgb":"srgb-linear":e.outputEncoding=c?3001:3e3,e.setRenderTarget(i);var f=n.viewport;void 0!==f&&e.state.viewport(f),a.visible=!0}},r.getRenderTarget=function(){return T},r.dispose=function(){T.dispose(),a.material.dispose()},r}return(0,m.Z)(n)}(A.Mesh),ir=rr;"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <".concat(xt>=154?"colorspace_fragment":"encodings_fragment",">\n\n\t\t}");var ar=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,v.Z)(this,n),(r=t.call(this,e)).isRefractor=!0,r.type="Refractor",r.camera=new A.PerspectiveCamera;var a=(0,d.Z)(r),o=void 0!==i.color?new A.Color(i.color):new A.Color(8355711),s=i.textureWidth||512,l=i.textureHeight||512,u=i.clipBias||0,c=i.shader||n.RefractorShader,f=void 0!==i.multisample?i.multisample:4,h=r.camera;h.matrixAutoUpdate=!1,h.userData.refractor=!0;var p=new A.Plane,m=new A.Matrix4,g=new A.WebGLRenderTarget(s,l,{samples:f,type:A.HalfFloatType});r.material=new A.ShaderMaterial({uniforms:A.UniformsUtils.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,transparent:!0}),r.material.uniforms.color.value=o,r.material.uniforms.tDiffuse.value=g.texture,r.material.uniforms.textureMatrix.value=m;var y=function(){var e=new A.Vector3,t=new A.Vector3,n=new A.Matrix4,r=new A.Vector3,i=new A.Vector3;return function(o){return e.setFromMatrixPosition(a.matrixWorld),t.setFromMatrixPosition(o.matrixWorld),r.subVectors(e,t),n.extractRotation(a.matrixWorld),i.set(0,0,1),i.applyMatrix4(n),r.dot(i)<0}}(),b=function(){var e=new A.Vector3,t=new A.Vector3,n=new A.Quaternion,r=new A.Vector3;return function(){a.matrixWorld.decompose(t,n,r),e.set(0,0,1).applyQuaternion(n).normalize(),e.negate(),p.setFromNormalAndCoplanarPoint(e,t)}}(),x=function(){var e=new A.Plane,t=new A.Vector4,n=new A.Vector4;return function(r){h.matrixWorld.copy(r.matrixWorld),h.matrixWorldInverse.copy(h.matrixWorld).invert(),h.projectionMatrix.copy(r.projectionMatrix),h.far=r.far,e.copy(p),e.applyMatrix4(h.matrixWorldInverse),t.set(e.normal.x,e.normal.y,e.normal.z,e.constant);var i=h.projectionMatrix;n.x=(Math.sign(t.x)+i.elements[8])/i.elements[0],n.y=(Math.sign(t.y)+i.elements[9])/i.elements[5],n.z=-1,n.w=(1+i.elements[10])/i.elements[14],t.multiplyScalar(2/t.dot(n)),i.elements[2]=t.x,i.elements[6]=t.y,i.elements[10]=t.z+1-u,i.elements[14]=t.w}}();return r.onBeforeRender=function(e,t,n){!0!==n.userData.refractor&&!0!==!y(n)&&(b(),function(e){m.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),m.multiply(e.projectionMatrix),m.multiply(e.matrixWorldInverse),m.multiply(a.matrixWorld)}(n),x(n),function(e,t,n){a.visible=!1;var r=e.getRenderTarget(),i=e.xr.enabled,o=e.shadowMap.autoUpdate,s=e.toneMapping,l=!1;l="outputColorSpace"in e?"srgb"===e.outputColorSpace:3001===e.outputEncoding,e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,"outputColorSpace"in e?e.outputColorSpace="linear-srgb":e.outputEncoding=3e3,e.toneMapping=A.NoToneMapping,e.setRenderTarget(g),!1===e.autoClear&&e.clear(),e.render(t,h),e.xr.enabled=i,e.shadowMap.autoUpdate=o,e.toneMapping=s,e.setRenderTarget(r),"outputColorSpace"in e?e.outputColorSpace=l?"srgb":"srgb-linear":e.outputEncoding=l?3001:3e3;var u=n.viewport;void 0!==u&&e.state.viewport(u),a.visible=!0}(e,t,n))},r.getRenderTarget=function(){return g},r.dispose=function(){g.dispose(),a.material.dispose()},r}return(0,m.Z)(n)}(A.Mesh),or=ar;"\n\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec4 vUv;\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <".concat(xt>=154?"colorspace_fragment":"encodings_fragment",">\n\n\t\t}");var sr=new A.Matrix4,lr=null,ur=new A.BufferGeometry,cr=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),fr=new A.InterleavedBuffer(cr,5),dr=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){var e;(0,v.Z)(this,n),(e=t.call(this,n.Geometry,new A.MeshBasicMaterial({opacity:0,transparent:!0}))).isLensflare=!0,e.type="Lensflare",e.frustumCulled=!1,e.renderOrder=1/0;var r=new A.Vector3,i=new A.Vector3,a=new A.DataTexture(new Uint8Array(768),16,16,A.RGBAFormat);a.minFilter=A.NearestFilter,a.magFilter=A.NearestFilter,a.wrapS=A.ClampToEdgeWrapping,a.wrapT=A.ClampToEdgeWrapping;var o=new A.DataTexture(new Uint8Array(768),16,16,A.RGBAFormat);o.minFilter=A.NearestFilter,o.magFilter=A.NearestFilter,o.wrapS=A.ClampToEdgeWrapping,o.wrapT=A.ClampToEdgeWrapping;var s=n.Geometry,l=new A.RawShaderMaterial({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:"\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tuniform vec3 screenPosition;\n\t\t\t\tuniform vec2 scale;\n\n\t\t\t\tattribute vec3 position;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );\n\n\t\t\t\t}",fragmentShader:"\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );\n\n\t\t\t\t}",depthTest:!0,depthWrite:!1,transparent:!1}),u=new A.RawShaderMaterial({uniforms:{map:{value:a},scale:{value:null},screenPosition:{value:null}},vertexShader:"\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tuniform vec3 screenPosition;\n\t\t\t\tuniform vec2 scale;\n\n\t\t\t\tattribute vec3 position;\n\t\t\t\tattribute vec2 uv;\n\n\t\t\t\tvarying vec2 vUV;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvUV = uv;\n\n\t\t\t\t\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );\n\n\t\t\t\t}",fragmentShader:"\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tuniform sampler2D map;\n\n\t\t\t\tvarying vec2 vUV;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tgl_FragColor = texture2D( map, vUV );\n\n\t\t\t\t}",depthTest:!1,depthWrite:!1,transparent:!1}),c=new A.Mesh(s,l),f=[],d=pr.Shader,h=new A.RawShaderMaterial({uniforms:{map:{value:null},occlusionMap:{value:o},color:{value:new A.Color(16777215)},scale:{value:new A.Vector2},screenPosition:{value:new A.Vector3}},vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:A.AdditiveBlending,transparent:!0,depthWrite:!1}),p=new A.Mesh(s,h);e.addElement=function(e){f.push(e)};var m=new A.Vector2,g=new A.Vector2,y=new A.Box2,b=new A.Vector4;return e.onBeforeRender=function(e,t,n){e.getCurrentViewport(b);var d=b.w/b.z,v=b.z/2,A=b.w/2,x=16/b.w;if(m.set(x*d,x),y.min.set(b.x,b.y),y.max.set(b.x+(b.z-16),b.y+(b.w-16)),i.setFromMatrixPosition(this.matrixWorld),i.applyMatrix4(n.matrixWorldInverse),!(i.z>0)&&(r.copy(i).applyMatrix4(n.projectionMatrix),g.x=b.x+r.x*v+v-8,g.y=b.y+r.y*A+A-8,y.containsPoint(g))){e.copyFramebufferToTexture(g,a);var _=l.uniforms;_.scale.value=m,_.screenPosition.value=r,e.renderBufferDirect(n,null,s,l,c,null),e.copyFramebufferToTexture(g,o),(_=u.uniforms).scale.value=m,_.screenPosition.value=r,e.renderBufferDirect(n,null,s,u,c,null);for(var w=2*-r.x,S=2*-r.y,E=0,C=f.length;E<C;E++){var T=f[E],M=h.uniforms;M.color.value.copy(T.color),M.map.value=T.texture,M.screenPosition.value.x=r.x+w*T.distance,M.screenPosition.value.y=r.y+S*T.distance,x=T.size/b.w;var I=b.w/b.z;M.scale.value.set(x*I,x),h.uniformsNeedUpdate=!0,e.renderBufferDirect(n,null,s,h,p,null)}}},e.dispose=function(){l.dispose(),u.dispose(),h.dispose(),a.dispose(),o.dispose();for(var e=0,t=f.length;e<t;e++)f[e].texture.dispose()},e}return(0,m.Z)(n)}(A.Mesh),hr=dr,pr=(0,m.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new A.Color(16777215);(0,v.Z)(this,e),this.texture=t,this.size=n,this.distance=r,this.color=i})),vr=null,mr=null,gr=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),yr=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),Ar=(0,m.Z)((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math;(0,v.Z)(this,e),T(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),T(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),T(this,"p",[]),T(this,"perm",[]),T(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),T(this,"dot",(function(e,t,n){return e[0]*t+e[1]*n})),T(this,"dot3",(function(e,t,n,r){return e[0]*t+e[1]*n+e[2]*r})),T(this,"dot4",(function(e,t,n,r,i){return e[0]*t+e[1]*n+e[2]*r+e[3]*i})),T(this,"noise",(function(e,n){var r=(e+n)*(.5*(Math.sqrt(3)-1)),i=Math.floor(e+r),a=Math.floor(n+r),o=(3-Math.sqrt(3))/6,s=(i+a)*o,l=e-(i-s),u=n-(a-s),c=0,f=1;l>u&&(c=1,f=0);var d=l-c+o,h=u-f+o,p=l-1+2*o,v=u-1+2*o,m=255&i,g=255&a,y=t.perm[m+t.perm[g]]%12,A=t.perm[m+c+t.perm[g+f]]%12,b=t.perm[m+1+t.perm[g+1]]%12,x=.5-l*l-u*u,_=.5-d*d-h*h,w=.5-p*p-v*v;return 70*((x<0?0:(x*=x)*x*t.dot(t.grad3[y],l,u))+(_<0?0:(_*=_)*_*t.dot(t.grad3[A],d,h))+(w<0?0:(w*=w)*w*t.dot(t.grad3[b],p,v)))})),T(this,"noise3d",(function(e,n,r){var i,a,o,s,l,u,c=(e+n+r)*(1/3),f=Math.floor(e+c),d=Math.floor(n+c),h=Math.floor(r+c),p=1/6,v=(f+d+h)*p,m=e-(f-v),g=n-(d-v),y=r-(h-v);m>=g?g>=y?(i=1,a=0,o=0,s=1,l=1,u=0):m>=y?(i=1,a=0,o=0,s=1,l=0,u=1):(i=0,a=0,o=1,s=1,l=0,u=1):g<y?(i=0,a=0,o=1,s=0,l=1,u=1):m<y?(i=0,a=1,o=0,s=0,l=1,u=1):(i=0,a=1,o=0,s=1,l=1,u=0);var A=m-i+p,b=g-a+p,x=y-o+p,_=m-s+2*p,w=g-l+2*p,S=y-u+2*p,E=m-1+.5,C=g-1+.5,T=y-1+.5,M=255&f,I=255&d,k=255&h,B=t.perm[M+t.perm[I+t.perm[k]]]%12,R=t.perm[M+i+t.perm[I+a+t.perm[k+o]]]%12,P=t.perm[M+s+t.perm[I+l+t.perm[k+u]]]%12,D=t.perm[M+1+t.perm[I+1+t.perm[k+1]]]%12,L=.6-m*m-g*g-y*y,N=.6-A*A-b*b-x*x,F=.6-_*_-w*w-S*S,O=.6-E*E-C*C-T*T;return 32*((L<0?0:(L*=L)*L*t.dot3(t.grad3[B],m,g,y))+(N<0?0:(N*=N)*N*t.dot3(t.grad3[R],A,b,x))+(F<0?0:(F*=F)*F*t.dot3(t.grad3[P],_,w,S))+(O<0?0:(O*=O)*O*t.dot3(t.grad3[D],E,C,T)))})),T(this,"noise4d",(function(e,n,r,i){var a,o,s,l,u,c,f,d,h,p,v,m,g=t.grad4,y=t.simplex,A=t.perm,b=(Math.sqrt(5)-1)/4,x=(5-Math.sqrt(5))/20,_=(e+n+r+i)*b,w=Math.floor(e+_),S=Math.floor(n+_),E=Math.floor(r+_),C=Math.floor(i+_),T=(w+S+E+C)*x,M=e-(w-T),I=n-(S-T),k=r-(E-T),B=i-(C-T),R=(M>I?32:0)+(M>k?16:0)+(I>k?8:0)+(M>B?4:0)+(I>B?2:0)+(k>B?1:0),P=M-(a=y[R][0]>=3?1:0)+x,D=I-(o=y[R][1]>=3?1:0)+x,L=k-(s=y[R][2]>=3?1:0)+x,N=B-(l=y[R][3]>=3?1:0)+x,F=M-(u=y[R][0]>=2?1:0)+2*x,O=I-(c=y[R][1]>=2?1:0)+2*x,U=k-(f=y[R][2]>=2?1:0)+2*x,z=B-(d=y[R][3]>=2?1:0)+2*x,G=M-(h=y[R][0]>=1?1:0)+3*x,Q=I-(p=y[R][1]>=1?1:0)+3*x,Z=k-(v=y[R][2]>=1?1:0)+3*x,H=B-(m=y[R][3]>=1?1:0)+3*x,j=M-1+4*x,V=I-1+4*x,W=k-1+4*x,X=B-1+4*x,Y=255&w,K=255&S,J=255&E,q=255&C,$=A[Y+A[K+A[J+A[q]]]]%32,ee=A[Y+a+A[K+o+A[J+s+A[q+l]]]]%32,te=A[Y+u+A[K+c+A[J+f+A[q+d]]]]%32,ne=A[Y+h+A[K+p+A[J+v+A[q+m]]]]%32,re=A[Y+1+A[K+1+A[J+1+A[q+1]]]]%32,ie=.6-M*M-I*I-k*k-B*B,ae=.6-P*P-D*D-L*L-N*N,oe=.6-F*F-O*O-U*U-z*z,se=.6-G*G-Q*Q-Z*Z-H*H,le=.6-j*j-V*V-W*W-X*X;return 27*((ie<0?0:(ie*=ie)*ie*t.dot4(g[$],M,I,k,B))+(ae<0?0:(ae*=ae)*ae*t.dot4(g[ee],P,D,L,N))+(oe<0?0:(oe*=oe)*oe*t.dot4(g[te],F,O,U,z))+(se<0?0:(se*=se)*se*t.dot4(g[ne],G,Q,Z,H))+(le<0?0:(le*=le)*le*t.dot4(g[re],j,V,W,X)))}));for(var r=0;r<256;r++)this.p[r]=Math.floor(256*n.random());for(var i=0;i<512;i++)this.perm[i]=this.p[255&i]})),br=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,v.Z)(this,n),(e=t.call(this)).isLightningStrike=!0,e.type="LightningStrike",e.init(n.copyParameters(r,r)),e.createMesh(),e}return(0,m.Z)(n,[{key:"update",value:function(e){this.isStatic||(this.rayParameters.isEternal||this.rayParameters.birthTime<=e&&e<=this.rayParameters.deathTime?(this.updateMesh(e),e<this.subrays[0].endPropagationTime?this.state=n.RAY_PROPAGATING:e>this.subrays[0].beginVanishingTime?this.state=n.RAY_VANISHING:this.state=n.RAY_STEADY,this.visible=!0):(this.visible=!1,e<this.rayParameters.birthTime?this.state=n.RAY_UNBORN:this.state=n.RAY_EXTINGUISHED))}},{key:"init",value:function(e){this.rayParameters=e,this.maxIterations=void 0!==e.maxIterations?Math.floor(e.maxIterations):9,e.maxIterations=this.maxIterations,this.isStatic=void 0!==e.isStatic&&e.isStatic,e.isStatic=this.isStatic,this.ramification=void 0!==e.ramification?Math.floor(e.ramification):5,e.ramification=this.ramification,this.maxSubrayRecursion=void 0!==e.maxSubrayRecursion?Math.floor(e.maxSubrayRecursion):3,e.maxSubrayRecursion=this.maxSubrayRecursion,this.recursionProbability=void 0!==e.recursionProbability?e.recursionProbability:.6,e.recursionProbability=this.recursionProbability,this.generateUVs=void 0!==e.generateUVs&&e.generateUVs,e.generateUVs=this.generateUVs,void 0!==e.randomGenerator?(this.randomGenerator=e.randomGenerator,this.seedGenerator=e.randomGenerator,void 0!==e.noiseSeed&&this.seedGenerator.setSeed(e.noiseSeed)):(this.randomGenerator=n.createRandomGenerator(),this.seedGenerator=Math),void 0!==e.onDecideSubrayCreation?this.onDecideSubrayCreation=e.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),void 0!==e.onSubrayCreation&&(this.onSubrayCreation=e.onSubrayCreation)),this.state=n.RAY_INITIALIZED,this.maxSubrays=Math.ceil(1+Math.pow(this.ramification,Math.max(0,this.maxSubrayRecursion-1))),e.maxSubrays=this.maxSubrays,this.maxRaySegments=2*(1<<this.maxIterations),this.subrays=[];for(var t=0;t<this.maxSubrays;t++)this.subrays.push(this.createSubray());this.raySegments=[];for(var r=0;r<this.maxRaySegments;r++)this.raySegments.push(this.createSegment());this.time=0,this.timeFraction=0,this.currentSegmentCallback=null,this.currentCreateTriangleVertices=this.generateUVs?this.createTriangleVerticesWithUVs:this.createTriangleVerticesWithoutUVs,this.numSubrays=0,this.currentSubray=null,this.currentSegmentIndex=0,this.isInitialSegment=!1,this.subrayProbability=0,this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.vertices=null,this.uvs=null,this.indices=null,this.positionAttribute=null,this.uvsAttribute=null,this.simplexX=new Ar(this.seedGenerator),this.simplexY=new Ar(this.seedGenerator),this.simplexZ=new Ar(this.seedGenerator),this.forwards=new A.Vector3,this.forwardsFill=new A.Vector3,this.side=new A.Vector3,this.down=new A.Vector3,this.middlePos=new A.Vector3,this.middleLinPos=new A.Vector3,this.newPos=new A.Vector3,this.vPos=new A.Vector3,this.cross1=new A.Vector3}},{key:"createMesh",value:function(){var e=1<<this.maxIterations,t=3*(e+1)*this.maxSubrays,n=18*e*this.maxSubrays;this.vertices=new Float32Array(3*t),this.indices=new Uint32Array(n),this.generateUVs&&(this.uvs=new Float32Array(2*t)),this.fillMesh(0),this.setIndex(new A.Uint32BufferAttribute(this.indices,1)),this.positionAttribute=new A.Float32BufferAttribute(this.vertices,3),this.setAttribute("position",this.positionAttribute),this.generateUVs&&(this.uvsAttribute=new A.Float32BufferAttribute(new Float32Array(this.uvs),2),this.setAttribute("uv",this.uvsAttribute)),this.isStatic||(this.index.usage=A.DynamicDrawUsage,this.positionAttribute.usage=A.DynamicDrawUsage,this.generateUVs&&(this.uvsAttribute.usage=A.DynamicDrawUsage)),this.vertices=this.positionAttribute.array,this.indices=this.index.array,this.generateUVs&&(this.uvs=this.uvsAttribute.array)}},{key:"updateMesh",value:function(e){this.fillMesh(e),this.drawRange.count=this.currentIndex,this.index.needsUpdate=!0,this.positionAttribute.needsUpdate=!0,this.generateUVs&&(this.uvsAttribute.needsUpdate=!0)}},{key:"fillMesh",value:function(e){var t=this;this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.fractalRay(e,(function(n){var r=t.currentSubray;e<r.birthTime||(this.rayParameters.isEternal&&0==t.currentSubray.recursion?(t.createPrism(n),t.onDecideSubrayCreation(n,t)):e<r.endPropagationTime?t.timeFraction>=n.fraction0*r.propagationTimeFactor&&(t.createPrism(n),t.onDecideSubrayCreation(n,t)):e<r.beginVanishingTime?(t.createPrism(n),t.onDecideSubrayCreation(n,t)):(t.timeFraction<=r.vanishingTimeFactor+n.fraction1*(1-r.vanishingTimeFactor)&&t.createPrism(n),t.onDecideSubrayCreation(n,t)))}))}},{key:"addNewSubray",value:function(){return this.subrays[this.numSubrays++]}},{key:"initSubray",value:function(e,t){e.pos0.copy(t.sourceOffset),e.pos1.copy(t.destOffset),e.up0.copy(t.up0),e.up1.copy(t.up1),e.radius0=t.radius0,e.radius1=t.radius1,e.birthTime=t.birthTime,e.deathTime=t.deathTime,e.timeScale=t.timeScale,e.roughness=t.roughness,e.straightness=t.straightness,e.propagationTimeFactor=t.propagationTimeFactor,e.vanishingTimeFactor=t.vanishingTimeFactor,e.maxIterations=this.maxIterations,e.seed=void 0!==t.noiseSeed?t.noiseSeed:0,e.recursion=0}},{key:"fractalRay",value:function(e,t){this.time=e,this.currentSegmentCallback=t,this.numSubrays=0,this.initSubray(this.addNewSubray(),this.rayParameters);for(var n=0;n<this.numSubrays;n++){var r=this.subrays[n];this.currentSubray=r,this.randomGenerator.setSeed(r.seed),r.endPropagationTime=A.MathUtils.lerp(r.birthTime,r.deathTime,r.propagationTimeFactor),r.beginVanishingTime=A.MathUtils.lerp(r.deathTime,r.birthTime,1-r.vanishingTimeFactor);var i=this.randomGenerator.random;r.linPos0.set(i(),i(),i()).multiplyScalar(1e3),r.linPos1.set(i(),i(),i()).multiplyScalar(1e3),this.timeFraction=(e-r.birthTime)/(r.deathTime-r.birthTime),this.currentSegmentIndex=0,this.isInitialSegment=!0;var a=this.getNewSegment();a.iteration=0,a.pos0.copy(r.pos0),a.pos1.copy(r.pos1),a.linPos0.copy(r.linPos0),a.linPos1.copy(r.linPos1),a.up0.copy(r.up0),a.up1.copy(r.up1),a.radius0=r.radius0,a.radius1=r.radius1,a.fraction0=0,a.fraction1=1,a.positionVariationFactor=1-r.straightness,this.subrayProbability=this.ramification*Math.pow(this.recursionProbability,r.recursion)/(1<<r.maxIterations),this.fractalRayRecursive(a)}this.currentSegmentCallback=null,this.currentSubray=null}},{key:"fractalRayRecursive",value:function(e){if(e.iteration>=this.currentSubray.maxIterations)this.currentSegmentCallback(e);else{this.forwards.subVectors(e.pos1,e.pos0);var t=this.forwards.length();t<1e-6&&(this.forwards.set(0,0,.01),t=this.forwards.length());var n=.5*(e.radius0+e.radius1),r=.5*(e.fraction0+e.fraction1),i=this.time*this.currentSubray.timeScale*Math.pow(2,e.iteration);this.middlePos.lerpVectors(e.pos0,e.pos1,.5),this.middleLinPos.lerpVectors(e.linPos0,e.linPos1,.5);var a=this.middleLinPos;this.newPos.set(this.simplexX.noise4d(a.x,a.y,a.z,i),this.simplexY.noise4d(a.x,a.y,a.z,i),this.simplexZ.noise4d(a.x,a.y,a.z,i)),this.newPos.multiplyScalar(e.positionVariationFactor*t),this.newPos.add(this.middlePos);var o=this.getNewSegment();o.pos0.copy(e.pos0),o.pos1.copy(this.newPos),o.linPos0.copy(e.linPos0),o.linPos1.copy(this.middleLinPos),o.up0.copy(e.up0),o.up1.copy(e.up1),o.radius0=e.radius0,o.radius1=n,o.fraction0=e.fraction0,o.fraction1=r,o.positionVariationFactor=e.positionVariationFactor*this.currentSubray.roughness,o.iteration=e.iteration+1;var s=this.getNewSegment();s.pos0.copy(this.newPos),s.pos1.copy(e.pos1),s.linPos0.copy(this.middleLinPos),s.linPos1.copy(e.linPos1),this.cross1.crossVectors(e.up0,this.forwards.normalize()),s.up0.crossVectors(this.forwards,this.cross1).normalize(),s.up1.copy(e.up1),s.radius0=n,s.radius1=e.radius1,s.fraction0=r,s.fraction1=e.fraction1,s.positionVariationFactor=e.positionVariationFactor*this.currentSubray.roughness,s.iteration=e.iteration+1,this.fractalRayRecursive(o),this.fractalRayRecursive(s)}}},{key:"createPrism",value:function(e){this.forwardsFill.subVectors(e.pos1,e.pos0).normalize(),this.isInitialSegment&&(this.currentCreateTriangleVertices(e.pos0,e.up0,this.forwardsFill,e.radius0,0),this.isInitialSegment=!1),this.currentCreateTriangleVertices(e.pos1,e.up0,this.forwardsFill,e.radius1,e.fraction1),this.createPrismFaces()}},{key:"createTriangleVerticesWithoutUVs",value:function(e,t,r,i){this.side.crossVectors(t,r).multiplyScalar(i*n.COS30DEG),this.down.copy(t).multiplyScalar(-i*n.SIN30DEG);var a=this.vPos,o=this.vertices;a.copy(e).sub(this.side).add(this.down),o[this.currentCoordinate++]=a.x,o[this.currentCoordinate++]=a.y,o[this.currentCoordinate++]=a.z,a.copy(e).add(this.side).add(this.down),o[this.currentCoordinate++]=a.x,o[this.currentCoordinate++]=a.y,o[this.currentCoordinate++]=a.z,a.copy(t).multiplyScalar(i).add(e),o[this.currentCoordinate++]=a.x,o[this.currentCoordinate++]=a.y,o[this.currentCoordinate++]=a.z,this.currentVertex+=3}},{key:"createTriangleVerticesWithUVs",value:function(e,t,r,i,a){this.side.crossVectors(t,r).multiplyScalar(i*n.COS30DEG),this.down.copy(t).multiplyScalar(-i*n.SIN30DEG);var o=this.vPos,s=this.vertices,l=this.uvs;o.copy(e).sub(this.side).add(this.down),s[this.currentCoordinate++]=o.x,s[this.currentCoordinate++]=o.y,s[this.currentCoordinate++]=o.z,l[this.currentUVCoordinate++]=a,l[this.currentUVCoordinate++]=0,o.copy(e).add(this.side).add(this.down),s[this.currentCoordinate++]=o.x,s[this.currentCoordinate++]=o.y,s[this.currentCoordinate++]=o.z,l[this.currentUVCoordinate++]=a,l[this.currentUVCoordinate++]=.5,o.copy(t).multiplyScalar(i).add(e),s[this.currentCoordinate++]=o.x,s[this.currentCoordinate++]=o.y,s[this.currentCoordinate++]=o.z,l[this.currentUVCoordinate++]=a,l[this.currentUVCoordinate++]=1,this.currentVertex+=3}},{key:"createPrismFaces",value:function(e){var t=this.indices;e=this.currentVertex-6,t[this.currentIndex++]=e+1,t[this.currentIndex++]=e+2,t[this.currentIndex++]=e+5,t[this.currentIndex++]=e+1,t[this.currentIndex++]=e+5,t[this.currentIndex++]=e+4,t[this.currentIndex++]=e+0,t[this.currentIndex++]=e+1,t[this.currentIndex++]=e+4,t[this.currentIndex++]=e+0,t[this.currentIndex++]=e+4,t[this.currentIndex++]=e+3,t[this.currentIndex++]=e+2,t[this.currentIndex++]=e+0,t[this.currentIndex++]=e+3,t[this.currentIndex++]=e+2,t[this.currentIndex++]=e+3,t[this.currentIndex++]=e+5}},{key:"createDefaultSubrayCreationCallbacks",value:function(){var e=this.randomGenerator.random;this.onDecideSubrayCreation=function(t,n){var r=n.currentSubray,i=n.rayParameters.subrayPeriod,a=n.rayParameters.subrayDutyCycle,o=n.rayParameters.isEternal&&0==r.recursion?-e()*i:A.MathUtils.lerp(r.birthTime,r.endPropagationTime,t.fraction0)-e()*i,s=n.time-o,l=Math.floor(s/i),u=e()*(l+1),c=0;if(s%i<=a*i&&(c=n.subrayProbability),r.recursion<n.maxSubrayRecursion&&n.numSubrays<n.maxSubrays&&e()<c){var f=n.addNewSubray(),d=n.randomGenerator.getSeed();f.seed=u,n.randomGenerator.setSeed(u),f.recursion=r.recursion+1,f.maxIterations=Math.max(1,r.maxIterations-1),f.linPos0.set(e(),e(),e()).multiplyScalar(1e3),f.linPos1.set(e(),e(),e()).multiplyScalar(1e3),f.up0.copy(r.up0),f.up1.copy(r.up1),f.radius0=t.radius0*n.rayParameters.radius0Factor,f.radius1=Math.min(n.rayParameters.minRadius,t.radius1*n.rayParameters.radius1Factor),f.birthTime=o+l*i,f.deathTime=f.birthTime+i*a,n.rayParameters.isEternal||0!=r.recursion||(f.birthTime=Math.max(f.birthTime,r.birthTime),f.deathTime=Math.min(f.deathTime,r.deathTime)),f.timeScale=2*r.timeScale,f.roughness=r.roughness,f.straightness=r.straightness,f.propagationTimeFactor=r.propagationTimeFactor,f.vanishingTimeFactor=r.vanishingTimeFactor,n.onSubrayCreation(t,r,f,n),n.randomGenerator.setSeed(d)}};var t=new A.Vector3,n=new A.Vector3,r=new A.Vector3,i=new A.Vector3;this.onSubrayCreation=function(e,t,n,r){r.subrayCylinderPosition(e,t,n,.5,.6,.2)},this.subrayConePosition=function(a,o,s,l,u,c){s.pos0.copy(a.pos0),t.subVectors(o.pos1,o.pos0),n.copy(t).normalize(),t.multiplyScalar(a.fraction0+(1-a.fraction0)*(e()*l));var f=t.length();r.crossVectors(o.up0,n);var d=2*Math.PI*e();r.multiplyScalar(Math.cos(d)),i.copy(o.up0).multiplyScalar(Math.sin(d)),s.pos1.copy(r).add(i).multiplyScalar(f*u*(c+e()*(1-c))).add(t).add(o.pos0)},this.subrayCylinderPosition=function(a,o,s,l,u,c){s.pos0.copy(a.pos0),t.subVectors(o.pos1,o.pos0),n.copy(t).normalize(),t.multiplyScalar(a.fraction0+(1-a.fraction0)*((2*e()-1)*l));var f=t.length();r.crossVectors(o.up0,n);var d=2*Math.PI*e();r.multiplyScalar(Math.cos(d)),i.copy(o.up0).multiplyScalar(Math.sin(d)),s.pos1.copy(r).add(i).multiplyScalar(f*u*(c+e()*(1-c))).add(t).add(o.pos0)}}},{key:"createSubray",value:function(){return{seed:0,maxIterations:0,recursion:0,pos0:new A.Vector3,pos1:new A.Vector3,linPos0:new A.Vector3,linPos1:new A.Vector3,up0:new A.Vector3,up1:new A.Vector3,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}},{key:"createSegment",value:function(){return{iteration:0,pos0:new A.Vector3,pos1:new A.Vector3,linPos0:new A.Vector3,linPos1:new A.Vector3,up0:new A.Vector3,up1:new A.Vector3,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}},{key:"getNewSegment",value:function(){return this.raySegments[this.currentSegmentIndex++]}},{key:"copy",value:function(e){return(0,h.Z)((0,p.Z)(n.prototype),"copy",this).call(this,e),this.init(n.copyParameters({},e.rayParameters)),this}},{key:"clone",value:function(){return new this.constructor(n.copyParameters({},this.rayParameters))}}],[{key:"createRandomGenerator",value:function(){for(var e=2053,t=[],n=0;n<e;n++)t.push(Math.random());var r={currentSeed:0,random:function(){var n=t[r.currentSeed];return r.currentSeed=(r.currentSeed+1)%e,n},getSeed:function(){return r.currentSeed/e},setSeed:function(t){r.currentSeed=Math.floor(t*e)%e}};return r}},{key:"copyParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(n){return t===e?n:n.clone()};return e.sourceOffset=void 0!==t.sourceOffset?n(t.sourceOffset):new A.Vector3(0,100,0),e.destOffset=void 0!==t.destOffset?n(t.destOffset):new A.Vector3(0,0,0),e.timeScale=void 0!==t.timeScale?t.timeScale:1,e.roughness=void 0!==t.roughness?t.roughness:.9,e.straightness=void 0!==t.straightness?t.straightness:.7,e.up0=void 0!==t.up0?n(t.up0):new A.Vector3(0,0,1),e.up1=void 0!==t.up1?n(t.up1):new A.Vector3(0,0,1),e.radius0=void 0!==t.radius0?t.radius0:1,e.radius1=void 0!==t.radius1?t.radius1:1,e.radius0Factor=void 0!==t.radius0Factor?t.radius0Factor:.5,e.radius1Factor=void 0!==t.radius1Factor?t.radius1Factor:.2,e.minRadius=void 0!==t.minRadius?t.minRadius:.2,e.isEternal=void 0!==t.isEternal?t.isEternal:void 0===t.birthTime||void 0===t.deathTime,e.birthTime=t.birthTime,e.deathTime=t.deathTime,e.propagationTimeFactor=void 0!==t.propagationTimeFactor?t.propagationTimeFactor:.1,e.vanishingTimeFactor=void 0!==t.vanishingTimeFactor?t.vanishingTimeFactor:.9,e.subrayPeriod=void 0!==t.subrayPeriod?t.subrayPeriod:4,e.subrayDutyCycle=void 0!==t.subrayDutyCycle?t.subrayDutyCycle:.6,e.maxIterations=void 0!==t.maxIterations?t.maxIterations:9,e.isStatic=void 0!==t.isStatic&&t.isStatic,e.ramification=void 0!==t.ramification?t.ramification:5,e.maxSubrayRecursion=void 0!==t.maxSubrayRecursion?t.maxSubrayRecursion:3,e.recursionProbability=void 0!==t.recursionProbability?t.recursionProbability:.6,e.generateUVs=void 0!==t.generateUVs&&t.generateUVs,e.randomGenerator=t.randomGenerator,e.noiseSeed=t.noiseSeed,e.onDecideSubrayCreation=t.onDecideSubrayCreation,e.onSubrayCreation=t.onSubrayCreation,e}}]),n}(A.BufferGeometry),xr=br;Math.PI,Math.PI;var _r=null,wr=null,Sr=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,v.Z)(this,n),(r=t.call(this,e)).isReflectorForSSRPass=!0,r.type="ReflectorForSSRPass";var a=(0,d.Z)(r),o=void 0!==i.color?new A.Color(i.color):new A.Color(8355711),s=i.textureWidth||512,l=i.textureHeight||512,u=i.clipBias||0,c=i.shader||n.ReflectorShader,f=!0===i.useDepthTexture,h=new A.Vector3(0,1,0),p=new A.Vector3,m=new A.Vector3;a.needsUpdate=!1,a.maxDistance=n.ReflectorShader.uniforms.maxDistance.value,a.opacity=n.ReflectorShader.uniforms.opacity.value,a.color=o,a.resolution=i.resolution||new A.Vector2(window.innerWidth,window.innerHeight),a._distanceAttenuation=n.ReflectorShader.defines.DISTANCE_ATTENUATION,Object.defineProperty(a,"distanceAttenuation",{get:function(){return a._distanceAttenuation},set:function(e){a._distanceAttenuation!==e&&(a._distanceAttenuation=e,a.material.defines.DISTANCE_ATTENUATION=e,a.material.needsUpdate=!0)}}),a._fresnel=n.ReflectorShader.defines.FRESNEL,Object.defineProperty(a,"fresnel",{get:function(){return a._fresnel},set:function(e){a._fresnel!==e&&(a._fresnel=e,a.material.defines.FRESNEL=e,a.material.needsUpdate=!0)}});var g,y=new A.Vector3,b=new A.Vector3,x=new A.Vector3,_=new A.Matrix4,w=new A.Vector3(0,0,-1),S=new A.Vector3,E=new A.Vector3,C=new A.Matrix4,T=new A.PerspectiveCamera;f&&((g=new A.DepthTexture).type=A.UnsignedShortType,g.minFilter=A.NearestFilter,g.magFilter=A.NearestFilter);var M={depthTexture:f?g:null,type:A.HalfFloatType},I=new A.WebGLRenderTarget(s,l,M),k=new A.ShaderMaterial({transparent:f,defines:Object.assign({},n.ReflectorShader.defines,{useDepthTexture:f}),uniforms:A.UniformsUtils.clone(c.uniforms),fragmentShader:c.fragmentShader,vertexShader:c.vertexShader});k.uniforms.tDiffuse.value=I.texture,k.uniforms.color.value=a.color,k.uniforms.textureMatrix.value=C,f&&(k.uniforms.tDepth.value=I.depthTexture),r.material=k;var B=[new A.Plane(new A.Vector3(0,1,0),u)];return r.doRender=function(e,t,n){if(k.uniforms.maxDistance.value=a.maxDistance,k.uniforms.color.value=a.color,k.uniforms.opacity.value=a.opacity,p.copy(n.position).normalize(),m.copy(p).reflect(h),k.uniforms.fresnelCoe.value=(p.dot(m)+1)/2,b.setFromMatrixPosition(a.matrixWorld),x.setFromMatrixPosition(n.matrixWorld),_.extractRotation(a.matrixWorld),y.set(0,0,1),y.applyMatrix4(_),S.subVectors(b,x),!(S.dot(y)>0)){S.reflect(y).negate(),S.add(b),_.extractRotation(n.matrixWorld),w.set(0,0,-1),w.applyMatrix4(_),w.add(x),E.subVectors(b,w),E.reflect(y).negate(),E.add(b),T.position.copy(S),T.up.set(0,1,0),T.up.applyMatrix4(_),T.up.reflect(y),T.lookAt(E),T.far=n.far,T.updateMatrixWorld(),T.projectionMatrix.copy(n.projectionMatrix),k.uniforms.virtualCameraNear.value=n.near,k.uniforms.virtualCameraFar.value=n.far,k.uniforms.virtualCameraMatrixWorld.value=T.matrixWorld,k.uniforms.virtualCameraProjectionMatrix.value=n.projectionMatrix,k.uniforms.virtualCameraProjectionMatrixInverse.value=n.projectionMatrixInverse,k.uniforms.resolution.value=a.resolution,C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(T.projectionMatrix),C.multiply(T.matrixWorldInverse),C.multiply(a.matrixWorld);var r=e.getRenderTarget(),i=e.xr.enabled,o=e.shadowMap.autoUpdate,s=e.clippingPlanes;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.clippingPlanes=B,e.setRenderTarget(I),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,T),e.xr.enabled=i,e.shadowMap.autoUpdate=o,e.clippingPlanes=s,e.setRenderTarget(r);var l=n.viewport;void 0!==l&&e.state.viewport(l)}},r.getRenderTarget=function(){return I},r}return(0,m.Z)(n)}(A.Mesh),Er=Sr,Cr={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new A.Vector3},up:{value:new A.Vector3(0,1,0)}},vertexShader:"\n      uniform vec3 sunPosition;\n      uniform float rayleigh;\n      uniform float turbidity;\n      uniform float mieCoefficient;\n      uniform vec3 up;\n\n      varying vec3 vWorldPosition;\n      varying vec3 vSunDirection;\n      varying float vSunfade;\n      varying vec3 vBetaR;\n      varying vec3 vBetaM;\n      varying float vSunE;\n\n      // constants for atmospheric scattering\n      const float e = 2.71828182845904523536028747135266249775724709369995957;\n      const float pi = 3.141592653589793238462643383279502884197169;\n\n      // wavelength of used primaries, according to preetham\n      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n      // mie stuff\n      // K coefficient for the primaries\n      const float v = 4.0;\n      const vec3 K = vec3( 0.686, 0.678, 0.666 );\n      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n      // earth shadow hack\n      // cutoffAngle = pi / 1.95;\n      const float cutoffAngle = 1.6110731556870734;\n      const float steepness = 1.5;\n      const float EE = 1000.0;\n\n      float sunIntensity( float zenithAngleCos ) {\n        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n      }\n\n      vec3 totalMie( float T ) {\n        float c = ( 0.2 * T ) * 10E-18;\n        return 0.434 * c * MieConst;\n      }\n\n      void main() {\n\n        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n        vWorldPosition = worldPosition.xyz;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        gl_Position.z = gl_Position.w; // set z to camera.far\n\n        vSunDirection = normalize( sunPosition );\n\n        vSunE = sunIntensity( dot( vSunDirection, up ) );\n\n        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n      // extinction (absorbtion + out scattering)\n      // rayleigh coefficients\n        vBetaR = totalRayleigh * rayleighCoefficient;\n\n      // mie coefficients\n        vBetaM = totalMie( turbidity ) * mieCoefficient;\n\n      }\n    ",fragmentShader:"\n      varying vec3 vWorldPosition;\n      varying vec3 vSunDirection;\n      varying float vSunfade;\n      varying vec3 vBetaR;\n      varying vec3 vBetaM;\n      varying float vSunE;\n\n      uniform float mieDirectionalG;\n      uniform vec3 up;\n\n      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n      // constants for atmospheric scattering\n      const float pi = 3.141592653589793238462643383279502884197169;\n\n      const float n = 1.0003; // refractive index of air\n      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n      // optical length at zenith for molecules\n      const float rayleighZenithLength = 8.4E3;\n      const float mieZenithLength = 1.25E3;\n      // 66 arc seconds -> degrees, and the cosine of that\n      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n      // 3.0 / ( 16.0 * pi )\n      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n      // 1.0 / ( 4.0 * pi )\n      const float ONE_OVER_FOURPI = 0.07957747154594767;\n\n      float rayleighPhase( float cosTheta ) {\n        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n      }\n\n      float hgPhase( float cosTheta, float g ) {\n        float g2 = pow( g, 2.0 );\n        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n      }\n\n      void main() {\n\n        vec3 direction = normalize( vWorldPosition - cameraPos );\n\n      // optical length\n      // cutoff angle at 90 to avoid singularity in next formula.\n        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n        float sR = rayleighZenithLength * inverse;\n        float sM = mieZenithLength * inverse;\n\n      // combined extinction factor\n        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n      // in scattering\n        float cosTheta = dot( direction, vSunDirection );\n\n        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n        vec3 betaRTheta = vBetaR * rPhase;\n\n        float mPhase = hgPhase( cosTheta, mieDirectionalG );\n        vec3 betaMTheta = vBetaM * mPhase;\n\n        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n      // nightsky\n        float theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n        float phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n        vec3 L0 = vec3( 0.1 ) * Fex;\n\n      // composition + solar disc\n        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n        gl_FragColor = vec4( retColor, 1.0 );\n\n      #include <tonemapping_fragment>\n      #include <".concat(xt>=154?"colorspace_fragment":"encodings_fragment",">\n\n      }\n    ")},Tr=new A.ShaderMaterial({name:"SkyShader",fragmentShader:Cr.fragmentShader,vertexShader:Cr.vertexShader,uniforms:A.UniformsUtils.clone(Cr.uniforms),side:A.BackSide,depthWrite:!1}),Mr=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){return(0,v.Z)(this,n),t.call(this,new A.BoxGeometry(1,1,1),Tr)}return(0,m.Z)(n)}(A.Mesh),Ir=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,v.Z)(this,n),(r=t.call(this,e)).isWater=!0,r.type="Water";var a=(0,d.Z)(r),o=void 0!==i.color?new A.Color(i.color):new A.Color(16777215),l=i.textureWidth||512,u=i.textureHeight||512,c=i.clipBias||0,f=i.flowDirection||new A.Vector2(1,0),h=i.flowSpeed||.03,p=i.reflectivity||.02,m=i.scale||1,g=i.shader||n.WaterShader,y=void 0!==i.encoding?i.encoding:3e3,b=i.flowMap||void 0,x=i.normalMap0,_=i.normalMap1,w=.15,S=.075,E=new A.Matrix4,C=new A.Clock;if(void 0===ir)return console.error("THREE.Water: Required component Reflector not found."),(0,s.Z)(r);if(void 0===or)return console.error("THREE.Water: Required component Refractor not found."),(0,s.Z)(r);var T=new ir(e,{textureWidth:l,textureHeight:u,clipBias:c,encoding:y}),M=new or(e,{textureWidth:l,textureHeight:u,clipBias:c,encoding:y});return T.matrixAutoUpdate=!1,M.matrixAutoUpdate=!1,r.material=new A.ShaderMaterial({uniforms:A.UniformsUtils.merge([A.UniformsLib.fog,g.uniforms]),vertexShader:g.vertexShader,fragmentShader:g.fragmentShader,transparent:!0,fog:!0}),void 0!==b?(r.material.defines.USE_FLOWMAP="",r.material.uniforms.tFlowMap={type:"t",value:b}):r.material.uniforms.flowDirection={type:"v2",value:f},x.wrapS=x.wrapT=A.RepeatWrapping,_.wrapS=_.wrapT=A.RepeatWrapping,r.material.uniforms.tReflectionMap.value=T.getRenderTarget().texture,r.material.uniforms.tRefractionMap.value=M.getRenderTarget().texture,r.material.uniforms.tNormalMap0.value=x,r.material.uniforms.tNormalMap1.value=_,r.material.uniforms.color.value=o,r.material.uniforms.reflectivity.value=p,r.material.uniforms.textureMatrix.value=E,r.material.uniforms.config.value.x=0,r.material.uniforms.config.value.y=S,r.material.uniforms.config.value.z=S,r.material.uniforms.config.value.w=m,r.onBeforeRender=function(e,t,n){!function(e){E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(e.projectionMatrix),E.multiply(e.matrixWorldInverse),E.multiply(a.matrixWorld)}(n),function(){var e=C.getDelta(),t=a.material.uniforms.config;t.value.x+=h*e,t.value.y=t.value.x+S,t.value.x>=w?(t.value.x=0,t.value.y=S):t.value.y>=w&&(t.value.y=t.value.y-w)}(),a.visible=!1,T.matrixWorld.copy(a.matrixWorld),M.matrixWorld.copy(a.matrixWorld),T.onBeforeRender(e,t,n),M.onBeforeRender(e,t,n),a.visible=!0},r}return(0,m.Z)(n)}(A.Mesh),kr=Ir;"\n\n\t\t#include <common>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tuniform sampler2D tReflectionMap;\n\t\tuniform sampler2D tRefractionMap;\n\t\tuniform sampler2D tNormalMap0;\n\t\tuniform sampler2D tNormalMap1;\n\n\t\t#ifdef USE_FLOWMAP\n\t\t\tuniform sampler2D tFlowMap;\n\t\t#else\n\t\t\tuniform vec2 flowDirection;\n\t\t#endif\n\n\t\tuniform vec3 color;\n\t\tuniform float reflectivity;\n\t\tuniform vec4 config;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tfloat flowMapOffset0 = config.x;\n\t\t\tfloat flowMapOffset1 = config.y;\n\t\t\tfloat halfCycle = config.z;\n\t\t\tfloat scale = config.w;\n\n\t\t\tvec3 toEye = normalize( vToEye );\n\n\t\t\t// determine flow direction\n\t\t\tvec2 flow;\n\t\t\t#ifdef USE_FLOWMAP\n\t\t\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;\n\t\t\t#else\n\t\t\t\tflow = flowDirection;\n\t\t\t#endif\n\t\t\tflow.x *= - 1.0;\n\n\t\t\t// sample normal maps (distort uvs with flowdata)\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\n\n\t\t\t// linear interpolate to get the final normal color\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\n\n\t\t\t// calculate normal vector\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\n\n\t\t\t// calculate final uv coords\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\n\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\n\t\t\tvec4 refractColor = texture2D( tRefractionMap, uv );\n\n\t\t\t// multiply water color with the mix of both textures\n\t\t\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <".concat(xt>=154?"colorspace_fragment":"encodings_fragment",">\n\t\t\t#include <fog_fragment>\n\n\t\t}");var Br=function(e){return e&&e.isCubeTexture},Rr=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r){var i,a;(0,v.Z)(this,n);var o=Br(e),s=(null!=(a=o?null==(i=e.image[0])?void 0:i.width:e.image.width)?a:1024)/4,l=Math.floor(Math.log2(s)),u=Math.pow(2,l),c=3*Math.max(u,112),f=4*u,d=[o?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH ".concat(1/c),"#define CUBEUV_TEXEL_HEIGHT ".concat(1/f),"#define CUBEUV_MAX_MIP ".concat(l,".0")].join("\n")+"\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <".concat(parseInt(A.REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment",">\n        }\n        "),h={map:{value:e},height:{value:(null==r?void 0:r.height)||15},radius:{value:(null==r?void 0:r.radius)||100}},p=new A.IcosahedronGeometry(1,16),m=new A.ShaderMaterial({uniforms:h,fragmentShader:d,vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",side:A.DoubleSide});return t.call(this,p,m)}return(0,m.Z)(n,[{key:"radius",get:function(){return this.material.uniforms.radius.value},set:function(e){this.material.uniforms.radius.value=e}},{key:"height",get:function(){return this.material.uniforms.height.value},set:function(e){this.material.uniforms.height.value=e}}]),n}(A.Mesh),Pr={createMeshesFromInstancedMesh:function(e){for(var t=new A.Group,n=e.count,r=e.geometry,i=e.material,a=0;a<n;a++){var o=new A.Mesh(r,i);e.getMatrixAt(a,o.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale),t.add(o)}return t.copy(e),t.updateMatrixWorld(),t},createMultiMaterialObject:function(e,t){for(var n=new A.Group,r=0,i=t.length;r<i;r++)n.add(new A.Mesh(e,t[r]));return n},detach:function(e,t,n){console.warn("THREE.SceneUtils: detach() has been deprecated. Use scene.attach( child ) instead."),n.attach(e)},attach:function(e,t,n){console.warn("THREE.SceneUtils: attach() has been deprecated. Use parent.attach( child ) instead."),n.attach(e)}};function Dr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=new Vector2,r=new Vector2,i=[new Vector2,new Vector2,new Vector2],a=[],o=document.createElement("canvas"),s=t,l=t;o.width=s,o.height=l;var u=o.getContext("2d");u.lineWidth=1,u.strokeStyle="rgb( 63, 63, 63 )",u.textAlign="center",u.fillStyle="rgb( 255, 255, 255 )",u.fillRect(0,0,s,l);var c=e.index,f=e.attributes.uv;if(c)for(var d=0,h=c.count;d<h;d+=3)a[0]=c.getX(d),a[1]=c.getX(d+1),a[2]=c.getX(d+2),i[0].fromBufferAttribute(f,a[0]),i[1].fromBufferAttribute(f,a[1]),i[2].fromBufferAttribute(f,a[2]),m(a,i,d/3);else for(var p=0,v=f.count;p<v;p+=3)a[0]=p,a[1]=p+1,a[2]=p+2,i[0].fromBufferAttribute(f,a[0]),i[1].fromBufferAttribute(f,a[1]),i[2].fromBufferAttribute(f,a[2]),m(a,i,p/3);return o;function m(e,t,i){u.beginPath(),n.set(0,0);for(var a=0,o=t.length;a<o;a++){var c=t[a];n.x+=c.x,n.y+=c.y,0===a?u.moveTo(c.x*(s-2)+.5,(1-c.y)*(l-2)+.5):u.lineTo(c.x*(s-2)+.5,(1-c.y)*(l-2)+.5)}u.closePath(),u.stroke(),n.divideScalar(t.length),u.font="18px Arial",u.fillStyle="rgb( 63, 63, 63 )",u.fillText(i,n.x*s,(1-n.y)*l),n.x>.95&&u.fillText(i,n.x%1*s,(1-n.y)*l),u.font="12px Arial",u.fillStyle="rgb( 191, 191, 191 )";for(var f=0,d=t.length;f<d;f++){var h=t[f];r.addVectors(n,h).divideScalar(2);var p=e[f];u.fillText("abc"[f]+p,r.x*s,(1-r.y)*l),r.x>.95&&u.fillText("abc"[f]+p,r.x%1*s,(1-r.y)*l)}}}var Lr=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new A.Vector3(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:3,s=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:10)/2,l=[new A.Vector3(t.x-s,t.y,t.z-s),new A.Vector3(t.x-s,t.y,t.z+s),new A.Vector3(t.x+s,t.y,t.z+s),new A.Vector3(t.x+s,t.y,t.z-s)],u=[l[r],l[i],l[a],l[o]];if(0<=--n){var c=[];return Array.prototype.push.apply(c,e(u[0],s,n,r,o,a,i)),Array.prototype.push.apply(c,e(u[1],s,n,r,i,a,o)),Array.prototype.push.apply(c,e(u[2],s,n,r,i,a,o)),Array.prototype.push.apply(c,e(u[3],s,n,a,i,r,o)),c}return u},Nr=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new A.Vector3(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:3,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:4,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:6,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:7,f=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:10)/2,d=[new A.Vector3(t.x-f,t.y+f,t.z-f),new A.Vector3(t.x-f,t.y+f,t.z+f),new A.Vector3(t.x-f,t.y-f,t.z+f),new A.Vector3(t.x-f,t.y-f,t.z-f),new A.Vector3(t.x+f,t.y-f,t.z-f),new A.Vector3(t.x+f,t.y-f,t.z+f),new A.Vector3(t.x+f,t.y+f,t.z+f),new A.Vector3(t.x+f,t.y+f,t.z-f)],h=[d[r],d[i],d[a],d[o],d[s],d[l],d[u],d[c]];if(--n>=0){var p=[];return Array.prototype.push.apply(p,e(h[0],f,n,r,o,s,c,u,l,a,i)),Array.prototype.push.apply(p,e(h[1],f,n,r,c,u,i,a,l,s,o)),Array.prototype.push.apply(p,e(h[2],f,n,r,c,u,i,a,l,s,o)),Array.prototype.push.apply(p,e(h[3],f,n,a,o,r,i,u,c,s,l)),Array.prototype.push.apply(p,e(h[4],f,n,a,o,r,i,u,c,s,l)),Array.prototype.push.apply(p,e(h[5],f,n,s,o,a,l,u,i,r,c)),Array.prototype.push.apply(p,e(h[6],f,n,s,o,a,l,u,i,r,c)),Array.prototype.push.apply(p,e(h[7],f,n,u,l,a,i,r,o,s,c)),p}return h},Fr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){for(var t=0,n=0,r=0,i=[0,0,0],a=e.fractal,o=0,s=a.length;o<s;o++){var l=a[o];"+"===l?r+=e.angle:"-"===l?r-=e.angle:"F"===l&&(t+=e.size*Math.cos(r),n+=-e.size*Math.sin(r),i.push(t,n,0))}return i}({fractal:function(e){for(var t="",n=e.axiom,r=0,i=e.steps;0<=i?r<i:r>i;0<=i?r++:r--){t="";for(var a=0,o=n.length;a<o;a++){var s=n[a];s in e.rules?t+=e.rules[s]:t+=s}n=t}return t}({axiom:"A",steps:4,rules:{A:"A+BF++BF-FA--FAFA-BF+",B:"-FA+BFBF++BF+FA--FA-B"}}),size:e,angle:Math.PI/3})},Or={hilbert3D:Nr,gosper:Fr,hilbert2D:Lr},Ur=Hr(),zr=new A.Mesh(new A.PlaneGeometry(2,2),Ur),Gr=new A.OrthographicCamera(0,1,0,1,0,1),Qr=null,Zr=null;function Hr(){var e=new A.RawShaderMaterial({uniforms:{roughnessMap:{value:null},normalMap:{value:null},texelSize:{value:new A.Vector2(1,1)}},vertexShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec2 uv;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\n\t\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t\t}\n\t\t",fragmentShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tuniform sampler2D roughnessMap;\n\t\t\tuniform sampler2D normalMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\n\t\t\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\n\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tfloat roughnessToVariance( float roughness ) {\n\n\t\t\t\tfloat variance = 0.0;\n\n\t\t\t\tif ( roughness >= r1 ) {\n\n\t\t\t\t\tvariance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;\n\n\t\t\t\t} else if ( roughness >= r4 ) {\n\n\t\t\t\t\tvariance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;\n\n\t\t\t\t} else if ( roughness >= r5 ) {\n\n\t\t\t\t\tvariance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfloat roughness2 = roughness * roughness;\n\n\t\t\t\t\tvariance = 1.79 * roughness2 * roughness2;\n\n\t\t\t\t}\n\n\t\t\t\treturn variance;\n\n\t\t\t}\n\n\t\t\tfloat varianceToRoughness( float variance ) {\n\n\t\t\t\tfloat roughness = 0.0;\n\n\t\t\t\tif ( variance >= v1 ) {\n\n\t\t\t\t\troughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;\n\n\t\t\t\t} else if ( variance >= v4 ) {\n\n\t\t\t\t\troughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;\n\n\t\t\t\t} else if ( variance >= v5 ) {\n\n\t\t\t\t\troughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\troughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79\n\n\t\t\t\t}\n\n\t\t\t\treturn roughness;\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );\n\n\t\t\t\tif ( texelSize.x == 0.0 ) return;\n\n\t\t\t\tfloat roughness = gl_FragColor.g;\n\n\t\t\t\tfloat variance = roughnessToVariance( roughness );\n\n\t\t\t\tvec3 avgNormal;\n\n\t\t\t\tfor ( float x = - 1.0; x < 2.0; x += 2.0 ) {\n\n\t\t\t\t\tfor ( float y = - 1.0; y < 2.0; y += 2.0 ) {\n\n\t\t\t\t\t\tvec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;\n\n\t\t\t\t\t\tavgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvariance += 1.0 - 0.25 * length( avgNormal );\n\n\t\t\t\tgl_FragColor.g = varianceToRoughness( variance );\n\n\t\t\t}\n\t\t",blending:A.NoBlending,depthTest:!1,depthWrite:!1});return e.type="RoughnessMipmapper",e}function jr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new A.Vector3,i=new A.Quaternion,a=new A.Vector3,o=new A.Matrix4,s=new A.Matrix4,l=new A.Matrix4;n.preserveMatrix=void 0===n.preserveMatrix||n.preserveMatrix,n.preservePosition=void 0===n.preservePosition||n.preservePosition,n.preserveHipPosition=void 0!==n.preserveHipPosition&&n.preserveHipPosition,n.useTargetMatrix=void 0!==n.useTargetMatrix&&n.useTargetMatrix,n.hip=void 0!==n.hip?n.hip:"hip",n.names=n.names||{};var u,c,f,d,h,p=t.isObject3D?t.skeleton.bones:Yr(t),v=e.isObject3D?e.skeleton.bones:Yr(e);if(e.isObject3D?e.skeleton.pose():(n.useTargetMatrix=!0,n.preserveMatrix=!1),n.preservePosition){h=[];for(var m=0;m<v.length;m++)h.push(v[m].position.clone())}if(n.preserveMatrix){e.updateMatrixWorld(),e.matrixWorld.identity();for(var g=0;g<e.children.length;++g)e.children[g].updateMatrixWorld(!0)}if(n.offsets){u=[];for(var y=0;y<v.length;++y)c=v[y],f=n.names[c.name]||c.name,n.offsets[f]&&(c.matrix.multiply(n.offsets[f]),c.matrix.decompose(c.position,c.quaternion,c.scale),c.updateMatrixWorld()),u.push(c.matrixWorld.clone())}for(var b=0;b<v.length;++b){if(c=v[b],d=Xr(f=n.names[c.name]||c.name,p),l.copy(c.matrixWorld),d){if(d.updateMatrixWorld(),n.useTargetMatrix?s.copy(d.matrixWorld):(s.copy(e.matrixWorld).invert(),s.multiply(d.matrixWorld)),a.setFromMatrixScale(s),s.scale(a.set(1/a.x,1/a.y,1/a.z)),l.makeRotationFromQuaternion(i.setFromRotationMatrix(s)),e.isObject3D){var x=v.indexOf(c),_=u?u[x]:o.copy(e.skeleton.boneInverses[x]).invert();l.multiply(_)}l.copyPosition(s)}c.parent&&c.parent.isBone?(c.matrix.copy(c.parent.matrixWorld).invert(),c.matrix.multiply(l)):c.matrix.copy(l),n.preserveHipPosition&&f===n.hip&&c.matrix.setPosition(r.set(0,c.position.y,0)),c.matrix.decompose(c.position,c.quaternion,c.scale),c.updateMatrixWorld()}if(n.preservePosition)for(var w=0;w<v.length;++w)c=v[w],(f=n.names[c.name]||c.name)!==n.hip&&c.position.copy(h[w]);n.preserveMatrix&&e.updateMatrixWorld(!0)}function Vr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r.useFirstFramePosition=void 0!==r.useFirstFramePosition&&r.useFirstFramePosition,r.fps=void 0!==r.fps?r.fps:30,r.names=r.names||[],t.isObject3D||(t=Kr(t));var i,a,o,s,l=Math.round(n.duration*(r.fps/1e3)*1e3),u=1/r.fps,c=[],f=new A.AnimationMixer(t),d=Yr(e.skeleton),h=[];f.clipAction(n).play(),f.update(0),t.updateMatrixWorld();for(var p=0;p<l;++p){var v=p*u;jr(e,t,r);for(var m=0;m<d.length;++m)Xr(s=r.names[d[m].name]||d[m].name,t.skeleton)&&(a=d[m],o=h[m]=h[m]||{bone:a},r.hip===s&&(o.pos||(o.pos={times:new Float32Array(l),values:new Float32Array(3*l)}),r.useFirstFramePosition&&(0===p&&(i=a.position.clone()),a.position.sub(i)),o.pos.times[p]=v,a.position.toArray(o.pos.values,3*p)),o.quat||(o.quat={times:new Float32Array(l),values:new Float32Array(4*l)}),o.quat.times[p]=v,a.quaternion.toArray(o.quat.values,4*p));f.update(u),t.updateMatrixWorld()}for(var g=0;g<h.length;++g)(o=h[g])&&(o.pos&&c.push(new A.VectorKeyframeTrack(".bones["+o.bone.name+"].position",o.pos.times,o.pos.values)),c.push(new A.QuaternionKeyframeTrack(".bones["+o.bone.name+"].quaternion",o.quat.times,o.quat.values)));return f.uncacheAction(n),new A.AnimationClip(n.name,-1,c)}function Wr(e){var t=new Map,n=new Map,r=e.clone();return Jr(e,r,(function(e,r){t.set(r,e),n.set(e,r)})),r.traverse((function(e){if(e.isSkinnedMesh){var r=e,i=t.get(e),a=i.skeleton.bones;r.skeleton=i.skeleton.clone(),r.bindMatrix.copy(i.bindMatrix),r.skeleton.bones=a.map((function(e){return n.get(e)})),r.bind(r.skeleton,r.bindMatrix)}})),r}function Xr(e,t){for(var n=0,r=Yr(t);n<r.length;n++)if(e===r[n].name)return r[n]}function Yr(e){return Array.isArray(e)?e:e.bones}function Kr(e){var t=new A.SkeletonHelper(e.bones[0]);return t.skeleton=e,t}function Jr(e,t,n){n(e,t);for(var r=0;r<e.children.length;r++)Jr(e.children[r],t.children[r],n)}var qr={retarget:jr,retargetClip:Vr,clone:Wr},$r={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","#include <packing>","void main() {","\tfloat depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );","\tgl_FragColor = vec4( vec3( depth ), opacity );","}"].join("\n")},ei=null,ti={compressNormals:function(e,t){e.geometry||console.error("Mesh must contain geometry. ");var n=e.geometry.attributes.normal;if(n||console.error("Geometry must contain normal attribute. "),!n.isPacked){3!=n.itemSize&&console.error("normal.itemSize is not 3, which cannot be encoded. ");var r,i=n.array,a=n.count;if("DEFAULT"==t){r=new Uint8Array(3*a);for(var o=0;o<i.length;o+=3){var s=this.EncodingFuncs.defaultEncode(i[o],i[o+1],i[o+2],1);r[o+0]=s[0],r[o+1]=s[1],r[o+2]=s[2]}e.geometry.setAttribute("normal",new A.BufferAttribute(r,3,!0)),e.geometry.attributes.normal.bytes=1*r.length}else if("OCT1Byte"==t){r=new Int8Array(2*a);for(var l=0;l<i.length;l+=3){var u=this.EncodingFuncs.octEncodeBest(i[l],i[l+1],i[l+2],1);r[l/3*2+0]=u[0],r[l/3*2+1]=u[1]}e.geometry.setAttribute("normal",new A.BufferAttribute(r,2,!0)),e.geometry.attributes.normal.bytes=1*r.length}else if("OCT2Byte"==t){r=new Int16Array(2*a);for(var c=0;c<i.length;c+=3){var f=this.EncodingFuncs.octEncodeBest(i[c],i[c+1],i[c+2],2);r[c/3*2+0]=f[0],r[c/3*2+1]=f[1]}e.geometry.setAttribute("normal",new A.BufferAttribute(r,2,!0)),e.geometry.attributes.normal.bytes=2*r.length}else if("ANGLES"==t){r=new Uint16Array(2*a);for(var d=0;d<i.length;d+=3){var h=this.EncodingFuncs.anglesEncode(i[d],i[d+1],i[d+2]);r[d/3*2+0]=h[0],r[d/3*2+1]=h[1]}e.geometry.setAttribute("normal",new A.BufferAttribute(r,2,!0)),e.geometry.attributes.normal.bytes=2*r.length}else console.error("Unrecognized encoding method, should be `DEFAULT` or `ANGLES` or `OCT`. ");e.geometry.attributes.normal.needsUpdate=!0,e.geometry.attributes.normal.isPacked=!0,e.geometry.attributes.normal.packingMethod=t,e.material instanceof ni||(e.material=(new ni).copy(e.material)),"ANGLES"==t&&(e.material.defines.USE_PACKED_NORMAL=0),"OCT1Byte"==t&&(e.material.defines.USE_PACKED_NORMAL=1),"OCT2Byte"==t&&(e.material.defines.USE_PACKED_NORMAL=1),"DEFAULT"==t&&(e.material.defines.USE_PACKED_NORMAL=2)}},compressPositions:function(e){e.geometry||console.error("Mesh must contain geometry. ");var t=e.geometry.attributes.position;if(t||console.error("Geometry must contain position attribute. "),!t.isPacked){3!=t.itemSize&&console.error("position.itemSize is not 3, which cannot be packed. ");var n=t.array,r=this.EncodingFuncs.quantizedEncode(n,2),i=r.quantized,a=r.decodeMat;null==e.geometry.boundingBox&&e.geometry.computeBoundingBox(),null==e.geometry.boundingSphere&&e.geometry.computeBoundingSphere(),e.geometry.setAttribute("position",new A.BufferAttribute(i,3)),e.geometry.attributes.position.isPacked=!0,e.geometry.attributes.position.needsUpdate=!0,e.geometry.attributes.position.bytes=2*i.length,e.material instanceof ni||(e.material=(new ni).copy(e.material)),e.material.defines.USE_PACKED_POSITION=0,e.material.uniforms.quantizeMatPos.value=a,e.material.uniforms.quantizeMatPos.needsUpdate=!0}},compressUvs:function(e){e.geometry||console.error("Mesh must contain geometry property. ");var t=e.geometry.attributes.uv;if(t||console.error("Geometry must contain uv attribute. "),!t.isPacked){for(var n,r={min:1/0,max:-1/0},i=t.array,a=0;a<i.length;a++)r.min=Math.min(r.min,i[a]),r.max=Math.max(r.max,i[a]);if(r.min>=-1&&r.max<=1){n=new Uint16Array(i.length);for(var o=0;o<i.length;o+=2){var s=this.EncodingFuncs.defaultEncode(i[o],i[o+1],0,2);n[o]=s[0],n[o+1]=s[1]}e.geometry.setAttribute("uv",new A.BufferAttribute(n,2,!0)),e.geometry.attributes.uv.isPacked=!0,e.geometry.attributes.uv.needsUpdate=!0,e.geometry.attributes.uv.bytes=2*n.length,e.material instanceof ni||(e.material=(new ni).copy(e.material)),e.material.defines.USE_PACKED_UV=0}else n=this.EncodingFuncs.quantizedEncodeUV(i,2),e.geometry.setAttribute("uv",new A.BufferAttribute(n.quantized,2)),e.geometry.attributes.uv.isPacked=!0,e.geometry.attributes.uv.needsUpdate=!0,e.geometry.attributes.uv.bytes=2*n.quantized.length,e.material instanceof ni||(e.material=(new ni).copy(e.material)),e.material.defines.USE_PACKED_UV=1,e.material.uniforms.quantizeMatUV.value=n.decodeMat,e.material.uniforms.quantizeMatUV.needsUpdate=!0}},EncodingFuncs:{defaultEncode:function(e,t,n,r){if(1==r){var i=Math.round(.5*(e+1)*255),a=Math.round(.5*(t+1)*255),o=Math.round(.5*(n+1)*255);return new Uint8Array([i,a,o])}if(2==r){var s=Math.round(.5*(e+1)*65535),l=Math.round(.5*(t+1)*65535),u=Math.round(.5*(n+1)*65535);return new Uint16Array([s,l,u])}console.error("number of bytes must be 1 or 2")},defaultDecode:function(e,t){return 1==t?[e[0]/255*2-1,e[1]/255*2-1,e[2]/255*2-1]:2==t?[e[0]/65535*2-1,e[1]/65535*2-1,e[2]/65535*2-1]:void console.error("number of bytes must be 1 or 2")},anglesEncode:function(e,t,n){var r=parseInt(.5*(1+Math.atan2(t,e)/Math.PI)*65535),i=parseInt(.5*(1+n)*65535);return new Uint16Array([r,i])},octEncodeBest:function(e,t,n,r){var i,a,o,s,l;return o=i=u(e,t,n,"floor","floor"),a=c(i),l=f(e,t,n,a),a=c(i=u(e,t,n,"ceil","floor")),(s=f(e,t,n,a))>l&&(o=i,l=s),a=c(i=u(e,t,n,"floor","ceil")),(s=f(e,t,n,a))>l&&(o=i,l=s),a=c(i=u(e,t,n,"ceil","ceil")),(s=f(e,t,n,a))>l&&(o=i),o;function u(e,t,i,a,o){var s=e/(Math.abs(e)+Math.abs(t)+Math.abs(i)),l=t/(Math.abs(e)+Math.abs(t)+Math.abs(i));if(n<0){var u=(1-Math.abs(l))*(s>=0?1:-1),c=(1-Math.abs(s))*(l>=0?1:-1);s=u,l=c;var f=1-Math.abs(s)-Math.abs(l);f>0&&(f+=.001,s+=s>0?f/2:-f/2,l+=l>0?f/2:-f/2)}return 1==r?new Int8Array([Math[a](127.5*s+(s<0?1:0)),Math[o](127.5*l+(l<0?1:0))]):2==r?new Int16Array([Math[a](32767.5*s+(s<0?1:0)),Math[o](32767.5*l+(l<0?1:0))]):void 0}function c(e){var t=e[0],n=e[1];1==r?(t/=t<0?127:128,n/=n<0?127:128):2==r&&(t/=t<0?32767:32768,n/=n<0?32767:32768);var i=1-Math.abs(t)-Math.abs(n);if(i<0){var a=t;t=(1-Math.abs(n))*(t>=0?1:-1),n=(1-Math.abs(a))*(n>=0?1:-1)}var o=Math.sqrt(t*t+n*n+i*i);return[t/o,n/o,i/o]}function f(e,t,n,r){return e*r[0]+t*r[1]+n*r[2]}},quantizedEncode:function(e,t){var n,r;1==t?(n=new Uint8Array(e.length),r=255):2==t?(n=new Uint16Array(e.length),r=65535):console.error("number of bytes error! ");var i=new A.Matrix4,a=new Float32Array(3),o=new Float32Array(3);a[0]=a[1]=a[2]=Number.MAX_VALUE,o[0]=o[1]=o[2]=-Number.MAX_VALUE;for(var s=0;s<e.length;s+=3)a[0]=Math.min(a[0],e[s+0]),a[1]=Math.min(a[1],e[s+1]),a[2]=Math.min(a[2],e[s+2]),o[0]=Math.max(o[0],e[s+0]),o[1]=Math.max(o[1],e[s+1]),o[2]=Math.max(o[2],e[s+2]);i.scale(new A.Vector3((o[0]-a[0])/r,(o[1]-a[1])/r,(o[2]-a[2])/r)),i.elements[12]=a[0],i.elements[13]=a[1],i.elements[14]=a[2],i.transpose();for(var l=new Float32Array([o[0]!==a[0]?r/(o[0]-a[0]):0,o[1]!==a[1]?r/(o[1]-a[1]):0,o[2]!==a[2]?r/(o[2]-a[2]):0]),u=0;u<e.length;u+=3)n[u+0]=Math.floor((e[u+0]-a[0])*l[0]),n[u+1]=Math.floor((e[u+1]-a[1])*l[1]),n[u+2]=Math.floor((e[u+2]-a[2])*l[2]);return{quantized:n,decodeMat:i}},quantizedEncodeUV:function(e,t){var n,r;1==t?(n=new Uint8Array(e.length),r=255):2==t?(n=new Uint16Array(e.length),r=65535):console.error("number of bytes error! ");var i=new A.Matrix3,a=new Float32Array(2),o=new Float32Array(2);a[0]=a[1]=Number.MAX_VALUE,o[0]=o[1]=-Number.MAX_VALUE;for(var s=0;s<e.length;s+=2)a[0]=Math.min(a[0],e[s+0]),a[1]=Math.min(a[1],e[s+1]),o[0]=Math.max(o[0],e[s+0]),o[1]=Math.max(o[1],e[s+1]);i.scale((o[0]-a[0])/r,(o[1]-a[1])/r),i.elements[6]=a[0],i.elements[7]=a[1],i.transpose();for(var l=new Float32Array([o[0]!==a[0]?r/(o[0]-a[0]):0,o[1]!==a[1]?r/(o[1]-a[1]):0]),u=0;u<e.length;u+=2)n[u+0]=Math.floor((e[u+0]-a[0])*l[0]),n[u+1]=Math.floor((e[u+1]-a[1])*l[1]);return{quantized:n,decodeMat:i}}}},ni=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this)).defines={},r.type="PackedPhongMaterial",r.uniforms=A.UniformsUtils.merge([A.ShaderLib.phong.uniforms,{quantizeMatPos:{value:null},quantizeMatUV:{value:null}}]),r.vertexShader=["#define PHONG","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","varying vec3 vNormal;","#endif",A.ShaderChunk.common,A.ShaderChunk.uv_pars_vertex,A.ShaderChunk.uv2_pars_vertex,A.ShaderChunk.displacementmap_pars_vertex,A.ShaderChunk.envmap_pars_vertex,A.ShaderChunk.color_pars_vertex,A.ShaderChunk.fog_pars_vertex,A.ShaderChunk.morphtarget_pars_vertex,A.ShaderChunk.skinning_pars_vertex,A.ShaderChunk.shadowmap_pars_vertex,A.ShaderChunk.logdepthbuf_pars_vertex,A.ShaderChunk.clipping_planes_pars_vertex,"#ifdef USE_PACKED_NORMAL\n\t\t\t\t\t#if USE_PACKED_NORMAL == 0\n\t\t\t\t\t\tvec3 decodeNormal(vec3 packedNormal)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfloat x = packedNormal.x * 2.0 - 1.0;\n\t\t\t\t\t\t\tfloat y = packedNormal.y * 2.0 - 1.0;\n\t\t\t\t\t\t\tvec2 scth = vec2(sin(x * PI), cos(x * PI));\n\t\t\t\t\t\t\tvec2 scphi = vec2(sqrt(1.0 - y * y), y);\n\t\t\t\t\t\t\treturn normalize( vec3(scth.y * scphi.x, scth.x * scphi.x, scphi.y) );\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#if USE_PACKED_NORMAL == 1\n\t\t\t\t\t\tvec3 decodeNormal(vec3 packedNormal)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvec3 v = vec3(packedNormal.xy, 1.0 - abs(packedNormal.x) - abs(packedNormal.y));\n\t\t\t\t\t\t\tif (v.z < 0.0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tv.xy = (1.0 - abs(v.yx)) * vec2((v.x >= 0.0) ? +1.0 : -1.0, (v.y >= 0.0) ? +1.0 : -1.0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn normalize(v);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#if USE_PACKED_NORMAL == 2\n\t\t\t\t\t\tvec3 decodeNormal(vec3 packedNormal)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvec3 v = (packedNormal * 2.0) - 1.0;\n\t\t\t\t\t\t\treturn normalize(v);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\t\t\t\t#endif","#ifdef USE_PACKED_POSITION\n\t\t\t\t\t#if USE_PACKED_POSITION == 0\n\t\t\t\t\t\tuniform mat4 quantizeMatPos;\n\t\t\t\t\t#endif\n\t\t\t\t#endif","#ifdef USE_PACKED_UV\n\t\t\t\t\t#if USE_PACKED_UV == 1\n\t\t\t\t\t\tuniform mat3 quantizeMatUV;\n\t\t\t\t\t#endif\n\t\t\t\t#endif","#ifdef USE_PACKED_UV\n\t\t\t\t\t#if USE_PACKED_UV == 0\n\t\t\t\t\t\tvec2 decodeUV(vec2 packedUV)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvec2 uv = (packedUV * 2.0) - 1.0;\n\t\t\t\t\t\t\treturn uv;\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#if USE_PACKED_UV == 1\n\t\t\t\t\t\tvec2 decodeUV(vec2 packedUV)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvec2 uv = ( vec3(packedUV, 1.0) * quantizeMatUV ).xy;\n\t\t\t\t\t\t\treturn uv;\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\t\t\t\t#endif","void main() {",A.ShaderChunk.uv_vertex,"#ifdef USE_UV\n\t\t\t\t\t#ifdef USE_PACKED_UV\n\t\t\t\t\t\tvUv = decodeUV(vUv);\n\t\t\t\t\t#endif\n\t\t\t\t#endif",A.ShaderChunk.uv2_vertex,A.ShaderChunk.color_vertex,A.ShaderChunk.beginnormal_vertex,"#ifdef USE_PACKED_NORMAL\n\t\t\t\t\tobjectNormal = decodeNormal(objectNormal);\n\t\t\t\t#endif\n\n\t\t\t\t#ifdef USE_TANGENT\n\t\t\t\t\tvec3 objectTangent = vec3( tangent.xyz );\n\t\t\t\t#endif\n\t\t\t\t",A.ShaderChunk.morphnormal_vertex,A.ShaderChunk.skinbase_vertex,A.ShaderChunk.skinnormal_vertex,A.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif",A.ShaderChunk.begin_vertex,"#ifdef USE_PACKED_POSITION\n\t\t\t\t\t#if USE_PACKED_POSITION == 0\n\t\t\t\t\t\ttransformed = ( vec4(transformed, 1.0) * quantizeMatPos ).xyz;\n\t\t\t\t\t#endif\n\t\t\t\t#endif",A.ShaderChunk.morphtarget_vertex,A.ShaderChunk.skinning_vertex,A.ShaderChunk.displacementmap_vertex,A.ShaderChunk.project_vertex,A.ShaderChunk.logdepthbuf_vertex,A.ShaderChunk.clipping_planes_vertex,"vViewPosition = - mvPosition.xyz;",A.ShaderChunk.worldpos_vertex,A.ShaderChunk.envmap_vertex,A.ShaderChunk.shadowmap_vertex,A.ShaderChunk.fog_vertex,"}"].join("\n"),r.fragmentShader=["#define PHONG","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;",A.ShaderChunk.common,A.ShaderChunk.packing,A.ShaderChunk.dithering_pars_fragment,A.ShaderChunk.color_pars_fragment,A.ShaderChunk.uv_pars_fragment,A.ShaderChunk.uv2_pars_fragment,A.ShaderChunk.map_pars_fragment,A.ShaderChunk.alphamap_pars_fragment,A.ShaderChunk.aomap_pars_fragment,A.ShaderChunk.lightmap_pars_fragment,A.ShaderChunk.emissivemap_pars_fragment,A.ShaderChunk.envmap_common_pars_fragment,A.ShaderChunk.envmap_pars_fragment,A.ShaderChunk.cube_uv_reflection_fragment,A.ShaderChunk.fog_pars_fragment,A.ShaderChunk.bsdfs,A.ShaderChunk.lights_pars_begin,A.ShaderChunk.lights_phong_pars_fragment,A.ShaderChunk.shadowmap_pars_fragment,A.ShaderChunk.bumpmap_pars_fragment,A.ShaderChunk.normalmap_pars_fragment,A.ShaderChunk.specularmap_pars_fragment,A.ShaderChunk.logdepthbuf_pars_fragment,A.ShaderChunk.clipping_planes_pars_fragment,"void main() {",A.ShaderChunk.clipping_planes_fragment,"vec4 diffuseColor = vec4( diffuse, opacity );","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","vec3 totalEmissiveRadiance = emissive;",A.ShaderChunk.logdepthbuf_fragment,A.ShaderChunk.map_fragment,A.ShaderChunk.color_fragment,A.ShaderChunk.alphamap_fragment,A.ShaderChunk.alphatest_fragment,A.ShaderChunk.specularmap_fragment,A.ShaderChunk.normal_fragment_begin,A.ShaderChunk.normal_fragment_maps,A.ShaderChunk.emissivemap_fragment,A.ShaderChunk.lights_phong_fragment,A.ShaderChunk.lights_fragment_begin,A.ShaderChunk.lights_fragment_maps,A.ShaderChunk.lights_fragment_end,A.ShaderChunk.aomap_fragment,"vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;",A.ShaderChunk.envmap_fragment,"gl_FragColor = vec4( outgoingLight, diffuseColor.a );",A.ShaderChunk.tonemapping_fragment,parseInt(A.REVISION.replace(/\D+/g,""))>=154?A.ShaderChunk.colorspace_fragment:A.ShaderChunk.encodings_fragment,A.ShaderChunk.fog_fragment,A.ShaderChunk.premultiplied_alpha_fragment,A.ShaderChunk.dithering_fragment,"}"].join("\n"),r.setValues(e),r}return(0,m.Z)(n)}(A.MeshPhongMaterial),ri={uniforms:{textureWidth:{value:1},textureHeight:{value:1},focalDepth:{value:1},focalLength:{value:24},fstop:{value:.9},tColor:{value:null},tDepth:{value:null},maxblur:{value:1},showFocus:{value:0},manualdof:{value:0},vignetting:{value:0},depthblur:{value:0},threshold:{value:.5},gain:{value:2},bias:{value:.5},fringe:{value:.7},znear:{value:.1},zfar:{value:100},noise:{value:1},dithering:{value:1e-4},pentagon:{value:0},shaderFocus:{value:1},focusCoords:{value:new A.Vector2}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","uniform sampler2D tColor;","uniform sampler2D tDepth;","uniform float textureWidth;","uniform float textureHeight;","uniform float focalDepth;  //focal distance value in meters, but you may use autofocus option below","uniform float focalLength; //focal length in mm","uniform float fstop; //f-stop value","uniform bool showFocus; //show debug focus point and focal range (red = focal point, green = focal range)","/*","make sure that these two values are the same for your camera, otherwise distances will be wrong.","*/","uniform float znear; // camera clipping start","uniform float zfar; // camera clipping end","//------------------------------------------","//user variables","const int samples = SAMPLES; //samples on the first ring","const int rings = RINGS; //ring count","const int maxringsamples = rings * samples;","uniform bool manualdof; // manual dof calculation","float ndofstart = 1.0; // near dof blur start","float ndofdist = 2.0; // near dof blur falloff distance","float fdofstart = 1.0; // far dof blur start","float fdofdist = 3.0; // far dof blur falloff distance","float CoC = 0.03; //circle of confusion size in mm (35mm film = 0.03mm)","uniform bool vignetting; // use optical lens vignetting","float vignout = 1.3; // vignetting outer border","float vignin = 0.0; // vignetting inner border","float vignfade = 22.0; // f-stops till vignete fades","uniform bool shaderFocus;","// disable if you use external focalDepth value","uniform vec2 focusCoords;","// autofocus point on screen (0.0,0.0 - left lower corner, 1.0,1.0 - upper right)","// if center of screen use vec2(0.5, 0.5);","uniform float maxblur;","//clamp value of max blur (0.0 = no blur, 1.0 default)","uniform float threshold; // highlight threshold;","uniform float gain; // highlight gain;","uniform float bias; // bokeh edge bias","uniform float fringe; // bokeh chromatic aberration / fringing","uniform bool noise; //use noise instead of pattern for sample dithering","uniform float dithering;","uniform bool depthblur; // blur the depth buffer","float dbsize = 1.25; // depth blur size","/*","next part is experimental","not looking good with small sample and ring count","looks okay starting from samples = 4, rings = 4","*/","uniform bool pentagon; //use pentagon as bokeh shape?","float feather = 0.4; //pentagon shape feather","//------------------------------------------","float penta(vec2 coords) {","\t//pentagonal shape","\tfloat scale = float(rings) - 1.3;","\tvec4  HS0 = vec4( 1.0,         0.0,         0.0,  1.0);","\tvec4  HS1 = vec4( 0.309016994, 0.951056516, 0.0,  1.0);","\tvec4  HS2 = vec4(-0.809016994, 0.587785252, 0.0,  1.0);","\tvec4  HS3 = vec4(-0.809016994,-0.587785252, 0.0,  1.0);","\tvec4  HS4 = vec4( 0.309016994,-0.951056516, 0.0,  1.0);","\tvec4  HS5 = vec4( 0.0        ,0.0         , 1.0,  1.0);","\tvec4  one = vec4( 1.0 );","\tvec4 P = vec4((coords),vec2(scale, scale));","\tvec4 dist = vec4(0.0);","\tfloat inorout = -4.0;","\tdist.x = dot( P, HS0 );","\tdist.y = dot( P, HS1 );","\tdist.z = dot( P, HS2 );","\tdist.w = dot( P, HS3 );","\tdist = smoothstep( -feather, feather, dist );","\tinorout += dot( dist, one );","\tdist.x = dot( P, HS4 );","\tdist.y = HS5.w - abs( P.z );","\tdist = smoothstep( -feather, feather, dist );","\tinorout += dist.x;","\treturn clamp( inorout, 0.0, 1.0 );","}","float bdepth(vec2 coords) {","\t// Depth buffer blur","\tfloat d = 0.0;","\tfloat kernel[9];","\tvec2 offset[9];","\tvec2 wh = vec2(1.0/textureWidth,1.0/textureHeight) * dbsize;","\toffset[0] = vec2(-wh.x,-wh.y);","\toffset[1] = vec2( 0.0, -wh.y);","\toffset[2] = vec2( wh.x -wh.y);","\toffset[3] = vec2(-wh.x,  0.0);","\toffset[4] = vec2( 0.0,   0.0);","\toffset[5] = vec2( wh.x,  0.0);","\toffset[6] = vec2(-wh.x, wh.y);","\toffset[7] = vec2( 0.0,  wh.y);","\toffset[8] = vec2( wh.x, wh.y);","\tkernel[0] = 1.0/16.0;   kernel[1] = 2.0/16.0;   kernel[2] = 1.0/16.0;","\tkernel[3] = 2.0/16.0;   kernel[4] = 4.0/16.0;   kernel[5] = 2.0/16.0;","\tkernel[6] = 1.0/16.0;   kernel[7] = 2.0/16.0;   kernel[8] = 1.0/16.0;","\tfor( int i=0; i<9; i++ ) {","\t\tfloat tmp = texture2D(tDepth, coords + offset[i]).r;","\t\td += tmp * kernel[i];","\t}","\treturn d;","}","vec3 color(vec2 coords,float blur) {","\t//processing the sample","\tvec3 col = vec3(0.0);","\tvec2 texel = vec2(1.0/textureWidth,1.0/textureHeight);","\tcol.r = texture2D(tColor,coords + vec2(0.0,1.0)*texel*fringe*blur).r;","\tcol.g = texture2D(tColor,coords + vec2(-0.866,-0.5)*texel*fringe*blur).g;","\tcol.b = texture2D(tColor,coords + vec2(0.866,-0.5)*texel*fringe*blur).b;","\tvec3 lumcoeff = vec3(0.299,0.587,0.114);","\tfloat lum = dot(col.rgb, lumcoeff);","\tfloat thresh = max((lum-threshold)*gain, 0.0);","\treturn col+mix(vec3(0.0),col,thresh*blur);","}","vec3 debugFocus(vec3 col, float blur, float depth) {","\tfloat edge = 0.002*depth; //distance based edge smoothing","\tfloat m = clamp(smoothstep(0.0,edge,blur),0.0,1.0);","\tfloat e = clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);","\tcol = mix(col,vec3(1.0,0.5,0.0),(1.0-m)*0.6);","\tcol = mix(col,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);","\treturn col;","}","float linearize(float depth) {","\treturn -zfar * znear / (depth * (zfar - znear) - zfar);","}","float vignette() {","\tfloat dist = distance(vUv.xy, vec2(0.5,0.5));","\tdist = smoothstep(vignout+(fstop/vignfade), vignin+(fstop/vignfade), dist);","\treturn clamp(dist,0.0,1.0);","}","float gather(float i, float j, int ringsamples, inout vec3 col, float w, float h, float blur) {","\tfloat rings2 = float(rings);","\tfloat step = PI*2.0 / float(ringsamples);","\tfloat pw = cos(j*step)*i;","\tfloat ph = sin(j*step)*i;","\tfloat p = 1.0;","\tif (pentagon) {","\t\tp = penta(vec2(pw,ph));","\t}","\tcol += color(vUv.xy + vec2(pw*w,ph*h), blur) * mix(1.0, i/rings2, bias) * p;","\treturn 1.0 * mix(1.0, i /rings2, bias) * p;","}","void main() {","\t//scene depth calculation","\tfloat depth = linearize(texture2D(tDepth,vUv.xy).x);","\t// Blur depth?","\tif ( depthblur ) {","\t\tdepth = linearize(bdepth(vUv.xy));","\t}","\t//focal plane calculation","\tfloat fDepth = focalDepth;","\tif (shaderFocus) {","\t\tfDepth = linearize(texture2D(tDepth,focusCoords).x);","\t}","\t// dof blur factor calculation","\tfloat blur = 0.0;","\tif (manualdof) {","\t\tfloat a = depth-fDepth; // Focal plane","\t\tfloat b = (a-fdofstart)/fdofdist; // Far DoF","\t\tfloat c = (-a-ndofstart)/ndofdist; // Near Dof","\t\tblur = (a>0.0) ? b : c;","\t} else {","\t\tfloat f = focalLength; // focal length in mm","\t\tfloat d = fDepth*1000.0; // focal plane in mm","\t\tfloat o = depth*1000.0; // depth in mm","\t\tfloat a = (o*f)/(o-f);","\t\tfloat b = (d*f)/(d-f);","\t\tfloat c = (d-f)/(d*fstop*CoC);","\t\tblur = abs(a-b)*c;","\t}","\tblur = clamp(blur,0.0,1.0);","\t// calculation of pattern for dithering","\tvec2 noise = vec2(rand(vUv.xy), rand( vUv.xy + vec2( 0.4, 0.6 ) ) )*dithering*blur;","\t// getting blur x and y step factor","\tfloat w = (1.0/textureWidth)*blur*maxblur+noise.x;","\tfloat h = (1.0/textureHeight)*blur*maxblur+noise.y;","\t// calculation of final color","\tvec3 col = vec3(0.0);","\tif(blur < 0.05) {","\t\t//some optimization thingy","\t\tcol = texture2D(tColor, vUv.xy).rgb;","\t} else {","\t\tcol = texture2D(tColor, vUv.xy).rgb;","\t\tfloat s = 1.0;","\t\tint ringsamples;","\t\tfor (int i = 1; i <= rings; i++) {","\t\t\t/*unboxstart*/","\t\t\tringsamples = i * samples;","\t\t\tfor (int j = 0 ; j < maxringsamples ; j++) {","\t\t\t\tif (j >= ringsamples) break;","\t\t\t\ts += gather(float(i), float(j), ringsamples, col, w, h, blur);","\t\t\t}","\t\t\t/*unboxend*/","\t\t}","\t\tcol /= s; //divide by sample count","\t}","\tif (showFocus) {","\t\tcol = debugFocus(col, blur, depth);","\t}","\tif (vignetting) {","\t\tcol *= vignette();","\t}","\tgl_FragColor.rgb = col;","\tgl_FragColor.a = 1.0;","} "].join("\n")},ii={uniforms:{mNear:{value:1},mFar:{value:1e3}},vertexShader:["varying float vViewZDepth;","void main() {","\t#include <begin_vertex>","\t#include <project_vertex>","\tvViewZDepth = - mvPosition.z;","}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","varying float vViewZDepth;","void main() {","\tfloat color = 1.0 - smoothstep( mNear, mFar, vViewZDepth );","\tgl_FragColor = vec4( vec3( color ), 1.0 );","} "].join("\n")},ai=null,oi=new A.Triangle,si=new A.Vector3,li=null,ui={c:null,u:[new A.Vector3,new A.Vector3,new A.Vector3],e:[]},ci={c:null,u:[new A.Vector3,new A.Vector3,new A.Vector3],e:[]},fi=[[],[],[]],di=[[],[],[]],hi=[],pi=new A.Vector3,vi=new A.Vector3,mi=new A.Vector3,gi=new A.Vector3,yi=new A.Vector3,Ai=new A.Vector3,bi=new A.Matrix3,xi=new A.Box3,_i=new A.Matrix4,wi=new A.Matrix4,Si=new A.Ray,Ei=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new A.Vector3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A.Vector3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new A.Matrix3;(0,v.Z)(this,e),this.center=t,this.halfSize=n,this.rotation=r}return(0,m.Z)(e,[{key:"set",value:function(e,t,n){return this.center=e,this.halfSize=t,this.rotation=n,this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.halfSize.copy(e.halfSize),this.rotation.copy(e.rotation),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"getSize",value:function(e){return e.copy(this.halfSize).multiplyScalar(2)}},{key:"clampPoint",value:function(e,t){var n=this.halfSize;gi.subVectors(e,this.center),this.rotation.extractBasis(pi,vi,mi),t.copy(this.center);var r=A.MathUtils.clamp(gi.dot(pi),-n.x,n.x);t.add(pi.multiplyScalar(r));var i=A.MathUtils.clamp(gi.dot(vi),-n.y,n.y);t.add(vi.multiplyScalar(i));var a=A.MathUtils.clamp(gi.dot(mi),-n.z,n.z);return t.add(mi.multiplyScalar(a)),t}},{key:"containsPoint",value:function(e){return gi.subVectors(e,this.center),this.rotation.extractBasis(pi,vi,mi),Math.abs(gi.dot(pi))<=this.halfSize.x&&Math.abs(gi.dot(vi))<=this.halfSize.y&&Math.abs(gi.dot(mi))<=this.halfSize.z}},{key:"intersectsBox3",value:function(e){return this.intersectsOBB(Ci.fromBox3(e))}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Ai),Ai.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsOBB",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;ui.c=this.center,ui.e[0]=this.halfSize.x,ui.e[1]=this.halfSize.y,ui.e[2]=this.halfSize.z,this.rotation.extractBasis(ui.u[0],ui.u[1],ui.u[2]),ci.c=e.center,ci.e[0]=e.halfSize.x,ci.e[1]=e.halfSize.y,ci.e[2]=e.halfSize.z,e.rotation.extractBasis(ci.u[0],ci.u[1],ci.u[2]);for(var i=0;i<3;i++)for(var a=0;a<3;a++)fi[i][a]=ui.u[i].dot(ci.u[a]);gi.subVectors(ci.c,ui.c),hi[0]=gi.dot(ui.u[0]),hi[1]=gi.dot(ui.u[1]),hi[2]=gi.dot(ui.u[2]);for(var o=0;o<3;o++)for(var s=0;s<3;s++)di[o][s]=Math.abs(fi[o][s])+r;for(var l=0;l<3;l++)if(t=ui.e[l],n=ci.e[0]*di[l][0]+ci.e[1]*di[l][1]+ci.e[2]*di[l][2],Math.abs(hi[l])>t+n)return!1;for(var u=0;u<3;u++)if(t=ui.e[0]*di[0][u]+ui.e[1]*di[1][u]+ui.e[2]*di[2][u],n=ci.e[u],Math.abs(hi[0]*fi[0][u]+hi[1]*fi[1][u]+hi[2]*fi[2][u])>t+n)return!1;return t=ui.e[1]*di[2][0]+ui.e[2]*di[1][0],n=ci.e[1]*di[0][2]+ci.e[2]*di[0][1],!(Math.abs(hi[2]*fi[1][0]-hi[1]*fi[2][0])>t+n)&&(t=ui.e[1]*di[2][1]+ui.e[2]*di[1][1],n=ci.e[0]*di[0][2]+ci.e[2]*di[0][0],!(Math.abs(hi[2]*fi[1][1]-hi[1]*fi[2][1])>t+n)&&(t=ui.e[1]*di[2][2]+ui.e[2]*di[1][2],n=ci.e[0]*di[0][1]+ci.e[1]*di[0][0],!(Math.abs(hi[2]*fi[1][2]-hi[1]*fi[2][2])>t+n)&&(t=ui.e[0]*di[2][0]+ui.e[2]*di[0][0],n=ci.e[1]*di[1][2]+ci.e[2]*di[1][1],!(Math.abs(hi[0]*fi[2][0]-hi[2]*fi[0][0])>t+n)&&(t=ui.e[0]*di[2][1]+ui.e[2]*di[0][1],n=ci.e[0]*di[1][2]+ci.e[2]*di[1][0],!(Math.abs(hi[0]*fi[2][1]-hi[2]*fi[0][1])>t+n)&&(t=ui.e[0]*di[2][2]+ui.e[2]*di[0][2],n=ci.e[0]*di[1][1]+ci.e[1]*di[1][0],!(Math.abs(hi[0]*fi[2][2]-hi[2]*fi[0][2])>t+n)&&(t=ui.e[0]*di[1][0]+ui.e[1]*di[0][0],n=ci.e[1]*di[2][2]+ci.e[2]*di[2][1],!(Math.abs(hi[1]*fi[0][0]-hi[0]*fi[1][0])>t+n)&&(t=ui.e[0]*di[1][1]+ui.e[1]*di[0][1],n=ci.e[0]*di[2][2]+ci.e[2]*di[2][0],!(Math.abs(hi[1]*fi[0][1]-hi[0]*fi[1][1])>t+n)&&(t=ui.e[0]*di[1][2]+ui.e[1]*di[0][2],n=ci.e[0]*di[2][1]+ci.e[1]*di[2][0],!(Math.abs(hi[1]*fi[0][2]-hi[0]*fi[1][2])>t+n)))))))))}},{key:"intersectsPlane",value:function(e){this.rotation.extractBasis(pi,vi,mi);var t=this.halfSize.x*Math.abs(e.normal.dot(pi))+this.halfSize.y*Math.abs(e.normal.dot(vi))+this.halfSize.z*Math.abs(e.normal.dot(mi)),n=e.normal.dot(this.center)-e.constant;return Math.abs(n)<=t}},{key:"intersectRay",value:function(e,t){return this.getSize(yi),xi.setFromCenterAndSize(gi.set(0,0,0),yi),_i.setFromMatrix3(this.rotation),_i.setPosition(this.center),wi.copy(_i).invert(),Si.copy(e).applyMatrix4(wi),Si.intersectBox(xi,t)?t.applyMatrix4(_i):null}},{key:"intersectsRay",value:function(e){return null!==this.intersectRay(e,gi)}},{key:"fromBox3",value:function(e){return e.getCenter(this.center),e.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.halfSize.equals(this.halfSize)&&e.rotation.equals(this.rotation)}},{key:"applyMatrix4",value:function(e){var t=e.elements,n=gi.set(t[0],t[1],t[2]).length(),r=gi.set(t[4],t[5],t[6]).length(),i=gi.set(t[8],t[9],t[10]).length();e.determinant()<0&&(n=-n),bi.setFromMatrix4(e);var a=1/n,o=1/r,s=1/i;return bi.elements[0]*=a,bi.elements[1]*=a,bi.elements[2]*=a,bi.elements[3]*=o,bi.elements[4]*=o,bi.elements[5]*=o,bi.elements[6]*=s,bi.elements[7]*=s,bi.elements[8]*=s,this.rotation.multiply(bi),this.halfSize.x*=n,this.halfSize.y*=r,this.halfSize.z*=i,gi.setFromMatrixPosition(e),this.center.add(gi),this}}]),e}(),Ci=new Ei,Ti=new A.Vector3,Mi=new A.Vector3,Ii=new A.Vector3,ki=1e-10,Bi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new A.Vector3(0,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A.Vector3(0,1,0),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,v.Z)(this,e),this.start=t,this.end=n,this.radius=r}return(0,m.Z)(e,[{key:"clone",value:function(){return new e(this.start.clone(),this.end.clone(),this.radius)}},{key:"set",value:function(e,t,n){this.start.copy(e),this.end.copy(t),this.radius=n}},{key:"copy",value:function(e){this.start.copy(e.start),this.end.copy(e.end),this.radius=e.radius}},{key:"getCenter",value:function(e){return e.copy(this.end).add(this.start).multiplyScalar(.5)}},{key:"translate",value:function(e){this.start.add(e),this.end.add(e)}},{key:"checkAABBAxis",value:function(e,t,n,r,i,a,o,s,l){return(i-e<l||i-n<l)&&(e-a<l||n-a<l)&&(o-t<l||o-r<l)&&(t-s<l||r-s<l)}},{key:"intersectsBox",value:function(e){return this.checkAABBAxis(this.start.x,this.start.y,this.end.x,this.end.y,e.min.x,e.max.x,e.min.y,e.max.y,this.radius)&&this.checkAABBAxis(this.start.x,this.start.z,this.end.x,this.end.z,e.min.x,e.max.x,e.min.z,e.max.z,this.radius)&&this.checkAABBAxis(this.start.y,this.start.z,this.end.y,this.end.z,e.min.y,e.max.y,e.min.z,e.max.z,this.radius)}},{key:"lineLineMinimumPoints",value:function(e,t){var n,r,i=Ti.copy(e.end).sub(e.start),a=Mi.copy(t.end).sub(t.start),o=Ii.copy(t.start).sub(e.start),s=i.dot(a),l=i.dot(i),u=a.dot(a),c=a.dot(o),f=i.dot(o),d=l*u-s*s;if(Math.abs(d)<ki){var h=-c/u,p=(s-c)/u;Math.abs(h-.5)<Math.abs(p-.5)?(n=0,r=h):(n=1,r=p)}else r=((n=(c*s+f*u)/d)*s-c)/u;return r=Math.max(0,Math.min(1,r)),n=Math.max(0,Math.min(1,n)),[i.multiplyScalar(n).add(e.start),a.multiplyScalar(r).add(t.start)]}}]),e}(),Ri={},Pi=null;function Di(){for(var e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=0;t<256;t++)e[256+t]=e[t];return e}var Li=null;function Ni(e){return e*e*e*(e*(6*e-15)+10)}function Fi(e,t,n){return t+e*(n-t)}function Oi(e,t,n,r){var i=15&e,a=i<8?t:n,o=i<4?n:12==i||14==i?t:r;return(0==(1&i)?a:-a)+(0==(2&i)?o:-o)}var Ui=null,zi=new A.Vector3,Gi=new A.Vector3,Qi=new A.Plane,Zi=new A.Line3,Hi=new A.Line3,ji=new A.Sphere,Vi=new Bi,Wi=null,Xi=null,Yi={rainbow:[[0,255],[.2,65535],[.5,65280],[.8,16776960],[1,16711680]],cooltowarm:[[0,3952322],[.2,10206463],[.5,14474460],[.8,16163717],[1,11797542]],blackbody:[[0,0],[.2,7864320],[.5,15086080],[.8,16776960],[1,16777215]],grayscale:[[0,0],[.2,4210752],[.5,8355712],[.8,12566463],[1,16777215]]},Ki={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Ji=null,qi=null,$i=null,ea=null,ta=new A.Vector3,na=null,ra=null,ia=null,aa=null,oa=null,sa=new A.Euler(0,0,0,"YXZ"),la=new A.Vector3,ua={type:"change"},ca={type:"lock"},fa={type:"unlock"},da=Math.PI/2,ha=null,pa=null,va=null,ma=new A.Ray,ga=new A.Plane,ya=Math.cos(Math.PI/180*70),Aa=function(e,t){return(e%t+t)%t},ba=null,xa=null,_a={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},wa={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},Sa={x:0,y:0},Ea={camera:new A.Matrix4,gizmos:new A.Matrix4},Ca={type:"change"},Ta={type:"start"},Ma={type:"end"},Ia=null;function ka(e){e.preventDefault()}var Ba=null,Ra=function(){function e(){(0,v.Z)(this,e),T(this,"enabled",!0),T(this,"needsSwap",!0),T(this,"clear",!1),T(this,"renderToScreen",!1)}return(0,m.Z)(e,[{key:"setSize",value:function(e,t){}},{key:"render",value:function(e,t,n,r,i){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}]),e}(),Pa=function(){function e(t){(0,v.Z)(this,e),T(this,"camera",new A.OrthographicCamera(-1,1,1,-1,0,1)),T(this,"geometry",new A.PlaneGeometry(2,2)),T(this,"mesh"),this.mesh=new A.Mesh(this.geometry,t)}return(0,m.Z)(e,[{key:"material",get:function(){return this.mesh.material},set:function(e){this.mesh.material=e}},{key:"dispose",value:function(){this.mesh.geometry.dispose()}},{key:"render",value:function(e){e.render(this.mesh,this.camera)}}]),e}(),Da=null,La={defines:{USE_3DTEXTURE:1},uniforms:{lut3d:{value:null},lut:{value:null},lutSize:{value:0},tDiffuse:{value:null},intensity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t",fragmentShader:"\n\n\t\tuniform float lutSize;\n\t\t#if USE_3DTEXTURE\n\t\tprecision highp sampler3D;\n\t\tuniform sampler3D lut3d;\n\t\t#else\n\t\tuniform sampler2D lut;\n\n\t\tvec3 lutLookup( sampler2D tex, float size, vec3 rgb ) {\n\n\t\t\tfloat sliceHeight = 1.0 / size;\n\t\t\tfloat yPixelHeight = 1.0 / ( size * size );\n\n\t\t\t// Get the slices on either side of the sample\n\t\t\tfloat slice = rgb.b * size;\n\t\t\tfloat interp = fract( slice );\n\t\t\tfloat slice0 = slice - interp;\n\t\t\tfloat centeredInterp = interp - 0.5;\n\n\t\t\tfloat slice1 = slice0 + sign( centeredInterp );\n\n\t\t\t// Pull y sample in by half a pixel in each direction to avoid color\n\t\t\t// bleeding from adjacent slices.\n\t\t\tfloat greenOffset = clamp( rgb.g * sliceHeight, yPixelHeight * 0.5, sliceHeight - yPixelHeight * 0.5 );\n\n\t\t\tvec2 uv0 = vec2(\n\t\t\t\trgb.r,\n\t\t\t\tslice0 * sliceHeight + greenOffset\n\t\t\t);\n\t\t\tvec2 uv1 = vec2(\n\t\t\t\trgb.r,\n\t\t\t\tslice1 * sliceHeight + greenOffset\n\t\t\t);\n\n\t\t\tvec3 sample0 = texture2D( tex, uv0 ).rgb;\n\t\t\tvec3 sample1 = texture2D( tex, uv1 ).rgb;\n\n\t\t\treturn mix( sample0, sample1, abs( centeredInterp ) );\n\n\t\t}\n\t\t#endif\n\n\t\tvarying vec2 vUv;\n\t\tuniform float intensity;\n\t\tuniform sampler2D tDiffuse;\n\t\tvoid main() {\n\n\t\t\tvec4 val = texture2D( tDiffuse, vUv );\n\t\t\tvec4 lutVal;\n\n\t\t\t// pull the sample in by half a pixel so the sample begins\n\t\t\t// at the center of the edge pixels.\n\t\t\tfloat pixelWidth = 1.0 / lutSize;\n\t\t\tfloat halfPixelWidth = 0.5 / lutSize;\n\t\t\tvec3 uvw = vec3( halfPixelWidth ) + val.rgb * ( 1.0 - pixelWidth );\n\n\t\t\t#if USE_3DTEXTURE\n\n\t\t\tlutVal = vec4( texture( lut3d, uvw ).rgb, val.a );\n\n\t\t\t#else\n\n\t\t\tlutVal = vec4( lutLookup( lut, lutSize, uvw ), val.a );\n\n\t\t\t#endif\n\n\t\t\tgl_FragColor = vec4( mix( val, lutVal, intensity ) );\n\n\t\t}\n\n\t"},Na=null,Fa=null,Oa={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:"varying vec2 vUv;\n     void main() {\n     \t vUv = uv;\n     \t gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n     }",fragmentShader:"uniform int byp; //should we apply the glitch ?\n     uniform sampler2D tDiffuse;\n     uniform sampler2D tDisp;\n     uniform float amount;\n     uniform float angle;\n     uniform float seed;\n     uniform float seed_x;\n     uniform float seed_y;\n     uniform float distortion_x;\n     uniform float distortion_y;\n     uniform float col_s;\n\n     varying vec2 vUv;\n\n     float rand(vec2 co){\n     \t return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n     }\n\n     void main() {\n     \tif(byp<1) {\n     \t\tvec2 p = vUv;\n     \t\tfloat xs = floor(gl_FragCoord.x / 0.5);\n     \t\tfloat ys = floor(gl_FragCoord.y / 0.5);\n    //based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n     \t\tvec4 normal = texture2D (tDisp, p*seed*seed);\n     \t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n     \t\t\tif(seed_x>0.){\n     \t\t\t\tp.y = 1. - (p.y + distortion_y);\n     \t\t\t}\n     \t\t\telse {\n     \t\t\t\tp.y = distortion_y;\n     \t\t\t}\n     \t\t}\n     \t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\n     \t\t\tif(seed_y>0.){\n     \t\t\t\tp.x=distortion_x;\n     \t\t\t}\n     \t\t\telse {\n     \t\t\t\tp.x = 1. - (p.x + distortion_x);\n     \t\t\t}\n     \t\t}\n     \t\tp.x+=normal.x*seed_x*(seed/5.);\n     \t\tp.y+=normal.y*seed_y*(seed/5.);\n    //base from RGB shift shader\n     \t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n     \t\tvec4 cr = texture2D(tDiffuse, p + offset);\n     \t\tvec4 cga = texture2D(tDiffuse, p);\n     \t\tvec4 cb = texture2D(tDiffuse, p - offset);\n     \t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n    //add noise\n     \t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\n     \t\tgl_FragColor = gl_FragColor+ snow;\n     \t}\n     \telse {\n     \t\tgl_FragColor=texture2D (tDiffuse, vUv);\n     \t}\n    }"},Ua=null,za={uniforms:{tDiffuse:{value:null},shape:{value:1},radius:{value:4},rotateR:{value:Math.PI/12*1},rotateG:{value:Math.PI/12*2},rotateB:{value:Math.PI/12*3},scatter:{value:0},width:{value:1},height:{value:1},blending:{value:1},blendingMode:{value:1},greyscale:{value:!1},disable:{value:!1}},vertexShader:["varying vec2 vUV;","void main() {","\tvUV = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["#define SQRT2_MINUS_ONE 0.41421356","#define SQRT2_HALF_MINUS_ONE 0.20710678","#define PI2 6.28318531","#define SHAPE_DOT 1","#define SHAPE_ELLIPSE 2","#define SHAPE_LINE 3","#define SHAPE_SQUARE 4","#define BLENDING_LINEAR 1","#define BLENDING_MULTIPLY 2","#define BLENDING_ADD 3","#define BLENDING_LIGHTER 4","#define BLENDING_DARKER 5","uniform sampler2D tDiffuse;","uniform float radius;","uniform float rotateR;","uniform float rotateG;","uniform float rotateB;","uniform float scatter;","uniform float width;","uniform float height;","uniform int shape;","uniform bool disable;","uniform float blending;","uniform int blendingMode;","varying vec2 vUV;","uniform bool greyscale;","const int samples = 8;","float blend( float a, float b, float t ) {","\treturn a * ( 1.0 - t ) + b * t;","}","float hypot( float x, float y ) {","\treturn sqrt( x * x + y * y );","}","float rand( vec2 seed ){","return fract( sin( dot( seed.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );","}","float distanceToDotRadius( float channel, vec2 coord, vec2 normal, vec2 p, float angle, float rad_max ) {","\tfloat dist = hypot( coord.x - p.x, coord.y - p.y );","\tfloat rad = channel;","\tif ( shape == SHAPE_DOT ) {","\t\trad = pow( abs( rad ), 1.125 ) * rad_max;","\t} else if ( shape == SHAPE_ELLIPSE ) {","\t\trad = pow( abs( rad ), 1.125 ) * rad_max;","\t\tif ( dist != 0.0 ) {","\t\t\tfloat dot_p = abs( ( p.x - coord.x ) / dist * normal.x + ( p.y - coord.y ) / dist * normal.y );","\t\t\tdist = ( dist * ( 1.0 - SQRT2_HALF_MINUS_ONE ) ) + dot_p * dist * SQRT2_MINUS_ONE;","\t\t}","\t} else if ( shape == SHAPE_LINE ) {","\t\trad = pow( abs( rad ), 1.5) * rad_max;","\t\tfloat dot_p = ( p.x - coord.x ) * normal.x + ( p.y - coord.y ) * normal.y;","\t\tdist = hypot( normal.x * dot_p, normal.y * dot_p );","\t} else if ( shape == SHAPE_SQUARE ) {","\t\tfloat theta = atan( p.y - coord.y, p.x - coord.x ) - angle;","\t\tfloat sin_t = abs( sin( theta ) );","\t\tfloat cos_t = abs( cos( theta ) );","\t\trad = pow( abs( rad ), 1.4 );","\t\trad = rad_max * ( rad + ( ( sin_t > cos_t ) ? rad - sin_t * rad : rad - cos_t * rad ) );","\t}","\treturn rad - dist;","}","struct Cell {","\tvec2 normal;","\tvec2 p1;","\tvec2 p2;","\tvec2 p3;","\tvec2 p4;","\tfloat samp2;","\tfloat samp1;","\tfloat samp3;","\tfloat samp4;","};","vec4 getSample( vec2 point ) {","\tvec4 tex = texture2D( tDiffuse, vec2( point.x / width, point.y / height ) );","\tfloat base = rand( vec2( floor( point.x ), floor( point.y ) ) ) * PI2;","\tfloat step = PI2 / float( samples );","\tfloat dist = radius * 0.66;","\tfor ( int i = 0; i < samples; ++i ) {","\t\tfloat r = base + step * float( i );","\t\tvec2 coord = point + vec2( cos( r ) * dist, sin( r ) * dist );","\t\ttex += texture2D( tDiffuse, vec2( coord.x / width, coord.y / height ) );","\t}","\ttex /= float( samples ) + 1.0;","\treturn tex;","}","float getDotColour( Cell c, vec2 p, int channel, float angle, float aa ) {","\tfloat dist_c_1, dist_c_2, dist_c_3, dist_c_4, res;","\tif ( channel == 0 ) {","\t\tc.samp1 = getSample( c.p1 ).r;","\t\tc.samp2 = getSample( c.p2 ).r;","\t\tc.samp3 = getSample( c.p3 ).r;","\t\tc.samp4 = getSample( c.p4 ).r;","\t} else if (channel == 1) {","\t\tc.samp1 = getSample( c.p1 ).g;","\t\tc.samp2 = getSample( c.p2 ).g;","\t\tc.samp3 = getSample( c.p3 ).g;","\t\tc.samp4 = getSample( c.p4 ).g;","\t} else {","\t\tc.samp1 = getSample( c.p1 ).b;","\t\tc.samp3 = getSample( c.p3 ).b;","\t\tc.samp2 = getSample( c.p2 ).b;","\t\tc.samp4 = getSample( c.p4 ).b;","\t}","\tdist_c_1 = distanceToDotRadius( c.samp1, c.p1, c.normal, p, angle, radius );","\tdist_c_2 = distanceToDotRadius( c.samp2, c.p2, c.normal, p, angle, radius );","\tdist_c_3 = distanceToDotRadius( c.samp3, c.p3, c.normal, p, angle, radius );","\tdist_c_4 = distanceToDotRadius( c.samp4, c.p4, c.normal, p, angle, radius );","\tres = ( dist_c_1 > 0.0 ) ? clamp( dist_c_1 / aa, 0.0, 1.0 ) : 0.0;","\tres += ( dist_c_2 > 0.0 ) ? clamp( dist_c_2 / aa, 0.0, 1.0 ) : 0.0;","\tres += ( dist_c_3 > 0.0 ) ? clamp( dist_c_3 / aa, 0.0, 1.0 ) : 0.0;","\tres += ( dist_c_4 > 0.0 ) ? clamp( dist_c_4 / aa, 0.0, 1.0 ) : 0.0;","\tres = clamp( res, 0.0, 1.0 );","\treturn res;","}","Cell getReferenceCell( vec2 p, vec2 origin, float grid_angle, float step ) {","\tCell c;","\tvec2 n = vec2( cos( grid_angle ), sin( grid_angle ) );","\tfloat threshold = step * 0.5;","\tfloat dot_normal = n.x * ( p.x - origin.x ) + n.y * ( p.y - origin.y );","\tfloat dot_line = -n.y * ( p.x - origin.x ) + n.x * ( p.y - origin.y );","\tvec2 offset = vec2( n.x * dot_normal, n.y * dot_normal );","\tfloat offset_normal = mod( hypot( offset.x, offset.y ), step );","\tfloat normal_dir = ( dot_normal < 0.0 ) ? 1.0 : -1.0;","\tfloat normal_scale = ( ( offset_normal < threshold ) ? -offset_normal : step - offset_normal ) * normal_dir;","\tfloat offset_line = mod( hypot( ( p.x - offset.x ) - origin.x, ( p.y - offset.y ) - origin.y ), step );","\tfloat line_dir = ( dot_line < 0.0 ) ? 1.0 : -1.0;","\tfloat line_scale = ( ( offset_line < threshold ) ? -offset_line : step - offset_line ) * line_dir;","\tc.normal = n;","\tc.p1.x = p.x - n.x * normal_scale + n.y * line_scale;","\tc.p1.y = p.y - n.y * normal_scale - n.x * line_scale;","\tif ( scatter != 0.0 ) {","\t\tfloat off_mag = scatter * threshold * 0.5;","\t\tfloat off_angle = rand( vec2( floor( c.p1.x ), floor( c.p1.y ) ) ) * PI2;","\t\tc.p1.x += cos( off_angle ) * off_mag;","\t\tc.p1.y += sin( off_angle ) * off_mag;","\t}","\tfloat normal_step = normal_dir * ( ( offset_normal < threshold ) ? step : -step );","\tfloat line_step = line_dir * ( ( offset_line < threshold ) ? step : -step );","\tc.p2.x = c.p1.x - n.x * normal_step;","\tc.p2.y = c.p1.y - n.y * normal_step;","\tc.p3.x = c.p1.x + n.y * line_step;","\tc.p3.y = c.p1.y - n.x * line_step;","\tc.p4.x = c.p1.x - n.x * normal_step + n.y * line_step;","\tc.p4.y = c.p1.y - n.y * normal_step - n.x * line_step;","\treturn c;","}","float blendColour( float a, float b, float t ) {","\tif ( blendingMode == BLENDING_LINEAR ) {","\t\treturn blend( a, b, 1.0 - t );","\t} else if ( blendingMode == BLENDING_ADD ) {","\t\treturn blend( a, min( 1.0, a + b ), t );","\t} else if ( blendingMode == BLENDING_MULTIPLY ) {","\t\treturn blend( a, max( 0.0, a * b ), t );","\t} else if ( blendingMode == BLENDING_LIGHTER ) {","\t\treturn blend( a, max( a, b ), t );","\t} else if ( blendingMode == BLENDING_DARKER ) {","\t\treturn blend( a, min( a, b ), t );","\t} else {","\t\treturn blend( a, b, 1.0 - t );","\t}","}","void main() {","\tif ( ! disable ) {","\t\tvec2 p = vec2( vUV.x * width, vUV.y * height );","\t\tvec2 origin = vec2( 0, 0 );","\t\tfloat aa = ( radius < 2.5 ) ? radius * 0.5 : 1.25;","\t\tCell cell_r = getReferenceCell( p, origin, rotateR, radius );","\t\tCell cell_g = getReferenceCell( p, origin, rotateG, radius );","\t\tCell cell_b = getReferenceCell( p, origin, rotateB, radius );","\t\tfloat r = getDotColour( cell_r, p, 0, rotateR, aa );","\t\tfloat g = getDotColour( cell_g, p, 1, rotateG, aa );","\t\tfloat b = getDotColour( cell_b, p, 2, rotateB, aa );","\t\tvec4 colour = texture2D( tDiffuse, vUV );","\t\tr = blendColour( r, colour.r, blending );","\t\tg = blendColour( g, colour.g, blending );","\t\tb = blendColour( b, colour.b, blending );","\t\tif ( greyscale ) {","\t\t\tr = g = b = (r + b + g) / 3.0;","\t\t}","\t\tgl_FragColor = vec4( r, g, b, 1.0 );","\t} else {","\t\tgl_FragColor = texture2D( tDiffuse, vUV );","\t}","}"].join("\n")},Ga=null,Qa={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new A.Vector2(1/1024,1/512)}},vertexShader:["uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","void SMAAEdgeDetectionVS( vec2 texcoord ) {","\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 );","\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 );","\tvOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 );","}","void main() {","\tvUv = uv;","\tSMAAEdgeDetectionVS( vUv );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {","\tvec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );","\tvec4 delta;","\tvec3 C = texture2D( colorTex, texcoord ).rgb;","\tvec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;","\tvec3 t = abs( C - Cleft );","\tdelta.x = max( max( t.r, t.g ), t.b );","\tvec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;","\tt = abs( C - Ctop );","\tdelta.y = max( max( t.r, t.g ), t.b );","\tvec2 edges = step( threshold, delta.xy );","\tif ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )","\t\tdiscard;","\tvec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;","\tt = abs( C - Cright );","\tdelta.z = max( max( t.r, t.g ), t.b );","\tvec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;","\tt = abs( C - Cbottom );","\tdelta.w = max( max( t.r, t.g ), t.b );","\tfloat maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );","\tvec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;","\tt = abs( C - Cleftleft );","\tdelta.z = max( max( t.r, t.g ), t.b );","\tvec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;","\tt = abs( C - Ctoptop );","\tdelta.w = max( max( t.r, t.g ), t.b );","\tmaxDelta = max( max( maxDelta, delta.z ), delta.w );","\tedges.xy *= step( 0.5 * maxDelta, delta.xy );","\treturn vec4( edges, 0.0, 0.0 );","}","void main() {","\tgl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );","}"].join("\n")},Za={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new A.Vector2(1/1024,1/512)}},vertexShader:["uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","varying vec2 vPixcoord;","void SMAABlendingWeightCalculationVS( vec2 texcoord ) {","\tvPixcoord = texcoord / resolution;","\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 );","\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 );","\tvOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );","}","void main() {","\tvUv = uv;","\tSMAABlendingWeightCalculationVS( vUv );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )","uniform sampler2D tDiffuse;","uniform sampler2D tArea;","uniform sampler2D tSearch;","uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[3];","varying vec2 vPixcoord;","#if __VERSION__ == 100","vec2 round( vec2 x ) {","\treturn sign( x ) * floor( abs( x ) + 0.5 );","}","#endif","float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {","\te.r = bias + e.r * scale;","\treturn 255.0 * texture2D( searchTex, e, 0.0 ).r;","}","float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {","\tvec2 e = vec2( 0.0, 1.0 );","\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {","\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;","\t\ttexcoord -= vec2( 2.0, 0.0 ) * resolution;","\t\tif ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;","\t}","\ttexcoord.x += 0.25 * resolution.x;","\ttexcoord.x += resolution.x;","\ttexcoord.x += 2.0 * resolution.x;","\ttexcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);","\treturn texcoord.x;","}","float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {","\tvec2 e = vec2( 0.0, 1.0 );","\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {","\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;","\t\ttexcoord += vec2( 2.0, 0.0 ) * resolution;","\t\tif ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;","\t}","\ttexcoord.x -= 0.25 * resolution.x;","\ttexcoord.x -= resolution.x;","\ttexcoord.x -= 2.0 * resolution.x;","\ttexcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );","\treturn texcoord.x;","}","float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {","\tvec2 e = vec2( 1.0, 0.0 );","\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {","\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;","\t\ttexcoord += vec2( 0.0, 2.0 ) * resolution;","\t\tif ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;","\t}","\ttexcoord.y -= 0.25 * resolution.y;","\ttexcoord.y -= resolution.y;","\ttexcoord.y -= 2.0 * resolution.y;","\ttexcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 );","\treturn texcoord.y;","}","float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {","\tvec2 e = vec2( 1.0, 0.0 );","\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {","\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;","\t\ttexcoord -= vec2( 0.0, 2.0 ) * resolution;","\t\tif ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;","\t}","\ttexcoord.y += 0.25 * resolution.y;","\ttexcoord.y += resolution.y;","\ttexcoord.y += 2.0 * resolution.y;","\ttexcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 );","\treturn texcoord.y;","}","vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {","\tvec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;","\ttexcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );","\ttexcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;","\treturn texture2D( areaTex, texcoord, 0.0 ).rg;","}","vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {","\tvec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );","\tvec2 e = texture2D( edgesTex, texcoord ).rg;","\tif ( e.g > 0.0 ) {","\t\tvec2 d;","\t\tvec2 coords;","\t\tcoords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );","\t\tcoords.y = offset[ 1 ].y;","\t\td.x = coords.x;","\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).r;","\t\tcoords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );","\t\td.y = coords.x;","\t\td = d / resolution.x - pixcoord.x;","\t\tvec2 sqrt_d = sqrt( abs( d ) );","\t\tcoords.y -= 1.0 * resolution.y;","\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;","\t\tweights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );","\t}","\tif ( e.r > 0.0 ) {","\t\tvec2 d;","\t\tvec2 coords;","\t\tcoords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );","\t\tcoords.x = offset[ 0 ].x;","\t\td.x = coords.y;","\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).g;","\t\tcoords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );","\t\td.y = coords.y;","\t\td = d / resolution.y - pixcoord.y;","\t\tvec2 sqrt_d = sqrt( abs( d ) );","\t\tcoords.y -= 1.0 * resolution.y;","\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;","\t\tweights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );","\t}","\treturn weights;","}","void main() {","\tgl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );","}"].join("\n")},Ha={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new A.Vector2(1/1024,1/512)}},vertexShader:["uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 2 ];","void SMAANeighborhoodBlendingVS( vec2 texcoord ) {","\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 );","\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 );","}","void main() {","\tvUv = uv;","\tSMAANeighborhoodBlendingVS( vUv );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D tColor;","uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 2 ];","vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {","\tvec4 a;","\ta.xz = texture2D( blendTex, texcoord ).xz;","\ta.y = texture2D( blendTex, offset[ 1 ].zw ).g;","\ta.w = texture2D( blendTex, offset[ 1 ].xy ).a;","\tif ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {","\t\treturn texture2D( colorTex, texcoord, 0.0 );","\t} else {","\t\tvec2 offset;","\t\toffset.x = a.a > a.b ? a.a : -a.b;","\t\toffset.y = a.g > a.r ? -a.g : a.r;","\t\tif ( abs( offset.x ) > abs( offset.y )) {","\t\t\toffset.y = 0.0;","\t\t} else {","\t\t\toffset.x = 0.0;","\t\t}","\t\tvec4 C = texture2D( colorTex, texcoord, 0.0 );","\t\ttexcoord += sign( offset ) * resolution;","\t\tvec4 Cop = texture2D( colorTex, texcoord, 0.0 );","\t\tfloat s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );","\t\tC.xyz = pow(C.xyz, vec3(2.2));","\t\tCop.xyz = pow(Cop.xyz, vec3(2.2));","\t\tvec4 mixed = mix(C, Cop, s);","\t\tmixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));","\t\treturn mixed;","\t}","}","void main() {","\tgl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );","}"].join("\n")},ja=null,Va={uniforms:{tDiffuse:{value:null},time:{value:0},nIntensity:{value:.5},sIntensity:{value:.05},sCount:{value:4096},grayscale:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","uniform float time;","uniform bool grayscale;","uniform float nIntensity;","uniform float sIntensity;","uniform float sCount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 cTextureScreen = texture2D( tDiffuse, vUv );","\tfloat dx = rand( vUv + time );","\tvec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );","\tvec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );","\tcResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;","\tcResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );","\tif( grayscale ) {","\t\tcResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );","\t}","\tgl_FragColor =  vec4( cResult, cTextureScreen.a );","}"].join("\n")},Wa=null,Xa={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")},Ya=null,Ka={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new A.Vector2},cameraProjectionMatrix:{value:new A.Matrix4},cameraInverseProjectionMatrix:{value:new A.Matrix4},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tDepth;","uniform sampler2D tNoise;","uniform vec3 kernel[ KERNEL_SIZE ];","uniform vec2 resolution;","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float kernelRadius;","uniform float minDistance;","uniform float maxDistance;","varying vec2 vUv;","#include <packing>","float getDepth( const in vec2 screenPosition ) {","\treturn texture2D( tDepth, screenPosition ).x;","}","float getLinearDepth( const in vec2 screenPosition ) {","\t#if PERSPECTIVE_CAMERA == 1","\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;","\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );","\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","\t#else","\t\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","float getViewZ( const in float depth ) {","\t#if PERSPECTIVE_CAMERA == 1","\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","\t#else","\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );","\t#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","\tclipPosition *= clipW; // unprojection.","\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec2 screenPosition ) {","\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","}","void main() {","\tfloat depth = getDepth( vUv );","\tfloat viewZ = getViewZ( depth );","\tvec3 viewPosition = getViewPosition( vUv, depth, viewZ );","\tvec3 viewNormal = getViewNormal( vUv );"," vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );","\tvec3 random = texture2D( tNoise, vUv * noiseScale ).xyz;","\tvec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );","\tvec3 bitangent = cross( viewNormal, tangent );","\tmat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );"," float occlusion = 0.0;"," for ( int i = 0; i < KERNEL_SIZE; i ++ ) {","\t\tvec3 sampleVector = kernelMatrix * kernel[ i ];","\t\tvec3 samplePoint = viewPosition + ( sampleVector * kernelRadius );","\t\tvec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 );","\t\tsamplePointNDC /= samplePointNDC.w;","\t\tvec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5;","\t\tfloat realDepth = getLinearDepth( samplePointUv );","\t\tfloat sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar );","\t\tfloat delta = sampleDepth - realDepth;","\t\tif ( delta > minDistance && delta < maxDistance ) {","\t\t\tocclusion += 1.0;","\t\t}","\t}","\tocclusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );","\tgl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );","}"].join("\n")},Ja={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","varying vec2 vUv;","#include <packing>","float getLinearDepth( const in vec2 screenPosition ) {","\t#if PERSPECTIVE_CAMERA == 1","\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;","\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );","\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","\t#else","\t\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","void main() {","\tfloat depth = getLinearDepth( vUv );","\tgl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );","}"].join("\n")},qa={uniforms:{tDiffuse:{value:null},resolution:{value:new A.Vector2}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","varying vec2 vUv;","void main() {","\tvec2 texelSize = ( 1.0 / resolution );","\tfloat result = 0.0;","\tfor ( int i = - 2; i <= 2; i ++ ) {","\t\tfor ( int j = - 2; j <= 2; j ++ ) {","\t\t\tvec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;","\t\t\tresult += texture2D( tDiffuse, vUv + offset ).r;","\t\t}","\t}","\tgl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );","}"].join("\n")},$a=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r,i,a){var o;(0,v.Z)(this,n),(o=t.call(this)).width=void 0!==i?i:512,o.height=void 0!==a?a:512,o.clear=!0,o.camera=r,o.scene=e,o.kernelRadius=8,o.kernelSize=32,o.kernel=[],o.noiseTexture=null,o.output=0,o.minDistance=.005,o.maxDistance=.1,o._visibilityCache=new Map,o.generateSampleKernel(),o.generateRandomKernelRotations();var s=new A.DepthTexture;return s.format=A.DepthStencilFormat,s.type=A.UnsignedInt248Type,o.beautyRenderTarget=new A.WebGLRenderTarget(o.width,o.height),o.normalRenderTarget=new A.WebGLRenderTarget(o.width,o.height,{minFilter:A.NearestFilter,magFilter:A.NearestFilter,depthTexture:s}),o.ssaoRenderTarget=new A.WebGLRenderTarget(o.width,o.height),o.blurRenderTarget=o.ssaoRenderTarget.clone(),void 0===Ka&&console.error("THREE.SSAOPass: The pass relies on SSAOShader."),o.ssaoMaterial=new A.ShaderMaterial({defines:Object.assign({},Ka.defines),uniforms:A.UniformsUtils.clone(Ka.uniforms),vertexShader:Ka.vertexShader,fragmentShader:Ka.fragmentShader,blending:A.NoBlending}),o.ssaoMaterial.uniforms.tDiffuse.value=o.beautyRenderTarget.texture,o.ssaoMaterial.uniforms.tNormal.value=o.normalRenderTarget.texture,o.ssaoMaterial.uniforms.tDepth.value=o.normalRenderTarget.depthTexture,o.ssaoMaterial.uniforms.tNoise.value=o.noiseTexture,o.ssaoMaterial.uniforms.kernel.value=o.kernel,o.ssaoMaterial.uniforms.cameraNear.value=o.camera.near,o.ssaoMaterial.uniforms.cameraFar.value=o.camera.far,o.ssaoMaterial.uniforms.resolution.value.set(o.width,o.height),o.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(o.camera.projectionMatrix),o.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(o.camera.projectionMatrixInverse),o.normalMaterial=new A.MeshNormalMaterial,o.normalMaterial.blending=A.NoBlending,o.blurMaterial=new A.ShaderMaterial({defines:Object.assign({},qa.defines),uniforms:A.UniformsUtils.clone(qa.uniforms),vertexShader:qa.vertexShader,fragmentShader:qa.fragmentShader}),o.blurMaterial.uniforms.tDiffuse.value=o.ssaoRenderTarget.texture,o.blurMaterial.uniforms.resolution.value.set(o.width,o.height),o.depthRenderMaterial=new A.ShaderMaterial({defines:Object.assign({},Ja.defines),uniforms:A.UniformsUtils.clone(Ja.uniforms),vertexShader:Ja.vertexShader,fragmentShader:Ja.fragmentShader,blending:A.NoBlending}),o.depthRenderMaterial.uniforms.tDepth.value=o.normalRenderTarget.depthTexture,o.depthRenderMaterial.uniforms.cameraNear.value=o.camera.near,o.depthRenderMaterial.uniforms.cameraFar.value=o.camera.far,o.copyMaterial=new A.ShaderMaterial({uniforms:A.UniformsUtils.clone(Xa.uniforms),vertexShader:Xa.vertexShader,fragmentShader:Xa.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:A.DstColorFactor,blendDst:A.ZeroFactor,blendEquation:A.AddEquation,blendSrcAlpha:A.DstAlphaFactor,blendDstAlpha:A.ZeroFactor,blendEquationAlpha:A.AddEquation}),o.fsQuad=new Pa(null),o.originalClearColor=new A.Color,o}return(0,m.Z)(n,[{key:"dispose",value:function(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}},{key:"render",value:function(e,t){switch(!1===e.capabilities.isWebGL2&&(this.noiseTexture.format=A.LuminanceFormat),e.setRenderTarget(this.beautyRenderTarget),e.clear(),e.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(e,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(e,this.blurMaterial,this.blurRenderTarget),this.output){case n.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Depth:this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=A.CustomBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}},{key:"renderPass",value:function(e,t,n,r,i){e.getClearColor(this.originalClearColor);var a=e.getClearAlpha(),o=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,void 0!==r&&null!==r&&(e.setClearColor(r),e.setClearAlpha(i||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=o,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}},{key:"renderOverride",value:function(e,t,n,r,i){e.getClearColor(this.originalClearColor);var a=e.getClearAlpha(),o=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,r=t.clearColor||r,i=t.clearAlpha||i,void 0!==r&&null!==r&&(e.setClearColor(r),e.setClearAlpha(i||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=o,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}},{key:"setSize",value:function(e,t){this.width=e,this.height=t,this.beautyRenderTarget.setSize(e,t),this.ssaoRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.blurRenderTarget.setSize(e,t),this.ssaoMaterial.uniforms.resolution.value.set(e,t),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(e,t)}},{key:"generateSampleKernel",value:function(){for(var e=this.kernelSize,t=this.kernel,n=0;n<e;n++){var r=new A.Vector3;r.x=2*Math.random()-1,r.y=2*Math.random()-1,r.z=Math.random(),r.normalize();var i=n/e;i=A.MathUtils.lerp(.1,1,i*i),r.multiplyScalar(i),t.push(r)}}},{key:"generateRandomKernelRotations",value:function(){void 0===Ar&&console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");for(var e=new Ar,t=new Float32Array(16),n=0;n<16;n++){var r=2*Math.random()-1,i=2*Math.random()-1;t[n]=e.noise3d(r,i,0)}this.noiseTexture=new A.DataTexture(t,4,4,A.RedFormat,A.FloatType),this.noiseTexture.wrapS=A.RepeatWrapping,this.noiseTexture.wrapT=A.RepeatWrapping,this.noiseTexture.needsUpdate=!0}},{key:"overrideVisibility",value:function(){var e=this.scene,t=this._visibilityCache;e.traverse((function(e){t.set(e,e.visible),(e.isPoints||e.isLine)&&(e.visible=!1)}))}},{key:"restoreVisibility",value:function(){var e=this.scene,t=this._visibilityCache;e.traverse((function(e){var n=t.get(e);e.visible=n})),t.clear()}}]),n}(Ra),eo=$a,to=null,no={defines:{DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tColor:{value:null},tDepth:{value:null},focus:{value:1},aspect:{value:1},aperture:{value:.025},maxblur:{value:.01},nearClip:{value:1},farClip:{value:1e3}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","uniform sampler2D tColor;","uniform sampler2D tDepth;","uniform float maxblur;","uniform float aperture;","uniform float nearClip;","uniform float farClip;","uniform float focus;","uniform float aspect;","#include <packing>","float getDepth( const in vec2 screenPosition ) {","\t#if DEPTH_PACKING == 1","\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","\t#else","\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","float getViewZ( const in float depth ) {","\t#if PERSPECTIVE_CAMERA == 1","\treturn perspectiveDepthToViewZ( depth, nearClip, farClip );","\t#else","\treturn orthographicDepthToViewZ( depth, nearClip, farClip );","\t#endif","}","void main() {","\tvec2 aspectcorrect = vec2( 1.0, aspect );","\tfloat viewZ = getViewZ( getDepth( vUv ) );","\tfloat factor = ( focus + viewZ );","\tvec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );","\tvec2 dofblur9 = dofblur * 0.9;","\tvec2 dofblur7 = dofblur * 0.7;","\tvec2 dofblur4 = dofblur * 0.4;","\tvec4 col = vec4( 0.0 );","\tcol += texture2D( tColor, vUv.xy );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );","\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );","\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );","\tgl_FragColor = col / 41.0;","\tgl_FragColor.a = 1.0;","}"].join("\n")},ro=null,io=null,ao={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tfloat l = linearToRelativeLuminance( texel.rgb );","\tgl_FragColor = vec4( l, l, l, texel.w );","}"].join("\n")},oo={uniforms:{tDiffuse:{value:null},averageLuminance:{value:1},luminanceMap:{value:null},maxLuminance:{value:16},minLuminance:{value:.01},middleGrey:{value:.6}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","uniform sampler2D tDiffuse;","varying vec2 vUv;","uniform float middleGrey;","uniform float minLuminance;","uniform float maxLuminance;","#ifdef ADAPTED_LUMINANCE","\tuniform sampler2D luminanceMap;","#else","\tuniform float averageLuminance;","#endif","vec3 ToneMap( vec3 vColor ) {","\t#ifdef ADAPTED_LUMINANCE","\t\tfloat fLumAvg = texture2D(luminanceMap, vec2(0.5, 0.5)).r;","\t#else","\t\tfloat fLumAvg = averageLuminance;","\t#endif","\tfloat fLumPixel = linearToRelativeLuminance( vColor );","\tfloat fLumScaled = (fLumPixel * middleGrey) / max( minLuminance, fLumAvg );","\tfloat fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (maxLuminance * maxLuminance)))) / (1.0 + fLumScaled);","\treturn fLumCompressed * vColor;","}","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = vec4( ToneMap( texel.xyz ), texel.w );","}"].join("\n")},so=null,lo={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new A.Color(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tvec3 luma = vec3( 0.299, 0.587, 0.114 );","\tfloat v = dot( texel.xyz, luma );","\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","\tgl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")},uo=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r,i,a){var o;(0,v.Z)(this,n),(o=t.call(this)).strength=void 0!==r?r:1,o.radius=i,o.threshold=a,o.resolution=void 0!==e?new A.Vector2(e.x,e.y):new A.Vector2(256,256),o.clearColor=new A.Color(0,0,0),o.renderTargetsHorizontal=[],o.renderTargetsVertical=[],o.nMips=5;var s=Math.round(o.resolution.x/2),l=Math.round(o.resolution.y/2);o.renderTargetBright=new A.WebGLRenderTarget(s,l,{type:A.HalfFloatType}),o.renderTargetBright.texture.name="UnrealBloomPass.bright",o.renderTargetBright.texture.generateMipmaps=!1;for(var u=0;u<o.nMips;u++){var c=new A.WebGLRenderTarget(s,l,{type:A.HalfFloatType});c.texture.name="UnrealBloomPass.h"+u,c.texture.generateMipmaps=!1,o.renderTargetsHorizontal.push(c);var f=new A.WebGLRenderTarget(s,l,{type:A.HalfFloatType});f.texture.name="UnrealBloomPass.v"+u,f.texture.generateMipmaps=!1,o.renderTargetsVertical.push(f),s=Math.round(s/2),l=Math.round(l/2)}var d=lo;o.highPassUniforms=A.UniformsUtils.clone(d.uniforms),o.highPassUniforms.luminosityThreshold.value=a,o.highPassUniforms.smoothWidth.value=.01,o.materialHighPassFilter=new A.ShaderMaterial({uniforms:o.highPassUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,defines:{}}),o.separableBlurMaterials=[];var h=[3,5,7,9,11];s=Math.round(o.resolution.x/2),l=Math.round(o.resolution.y/2);for(var p=0;p<o.nMips;p++)o.separableBlurMaterials.push(o.getSeperableBlurMaterial(h[p])),o.separableBlurMaterials[p].uniforms.texSize.value=new A.Vector2(s,l),s=Math.round(s/2),l=Math.round(l/2);o.compositeMaterial=o.getCompositeMaterial(o.nMips),o.compositeMaterial.uniforms.blurTexture1.value=o.renderTargetsVertical[0].texture,o.compositeMaterial.uniforms.blurTexture2.value=o.renderTargetsVertical[1].texture,o.compositeMaterial.uniforms.blurTexture3.value=o.renderTargetsVertical[2].texture,o.compositeMaterial.uniforms.blurTexture4.value=o.renderTargetsVertical[3].texture,o.compositeMaterial.uniforms.blurTexture5.value=o.renderTargetsVertical[4].texture,o.compositeMaterial.uniforms.bloomStrength.value=r,o.compositeMaterial.uniforms.bloomRadius.value=.1,o.compositeMaterial.needsUpdate=!0;o.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],o.bloomTintColors=[new A.Vector3(1,1,1),new A.Vector3(1,1,1),new A.Vector3(1,1,1),new A.Vector3(1,1,1),new A.Vector3(1,1,1)],o.compositeMaterial.uniforms.bloomTintColors.value=o.bloomTintColors;var m=Xa;return o.copyUniforms=A.UniformsUtils.clone(m.uniforms),o.copyUniforms.opacity.value=1,o.materialCopy=new A.ShaderMaterial({uniforms:o.copyUniforms,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,blending:A.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),o.enabled=!0,o.needsSwap=!1,o._oldClearColor=new A.Color,o.oldClearAlpha=1,o.basic=new A.MeshBasicMaterial,o.fsQuad=new Pa(null),o}return(0,m.Z)(n,[{key:"dispose",value:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(var t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose();for(var n=0;n<this.separableBlurMaterials.length;n++)this.separableBlurMaterials[n].dispose();this.compositeMaterial.dispose(),this.materialCopy.dispose(),this.basic.dispose(),this.fsQuad.dispose()}},{key:"setSize",value:function(e,t){var n=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(n,r);for(var i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(n,r),this.renderTargetsVertical[i].setSize(n,r),this.separableBlurMaterials[i].uniforms.texSize.value=new A.Vector2(n,r),n=Math.round(n/2),r=Math.round(r/2)}},{key:"render",value:function(e,t,r,i,a){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),a&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=r.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=r.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);for(var s=this.renderTargetBright,l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=s.texture,this.separableBlurMaterials[l].uniforms.direction.value=n.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[l]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[l]),e.clear(),this.fsQuad.render(e),s=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,a&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}},{key:"getSeperableBlurMaterial",value:function(e){return new A.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new A.Vector2(.5,.5)},direction:{value:new A.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat fSigma = float(SIGMA);\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}},{key:"getCompositeMaterial",value:function(e){return new A.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}]),n}(Ra),co=uo,fo=null,ho={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new A.Vector2(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new A.Matrix4},cameraInverseProjectionMatrix:{value:new A.Matrix4},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","#if DIFFUSE_TEXTURE == 1","uniform sampler2D tDiffuse;","#endif","uniform sampler2D tDepth;","#if NORMAL_TEXTURE == 1","uniform sampler2D tNormal;","#endif","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float scale;","uniform float intensity;","uniform float bias;","uniform float kernelRadius;","uniform float minResolution;","uniform vec2 size;","uniform float randomSeed;","// RGBA depth","#include <packing>","vec4 getDefaultColor( const in vec2 screenPosition ) {","\t#if DIFFUSE_TEXTURE == 1","\treturn texture2D( tDiffuse, vUv );","\t#else","\treturn vec4( 1.0 );","\t#endif","}","float getDepth( const in vec2 screenPosition ) {","\t#if DEPTH_PACKING == 1","\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","\t#else","\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","float getViewZ( const in float depth ) {","\t#if PERSPECTIVE_CAMERA == 1","\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","\t#else","\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );","\t#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","\tclipPosition *= clipW; // unprojection.","\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {","\t#if NORMAL_TEXTURE == 1","\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","\t#else","\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );","\t#endif","}","float scaleDividedByCameraFar;","float minResolutionMultipliedByCameraFar;","float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {","\tvec3 viewDelta = sampleViewPosition - centerViewPosition;","\tfloat viewDistance = length( viewDelta );","\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;","\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );","}","// moving costly divides into consts","const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );","const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );","float getAmbientOcclusion( const in vec3 centerViewPosition ) {","\t// precompute some variables require in getOcclusion.","\tscaleDividedByCameraFar = scale / cameraFar;","\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;","\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );","\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/","\tfloat angle = rand( vUv + randomSeed ) * PI2;","\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;","\tvec2 radiusStep = radius;","\tfloat occlusionSum = 0.0;","\tfloat weightSum = 0.0;","\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {","\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;","\t\tradius += radiusStep;","\t\tangle += ANGLE_STEP;","\t\tfloat sampleDepth = getDepth( sampleUv );","\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {","\t\t\tcontinue;","\t\t}","\t\tfloat sampleViewZ = getViewZ( sampleDepth );","\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );","\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );","\t\tweightSum += 1.0;","\t}","\tif( weightSum == 0.0 ) discard;","\treturn occlusionSum * ( intensity / weightSum );","}","void main() {","\tfloat centerDepth = getDepth( vUv );","\tif( centerDepth >= ( 1.0 - EPSILON ) ) {","\t\tdiscard;","\t}","\tfloat centerViewZ = getViewZ( centerDepth );","\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );","\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );","\tgl_FragColor = getDefaultColor( vUv );","\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;","}"].join("\n")},po={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new A.Vector2(512,512)},sampleUvOffsets:{value:[new A.Vector2(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:["#include <common>","uniform vec2 size;","varying vec2 vUv;","varying vec2 vInvSize;","void main() {","\tvUv = uv;","\tvInvSize = 1.0 / size;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#include <packing>","uniform sampler2D tDiffuse;","uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","uniform float depthCutoff;","uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];","uniform float sampleWeights[ KERNEL_RADIUS + 1 ];","varying vec2 vUv;","varying vec2 vInvSize;","float getDepth( const in vec2 screenPosition ) {","\t#if DEPTH_PACKING == 1","\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","\t#else","\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","float getViewZ( const in float depth ) {","\t#if PERSPECTIVE_CAMERA == 1","\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","\t#else","\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );","\t#endif","}","void main() {","\tfloat depth = getDepth( vUv );","\tif( depth >= ( 1.0 - EPSILON ) ) {","\t\tdiscard;","\t}","\tfloat centerViewZ = -getViewZ( depth );","\tbool rBreak = false, lBreak = false;","\tfloat weightSum = sampleWeights[0];","\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;","\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {","\t\tfloat sampleWeight = sampleWeights[i];","\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;","\t\tvec2 sampleUv = vUv + sampleUvOffset;","\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );","\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;","\t\tif( ! rBreak ) {","\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","\t\t\tweightSum += sampleWeight;","\t\t}","\t\tsampleUv = vUv - sampleUvOffset;","\t\tviewZ = -getViewZ( getDepth( sampleUv ) );","\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;","\t\tif( ! lBreak ) {","\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","\t\t\tweightSum += sampleWeight;","\t\t}","\t}","\tgl_FragColor = diffuseSum / weightSum;","}"].join("\n")},vo={createSampleWeights:function(e,t){for(var n,r,i=[],a=0;a<=e;a++)i.push((n=a,r=t,Math.exp(-n*n/(r*r*2))/(Math.sqrt(2*Math.PI)*r)));return i},createSampleOffsets:function(e,t){for(var n=[],r=0;r<=e;r++)n.push(t.clone().multiplyScalar(r));return n},configure:function(e,t,n,r){e.defines.KERNEL_RADIUS=t,e.uniforms.sampleUvOffsets.value=vo.createSampleOffsets(t,r),e.uniforms.sampleWeights.value=vo.createSampleWeights(t,n),e.needsUpdate=!0}},mo=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r){var i,a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new A.Vector2(256,256);return(0,v.Z)(this,n),(i=t.call(this)).scene=e,i.camera=r,i.clear=!0,i.needsSwap=!1,i.supportsDepthTextureExtension=o,i.supportsNormalTexture=s,i.originalClearColor=new A.Color,i._oldClearColor=new A.Color,i.oldClearAlpha=1,i.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},i.resolution=new A.Vector2(l.x,l.y),i.saoRenderTarget=new A.WebGLRenderTarget(i.resolution.x,i.resolution.y,{type:A.HalfFloatType}),i.blurIntermediateRenderTarget=i.saoRenderTarget.clone(),i.beautyRenderTarget=i.saoRenderTarget.clone(),i.normalRenderTarget=new A.WebGLRenderTarget(i.resolution.x,i.resolution.y,{minFilter:A.NearestFilter,magFilter:A.NearestFilter,type:A.HalfFloatType}),i.depthRenderTarget=i.normalRenderTarget.clone(),i.supportsDepthTextureExtension&&((a=new A.DepthTexture).type=A.UnsignedShortType,i.beautyRenderTarget.depthTexture=a,i.beautyRenderTarget.depthBuffer=!0),i.depthMaterial=new A.MeshDepthMaterial,i.depthMaterial.depthPacking=A.RGBADepthPacking,i.depthMaterial.blending=A.NoBlending,i.normalMaterial=new A.MeshNormalMaterial,i.normalMaterial.blending=A.NoBlending,i.saoMaterial=new A.ShaderMaterial({defines:Object.assign({},ho.defines),fragmentShader:ho.fragmentShader,vertexShader:ho.vertexShader,uniforms:A.UniformsUtils.clone(ho.uniforms)}),i.saoMaterial.extensions.derivatives=!0,i.saoMaterial.defines.DEPTH_PACKING=i.supportsDepthTextureExtension?0:1,i.saoMaterial.defines.NORMAL_TEXTURE=i.supportsNormalTexture?1:0,i.saoMaterial.defines.PERSPECTIVE_CAMERA=i.camera.isPerspectiveCamera?1:0,i.saoMaterial.uniforms.tDepth.value=i.supportsDepthTextureExtension?a:i.depthRenderTarget.texture,i.saoMaterial.uniforms.tNormal.value=i.normalRenderTarget.texture,i.saoMaterial.uniforms.size.value.set(i.resolution.x,i.resolution.y),i.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(i.camera.projectionMatrixInverse),i.saoMaterial.uniforms.cameraProjectionMatrix.value=i.camera.projectionMatrix,i.saoMaterial.blending=A.NoBlending,i.vBlurMaterial=new A.ShaderMaterial({uniforms:A.UniformsUtils.clone(po.uniforms),defines:Object.assign({},po.defines),vertexShader:po.vertexShader,fragmentShader:po.fragmentShader}),i.vBlurMaterial.defines.DEPTH_PACKING=i.supportsDepthTextureExtension?0:1,i.vBlurMaterial.defines.PERSPECTIVE_CAMERA=i.camera.isPerspectiveCamera?1:0,i.vBlurMaterial.uniforms.tDiffuse.value=i.saoRenderTarget.texture,i.vBlurMaterial.uniforms.tDepth.value=i.supportsDepthTextureExtension?a:i.depthRenderTarget.texture,i.vBlurMaterial.uniforms.size.value.set(i.resolution.x,i.resolution.y),i.vBlurMaterial.blending=A.NoBlending,i.hBlurMaterial=new A.ShaderMaterial({uniforms:A.UniformsUtils.clone(po.uniforms),defines:Object.assign({},po.defines),vertexShader:po.vertexShader,fragmentShader:po.fragmentShader}),i.hBlurMaterial.defines.DEPTH_PACKING=i.supportsDepthTextureExtension?0:1,i.hBlurMaterial.defines.PERSPECTIVE_CAMERA=i.camera.isPerspectiveCamera?1:0,i.hBlurMaterial.uniforms.tDiffuse.value=i.blurIntermediateRenderTarget.texture,i.hBlurMaterial.uniforms.tDepth.value=i.supportsDepthTextureExtension?a:i.depthRenderTarget.texture,i.hBlurMaterial.uniforms.size.value.set(i.resolution.x,i.resolution.y),i.hBlurMaterial.blending=A.NoBlending,i.materialCopy=new A.ShaderMaterial({uniforms:A.UniformsUtils.clone(Xa.uniforms),vertexShader:Xa.vertexShader,fragmentShader:Xa.fragmentShader,blending:A.NoBlending}),i.materialCopy.transparent=!0,i.materialCopy.depthTest=!1,i.materialCopy.depthWrite=!1,i.materialCopy.blending=A.CustomBlending,i.materialCopy.blendSrc=A.DstColorFactor,i.materialCopy.blendDst=A.ZeroFactor,i.materialCopy.blendEquation=A.AddEquation,i.materialCopy.blendSrcAlpha=A.DstAlphaFactor,i.materialCopy.blendDstAlpha=A.ZeroFactor,i.materialCopy.blendEquationAlpha=A.AddEquation,i.depthCopy=new A.ShaderMaterial({uniforms:A.UniformsUtils.clone($r.uniforms),vertexShader:$r.vertexShader,fragmentShader:$r.fragmentShader,blending:A.NoBlending}),i.fsQuad=new Pa(null),i}return(0,m.Z)(n,[{key:"render",value:function(e,t,n){if(this.renderToScreen&&(this.materialCopy.blending=A.NoBlending,this.materialCopy.uniforms.tDiffuse.value=n.texture,this.materialCopy.needsUpdate=!0,this.renderPass(e,this.materialCopy,null)),1!==this.params.output){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();var r=e.autoClear;e.autoClear=!1,e.setRenderTarget(this.depthRenderTarget),e.clear(),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;var i=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=i,this.hBlurMaterial.uniforms.depthCutoff.value=i,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),this.prevStdDev===this.params.saoBlurStdDev&&this.prevNumSamples===this.params.saoBlurRadius||(vo.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new A.Vector2(0,1)),vo.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new A.Vector2(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),e.setClearColor(0),e.setRenderTarget(this.beautyRenderTarget),e.clear(),e.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(e,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(e,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(e,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(e,this.hBlurMaterial,this.saoRenderTarget,16777215,1));var a=this.materialCopy;3===this.params.output?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,a=this.depthCopy):4===this.params.output?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),0===this.params.output?a.blending=A.CustomBlending:a.blending=A.NoBlending,this.renderPass(e,a,this.renderToScreen?null:n),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=r}}},{key:"renderPass",value:function(e,t,n,r,i){e.getClearColor(this.originalClearColor);var a=e.getClearAlpha(),o=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,void 0!==r&&null!==r&&(e.setClearColor(r),e.setClearAlpha(i||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=o,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}},{key:"renderOverride",value:function(e,t,n,r,i){e.getClearColor(this.originalClearColor);var a=e.getClearAlpha(),o=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,r=t.clearColor||r,i=t.clearAlpha||i,void 0!==r&&null!==r&&(e.setClearColor(r),e.setClearAlpha(i||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=o,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}},{key:"setSize",value:function(e,t){this.beautyRenderTarget.setSize(e,t),this.saoRenderTarget.setSize(e,t),this.blurIntermediateRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.depthRenderTarget.setSize(e,t),this.saoMaterial.uniforms.size.value.set(e,t),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(e,t),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(e,t),this.hBlurMaterial.needsUpdate=!0}},{key:"dispose",value:function(){this.saoRenderTarget.dispose(),this.blurIntermediateRenderTarget.dispose(),this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.depthRenderTarget.dispose(),this.depthMaterial.dispose(),this.normalMaterial.dispose(),this.saoMaterial.dispose(),this.vBlurMaterial.dispose(),this.hBlurMaterial.dispose(),this.materialCopy.dispose(),this.depthCopy.dispose(),this.fsQuad.dispose()}}]),n}(Ra),go={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float damp;","uniform sampler2D tOld;","uniform sampler2D tNew;","varying vec2 vUv;","vec4 when_gt( vec4 x, float y ) {","\treturn max( sign( x - y ), 0.0 );","}","void main() {","\tvec4 texelOld = texture2D( tOld, vUv );","\tvec4 texelNew = texture2D( tNew, vUv );","\ttexelOld *= damp * when_gt( texelOld, 0.1 );","\tgl_FragColor = max(texelNew, texelOld);","}"].join("\n")},yo=null,Ao=null,bo=null,xo=null,_o={uniforms:{tDiffuse:{value:null},tSize:{value:new A.Vector2(256,256)},center:{value:new A.Vector2(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec2 center;","uniform float angle;","uniform float scale;","uniform vec2 tSize;","uniform sampler2D tDiffuse;","varying vec2 vUv;","float pattern() {","\tfloat s = sin( angle ), c = cos( angle );","\tvec2 tex = vUv * tSize - center;","\tvec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;","\treturn ( sin( point.x ) * sin( point.y ) ) * 4.0;","}","void main() {","\tvec4 color = texture2D( tDiffuse, vUv );","\tfloat average = ( color.r + color.g + color.b ) / 3.0;","\tgl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );","}"].join("\n")},wo=null,So={defines:{MAX_STEP:0,isPerspectiveCamera:!0,isDistanceAttenuation:!0,isFresnel:!0,isInfiniteThick:!1,isSelective:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new A.Vector2},cameraProjectionMatrix:{value:new A.Matrix4},cameraInverseProjectionMatrix:{value:new A.Matrix4},opacity:{value:.5},maxDistance:{value:180},cameraRange:{value:0},surfDist:{value:.007},thickTolerance:{value:.03}},vertexShader:"\n\n    varying vec2 vUv;\n\n    void main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n\n  ",fragmentShader:"\n\t\t// precision highp float;\n\t\tprecision highp sampler2D;\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D tDepth;\n\t\tuniform sampler2D tNormal;\n\t\tuniform sampler2D tMetalness;\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float cameraRange;\n\t\tuniform vec2 resolution;\n\t\tuniform float opacity;\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform float maxDistance;\n\t\tuniform float surfDist;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\t\tuniform float thickTolerance;\n\t\t#include <packing>\n\t\tfloat pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {\n\t\t\t//x0: point, x1: linePointA, x2: linePointB\n\t\t\t//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html\n\t\t\treturn length(cross(x0-x1,x0-x2))/length(x2-x1);\n\t\t}\n\t\tfloat pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){\n\t\t\t// https://mathworld.wolfram.com/Point-PlaneDistance.html\n\t\t\t//// https://en.wikipedia.org/wiki/Plane_(geometry)\n\t\t\t//// http://paulbourke.net/geometry/pointlineplane/\n\t\t\tfloat a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;\n\t\t\tfloat x0=point.x,y0=point.y,z0=point.z;\n\t\t\tfloat x=planePoint.x,y=planePoint.y,z=planePoint.z;\n\t\t\tfloat d=-(a*x+b*y+c*z);\n\t\t\tfloat distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);\n\t\t\treturn distance;\n\t\t}\n\t\tfloat getDepth( const in vec2 uv ) {\n\t\t\treturn texture2D( tDepth, uv ).x;\n\t\t}\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#ifdef isPerspectiveCamera\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\t\tvec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {\n\t\t\tvec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc\n\t\t\tclipPosition *= clipW; //clip\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view\n\t\t}\n\t\tvec3 getViewNormal( const in vec2 uv ) {\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, uv ).xyz );\n\t\t}\n\t\tvec2 viewPositionToXY(vec3 viewPosition){\n\t\t\tvec2 xy;\n\t\t\tvec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);\n\t\t\txy=clip.xy;//clip\n\t\t\tfloat clipW=clip.w;\n\t\t\txy/=clipW;//NDC\n\t\t\txy=(xy+1.)/2.;//uv\n\t\t\txy*=resolution;//screen\n\t\t\treturn xy;\n\t\t}\n\t\tvoid main(){\n\t\t\t#ifdef isSelective\n\t\t\t\tfloat metalness=texture2D(tMetalness,vUv).r;\n\t\t\t\tif(metalness==0.) return;\n\t\t\t#endif\n\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tfloat viewZ = getViewZ( depth );\n\t\t\tif(-viewZ>=cameraFar) return;\n\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];\n\t\t\tvec3 viewPosition=getViewPosition( vUv, depth, clipW );\n\n\t\t\tvec2 d0=gl_FragCoord.xy;\n\t\t\tvec2 d1;\n\n\t\t\tvec3 viewNormal=getViewNormal( vUv );\n\n\t\t\t#ifdef isPerspectiveCamera\n\t\t\t\tvec3 viewIncidenceDir=normalize(viewPosition);\n\t\t\t\tvec3 viewReflectDir=reflect(viewIncidenceDir,viewNormal);\n\t\t\t#else\n\t\t\t\tvec3 viewIncidenceDir=vec3(0,0,-1);\n\t\t\t\tvec3 viewReflectDir=reflect(viewIncidenceDir,viewNormal);\n\t\t\t#endif\n\n\t\t\tfloat maxReflectRayLen=maxDistance/dot(-viewIncidenceDir,viewNormal);\n\t\t\t// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html\n\t\t\t// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)\n\t\t\t// maxDistance/maxReflectRayLen=cos(theta)\n\t\t\t// maxDistance/maxReflectRayLen==dot(a,b)\n\t\t\t// maxReflectRayLen==maxDistance/dot(a,b)\n\n\t\t\tvec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;\n\t\t\t#ifdef isPerspectiveCamera\n\t\t\t\tif(d1viewPosition.z>-cameraNear){\n\t\t\t\t\t//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx\n\t\t\t\t\tfloat t=(-cameraNear-viewPosition.z)/viewReflectDir.z;\n\t\t\t\t\td1viewPosition=viewPosition+viewReflectDir*t;\n\t\t\t\t}\n\t\t\t#endif\n\t\t\td1=viewPositionToXY(d1viewPosition);\n\n\t\t\tfloat totalLen=length(d1-d0);\n\t\t\tfloat xLen=d1.x-d0.x;\n\t\t\tfloat yLen=d1.y-d0.y;\n\t\t\tfloat totalStep=max(abs(xLen),abs(yLen));\n\t\t\tfloat xSpan=xLen/totalStep;\n\t\t\tfloat ySpan=yLen/totalStep;\n\t\t\tfor(float i=0.;i<MAX_STEP;i++){\n\t\t\t\tif(i>=totalStep) break;\n\t\t\t\tvec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);\n\t\t\t\tif(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;\n\t\t\t\tfloat s=length(xy-d0)/totalLen;\n\t\t\t\tvec2 uv=xy/resolution;\n\n\t\t\t\tfloat d = getDepth(uv);\n\t\t\t\tfloat vZ = getViewZ( d );\n\t\t\t\tif(-vZ>=cameraFar) continue;\n\t\t\t\tfloat cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];\n\t\t\t\tvec3 vP=getViewPosition( uv, d, cW );\n\n\t\t\t\t#ifdef isPerspectiveCamera\n\t\t\t\t\t// https://www.comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf\n\t\t\t\t\tfloat recipVPZ=1./viewPosition.z;\n\t\t\t\t\tfloat viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));\n\t\t\t\t\tfloat sD=surfDist*cW;\n\t\t\t\t#else\n\t\t\t\t\tfloat viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);\n\t\t\t\t\tfloat sD=surfDist;\n\t\t\t\t#endif\n\t\t\t\tif(viewReflectRayZ-sD>vZ) continue;\n\n\t\t\t\t#ifdef isInfiniteThick\n\t\t\t\t\tif(viewReflectRayZ+thickTolerance*clipW<vP.z) break;\n\t\t\t\t#endif\n\t\t\t\tfloat away=pointToLineDistance(vP,viewPosition,d1viewPosition);\n\n\t\t\t\tfloat op=opacity;\n\n\t\t\t\tif(away<sD){\n\t\t\t\t\tvec3 vN=getViewNormal( uv );\n\t\t\t\t\tif(dot(viewReflectDir,vN)>=0.) continue;\n\t\t\t\t\tfloat distance=pointPlaneDistance(vP,viewPosition,viewNormal);\n\t\t\t\t\tif(distance>maxDistance) break;\n\t\t\t\t\t#ifdef isDistanceAttenuation\n\t\t\t\t\t\tfloat ratio=1.-(distance/maxDistance);\n\t\t\t\t\t\tfloat attenuation=ratio*ratio;\n\t\t\t\t\t\top=opacity*attenuation;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef isFresnel\n\t\t\t\t\t\tfloat fresnel=(dot(viewIncidenceDir,viewReflectDir)+1.)/2.;\n\t\t\t\t\t\top*=fresnel;\n\t\t\t\t\t#endif\n\t\t\t\t\tvec4 reflectColor=texture2D(tDiffuse,uv);\n\t\t\t\t\tgl_FragColor.xyz=reflectColor.xyz;\n\t\t\t\t\tgl_FragColor.a=op;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t"},Eo={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:"\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvUv = uv;\n    \tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n\n  ",fragmentShader:"\n\n    uniform sampler2D tDepth;\n\n    uniform float cameraNear;\n    uniform float cameraFar;\n\n    varying vec2 vUv;\n\n    #include <packing>\n\n\t\tfloat getLinearDepth( const in vec2 uv ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, uv ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, uv ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n    void main() {\n\n    \tfloat depth = getLinearDepth( vUv );\n\t\t\tfloat d = 1.0 - depth;\n\t\t\t// d=(d-.999)*1000.;\n    \tgl_FragColor = vec4( vec3( d ), 1.0 );\n\n    }\n\n  "},Co={uniforms:{tDiffuse:{value:null},resolution:{value:new A.Vector2},opacity:{value:.5}},vertexShader:"\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvUv = uv;\n    \tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n\n  ",fragmentShader:"\n\n    uniform sampler2D tDiffuse;\n    uniform vec2 resolution;\n    varying vec2 vUv;\n    void main() {\n\t\t\t//reverse engineering from PhotoShop blur filter, then change coefficient\n\n    \tvec2 texelSize = ( 1.0 / resolution );\n\n\t\t\tvec4 c=texture2D(tDiffuse,vUv);\n\n\t\t\tvec2 offset;\n\n\t\t\toffset=(vec2(-1,0))*texelSize;\n\t\t\tvec4 cl=texture2D(tDiffuse,vUv+offset);\n\n\t\t\toffset=(vec2(1,0))*texelSize;\n\t\t\tvec4 cr=texture2D(tDiffuse,vUv+offset);\n\n\t\t\toffset=(vec2(0,-1))*texelSize;\n\t\t\tvec4 cb=texture2D(tDiffuse,vUv+offset);\n\n\t\t\toffset=(vec2(0,1))*texelSize;\n\t\t\tvec4 ct=texture2D(tDiffuse,vUv+offset);\n\n\t\t\t// float coeCenter=.5;\n\t\t\t// float coeSide=.125;\n\t\t\tfloat coeCenter=.2;\n\t\t\tfloat coeSide=.2;\n\t\t\tfloat a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;\n\t\t\tvec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;\n\t\t\tgl_FragColor=vec4(rgb,a);\n\n\t\t}\n\t"},To=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r,i=e.renderer,a=e.scene,o=e.camera,s=e.width,l=e.height,u=e.selects,c=e.bouncing,f=void 0!==c&&c,h=e.groundReflector;(0,v.Z)(this,n),(r=t.call(this)).width=void 0!==s?s:512,r.height=void 0!==l?l:512,r.clear=!0,r.renderer=i,r.scene=a,r.camera=o,r.groundReflector=h,r.opacity=So.uniforms.opacity.value,r.output=0,r.maxDistance=So.uniforms.maxDistance.value,r.thickness=So.uniforms.thickness.value,r.tempColor=new A.Color,r._selects=u,r.selective=Array.isArray(r._selects),Object.defineProperty((0,d.Z)(r),"selects",{get:function(){return this._selects},set:function(e){this._selects!==e&&(this._selects=e,Array.isArray(e)?(this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0):(this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0))}}),r._bouncing=f,Object.defineProperty((0,d.Z)(r),"bouncing",{get:function(){return this._bouncing},set:function(e){this._bouncing!==e&&(this._bouncing=e,this.ssrMaterial.uniforms.tDiffuse.value=e?this.prevRenderTarget.texture:this.beautyRenderTarget.texture)}}),r.blur=!0,r._distanceAttenuation=So.defines.DISTANCE_ATTENUATION,Object.defineProperty((0,d.Z)(r),"distanceAttenuation",{get:function(){return this._distanceAttenuation},set:function(e){this._distanceAttenuation!==e&&(this._distanceAttenuation=e,this.ssrMaterial.defines.DISTANCE_ATTENUATION=e,this.ssrMaterial.needsUpdate=!0)}}),r._fresnel=So.defines.FRESNEL,Object.defineProperty((0,d.Z)(r),"fresnel",{get:function(){return this._fresnel},set:function(e){this._fresnel!==e&&(this._fresnel=e,this.ssrMaterial.defines.FRESNEL=e,this.ssrMaterial.needsUpdate=!0)}}),r._infiniteThick=So.defines.INFINITE_THICK,Object.defineProperty((0,d.Z)(r),"infiniteThick",{get:function(){return this._infiniteThick},set:function(e){this._infiniteThick!==e&&(this._infiniteThick=e,this.ssrMaterial.defines.INFINITE_THICK=e,this.ssrMaterial.needsUpdate=!0)}});var p=new A.DepthTexture;return p.type=A.UnsignedShortType,p.minFilter=A.NearestFilter,p.magFilter=A.NearestFilter,r.beautyRenderTarget=new A.WebGLRenderTarget(r.width,r.height,{minFilter:A.NearestFilter,magFilter:A.NearestFilter,type:A.HalfFloatType,depthTexture:p,depthBuffer:!0}),r.prevRenderTarget=new A.WebGLRenderTarget(r.width,r.height,{minFilter:A.NearestFilter,magFilter:A.NearestFilter}),r.normalRenderTarget=new A.WebGLRenderTarget(r.width,r.height,{minFilter:A.NearestFilter,magFilter:A.NearestFilter,type:A.HalfFloatType}),r.metalnessRenderTarget=new A.WebGLRenderTarget(r.width,r.height,{minFilter:A.NearestFilter,magFilter:A.NearestFilter,type:A.HalfFloatType}),r.ssrRenderTarget=new A.WebGLRenderTarget(r.width,r.height,{minFilter:A.NearestFilter,magFilter:A.NearestFilter}),r.blurRenderTarget=r.ssrRenderTarget.clone(),r.blurRenderTarget2=r.ssrRenderTarget.clone(),r.ssrMaterial=new A.ShaderMaterial({defines:Object.assign({},So.defines,{MAX_STEP:Math.sqrt(r.width*r.width+r.height*r.height)}),uniforms:A.UniformsUtils.clone(So.uniforms),vertexShader:So.vertexShader,fragmentShader:So.fragmentShader,blending:A.NoBlending}),r.ssrMaterial.uniforms.tDiffuse.value=r.beautyRenderTarget.texture,r.ssrMaterial.uniforms.tNormal.value=r.normalRenderTarget.texture,r.ssrMaterial.defines.SELECTIVE=r.selective,r.ssrMaterial.needsUpdate=!0,r.ssrMaterial.uniforms.tMetalness.value=r.metalnessRenderTarget.texture,r.ssrMaterial.uniforms.tDepth.value=r.beautyRenderTarget.depthTexture,r.ssrMaterial.uniforms.cameraNear.value=r.camera.near,r.ssrMaterial.uniforms.cameraFar.value=r.camera.far,r.ssrMaterial.uniforms.thickness.value=r.thickness,r.ssrMaterial.uniforms.resolution.value.set(r.width,r.height),r.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(r.camera.projectionMatrix),r.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(r.camera.projectionMatrixInverse),r.normalMaterial=new A.MeshNormalMaterial,r.normalMaterial.blending=A.NoBlending,r.metalnessOnMaterial=new A.MeshBasicMaterial({color:"white"}),r.metalnessOffMaterial=new A.MeshBasicMaterial({color:"black"}),r.blurMaterial=new A.ShaderMaterial({defines:Object.assign({},Co.defines),uniforms:A.UniformsUtils.clone(Co.uniforms),vertexShader:Co.vertexShader,fragmentShader:Co.fragmentShader}),r.blurMaterial.uniforms.tDiffuse.value=r.ssrRenderTarget.texture,r.blurMaterial.uniforms.resolution.value.set(r.width,r.height),r.blurMaterial2=new A.ShaderMaterial({defines:Object.assign({},Co.defines),uniforms:A.UniformsUtils.clone(Co.uniforms),vertexShader:Co.vertexShader,fragmentShader:Co.fragmentShader}),r.blurMaterial2.uniforms.tDiffuse.value=r.blurRenderTarget.texture,r.blurMaterial2.uniforms.resolution.value.set(r.width,r.height),r.depthRenderMaterial=new A.ShaderMaterial({defines:Object.assign({},Eo.defines),uniforms:A.UniformsUtils.clone(Eo.uniforms),vertexShader:Eo.vertexShader,fragmentShader:Eo.fragmentShader,blending:A.NoBlending}),r.depthRenderMaterial.uniforms.tDepth.value=r.beautyRenderTarget.depthTexture,r.depthRenderMaterial.uniforms.cameraNear.value=r.camera.near,r.depthRenderMaterial.uniforms.cameraFar.value=r.camera.far,r.copyMaterial=new A.ShaderMaterial({uniforms:A.UniformsUtils.clone(Xa.uniforms),vertexShader:Xa.vertexShader,fragmentShader:Xa.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:A.SrcAlphaFactor,blendDst:A.OneMinusSrcAlphaFactor,blendEquation:A.AddEquation,blendSrcAlpha:A.SrcAlphaFactor,blendDstAlpha:A.OneMinusSrcAlphaFactor,blendEquationAlpha:A.AddEquation}),r.fsQuad=new Pa(null),r.originalClearColor=new A.Color,r}return(0,m.Z)(n,[{key:"dispose",value:function(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}},{key:"render",value:function(e,t){switch(e.setRenderTarget(this.beautyRenderTarget),e.clear(),this.groundReflector&&(this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0),e.render(this.scene,this.camera),this.groundReflector&&(this.groundReflector.visible=!1),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,0,0),this.selective&&this.renderMetalness(e,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0),this.ssrMaterial.uniforms.opacity.value=this.opacity,this.ssrMaterial.uniforms.maxDistance.value=this.maxDistance,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.renderPass(e,this.ssrMaterial,this.ssrRenderTarget),this.blur&&(this.renderPass(e,this.blurMaterial,this.blurRenderTarget),this.renderPass(e,this.blurMaterial2,this.blurRenderTarget2)),this.output){case n.OUTPUT.Default:this.bouncing?(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.prevRenderTarget),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=A.NormalBlending,this.renderPass(e,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t)):(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=A.NormalBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t));break;case n.OUTPUT.SSR:this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t),this.bouncing&&(this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=A.NormalBlending,this.renderPass(e,this.copyMaterial,this.prevRenderTarget));break;case n.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Depth:this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case n.OUTPUT.Metalness:this.copyMaterial.uniforms.tDiffuse.value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=A.NoBlending,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}},{key:"renderPass",value:function(e,t,n,r,i){this.originalClearColor.copy(e.getClearColor(this.tempColor));var a=e.getClearAlpha(this.tempColor),o=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,void 0!==r&&null!==r&&(e.setClearColor(r),e.setClearAlpha(i||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=o,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}},{key:"renderOverride",value:function(e,t,n,r,i){this.originalClearColor.copy(e.getClearColor(this.tempColor));var a=e.getClearAlpha(this.tempColor),o=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,r=t.clearColor||r,i=t.clearAlpha||i,void 0!==r&&null!==r&&(e.setClearColor(r),e.setClearAlpha(i||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=o,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}},{key:"renderMetalness",value:function(e,t,n,r,i){var a=this;this.originalClearColor.copy(e.getClearColor(this.tempColor));var o=e.getClearAlpha(this.tempColor),s=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,r=t.clearColor||r,i=t.clearAlpha||i,void 0!==r&&null!==r&&(e.setClearColor(r),e.setClearAlpha(i||0),e.clear()),this.scene.traverseVisible((function(e){e._SSRPassBackupMaterial=e.material,a._selects.includes(e)?e.material=a.metalnessOnMaterial:e.material=a.metalnessOffMaterial})),e.render(this.scene,this.camera),this.scene.traverseVisible((function(e){e.material=e._SSRPassBackupMaterial})),e.autoClear=s,e.setClearColor(this.originalClearColor),e.setClearAlpha(o)}},{key:"setSize",value:function(e,t){this.width=e,this.height=t,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(e*e+t*t),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(e,t),this.prevRenderTarget.setSize(e,t),this.ssrRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.metalnessRenderTarget.setSize(e,t),this.blurRenderTarget.setSize(e,t),this.blurRenderTarget2.setSize(e,t),this.ssrMaterial.uniforms.resolution.value.set(e,t),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(e,t),this.blurMaterial2.uniforms.resolution.value.set(e,t)}}]),n}(Ra),Mo=To,Io=null,ko=null,Bo=null,Ro=null,Po=null,Do=null;function Lo(e,t,n){var r=new WebGLRenderTarget(e.x,e.y,n?{depthTexture:new DepthTexture(e.x,e.y),depthBuffer:!0}:void 0);return r.texture.format=t,r.texture.minFilter=NearestFilter,r.texture.magFilter=NearestFilter,r.texture.generateMipmaps=!1,r.stencilBuffer=!1,r}var No={defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{value:null},uImageIncrement:{value:new A.Vector2(.001953125,0)},cKernel:{value:[]}},vertexShader:["uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","\tvUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cKernel[ KERNEL_SIZE_INT ];","uniform sampler2D tDiffuse;","uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","\tvec2 imageCoord = vUv;","\tvec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );","\tfor( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {","\t\tsum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];","\t\timageCoord += uImageIncrement;","\t}","\tgl_FragColor = sum;","}"].join("\n"),buildKernel:function(e){for(var t,n,r=Math.min(2*Math.ceil(3*e)+1,25),i=.5*(r-1),a=new Array(r),o=0,s=0;s<r;++s)a[s]=(t=s-i,n=e,Math.exp(-t*t/(2*n*n))),o+=a[s];for(var l=0;l<r;++l)a[l]/=o;return a}},Fo=null,Oo={uniforms:{tDiffuse:{value:null},strength:{value:1}},vertexShader:"\n  varying vec2 vUv;\n  void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }",fragmentShader:"\n  uniform float strength;\n  uniform sampler2D tDiffuse;\n  varying vec2 vUv;\n  void main() {\n    vec4 texel = texture2D( tDiffuse, vUv );\n    gl_FragColor = strength * texel;\n  }"},Uo=null,zo=null,Go=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new Wo(e)})),r.register((function(e){return new ts(e)})),r.register((function(e){return new ns(e)})),r.register((function(e){return new rs(e)})),r.register((function(e){return new Yo(e)})),r.register((function(e){return new Ko(e)})),r.register((function(e){return new Jo(e)})),r.register((function(e){return new qo(e)})),r.register((function(e){return new Vo(e)})),r.register((function(e){return new $o(e)})),r.register((function(e){return new Xo(e)})),r.register((function(e){return new es(e)})),r.register((function(e){return new Ho(e)})),r.register((function(e){return new is(e)})),r.register((function(e){return new as(e)})),r}return(0,m.Z)(n,[{key:"load",value:function(e,t,n,r){var i,a=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:A.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},s=new A.FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{a.parse(n,i,(function(n){t(n),a.manager.itemEnd(e)}),o)}catch(r){o(r)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var i,a={},o={};if("string"===typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(A.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4)))===os){try{a[Zo.KHR_BINARY_GLTF]=new us(e)}catch(h){return void(r&&r(h))}i=JSON.parse(a[Zo.KHR_BINARY_GLTF].content)}else i=JSON.parse(A.LoaderUtils.decodeText(new Uint8Array(e)))}else i=e;if(void 0===i.asset||i.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var s=new Ls(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});s.fileLoader.setRequestHeader(this.requestHeader);for(var l=0;l<this.pluginCallbacks.length;l++){var u=this.pluginCallbacks[l](s);o[u.name]=u,a[u.name]=!0}if(i.extensionsUsed)for(var c=0;c<i.extensionsUsed.length;++c){var f=i.extensionsUsed[c],d=i.extensionsRequired||[];switch(f){case Zo.KHR_MATERIALS_UNLIT:a[f]=new jo;break;case Zo.KHR_DRACO_MESH_COMPRESSION:a[f]=new cs(i,this.dracoLoader);break;case Zo.KHR_TEXTURE_TRANSFORM:a[f]=new fs;break;case Zo.KHR_MESH_QUANTIZATION:a[f]=new ds;break;default:d.indexOf(f)>=0&&void 0===o[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}s.setExtensions(a),s.setPlugins(o),s.parse(n,r)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}]),n}(A.Loader);function Qo(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var Zo={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},Ho=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return(0,m.Z)(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,a=t.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],s=new A.Color(16777215);void 0!==o.color&&s.fromArray(o.color);var l=void 0!==o.range?o.range:0;switch(o.type){case"directional":(i=new A.DirectionalLight(s)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new A.PointLight(s)).distance=l;break;case"spot":(i=new A.SpotLight(s)).distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,Ts(i,o),void 0!==o.intensity&&(i.intensity=o.intensity),i.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r}},{key:"getDependency",value:function(e,t){if("light"===e)return this._loadLight(t)}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}]),e}(),jo=function(){function e(){(0,v.Z)(this,e),this.name=Zo.KHR_MATERIALS_UNLIT}return(0,m.Z)(e,[{key:"getMaterialType",value:function(){return A.MeshBasicMaterial}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new A.Color(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,3001))}return Promise.all(r)}}]),e}(),Vo=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.KHR_MATERIALS_EMISSIVE_STRENGTH}return(0,m.Z)(e,[{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}]),e}(),Wo=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.KHR_MATERIALS_CLEARCOAT}return(0,m.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?A.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new A.Vector2(o,o)}return Promise.all(i)}}]),e}(),Xo=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.KHR_MATERIALS_IRIDESCENCE}return(0,m.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?A.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}]),e}(),Yo=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.KHR_MATERIALS_SHEEN}return(0,m.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?A.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[];t.sheenColor=new A.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;var a=r.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,3001)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}]),e}(),Ko=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.KHR_MATERIALS_TRANSMISSION}return(0,m.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?A.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}]),e}(),Jo=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.KHR_MATERIALS_VOLUME}return(0,m.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?A.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;var o=a.attenuationColor||[1,1,1];return t.attenuationColor=new A.Color(o[0],o[1],o[2]),Promise.all(i)}}]),e}(),qo=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.KHR_MATERIALS_IOR}return(0,m.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?A.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),$o=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.KHR_MATERIALS_SPECULAR}return(0,m.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?A.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var o=a.specularColorFactor||[1,1,1];return t.specularColor=new A.Color(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,3001)),Promise.all(i)}}]),e}(),es=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.KHR_MATERIALS_ANISOTROPY}return(0,m.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?A.MeshPhysicalMaterial:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(i)}}]),e}(),ts=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.KHR_TEXTURE_BASISU}return(0,m.Z)(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,a)}}]),e}(),ns=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.EXT_TEXTURE_WEBP,this.isSupported=null}return(0,m.Z)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var l=n.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),rs=function(){function e(t){(0,v.Z)(this,e),this.parser=t,this.name=Zo.EXT_TEXTURE_AVIF,this.isSupported=null}return(0,m.Z)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var l=n.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),is=function(){function e(t){(0,v.Z)(this,e),this.name=Zo.EXT_MESHOPT_COMPRESSION,this.parser=t}return(0,m.Z)(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,o=r.byteStride,s=new Uint8Array(e,t,n);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(i,o,s,r.mode,r.filter).then((function(e){return e.buffer})):a.ready.then((function(){var e=new ArrayBuffer(i*o);return a.decodeGltfBuffer(new Uint8Array(e),i,o,s,r.mode,r.filter),e}))}))}return null}}]),e}(),as=function(){function e(t){(0,v.Z)(this,e),this.name=Zo.EXT_MESH_GPU_INSTANCING,this.parser=t}return(0,m.Z)(e,[{key:"createNodeMesh",value:function(e){var t=this,n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||void 0===r.mesh)return null;var i,a=n.meshes[r.mesh],o=(0,f.Z)(a.primitives);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.mode!==ms.TRIANGLES&&s.mode!==ms.TRIANGLE_STRIP&&s.mode!==ms.TRIANGLE_FAN&&void 0!==s.mode)return null}}catch(p){o.e(p)}finally{o.f()}var l=r.extensions[this.name].attributes,u=[],c={},d=function(e){u.push(t.parser.getDependency("accessor",l[e]).then((function(t){return c[e]=t,c[e]})))};for(var h in l)d(h);return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then((function(e){var n,r=e.pop(),i=r.isGroup?r.children:[r],a=e[0].count,o=[],s=(0,f.Z)(i);try{for(s.s();!(n=s.n()).done;){for(var l=n.value,u=new A.Matrix4,d=new A.Vector3,h=new A.Quaternion,v=new A.Vector3(1,1,1),m=new A.InstancedMesh(l.geometry,l.material,a),g=0;g<a;g++)c.TRANSLATION&&d.fromBufferAttribute(c.TRANSLATION,g),c.ROTATION&&h.fromBufferAttribute(c.ROTATION,g),c.SCALE&&v.fromBufferAttribute(c.SCALE,g),m.setMatrixAt(g,u.compose(d,h,v));for(var y in c)"TRANSLATION"!==y&&"ROTATION"!==y&&"SCALE"!==y&&l.geometry.setAttribute(y,c[y]);A.Object3D.prototype.copy.call(m,l),t.parser.assignFinalMaterial(m),o.push(m)}}catch(p){s.e(p)}finally{s.f()}return r.isGroup?(r.clear(),r.add.apply(r,o),r):o[0]})))}}]),e}(),os="glTF",ss=12,ls={JSON:1313821514,BIN:5130562},us=(0,m.Z)((function e(t){(0,v.Z)(this,e),this.name=Zo.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,ss);if(this.header={magic:A.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==os)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-ss,i=new DataView(t,ss),a=0;a<r;){var o=i.getUint32(a,!0);a+=4;var s=i.getUint32(a,!0);if(a+=4,s===ls.JSON){var l=new Uint8Array(t,ss+a,o);this.content=A.LoaderUtils.decodeText(l)}else if(s===ls.BIN){var u=ss+a;this.body=t.slice(u,u+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),cs=function(){function e(t,n){if((0,v.Z)(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Zo.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return(0,m.Z)(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},l={};for(var u in a){var c=xs[u]||u.toLowerCase();o[c]=a[u]}for(var f in e.attributes){var d=xs[f]||f.toLowerCase();if(void 0!==a[f]){var h=n.accessors[e.attributes[f]],p=gs[h.componentType];l[d]=p.name,s[d]=!0===h.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),o,l)}))}))}}]),e}(),fs=function(){function e(){(0,v.Z)(this,e),this.name=Zo.KHR_TEXTURE_TRANSFORM}return(0,m.Z)(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}]),e}(),ds=(0,m.Z)((function e(){(0,v.Z)(this,e),this.name=Zo.KHR_MESH_QUANTIZATION})),hs=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r,i,a){return(0,v.Z)(this,n),t.call(this,e,r,i,a)}return(0,m.Z)(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,a=0;a!==r;a++)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,u=r-t,c=(n-t)/u,f=c*c,d=f*c,h=e*l,p=h-l,v=-2*d+3*f,m=d-f,g=1-v,y=m-f+c,A=0;A!==o;A++){var b=a[p+A+o],x=a[p+A+s]*u,_=a[h+A+o],w=a[h+A]*u;i[A]=g*b+y*x+v*_+m*w}return i}}]),n}(A.Interpolant),ps=new A.Quaternion,vs=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,m.Z)(n,[{key:"interpolate_",value:function(e,t,r,i){var a=(0,h.Z)((0,p.Z)(n.prototype),"interpolate_",this).call(this,e,t,r,i);return ps.fromArray(a).normalize().toArray(a),a}}]),n}(hs),ms={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},gs={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ys={9728:A.NearestFilter,9729:A.LinearFilter,9984:A.NearestMipmapNearestFilter,9985:A.LinearMipmapNearestFilter,9986:A.NearestMipmapLinearFilter,9987:A.LinearMipmapLinearFilter},As={33071:A.ClampToEdgeWrapping,33648:A.MirroredRepeatWrapping,10497:A.RepeatWrapping},bs={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xs=(0,l.Z)((0,l.Z)({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},xt>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{},{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),_s={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ws={CUBICSPLINE:void 0,LINEAR:A.InterpolateLinear,STEP:A.InterpolateDiscrete},Ss={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Es(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new A.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:A.FrontSide})),e.DefaultMaterial}function Cs(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function Ts(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Ms(e,t,n){for(var r=!1,i=!1,a=!1,o=0,s=t.length;o<s;o++){var l=t[o];if(void 0!==l.POSITION&&(r=!0),void 0!==l.NORMAL&&(i=!0),void 0!==l.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);for(var u=[],c=[],f=[],d=0,h=t.length;d<h;d++){var p=t[d];if(r){var v=void 0!==p.POSITION?n.getDependency("accessor",p.POSITION):e.attributes.position;u.push(v)}if(i){var m=void 0!==p.NORMAL?n.getDependency("accessor",p.NORMAL):e.attributes.normal;c.push(m)}if(a){var g=void 0!==p.COLOR_0?n.getDependency("accessor",p.COLOR_0):e.attributes.color;f.push(g)}}return Promise.all([Promise.all(u),Promise.all(c),Promise.all(f)]).then((function(t){var n=t[0],o=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),a&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}function Is(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ks(e){var t,n=e.extensions&&e.extensions[Zo.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+Bs(n.attributes):e.indices+":"+Bs(e.attributes)+":"+e.mode,void 0!==e.targets)for(var r=0,i=e.targets.length;r<i;r++)t+=":"+Bs(e.targets[r]);return t}function Bs(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function Rs(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Ps(e){return e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"}var Ds=new A.Matrix4,Ls=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,v.Z)(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new Qo,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var r=!1,i=!1,a=-1;"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent&&(r=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=(i=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||r||i&&a<98?this.textureLoader=new A.TextureLoader(this.options.manager):this.textureLoader=new A.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new A.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return(0,m.Z)(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};Cs(i,a,r),Ts(a,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var a=t[r].joints,o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0;for(var l=0,u=e.length;l<u;l++){var c=e[l];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var i=n.clone();return function e(t,n){var i=r.associations.get(t);null!=i&&r.associations.set(n,i);var a,s=(0,f.Z)(t.children.entries());try{for(s.s();!(a=s.n()).done;){var l=(0,o.Z)(a.value,2),u=l[0];e(l[1],n.children[u])}}catch(c){s.e(c)}finally{s.f()}}(n,i),i.name+="_instance_"+e.uses[t]++,i}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(!(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}))))throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Zo.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,i){n.load(A.LoaderUtils.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){var i=bs[r.type],a=gs[r.componentType],o=!0===r.normalized,s=new a(r.count*i);return Promise.resolve(new A.BufferAttribute(s,i,o))}var l=[];return void 0!==r.bufferView?l.push(this.getDependency("bufferView",r.bufferView)):l.push(null),void 0!==r.sparse&&(l.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(l).then((function(e){var i,a,o=e[0],s=bs[r.type],l=gs[r.componentType],u=l.BYTES_PER_ELEMENT,c=u*s,f=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,h=!0===r.normalized;if(d&&d!==c){var p=Math.floor(f/d),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,m=t.cache.get(v);m||(i=new l(o,p*d,r.count*d/u),m=new A.InterleavedBuffer(i,d/u),t.cache.add(v,m)),a=new A.InterleavedBufferAttribute(m,s,f%d/u,h)}else i=null===o?new l(r.count*s):new l(o,f,r.count*s),a=new A.BufferAttribute(i,s,h);if(void 0!==r.sparse){var g=bs.SCALAR,y=gs[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,_=new y(e[1],b,r.sparse.count*g),w=new l(e[2],x,r.sparse.count*s);null!==o&&(a=new A.BufferAttribute(a.array.slice(),a.itemSize,a.normalized));for(var S=0,E=_.length;S<E;S++){var C=_[S];if(a.setX(C,w[S*s]),s>=2&&a.setY(C,w[S*s+1]),s>=3&&a.setZ(C,w[S*s+2]),s>=4&&a.setW(C,w[S*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r],a=this.textureLoader;if(i.uri){var o=n.manager.getHandler(i.uri);null!==o&&(a=o)}return this.loadTextureImage(e,r,a)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,i=this.json,a=i.textures[e],o=i.images[t],s=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];var l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=a.name||o.name||"",""===t.name&&"string"===typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(t.name=o.uri);var n=(i.samplers||{})[a.sampler]||{};return t.magFilter=ys[n.magFilter]||A.LinearFilter,t.minFilter=ys[n.minFilter]||A.LinearMipmapLinearFilter,t.wrapS=As[n.wrapS]||A.RepeatWrapping,t.wrapT=As[n.wrapT]||A.RepeatWrapping,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=l,l}},{key:"loadImageSource",value:function(e,t){var n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()}));var i=n.images[e],a=self.URL||self.webkitURL,o=i.uri||"",s=!1;if(void 0!==i.bufferView)o=this.getDependency("bufferView",i.bufferView).then((function(e){s=!0;var t=new Blob([e],{type:i.mimeType});return o=a.createObjectURL(t)}));else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var l=Promise.resolve(o).then((function(e){return new Promise((function(n,i){var a=n;!0===t.isImageBitmapLoader&&(a=function(e){var t=new A.Texture(e);t.needsUpdate=!0,n(t)}),t.load(A.LoaderUtils.resolveURL(e,r.path),a,void 0,i)}))})).then((function(e){return!0===s&&a.revokeObjectURL(o),e.userData.mimeType=i.mimeType||Ps(i.uri),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e}));return this.sourceCache[e]=l,l}},{key:"assignTexture",value:function(e,t,n,r){var i=this;return this.getDependency("texture",n.index).then((function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),i.extensions[Zo.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[Zo.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var s=i.associations.get(a);a=i.extensions[Zo.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),i.associations.set(a,s)}}return void 0!==r&&("colorSpace"in a?a.colorSpace=3001===r?"srgb":"srgb-linear":a.encoding=r),e[t]=a,a}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new A.PointsMaterial,A.Material.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var l="LineBasicMaterial:"+n.uuid,u=this.cache.get(l);u||(u=new A.LineBasicMaterial,A.Material.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(r||i||a){var c="ClonedMaterial:"+n.uuid+":";r&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),a&&(c+="flat-shading:");var f=this.cache.get(c);f||(f=n.clone(),i&&(f.vertexColors=!0),a&&(f.flatShading=!0),r&&(f.normalScale&&(f.normalScale.y*=-1),f.clearcoatNormalScale&&(f.clearcoatNormalScale.y*=-1)),this.cache.add(c,f),this.associations.set(f,this.associations.get(n))),n=f}e.material=n}},{key:"getMaterialType",value:function(){return A.MeshStandardMaterial}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,i=this.extensions,a=r.materials[e],o={},s=[];if((a.extensions||{})[Zo.KHR_MATERIALS_UNLIT]){var l=i[Zo.KHR_MATERIALS_UNLIT];t=l.getMaterialType(),s.push(l.extendParams(o,a,n))}else{var u=a.pbrMetallicRoughness||{};if(o.color=new A.Color(1,1,1),o.opacity=1,Array.isArray(u.baseColorFactor)){var c=u.baseColorFactor;o.color.fromArray(c),o.opacity=c[3]}void 0!==u.baseColorTexture&&s.push(n.assignTexture(o,"map",u.baseColorTexture,3001)),o.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,o.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(s.push(n.assignTexture(o,"metalnessMap",u.metallicRoughnessTexture)),s.push(n.assignTexture(o,"roughnessMap",u.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),s.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===a.doubleSided&&(o.side=A.DoubleSide);var f=a.alphaMode||Ss.OPAQUE;if(f===Ss.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,f===Ss.MASK&&(o.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==A.MeshBasicMaterial&&(s.push(n.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new A.Vector2(1,1),void 0!==a.normalTexture.scale)){var d=a.normalTexture.scale;o.normalScale.set(d,d)}return void 0!==a.occlusionTexture&&t!==A.MeshBasicMaterial&&(s.push(n.assignTexture(o,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(o.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==A.MeshBasicMaterial&&(o.emissive=(new A.Color).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==A.MeshBasicMaterial&&s.push(n.assignTexture(o,"emissiveMap",a.emissiveTexture,3001)),Promise.all(s).then((function(){var r=new t(o);return a.name&&(r.name=a.name),Ts(r,a),n.associations.set(r,{materials:e}),a.extensions&&Cs(i,r,a),r}))}},{key:"createUniqueName",value:function(e){var t=A.PropertyBinding.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[Zo.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return Fs(n,e,t)}))}for(var a=[],o=0,s=e.length;o<s;o++){var l=e[o],u=ks(l),c=r[u];if(c)a.push(c.promise);else{var f=void 0;f=l.extensions&&l.extensions[Zo.KHR_DRACO_MESH_COMPRESSION]?i(l):Fs(new A.BufferGeometry,l,t),r[u]={primitive:l,promise:f},a.push(f)}}return Promise.all(a)}},{key:"loadMesh",value:function(e){for(var t=this,n=this.json,r=this.extensions,i=n.meshes[e],a=i.primitives,o=[],s=0,l=a.length;s<l;s++){var u=void 0===a[s].material?Es(this.cache):this.getDependency("material",a[s].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then((function(n){for(var o=n.slice(0,n.length-1),s=n[n.length-1],l=[],u=0,c=s.length;u<c;u++){var f=s[u],d=a[u],h=void 0,p=o[u];if(d.mode===ms.TRIANGLES||d.mode===ms.TRIANGLE_STRIP||d.mode===ms.TRIANGLE_FAN||void 0===d.mode)!0===(h=!0===i.isSkinnedMesh?new A.SkinnedMesh(f,p):new A.Mesh(f,p)).isSkinnedMesh&&h.normalizeSkinWeights(),d.mode===ms.TRIANGLE_STRIP?h.geometry=lt(h.geometry,A.TriangleStripDrawMode):d.mode===ms.TRIANGLE_FAN&&(h.geometry=lt(h.geometry,A.TriangleFanDrawMode));else if(d.mode===ms.LINES)h=new A.LineSegments(f,p);else if(d.mode===ms.LINE_STRIP)h=new A.Line(f,p);else if(d.mode===ms.LINE_LOOP)h=new A.LineLoop(f,p);else{if(d.mode!==ms.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);h=new A.Points(f,p)}Object.keys(h.geometry.morphAttributes).length>0&&Is(h,i),h.name=t.createUniqueName(i.name||"mesh_"+e),Ts(h,i),d.extensions&&Cs(r,h,d),t.assignFinalMaterial(h),l.push(h)}for(var v=0,m=l.length;v<m;v++)t.associations.set(l[v],{meshes:e,primitives:v});if(1===l.length)return i.extensions&&Cs(r,l[0],i),l[0];var g=new A.Group;i.extensions&&Cs(r,g,i),t.associations.set(g,{meshes:e});for(var y=0,b=l.length;y<b;y++)g.add(l[y]);return g}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new A.PerspectiveCamera(A.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new A.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Ts(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){for(var t=this.json.skins[e],n=[],r=0,i=t.joints.length;r<i;r++)n.push(this._loadNodeShallow(t.joints[r]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){for(var n=e.pop(),r=e,i=[],a=[],o=0,s=r.length;o<s;o++){var l=r[o];if(l){i.push(l);var u=new A.Matrix4;null!==n&&u.fromArray(n.array,16*o),a.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new A.Skeleton(i,a)}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=t.name?t.name:"animation_"+e,r=[],i=[],a=[],o=[],s=[],l=0,u=t.channels.length;l<u;l++){var c=t.channels[l],f=t.samplers[c.sampler],d=c.target,h=d.node,p=void 0!==t.parameters?t.parameters[f.input]:f.input,v=void 0!==t.parameters?t.parameters[f.output]:f.output;void 0!==d.node&&(r.push(this.getDependency("node",h)),i.push(this.getDependency("accessor",p)),a.push(this.getDependency("accessor",v)),o.push(f),s.push(d))}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(o),Promise.all(s)]).then((function(e){for(var t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=[],l=function(){var e,n=t[u],l=r[u],c=i[u],f=a[u],d=o[u];if(void 0===n)return 1;switch(n.updateMatrix(),_s[d.path]){case _s.weights:e=A.NumberKeyframeTrack;break;case _s.rotation:e=A.QuaternionKeyframeTrack;break;case _s.position:case _s.scale:default:e=A.VectorKeyframeTrack}var h=n.name?n.name:n.uuid,p=void 0!==f.interpolation?ws[f.interpolation]:A.InterpolateLinear,v=[];_s[d.path]===_s.weights?n.traverse((function(e){e.morphTargetInfluences&&v.push(e.name?e.name:e.uuid)})):v.push(h);var m=c.array;if(c.normalized){for(var g=Rs(m.constructor),y=new Float32Array(m.length),b=0,x=m.length;b<x;b++)y[b]=m[b]*g;m=y}for(var _=0,w=v.length;_<w;_++){var S=new e(v[_]+"."+_s[d.path],l.array,m,p);"CUBICSPLINE"===f.interpolation&&(S.createInterpolant=function(e){return new(this instanceof A.QuaternionKeyframeTrack?vs:hs)(this.times,this.values,this.getValueSize()/3,e)},S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),s.push(S)}},u=0,c=t.length;u<c;u++)l();return new A.AnimationClip(n,void 0,s)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){for(var t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],a=n.children||[],o=0,s=a.length;o<s;o++)i.push(t.getDependency("node",a[o]));var l=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),l]).then((function(e){var t=e[0],n=e[1],r=e[2];null!==r&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(r,Ds)}));for(var i=0,a=n.length;i<a;i++)t.add(n[i]);return t}))}},{key:"_loadNodeShallow",value:function(e){var t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];var i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"",o=[],s=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return s&&o.push(s),void 0!==i.camera&&o.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){o.push(e)})),this.nodeCache[e]=Promise.all(o).then((function(t){var o;if((o=!0===i.isBone?new A.Bone:t.length>1?new A.Group:1===t.length?t[0]:new A.Object3D)!==t[0])for(var s=0,l=t.length;s<l;s++)o.add(t[s]);if(i.name&&(o.userData.name=i.name,o.name=a),Ts(o,i),i.extensions&&Cs(n,o,i),void 0!==i.matrix){var u=new A.Matrix4;u.fromArray(i.matrix),o.applyMatrix4(u)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o})),this.nodeCache[e]}},{key:"loadScene",value:function(e){var t=this.extensions,n=this.json.scenes[e],r=this,i=new A.Group;n.name&&(i.name=r.createUniqueName(n.name)),Ts(i,n),n.extensions&&Cs(t,i,n);for(var a=n.nodes||[],s=[],l=0,u=a.length;l<u;l++)s.push(r.getDependency("node",a[l]));return Promise.all(s).then((function(e){for(var t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=function(e){var t,n=new Map,i=(0,f.Z)(r.associations);try{for(i.s();!(t=i.n()).done;){var a=(0,o.Z)(t.value,2),s=a[0],l=a[1];(s instanceof A.Material||s instanceof A.Texture)&&n.set(s,l)}}catch(u){i.e(u)}finally{i.f()}return e.traverse((function(e){var t=r.associations.get(e);null!=t&&n.set(e,t)})),n}(i),i}))}}]),e}();function Ns(e,t,n){var r=t.attributes,i=new A.Box3;if(void 0!==r.POSITION){var a=n.json.accessors[r.POSITION],o=a.min,s=a.max;if(void 0!==o&&void 0!==s){if(i.set(new A.Vector3(o[0],o[1],o[2]),new A.Vector3(s[0],s[1],s[2])),a.normalized){var l=Rs(gs[a.componentType]);i.min.multiplyScalar(l),i.max.multiplyScalar(l)}var u=t.targets;if(void 0!==u){for(var c=new A.Vector3,f=new A.Vector3,d=0,h=u.length;d<h;d++){var p=u[d];if(void 0!==p.POSITION){var v=n.json.accessors[p.POSITION],m=v.min,g=v.max;if(void 0!==m&&void 0!==g){if(f.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),f.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),f.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),v.normalized){var y=Rs(gs[v.componentType]);f.multiplyScalar(y)}c.max(f)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}e.boundingBox=i;var b=new A.Sphere;i.getCenter(b.center),b.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=b}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}function Fs(e,t,n){var r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=xs[o]||o.toLowerCase();s in e.attributes||i.push(a(r[o],s))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(l)}return Ts(e,t),Ns(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?Ms(e,t.targets,n):e}))}var Os="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles/generic-hand/",Us=null,zs=.01,Gs="index-finger-tip",Qs=null,Zs=.05,Hs=.02,js=.01,Vs=.02,Ws=1,Xs=.4,Ys=.002,Ks=.01,Js=.003,qs=.035,$s=16,el=12,tl=110,nl=new A.Vector3(0,1,0),rl=new A.Vector3(0,0,1),il=.02,al=1.5,ol=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r){var i;return(0,v.Z)(this,n),(i=t.call(this)).hand=e,i.controller=r,i.motionController=null,i.envMap=null,i.mesh=null,i.pointerGeometry=null,i.pointerMesh=null,i.pointerObject=null,i.pinched=!1,i.attached=!1,i.cursorObject=null,i.raycaster=null,i._onConnected=i._onConnected.bind((0,d.Z)(i)),i._onDisconnected=i._onDisconnected.bind((0,d.Z)(i)),i.hand.addEventListener("connected",i._onConnected),i.hand.addEventListener("disconnected",i._onDisconnected),i}return(0,m.Z)(n,[{key:"_onConnected",value:function(e){var t=e.data;t.hand&&(this.visible=!0,this.xrInputSource=t,this.createPointer())}},{key:"_onDisconnected",value:function(){var e,t;this.visible=!1,this.xrInputSource=null,null==(e=this.pointerGeometry)||e.dispose(),null==(t=this.pointerMesh)||t.material.dispose(),this.clear()}},{key:"_drawVerticesRing",value:function(e,t,n){for(var r=t.clone(),i=0;i<$s;i++){r.applyAxisAngle(rl,2*Math.PI/$s);var a=n*$s+i;e[3*a]=r.x,e[3*a+1]=r.y,e[3*a+2]=r.z}}},{key:"_updatePointerVertices",value:function(e){var t=this.pointerGeometry.attributes.position.array,n=new A.Vector3(Ys,0,-1*(qs-e));this._drawVerticesRing(t,n,0);for(var r=new A.Vector3(Math.sin(Math.PI*tl/180)*e,Math.cos(Math.PI*tl/180)*e,0),i=0;i<el;i++)this._drawVerticesRing(t,r,i+1),r.applyAxisAngle(nl,Math.PI*tl/180/(-2*el));var a=$s*(1+el),o=$s*(1+el)+1,s=new A.Vector3(0,0,-1*(qs-e));t[3*a]=s.x,t[3*a+1]=s.y,t[3*a+2]=s.z;var l=new A.Vector3(0,0,e);t[3*o]=l.x,t[3*o+1]=l.y,t[3*o+2]=l.z,this.pointerGeometry.setAttribute("position",new A.Float32BufferAttribute(t,3))}},{key:"createPointer",value:function(){var e,t,n=new Array(3*((el+1)*$s+2)).fill(0),r=[];for(this.pointerGeometry=new A.BufferGeometry,this.pointerGeometry.setAttribute("position",new A.Float32BufferAttribute(n,3)),this._updatePointerVertices(Ks),e=0;e<el;e++){for(t=0;t<$s-1;t++)r.push(e*$s+t,e*$s+t+1,(e+1)*$s+t),r.push(e*$s+t+1,(e+1)*$s+t+1,(e+1)*$s+t);r.push((e+1)*$s-1,e*$s,(e+2)*$s-1),r.push(e*$s,(e+1)*$s,(e+2)*$s-1)}var i=$s*(1+el),a=$s*(1+el)+1;for(e=0;e<$s-1;e++)r.push(i,e+1,e),r.push(a,e+$s*el,e+$s*el+1);r.push(i,0,$s-1),r.push(a,$s*(el+1)-1,$s*el);var o=new A.MeshBasicMaterial;o.transparent=!0,o.opacity=Xs,this.pointerGeometry.setIndex(r),this.pointerMesh=new A.Mesh(this.pointerGeometry,o),this.pointerMesh.position.set(0,0,-1*Ks),this.pointerObject=new A.Object3D,this.pointerObject.add(this.pointerMesh),this.raycaster=new A.Raycaster;var s=new A.SphereGeometry(il,10,10),l=new A.MeshBasicMaterial;l.transparent=!0,l.opacity=Xs,this.cursorObject=new A.Mesh(s,l),this.pointerObject.add(this.cursorObject),this.add(this.pointerObject)}},{key:"_updateRaycaster",value:function(){if(this.raycaster){var e=this.pointerObject.matrixWorld,t=new A.Matrix4;t.identity().extractRotation(e),this.raycaster.ray.origin.setFromMatrixPosition(e),this.raycaster.ray.direction.set(0,0,-1).applyMatrix4(t)}}},{key:"_updatePointer",value:function(){this.pointerObject.visible=this.controller.visible;var e=this.hand.joints["index-finger-tip"],t=this.hand.joints["thumb-tip"],n=e.position.distanceTo(t.position),r=e.position.clone().add(t.position).multiplyScalar(.5);this.pointerObject.position.copy(r),this.pointerObject.quaternion.copy(this.controller.quaternion),this.pinched=n<=Hs;var i=(n-js)/(Zs-js),a=(n-js)/(Hs-js);if(i>1)this._updatePointerVertices(Ks),this.pointerMesh.position.set(0,0,-1*Ks),this.pointerMesh.material.opacity=Xs;else if(i>0){var o=(Ks-Js)*i+Js;this._updatePointerVertices(o),a<1?(this.pointerMesh.position.set(0,0,-1*o-(1-a)*Vs),this.pointerMesh.material.opacity=Xs+(1-a)*(Ws-Xs)):(this.pointerMesh.position.set(0,0,-1*o),this.pointerMesh.material.opacity=Xs)}else this._updatePointerVertices(Js),this.pointerMesh.position.set(0,0,-1*Js-Vs),this.pointerMesh.material.opacity=Ws;this.cursorObject.material.opacity=this.pointerMesh.material.opacity}},{key:"updateMatrixWorld",value:function(e){(0,h.Z)((0,p.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),this.pointerGeometry&&(this._updatePointer(),this._updateRaycaster())}},{key:"isPinched",value:function(){return this.pinched}},{key:"setAttached",value:function(e){this.attached=e}},{key:"isAttached",value:function(){return this.attached}},{key:"intersectObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.raycaster)return this.raycaster.intersectObject(e,t)}},{key:"intersectObjects",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.raycaster)return this.raycaster.intersectObjects(e,t)}},{key:"checkIntersections",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.raycaster&&!this.attached){var n=this.raycaster.intersectObjects(e,t),r=new A.Vector3(0,0,-1);if(n.length>0){var i=n[0].distance;this.cursorObject.position.copy(r.multiplyScalar(i))}else this.cursorObject.position.copy(r.multiplyScalar(al))}}},{key:"setCursor",value:function(e){var t=new A.Vector3(0,0,-1);this.raycaster&&!this.attached&&this.cursorObject.position.copy(t.multiplyScalar(e))}},{key:"dispose",value:function(){this._onDisconnected(),this.hand.removeEventListener("connected",this._onConnected),this.hand.removeEventListener("disconnected",this._onDisconnected)}}]),n}(A.Object3D);function sl(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=100;r.font="normal 100px Arial";var a=r.measureText(e).width;n.width=a,n.height=i,r.font="normal 100px Arial",r.textAlign="center",r.textBaseline="middle",r.fillStyle="#ffffff",r.fillText(e,a/2,50);var o=new THREE.Texture(n);o.needsUpdate=!0;var s=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,map:o,transparent:!0}),l=new THREE.PlaneGeometry(t*a/i,t);return new THREE.Mesh(l,s)}var ll=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,null,[{key:"createButton",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement("button");function i(){r.style.display="",r.style.cursor="auto",r.style.left="calc(50% - 75px)",r.style.width="150px",r.onmouseenter=null,r.onmouseleave=null,r.onclick=null,r.textContent="VR NOT SUPPORTED"}function a(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return a(r),r.id="VRButton",r.style.display="none",navigator.xr.isSessionSupported("immersive-vr").then((function(a){a?function(){var e=null;function i(e){return a.apply(this,arguments)}function a(){return(a=(0,c.Z)((0,u.Z)().mark((function n(i){return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i.addEventListener("end",o),n.next=3,t.xr.setSession(i);case 3:r.textContent="EXIT VR",e=i;case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function o(){e.removeEventListener("end",o),r.textContent="ENTER VR",e=null}r.style.display="",r.style.cursor="pointer",r.style.left="calc(50% - 50px)",r.style.width="100px",r.textContent="ENTER VR",r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.5"},r.onclick=function(){var t;if(null===e){var r=[n.optionalFeatures,"local-floor","bounded-floor","hand-tracking"].flat().filter(Boolean);null==(t=navigator.xr)||t.requestSession("immersive-vr",(0,l.Z)((0,l.Z)({},n),{},{optionalFeatures:r})).then(i)}else e.end()}}():i(),a&&e.xrSessionIsGranted&&r.click()})),r;var o=document.createElement("a");return!1===window.isSecureContext?(o.href=document.location.href.replace(/^http:/,"https:"),o.innerHTML="WEBXR NEEDS HTTPS"):(o.href="https://immersiveweb.dev/",o.innerHTML="WEBXR NOT AVAILABLE"),o.style.left="calc(50% - 90px)",o.style.width="180px",o.style.textDecoration="none",a(o),o}},{key:"registerSessionGrantedListener",value:function(){"undefined"!==typeof navigator&&"xr"in navigator&&navigator.xr.addEventListener("sessiongranted",(function(){e.xrSessionIsGranted=!0}))}}]),e}(),ul=ll,cl={Handedness:{NONE:"none",LEFT:"left",RIGHT:"right"},ComponentState:{DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"},ComponentProperty:{BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"},ComponentType:{TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"},ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:{TRANSFORM:"transform",VISIBILITY:"visibility"}};function fl(e){return dl.apply(this,arguments)}function dl(){return(dl=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.abrupt("return",n.json());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hl(e){return pl.apply(this,arguments)}function pl(){return(pl=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("No basePath supplied");case 2:return"profilesList.json",e.next=5,fl("".concat(t,"/").concat("profilesList.json"));case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vl(e,t){return ml.apply(this,arguments)}function ml(){return ml=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,i,a,o,s,l,u,c,f=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>2&&void 0!==f[2]?f[2]:null,i=!(f.length>3&&void 0!==f[3])||f[3],t){e.next=4;break}throw new Error("No xrInputSource supplied");case 4:if(n){e.next=6;break}throw new Error("No basePath supplied");case 6:return e.next=8,hl(n);case 8:if(a=e.sent,o=void 0,t.profiles.some((function(e){var t=a[e];return t&&(o={profileId:e,profilePath:"".concat(n,"/").concat(t.path),deprecated:!!t.deprecated}),!!o})),o){e.next=18;break}if(r){e.next=14;break}throw new Error("No matching profile name found");case 14:if(s=a[r]){e.next=17;break}throw new Error('No matching profile name found and default profile "'.concat(r,'" missing.'));case 17:o={profileId:r,profilePath:"".concat(n,"/").concat(s.path),deprecated:!!s.deprecated};case 18:return e.next=20,fl(o.profilePath);case 20:if(l=e.sent,u=void 0,!i){e.next=27;break}if(c="any"===t.handedness?l.layouts[Object.keys(l.layouts)[0]]:l.layouts[t.handedness]){e.next=26;break}throw new Error("No matching handedness, ".concat(t.handedness,", in profile ").concat(o.profileId));case 26:c.assetPath&&(u=o.profilePath.replace("profile.json",c.assetPath));case 27:return e.abrupt("return",{profile:l,assetPath:u});case 28:case"end":return e.stop()}}),e)}))),ml.apply(this,arguments)}var gl={xAxis:0,yAxis:0,button:0,state:cl.ComponentState.DEFAULT};function yl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e,r=t;if(Math.sqrt(e*e+t*t)>1){var i=Math.atan2(t,e);n=Math.cos(i),r=Math.sin(i)}return{normalizedXAxis:.5*n+.5,normalizedYAxis:.5*r+.5}}var Al=null,bl=null,xl=null,_l="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",wl="generic-trigger",Sl=function(e,t){t.traverse((function(t){t instanceof Mesh&&"envMap"in t.material&&(t.material.envMap=e,t.material.needsUpdate=!0)}))},El=null;function Cl(e,t){Object.values(e.components).forEach((function(e){var n=e.type,r=e.touchPointNodeName,i=e.visualResponses;if(n===cl.ComponentType.TOUCHPAD&&r)if(e.touchPointNode=t.getObjectByName(r),e.touchPointNode){var a=new SphereGeometry(.001),o=new MeshBasicMaterial({color:255}),s=new Mesh(a,o);e.touchPointNode.add(s)}else console.warn("Could not find touch dot, ".concat(e.touchPointNodeName,", in touchpad component ").concat(e.id));Object.values(i).forEach((function(e){var n=e.valueNodeName,r=e.minNodeName,i=e.maxNodeName;if(e.valueNodeProperty===cl.VisualResponseProperty.TRANSFORM&&r&&i){if(e.minNode=t.getObjectByName(r),e.maxNode=t.getObjectByName(i),!e.minNode)return void console.warn("Could not find ".concat(r," in the model"));if(!e.maxNode)return void console.warn("Could not find ".concat(i," in the model"))}e.valueNode=t.getObjectByName(n),e.valueNode||console.warn("Could not find ".concat(n," in the model"))}))}))}function Tl(e,t){Cl(e.motionController,t),e.envMap&&Sl(e.envMap,t),e.add(t)}var Ml=null,Il=null,kl=null,Bl=new A.Matrix4,Rl=new A.Vector3,Pl=null,Dl=null,Ll=null,Nl=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t,n){return n.set(e,t,Math.cos(e)*Math.sin(t))},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;(0,v.Z)(this,n),(e=t.call(this)).type="ParametricGeometry",e.parameters={func:r,slices:i,stacks:a};for(var o=[],s=[],l=[],u=[],c=1e-5,f=new A.Vector3,d=new A.Vector3,h=new A.Vector3,p=new A.Vector3,m=new A.Vector3,g=i+1,y=0;y<=a;y++)for(var b=y/a,x=0;x<=i;x++){var _=x/i;r(_,b,d),s.push(d.x,d.y,d.z),_-c>=0?(r(_-c,b,h),p.subVectors(d,h)):(r(_+c,b,h),p.subVectors(h,d)),b-c>=0?(r(_,b-c,h),m.subVectors(d,h)):(r(_,b+c,h),m.subVectors(h,d)),f.crossVectors(p,m).normalize(),l.push(f.x,f.y,f.z),u.push(_,b)}for(var w=0;w<a;w++)for(var S=0;S<i;S++){var E=w*g+S,C=w*g+S+1,T=(w+1)*g+S+1,M=(w+1)*g+S;o.push(E,C,M),o.push(C,T,M)}return e.setIndex(o),e.setAttribute("position",new A.Float32BufferAttribute(s,3)),e.setAttribute("normal",new A.Float32BufferAttribute(l,3)),e.setAttribute("uv",new A.Float32BufferAttribute(u,2)),e}return(0,m.Z)(n)}(A.BufferGeometry),Fl=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,v.Z)(this,n);var l=i+1,u=e.computeFrenetFrames(i,s),c=u.tangents,f=u.normals,d=u.binormals,h=new A.Vector3;return(r=t.call(this,(function(t,n,r){n*=2*Math.PI;var i=Math.floor(t*(l-1));e.getPointAt(t,h);var o=f[i],s=d[i],u=-a*Math.cos(n),c=a*Math.sin(n);h.x+=u*o.x+c*s.x,h.y+=u*o.y+c*s.y,h.z+=u*o.z+c*s.z,r.copy(h)}),i,o)).tangents=c,r.normals=f,r.binormals=d,r.path=e,r.segments=i,r.radius=a,r.segmentsRadius=o,r.closed=s,r}return(0,m.Z)(n)}(Nl),Ol={klein:function(e,t,n){var r,i;t*=Math.PI,e*=2*Math.PI,(t*=2)<Math.PI?(r=3*Math.cos(t)*(1+Math.sin(t))+2*(1-Math.cos(t)/2)*Math.cos(t)*Math.cos(e),i=-8*Math.sin(t)-2*(1-Math.cos(t)/2)*Math.sin(t)*Math.cos(e)):(r=3*Math.cos(t)*(1+Math.sin(t))+2*(1-Math.cos(t)/2)*Math.cos(e+Math.PI),i=-8*Math.sin(t));var a=-2*(1-Math.cos(t)/2)*Math.sin(e);n.set(r,a,i)},plane:function(e,t){return function(n,r,i){var a=n*e,o=r*t;i.set(a,0,o)}},mobius:function(e,t,n){e-=.5;var r=2*Math.PI*t,i=Math.cos(r)*(2+e*Math.cos(r/2)),a=Math.sin(r)*(2+e*Math.cos(r/2)),o=e*Math.sin(r/2);n.set(i,a,o)},mobius3d:function(e,t,n){e*=Math.PI,t*=2*Math.PI;var r=(e*=2)/2,i=.125*Math.cos(t)*Math.cos(r)-.65*Math.sin(t)*Math.sin(r),a=.125*Math.cos(t)*Math.sin(r)+.65*Math.sin(t)*Math.cos(r),o=(2.25+i)*Math.sin(e);i=(2.25+i)*Math.cos(e),n.set(i,o,a)},TubeGeometry:Fl,TorusKnotGeometry:function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;(0,v.Z)(this,n);var u=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,m.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A.Vector3;e*=2*Math.PI;var n=(1+.5*Math.cos(l*e))*Math.cos(s*e),i=(1+.5*Math.cos(l*e))*Math.sin(s*e),a=.5*Math.sin(l*e);return t.set(n,i,a).multiplyScalar(r)}}]),n}(A.Curve),c=a,f=o,d=new u;return(e=t.call(this,d,c,i,f,!0,!1)).radius=r,e.tube=i,e.segmentsT=a,e.segmentsR=o,e.p=s,e.q=l,e}return(0,m.Z)(n)}(Fl),SphereGeometry:function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r,i){return(0,v.Z)(this,n),t.call(this,(function(t,n,r){t*=Math.PI,n*=2*Math.PI;var i=e*Math.sin(t)*Math.cos(n),a=e*Math.sin(t)*Math.sin(n),o=e*Math.cos(t);r.set(i,a,o)}),r,i)}return(0,m.Z)(n)}(Nl),PlaneGeometry:function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r,i,a){return(0,v.Z)(this,n),t.call(this,(function(t,n,i){var a=t*e,o=n*r;i.set(a,0,o)}),i,a)}return(0,m.Z)(n)}(Nl)},Ul=new A.Vector3;function zl(e,t,n,r,i,a){var o=2*Math.PI*i/4,s=Math.max(a-2*i,0),l=Math.PI/4;Ul.copy(t),Ul[r]=0,Ul.normalize();var u=.5*o/(o+s),c=1-Ul.angleTo(e)/l;return 1===Math.sign(Ul[n])?c*u:s/(o+s)+u+u*(1-c)}var Gl=null,Ql=null,Zl=null,Hl=null,jl=null,Vl=null,Wl=new A.Matrix4,Xl=function(){function e(t){(0,v.Z)(this,e),t=t||{},this.vertices={near:[new A.Vector3,new A.Vector3,new A.Vector3,new A.Vector3],far:[new A.Vector3,new A.Vector3,new A.Vector3,new A.Vector3]},void 0!==t.projectionMatrix&&this.setFromProjectionMatrix(t.projectionMatrix,t.maxFar||1e4)}return(0,m.Z)(e,[{key:"setFromProjectionMatrix",value:function(e,t){var n=0===e.elements[11];return Wl.copy(e).invert(),this.vertices.near[0].set(1,1,-1),this.vertices.near[1].set(1,-1,-1),this.vertices.near[2].set(-1,-1,-1),this.vertices.near[3].set(-1,1,-1),this.vertices.near.forEach((function(e){e.applyMatrix4(Wl)})),this.vertices.far[0].set(1,1,1),this.vertices.far[1].set(1,-1,1),this.vertices.far[2].set(-1,-1,1),this.vertices.far[3].set(-1,1,1),this.vertices.far.forEach((function(e){e.applyMatrix4(Wl);var r=Math.abs(e.z);n?e.z*=Math.min(t/r,1):e.multiplyScalar(Math.min(t/r,1))})),this.vertices}},{key:"split",value:function(t,n){for(;t.length>n.length;)n.push(new e);n.length=t.length;for(var r=0;r<t.length;r++){var i=n[r];if(0===r)for(var a=0;a<4;a++)i.vertices.near[a].copy(this.vertices.near[a]);else for(var o=0;o<4;o++)i.vertices.near[o].lerpVectors(this.vertices.near[o],this.vertices.far[o],t[r-1]);if(r===t.length-1)for(var s=0;s<4;s++)i.vertices.far[s].copy(this.vertices.far[s]);else for(var l=0;l<4;l++)i.vertices.far[l].lerpVectors(this.vertices.near[l],this.vertices.far[l],t[r])}}},{key:"toSpace",value:function(e,t){for(var n=0;n<4;n++)t.vertices.near[n].copy(this.vertices.near[n]).applyMatrix4(e),t.vertices.far[n].copy(this.vertices.far[n]).applyMatrix4(e)}}]),e}(),Yl={lights_fragment_begin:"\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0) && defined( RE_Direct ) && defined( USE_CSM ) && defined( CSM_CASCADES )\n\n\tDirectionalLight directionalLight;\n\tfloat linearDepth = (vViewPosition.z) / (shadowFar - cameraNear);\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#if defined( USE_SHADOWMAP ) && defined( CSM_FADE )\n\tvec2 cascade;\n\tfloat cascadeCenter;\n\tfloat closestEdge;\n\tfloat margin;\n\tfloat csmx;\n\tfloat csmy;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\n\t  \t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\t\t// NOTE: Depth gets larger away from the camera.\n\t\t\t// cascade.x is closer, cascade.y is further\n\t\t\tcascade = CSM_cascades[ i ];\n\t\t\tcascadeCenter = ( cascade.x + cascade.y ) / 2.0;\n\t\t\tclosestEdge = linearDepth < cascadeCenter ? cascade.x : cascade.y;\n\t\t\tmargin = 0.25 * pow( closestEdge, 2.0 );\n\t\t\tcsmx = cascade.x - margin / 2.0;\n\t\t\tcsmy = cascade.y + margin / 2.0;\n\t\t\tif( linearDepth >= csmx && ( linearDepth < csmy || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 ) ) {\n\n\t\t\t\tfloat dist = min( linearDepth - csmx, csmy - linearDepth );\n\t\t\t\tfloat ratio = clamp( dist / margin, 0.0, 1.0 );\n\n\t\t\t\tvec3 prevColor = directLight.color;\n\t\t\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\t\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t\t\t\tbool shouldFadeLastCascade = UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 && linearDepth > cascadeCenter;\n\t\t\t\tdirectLight.color = mix( prevColor, directLight.color, shouldFadeLastCascade ? ratio : 1.0 );\n\n\t\t\t\tReflectedLight prevLight = reflectedLight;\n\t\t\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t\t\t\tbool shouldBlend = UNROLLED_LOOP_INDEX != CSM_CASCADES - 1 || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 && linearDepth < cascadeCenter;\n\t\t\t\tfloat blendRatio = shouldBlend ? ratio : 1.0;\n\n\t\t\t\treflectedLight.directDiffuse = mix( prevLight.directDiffuse, reflectedLight.directDiffuse, blendRatio );\n\t\t\t\treflectedLight.directSpecular = mix( prevLight.directSpecular, reflectedLight.directSpecular, blendRatio );\n\t\t\t\treflectedLight.indirectDiffuse = mix( prevLight.indirectDiffuse, reflectedLight.indirectDiffuse, blendRatio );\n\t\t\t\treflectedLight.indirectSpecular = mix( prevLight.indirectSpecular, reflectedLight.indirectSpecular, blendRatio );\n\n\t\t\t}\n\t  \t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\t#else\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\t\tdirectionalLight = directionalLights[ i ];\n\t\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\n\t\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\n\t\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\t\tif(linearDepth >= CSM_cascades[UNROLLED_LOOP_INDEX].x && linearDepth < CSM_cascades[UNROLLED_LOOP_INDEX].y) directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t\t\tif(linearDepth >= CSM_cascades[UNROLLED_LOOP_INDEX].x && (linearDepth < CSM_cascades[UNROLLED_LOOP_INDEX].y || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1)) RE_Direct( directLight, geometry, material, reflectedLight );\n\n\t\t\t#endif\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if ( NUM_DIR_LIGHTS > NUM_DIR_LIGHT_SHADOWS)\n\t\t// compute the lights not casting shadows (if any)\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = NUM_DIR_LIGHT_SHADOWS; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\t\tdirectionalLight = directionalLights[ i ];\n\n\t\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\n\t\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && !defined( USE_CSM ) && !defined( CSM_CASCADES )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n",getlights_pars_begin:function(){return"\n\t\t\t#if defined( USE_CSM ) && defined( CSM_CASCADES )\n\t\t\tuniform vec2 CSM_cascades[CSM_CASCADES];\n\t\t\tuniform float cameraNear;\n\t\t\tuniform float shadowFar;\n\t\t\t#endif\n\n\t\t\t".concat(A.ShaderChunk.lights_pars_begin,"\n\t\t")}},Kl=new A.Matrix4,Jl=new Xl,ql=new A.Vector3,$l=new A.Box3,eu=null,tu=null,nu=null,ru=null,iu={uniforms:{tDiffuse:{value:null},exposure:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define saturate(a) clamp( a, 0.0, 1.0 )","uniform sampler2D tDiffuse;","uniform float exposure;","varying vec2 vUv;","vec3 RRTAndODTFit( vec3 v ) {","\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;","\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;","\treturn a / b;","}","vec3 ACESFilmicToneMapping( vec3 color ) {","\tconst mat3 ACESInputMat = mat3(","\t\tvec3( 0.59719, 0.07600, 0.02840 ),","\t\tvec3( 0.35458, 0.90834, 0.13383 ),","\t\tvec3( 0.04823, 0.01566, 0.83777 )","\t);","\tconst mat3 ACESOutputMat = mat3(","\t\tvec3(  1.60475, -0.10208, -0.00327 ),","\t\tvec3( -0.53108,  1.10813, -0.07276 ),","\t\tvec3( -0.07367, -0.00605,  1.07602 )","\t);","\tcolor = ACESInputMat * color;","\tcolor = RRTAndODTFit( color );","\tcolor = ACESOutputMat * color;","\treturn saturate( color );","}","void main() {","\tvec4 tex = texture2D( tDiffuse, vUv );","\ttex.rgb *= exposure / 0.6;","\tgl_FragColor = vec4( ACESFilmicToneMapping( tex.rgb ), tex.a );","}"].join("\n")},au={uniforms:{},vertexShader:["void main() {","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["void main() {","\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 0.5 );","}"].join("\n")},ou={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 base = texture2D( tDiffuse, vUv );","\tvec3 lumCoeff = vec3( 0.25, 0.65, 0.1 );","\tfloat lum = dot( lumCoeff, base.rgb );","\tvec3 blend = vec3( lum );","\tfloat L = min( 1.0, max( 0.0, 10.0 * ( lum - 0.45 ) ) );","\tvec3 result1 = 2.0 * base.rgb * blend;","\tvec3 result2 = 1.0 - 2.0 * ( 1.0 - blend ) * ( 1.0 - base.rgb );","\tvec3 newColor = mix( result1, result2, L );","\tfloat A2 = opacity * base.a;","\tvec3 mixRGB = A2 * newColor.rgb;","\tmixRGB += ( ( 1.0 - A2 ) * base.rgb );","\tgl_FragColor = vec4( mixRGB, base.a );","}"].join("\n")},su={uniforms:{tDiffuse1:{value:null},tDiffuse2:{value:null},mixRatio:{value:.5},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float mixRatio;","uniform sampler2D tDiffuse1;","uniform sampler2D tDiffuse2;","varying vec2 vUv;","void main() {","\tvec4 texel1 = texture2D( tDiffuse1, vUv );","\tvec4 texel2 = texture2D( tDiffuse2, vUv );","\tgl_FragColor = opacity * mix( texel1, texel2, mixRatio );","}"].join("\n")},lu={uniforms:{tDiffuse:{value:null},brightness:{value:0},contrast:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float brightness;","uniform float contrast;","varying vec2 vUv;","void main() {","\tgl_FragColor = texture2D( tDiffuse, vUv );","\tgl_FragColor.rgb += brightness;","\tif (contrast > 0.0) {","\t\tgl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - contrast) + 0.5;","\t} else {","\t\tgl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + contrast) + 0.5;","\t}","}"].join("\n")},uu={uniforms:{tDiffuse:{value:null},powRGB:{value:new A.Vector3(2,2,2)},mulRGB:{value:new A.Vector3(1,1,1)},addRGB:{value:new A.Vector3(0,0,0)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 powRGB;","uniform vec3 mulRGB;","uniform vec3 addRGB;","varying vec2 vUv;","void main() {","\tgl_FragColor = texture2D( tDiffuse, vUv );","\tgl_FragColor.rgb = mulRGB * pow( ( gl_FragColor.rgb + addRGB ), powRGB );","}"].join("\n")},cu={uniforms:{tDiffuse:{value:null},color:{value:new A.Color(16777215)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tvec3 luma = vec3( 0.299, 0.587, 0.114 );","\tfloat v = dot( texel.xyz, luma );","\tgl_FragColor = vec4( v * color, texel.w );","}"].join("\n")},fu={uniforms:{tColor:{value:null},tDepth:{value:null},focus:{value:1},maxblur:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float focus;","uniform float maxblur;","uniform sampler2D tColor;","uniform sampler2D tDepth;","varying vec2 vUv;","void main() {","\tvec4 depth = texture2D( tDepth, vUv );","\tfloat factor = depth.x - focus;","\tvec4 col = texture2D( tColor, vUv, 2.0 * maxblur * abs( focus - depth.x ) );","\tgl_FragColor = col;","\tgl_FragColor.a = 1.0;","}"].join("\n")},du={uniforms:{tDiffuse:{value:null},resolution:{value:new A.Vector2(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")},hu={uniforms:{tDiffuse:{value:null},screenWidth:{value:1024},screenHeight:{value:1024},sampleDistance:{value:.94},waveFactor:{value:.00125}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float screenWidth;","uniform float screenHeight;","uniform float sampleDistance;","uniform float waveFactor;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 color, org, tmp, add;","\tfloat sample_dist, f;","\tvec2 vin;","\tvec2 uv = vUv;","\tadd = color = org = texture2D( tDiffuse, uv );","\tvin = ( uv - vec2( 0.5 ) ) * vec2( 1.4 );","\tsample_dist = dot( vin, vin ) * 2.0;","\tf = ( waveFactor * 100.0 + sample_dist ) * sampleDistance * 4.0;","\tvec2 sampleSize = vec2(  1.0 / screenWidth, 1.0 / screenHeight ) * vec2( f );","\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.111964, 0.993712 ) * sampleSize );","\tif( tmp.b < color.b ) color = tmp;","\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.846724, 0.532032 ) * sampleSize );","\tif( tmp.b < color.b ) color = tmp;","\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.943883, -0.330279 ) * sampleSize );","\tif( tmp.b < color.b ) color = tmp;","\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.330279, -0.943883 ) * sampleSize );","\tif( tmp.b < color.b ) color = tmp;","\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.532032, -0.846724 ) * sampleSize );","\tif( tmp.b < color.b ) color = tmp;","\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.993712, -0.111964 ) * sampleSize );","\tif( tmp.b < color.b ) color = tmp;","\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.707107, 0.707107 ) * sampleSize );","\tif( tmp.b < color.b ) color = tmp;","\tcolor = color * vec4( 2.0 ) - ( add / vec4( 8.0 ) );","\tcolor = color + ( add / vec4( 8.0 ) - color ) * ( vec4( 1.0 ) - vec4( sample_dist * 0.5 ) );","\tgl_FragColor = vec4( color.rgb * color.rgb * vec3( 0.95 ) + color.rgb, 1.0 );","}"].join("\n")},pu={uniforms:{tDiffuse:{value:null},aspect:{value:new A.Vector2(512,512)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","uniform vec2 aspect;","vec2 texel = vec2(1.0 / aspect.x, 1.0 / aspect.y);","mat3 G[9];","const mat3 g0 = mat3( 0.3535533845424652, 0, -0.3535533845424652, 0.5, 0, -0.5, 0.3535533845424652, 0, -0.3535533845424652 );","const mat3 g1 = mat3( 0.3535533845424652, 0.5, 0.3535533845424652, 0, 0, 0, -0.3535533845424652, -0.5, -0.3535533845424652 );","const mat3 g2 = mat3( 0, 0.3535533845424652, -0.5, -0.3535533845424652, 0, 0.3535533845424652, 0.5, -0.3535533845424652, 0 );","const mat3 g3 = mat3( 0.5, -0.3535533845424652, 0, -0.3535533845424652, 0, 0.3535533845424652, 0, 0.3535533845424652, -0.5 );","const mat3 g4 = mat3( 0, -0.5, 0, 0.5, 0, 0.5, 0, -0.5, 0 );","const mat3 g5 = mat3( -0.5, 0, 0.5, 0, 0, 0, 0.5, 0, -0.5 );","const mat3 g6 = mat3( 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.6666666865348816, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204 );","const mat3 g7 = mat3( -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, 0.6666666865348816, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408 );","const mat3 g8 = mat3( 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408 );","void main(void)","{","\tG[0] = g0,","\tG[1] = g1,","\tG[2] = g2,","\tG[3] = g3,","\tG[4] = g4,","\tG[5] = g5,","\tG[6] = g6,","\tG[7] = g7,","\tG[8] = g8;","\tmat3 I;","\tfloat cnv[9];","\tvec3 sample;","\tfor (float i=0.0; i<3.0; i++) {","\t\tfor (float j=0.0; j<3.0; j++) {","\t\t\tsample = texture2D(tDiffuse, vUv + texel * vec2(i-1.0,j-1.0) ).rgb;","\t\t\tI[int(i)][int(j)] = length(sample);","\t\t}","\t}","\tfor (int i=0; i<9; i++) {","\t\tfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);","\t\tcnv[i] = dp3 * dp3;","\t}","\tfloat M = (cnv[0] + cnv[1]) + (cnv[2] + cnv[3]);","\tfloat S = (cnv[4] + cnv[5]) + (cnv[6] + cnv[7]) + (cnv[8] + M);","\tgl_FragColor = vec4(vec3(sqrt(M/S)), 1.0);","}"].join("\n")},vu={uniforms:{mRefractionRatio:{value:1.02},mFresnelBias:{value:.1},mFresnelPower:{value:2},mFresnelScale:{value:1},tCube:{value:null}},vertexShader:["uniform float mRefractionRatio;","uniform float mFresnelBias;","uniform float mFresnelScale;","uniform float mFresnelPower;","varying vec3 vReflect;","varying vec3 vRefract[3];","varying float vReflectionFactor;","void main() {","\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );","\tvec3 I = worldPosition.xyz - cameraPosition;","\tvReflect = reflect( I, worldNormal );","\tvRefract[0] = refract( normalize( I ), worldNormal, mRefractionRatio );","\tvRefract[1] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.99 );","\tvRefract[2] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.98 );","\tvReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), mFresnelPower );","\tgl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","varying vec3 vReflect;","varying vec3 vRefract[3];","varying float vReflectionFactor;","void main() {","\tvec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","\tvec4 refractedColor = vec4( 1.0 );","\trefractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) ).r;","\trefractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) ).g;","\trefractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) ).b;","\tgl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );","}"].join("\n")},mu={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 tex = texture2D( tDiffuse, vUv );","\tgl_FragColor = LinearTosRGB( tex );","}"].join("\n")},gu={uniforms:{tInput:{value:null}},vertexShader:["varying vec2 vUv;","void main() {"," vUv = uv;"," gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tInput;","void main() {","\tgl_FragColor = vec4( 1.0 ) - texture2D( tInput, vUv );","}"].join("\n")},yu={uniforms:{tInput:{value:null},fStepSize:{value:1},vSunPositionScreenSpace:{value:new A.Vector3}},vertexShader:["varying vec2 vUv;","void main() {"," vUv = uv;"," gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define TAPS_PER_PASS 6.0","varying vec2 vUv;","uniform sampler2D tInput;","uniform vec3 vSunPositionScreenSpace;","uniform float fStepSize;","void main() {","\tvec2 delta = vSunPositionScreenSpace.xy - vUv;","\tfloat dist = length( delta );","\tvec2 stepv = fStepSize * delta / dist;","\tfloat iters = dist/fStepSize;","\tvec2 uv = vUv.xy;","\tfloat col = 0.0;","\tfloat f = min( 1.0, max( vSunPositionScreenSpace.z / 1000.0, 0.0 ) );","\tif ( 0.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;","\tuv += stepv;","\tif ( 1.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;","\tuv += stepv;","\tif ( 2.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;","\tuv += stepv;","\tif ( 3.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;","\tuv += stepv;","\tif ( 4.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;","\tuv += stepv;","\tif ( 5.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;","\tuv += stepv;","\tgl_FragColor = vec4( col/TAPS_PER_PASS );","\tgl_FragColor.a = 1.0;","}"].join("\n")},Au={uniforms:{tColors:{value:null},tGodRays:{value:null},fGodRayIntensity:{value:.69}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tColors;","uniform sampler2D tGodRays;","uniform float fGodRayIntensity;","void main() {","\tgl_FragColor = texture2D( tColors, vUv ) + fGodRayIntensity * vec4( 1.0 - texture2D( tGodRays, vUv ).r );","\tgl_FragColor.a = 1.0;","}"].join("\n")},bu={uniforms:{vSunPositionScreenSpace:{value:new A.Vector3},fAspect:{value:1},sunColor:{value:new A.Color(16772608)},bgColor:{value:new A.Color(0)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform vec3 vSunPositionScreenSpace;","uniform float fAspect;","uniform vec3 sunColor;","uniform vec3 bgColor;","void main() {","\tvec2 diff = vUv - vSunPositionScreenSpace.xy;","\tdiff.x *= fAspect;","\tfloat prop = clamp( length( diff ) / 0.5, 0.0, 1.0 );","\tprop = 0.35 * pow( 1.0 - prop, 3.0 );","\tgl_FragColor.xyz = ( vSunPositionScreenSpace.z > 0.0 ) ? mix( sunColor, bgColor, 1.0 - prop ) : bgColor;","\tgl_FragColor.w = 1.0;","}"].join("\n")},xu={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},_u={uniforms:{tDiffuse:{value:null},h:{value:1/512},r:{value:.35}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float h;","uniform float r;","varying vec2 vUv;","void main() {","\tvec4 sum = vec4( 0.0 );","\tfloat hh = h * abs( r - vUv.y );","\tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * hh, vUv.y ) ) * 0.051;","\tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * hh, vUv.y ) ) * 0.0918;","\tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * hh, vUv.y ) ) * 0.12245;","\tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * hh, vUv.y ) ) * 0.1531;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","\tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * hh, vUv.y ) ) * 0.1531;","\tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * hh, vUv.y ) ) * 0.12245;","\tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * hh, vUv.y ) ) * 0.0918;","\tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * hh, vUv.y ) ) * 0.051;","\tgl_FragColor = sum;","}"].join("\n")},wu={uniforms:{tDiffuse:{value:null},hue:{value:0},saturation:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float hue;","uniform float saturation;","varying vec2 vUv;","void main() {","\tgl_FragColor = texture2D( tDiffuse, vUv );","\tfloat angle = hue * 3.14159265;","\tfloat s = sin(angle), c = cos(angle);","\tvec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;","\tfloat len = length(gl_FragColor.rgb);","\tgl_FragColor.rgb = vec3(","\t\tdot(gl_FragColor.rgb, weights.xyz),","\t\tdot(gl_FragColor.rgb, weights.zxy),","\t\tdot(gl_FragColor.rgb, weights.yzx)","\t);","\tfloat average = (gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0;","\tif (saturation > 0.0) {","\t\tgl_FragColor.rgb += (average - gl_FragColor.rgb) * (1.0 - 1.0 / (1.001 - saturation));","\t} else {","\t\tgl_FragColor.rgb += (average - gl_FragColor.rgb) * (-saturation);","\t}","}"].join("\n")},Su={uniforms:{tDiffuse:{value:null},sides:{value:6},angle:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float sides;","uniform float angle;","varying vec2 vUv;","void main() {","\tvec2 p = vUv - 0.5;","\tfloat r = length(p);","\tfloat a = atan(p.y, p.x) + angle;","\tfloat tau = 2. * 3.1416 ;","\ta = mod(a, tau/sides);","\ta = abs(a - tau/sides/2.) ;","\tp = r * vec2(cos(a), sin(a));","\tvec4 color = texture2D(tDiffuse, p + 0.5);","\tgl_FragColor = color;","}"].join("\n")},Eu={uniforms:{tDiffuse:{value:null},side:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform int side;","varying vec2 vUv;","void main() {","\tvec2 p = vUv;","\tif (side == 0){","\t\tif (p.x > 0.5) p.x = 1.0 - p.x;","\t}else if (side == 1){","\t\tif (p.x < 0.5) p.x = 1.0 - p.x;","\t}else if (side == 2){","\t\tif (p.y < 0.5) p.y = 1.0 - p.y;","\t}else if (side == 3){","\t\tif (p.y > 0.5) p.y = 1.0 - p.y;","\t} ","\tvec4 color = texture2D(tDiffuse, p);","\tgl_FragColor = color;","}"].join("\n")},Cu={uniforms:{heightMap:{value:null},resolution:{value:new A.Vector2(512,512)},scale:{value:new A.Vector2(1,1)},height:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float height;","uniform vec2 resolution;","uniform sampler2D heightMap;","varying vec2 vUv;","void main() {","\tfloat val = texture2D( heightMap, vUv ).x;","\tfloat valU = texture2D( heightMap, vUv + vec2( 1.0 / resolution.x, 0.0 ) ).x;","\tfloat valV = texture2D( heightMap, vUv + vec2( 0.0, 1.0 / resolution.y ) ).x;","\tgl_FragColor = vec4( ( 0.5 * normalize( vec3( val - valU, val - valV, height  ) ) + 0.5 ), 1.0 );","}"].join("\n")},Tu={modes:{none:"NO_PARALLAX",basic:"USE_BASIC_PARALLAX",steep:"USE_STEEP_PARALLAX",occlusion:"USE_OCLUSION_PARALLAX",relief:"USE_RELIEF_PARALLAX"},uniforms:{bumpMap:{value:null},map:{value:null},parallaxScale:{value:null},parallaxMinLayers:{value:null},parallaxMaxLayers:{value:null}},vertexShader:["varying vec2 vUv;","varying vec3 vViewPosition;","varying vec3 vNormal;","void main() {","\tvUv = uv;","\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\tvViewPosition = -mvPosition.xyz;","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform sampler2D bumpMap;","uniform sampler2D map;","uniform float parallaxScale;","uniform float parallaxMinLayers;","uniform float parallaxMaxLayers;","varying vec2 vUv;","varying vec3 vViewPosition;","varying vec3 vNormal;","#ifdef USE_BASIC_PARALLAX","\tvec2 parallaxMap( in vec3 V ) {","\t\tfloat initialHeight = texture2D( bumpMap, vUv ).r;","\t\tvec2 texCoordOffset = parallaxScale * V.xy * initialHeight;","\t\treturn vUv - texCoordOffset;","\t}","#else","\tvec2 parallaxMap( in vec3 V ) {","\t\tfloat numLayers = mix( parallaxMaxLayers, parallaxMinLayers, abs( dot( vec3( 0.0, 0.0, 1.0 ), V ) ) );","\t\tfloat layerHeight = 1.0 / numLayers;","\t\tfloat currentLayerHeight = 0.0;","\t\tvec2 dtex = parallaxScale * V.xy / V.z / numLayers;","\t\tvec2 currentTextureCoords = vUv;","\t\tfloat heightFromTexture = texture2D( bumpMap, currentTextureCoords ).r;","\t\tfor ( int i = 0; i < 30; i += 1 ) {","\t\t\tif ( heightFromTexture <= currentLayerHeight ) {","\t\t\t\tbreak;","\t\t\t}","\t\t\tcurrentLayerHeight += layerHeight;","\t\t\tcurrentTextureCoords -= dtex;","\t\t\theightFromTexture = texture2D( bumpMap, currentTextureCoords ).r;","\t\t}","\t\t#ifdef USE_STEEP_PARALLAX","\t\t\treturn currentTextureCoords;","\t\t#elif defined( USE_RELIEF_PARALLAX )","\t\t\tvec2 deltaTexCoord = dtex / 2.0;","\t\t\tfloat deltaHeight = layerHeight / 2.0;","\t\t\tcurrentTextureCoords += deltaTexCoord;","\t\t\tcurrentLayerHeight -= deltaHeight;","\t\t\tconst int numSearches = 5;","\t\t\tfor ( int i = 0; i < numSearches; i += 1 ) {","\t\t\t\tdeltaTexCoord /= 2.0;","\t\t\t\tdeltaHeight /= 2.0;","\t\t\t\theightFromTexture = texture2D( bumpMap, currentTextureCoords ).r;","\t\t\t\tif( heightFromTexture > currentLayerHeight ) {","\t\t\t\t\tcurrentTextureCoords -= deltaTexCoord;","\t\t\t\t\tcurrentLayerHeight += deltaHeight;","\t\t\t\t} else {","\t\t\t\t\tcurrentTextureCoords += deltaTexCoord;","\t\t\t\t\tcurrentLayerHeight -= deltaHeight;","\t\t\t\t}","\t\t\t}","\t\t\treturn currentTextureCoords;","\t\t#elif defined( USE_OCLUSION_PARALLAX )","\t\t\tvec2 prevTCoords = currentTextureCoords + dtex;","\t\t\tfloat nextH = heightFromTexture - currentLayerHeight;","\t\t\tfloat prevH = texture2D( bumpMap, prevTCoords ).r - currentLayerHeight + layerHeight;","\t\t\tfloat weight = nextH / ( nextH - prevH );","\t\t\treturn prevTCoords * weight + currentTextureCoords * ( 1.0 - weight );","\t\t#else","\t\t\treturn vUv;","\t\t#endif","\t}","#endif","vec2 perturbUv( vec3 surfPosition, vec3 surfNormal, vec3 viewPosition ) {","\tvec2 texDx = dFdx( vUv );","\tvec2 texDy = dFdy( vUv );","\tvec3 vSigmaX = dFdx( surfPosition );","\tvec3 vSigmaY = dFdy( surfPosition );","\tvec3 vR1 = cross( vSigmaY, surfNormal );","\tvec3 vR2 = cross( surfNormal, vSigmaX );","\tfloat fDet = dot( vSigmaX, vR1 );","\tvec2 vProjVscr = ( 1.0 / fDet ) * vec2( dot( vR1, viewPosition ), dot( vR2, viewPosition ) );","\tvec3 vProjVtex;","\tvProjVtex.xy = texDx * vProjVscr.x + texDy * vProjVscr.y;","\tvProjVtex.z = dot( surfNormal, viewPosition );","\treturn parallaxMap( vProjVtex );","}","void main() {","\tvec2 mapUv = perturbUv( -vViewPosition, normalize( vNormal ), normalize( vViewPosition ) );","\tgl_FragColor = texture2D( map, mapUv );","}"].join("\n")},Mu={uniforms:{tDiffuse:{value:null},resolution:{value:null},pixelSize:{value:1}},vertexShader:["varying highp vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float pixelSize;","uniform vec2 resolution;","varying highp vec2 vUv;","void main(){","vec2 dxy = pixelSize / resolution;","vec2 coord = dxy * floor( vUv / dxy );","gl_FragColor = texture2D(tDiffuse, coord);","}"].join("\n")},Iu={uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float amount;","uniform float angle;","varying vec2 vUv;","void main() {","\tvec2 offset = amount * vec2( cos(angle), sin(angle));","\tvec4 cr = texture2D(tDiffuse, vUv + offset);","\tvec4 cga = texture2D(tDiffuse, vUv);","\tvec4 cb = texture2D(tDiffuse, vUv - offset);","\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","}"].join("\n")},ku={uniforms:{tDiffuse:{value:null},amount:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float amount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 color = texture2D( tDiffuse, vUv );","\tvec3 c = color.rgb;","\tcolor.r = dot( c, vec3( 1.0 - 0.607 * amount, 0.769 * amount, 0.189 * amount ) );","\tcolor.g = dot( c, vec3( 0.349 * amount, 1.0 - 0.314 * amount, 0.168 * amount ) );","\tcolor.b = dot( c, vec3( 0.272 * amount, 0.534 * amount, 1.0 - 0.869 * amount ) );","\tgl_FragColor = vec4( min( vec3( 1.0 ), color.rgb ), color.a );","}"].join("\n")},Bu={uniforms:{tDiffuse:{value:null},resolution:{value:new A.Vector2}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","varying vec2 vUv;","void main() {","\tvec2 texel = vec2( 1.0 / resolution.x, 1.0 / resolution.y );","\tconst mat3 Gx = mat3( -1, -2, -1, 0, 0, 0, 1, 2, 1 );","\tconst mat3 Gy = mat3( -1, 0, 1, -2, 0, 2, -1, 0, 1 );","\tfloat tx0y0 = texture2D( tDiffuse, vUv + texel * vec2( -1, -1 ) ).r;","\tfloat tx0y1 = texture2D( tDiffuse, vUv + texel * vec2( -1,  0 ) ).r;","\tfloat tx0y2 = texture2D( tDiffuse, vUv + texel * vec2( -1,  1 ) ).r;","\tfloat tx1y0 = texture2D( tDiffuse, vUv + texel * vec2(  0, -1 ) ).r;","\tfloat tx1y1 = texture2D( tDiffuse, vUv + texel * vec2(  0,  0 ) ).r;","\tfloat tx1y2 = texture2D( tDiffuse, vUv + texel * vec2(  0,  1 ) ).r;","\tfloat tx2y0 = texture2D( tDiffuse, vUv + texel * vec2(  1, -1 ) ).r;","\tfloat tx2y1 = texture2D( tDiffuse, vUv + texel * vec2(  1,  0 ) ).r;","\tfloat tx2y2 = texture2D( tDiffuse, vUv + texel * vec2(  1,  1 ) ).r;","\tfloat valueGx = Gx[0][0] * tx0y0 + Gx[1][0] * tx1y0 + Gx[2][0] * tx2y0 + ","\t\tGx[0][1] * tx0y1 + Gx[1][1] * tx1y1 + Gx[2][1] * tx2y1 + ","\t\tGx[0][2] * tx0y2 + Gx[1][2] * tx1y2 + Gx[2][2] * tx2y2; ","\tfloat valueGy = Gy[0][0] * tx0y0 + Gy[1][0] * tx1y0 + Gy[2][0] * tx2y0 + ","\t\tGy[0][1] * tx0y1 + Gy[1][1] * tx1y1 + Gy[2][1] * tx2y1 + ","\t\tGy[0][2] * tx0y2 + Gy[1][2] * tx1y2 + Gy[2][2] * tx2y2; ","\tfloat G = sqrt( ( valueGx * valueGx ) + ( valueGy * valueGy ) );","\tgl_FragColor = vec4( vec3( G ), 1 );","}"].join("\n")},Ru;function Pu(){if(Ru)return Ru;var e=A.ShaderChunk.meshphong_frag.slice(0,A.ShaderChunk.meshphong_frag.indexOf("void main() {")),t=A.ShaderChunk.meshphong_frag.slice(A.ShaderChunk.meshphong_frag.indexOf("void main() {"));return Ru={uniforms:A.UniformsUtils.merge([A.ShaderLib.phong.uniforms,{thicknessMap:{value:null},thicknessColor:{value:new A.Color(16777215)},thicknessDistortion:{value:.1},thicknessAmbient:{value:0},thicknessAttenuation:{value:.1},thicknessPower:{value:2},thicknessScale:{value:10}}]),vertexShader:"\n    #define USE_UV\n    ".concat(A.ShaderChunk.meshphong_vert,"\n  "),fragmentShader:"\n    #define USE_UV',\n    #define SUBSURFACE',\n\n    ".concat(e,"\n\n    uniform sampler2D thicknessMap;\n    uniform float thicknessPower;\n    uniform float thicknessScale;\n    uniform float thicknessDistortion;\n    uniform float thicknessAmbient;\n    uniform float thicknessAttenuation;\n    uniform vec3 thicknessColor;\n\n    void RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in GeometricContext geometry, inout ReflectedLight reflectedLight) {\n    \tvec3 thickness = thicknessColor * texture2D(thicknessMap, uv).r;\n    \tvec3 scatteringHalf = normalize(directLight.direction + (geometry.normal * thicknessDistortion));\n    \tfloat scatteringDot = pow(saturate(dot(geometry.viewDir, -scatteringHalf)), thicknessPower) * thicknessScale;\n    \tvec3 scatteringIllu = (scatteringDot + thicknessAmbient) * thickness;\n    \treflectedLight.directDiffuse += scatteringIllu * thicknessAttenuation * directLight.color;\n    }\n\n    ").concat(t.replace("#include <lights_fragment_begin>",A.ShaderChunk.lights_fragment_begin.replace(/RE_Direct\( directLight, geometry, material, reflectedLight \);/g,"\n        RE_Direct( directLight, geometry, material, reflectedLight );\n\n        #if defined( SUBSURFACE ) && defined( USE_UV )\n          RE_Direct_Scattering(directLight, vUv, geometry, reflectedLight);\n        #endif\n      ")),"\n  ")}}var Du={get uniforms(){return Pu().uniforms},set uniforms(e){Pu().uniforms=e},get vertexShader(){return Pu().vertexShader},set vertexShader(e){Pu().vertexShader=e},get fragmentShader(){return Pu().vertexShader},set fragmentShader(e){Pu().vertexShader=e}},Lu={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 tex = texture2D( tDiffuse, vec2( vUv.x, vUv.y ) );","\tvec4 newTex = vec4(tex.r, (tex.g + tex.b) * .5, (tex.g + tex.b) * .5, 1.0);","\tgl_FragColor = newTex;","}"].join("\n")},Nu={uniforms:{uDirLightPos:{value:new A.Vector3},uDirLightColor:{value:new A.Color(15658734)},uAmbientLightColor:{value:new A.Color(328965)},uBaseColor:{value:new A.Color(16777215)}},vertexShader:["varying vec3 vNormal;","varying vec3 vRefract;","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\tvec3 worldNormal = normalize ( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );","\tvNormal = normalize( normalMatrix * normal );","\tvec3 I = worldPosition.xyz - cameraPosition;","\tvRefract = refract( normalize( I ), worldNormal, 1.02 );","\tgl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 uBaseColor;","uniform vec3 uDirLightPos;","uniform vec3 uDirLightColor;","uniform vec3 uAmbientLightColor;","varying vec3 vNormal;","varying vec3 vRefract;","void main() {","\tfloat directionalLightWeighting = max( dot( normalize( vNormal ), uDirLightPos ), 0.0);","\tvec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;","\tfloat intensity = smoothstep( - 0.5, 1.0, pow( length(lightWeighting), 20.0 ) );","\tintensity += length(lightWeighting) * 0.2;","\tfloat cameraWeighting = dot( normalize( vNormal ), vRefract );","\tintensity += pow( 1.0 - length( cameraWeighting ), 6.0 );","\tintensity = intensity * 0.2 + 0.3;","\tif ( intensity < 0.50 ) {","\t\tgl_FragColor = vec4( 2.0 * intensity * uBaseColor, 1.0 );","\t} else {","\t\tgl_FragColor = vec4( 1.0 - 2.0 * ( 1.0 - intensity ) * ( 1.0 - uBaseColor ), 1.0 );","}","}"].join("\n")},Fu={uniforms:{uDirLightPos:{value:new A.Vector3},uDirLightColor:{value:new A.Color(15658734)},uAmbientLightColor:{value:new A.Color(328965)},uBaseColor:{value:new A.Color(15658734)},uLineColor1:{value:new A.Color(8421504)},uLineColor2:{value:new A.Color(0)},uLineColor3:{value:new A.Color(0)},uLineColor4:{value:new A.Color(0)}},vertexShader:["varying vec3 vNormal;","void main() {","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tvNormal = normalize( normalMatrix * normal );","}"].join("\n"),fragmentShader:["uniform vec3 uBaseColor;","uniform vec3 uLineColor1;","uniform vec3 uLineColor2;","uniform vec3 uLineColor3;","uniform vec3 uLineColor4;","uniform vec3 uDirLightPos;","uniform vec3 uDirLightColor;","uniform vec3 uAmbientLightColor;","varying vec3 vNormal;","void main() {","\tfloat camera = max( dot( normalize( vNormal ), vec3( 0.0, 0.0, 1.0 ) ), 0.4);","\tfloat light = max( dot( normalize( vNormal ), uDirLightPos ), 0.0);","\tgl_FragColor = vec4( uBaseColor, 1.0 );","\tif ( length(uAmbientLightColor + uDirLightColor * light) < 1.00 ) {","\t\tgl_FragColor *= vec4( uLineColor1, 1.0 );","\t}","\tif ( length(uAmbientLightColor + uDirLightColor * camera) < 0.50 ) {","\t\tgl_FragColor *= vec4( uLineColor2, 1.0 );","\t}","}"].join("\n")},Ou={uniforms:{uDirLightPos:{value:new A.Vector3},uDirLightColor:{value:new A.Color(15658734)},uAmbientLightColor:{value:new A.Color(328965)},uBaseColor:{value:new A.Color(16777215)},uLineColor1:{value:new A.Color(0)},uLineColor2:{value:new A.Color(0)},uLineColor3:{value:new A.Color(0)},uLineColor4:{value:new A.Color(0)}},vertexShader:["varying vec3 vNormal;","void main() {","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tvNormal = normalize( normalMatrix * normal );","}"].join("\n"),fragmentShader:["uniform vec3 uBaseColor;","uniform vec3 uLineColor1;","uniform vec3 uLineColor2;","uniform vec3 uLineColor3;","uniform vec3 uLineColor4;","uniform vec3 uDirLightPos;","uniform vec3 uDirLightColor;","uniform vec3 uAmbientLightColor;","varying vec3 vNormal;","void main() {","\tfloat directionalLightWeighting = max( dot( normalize(vNormal), uDirLightPos ), 0.0);","\tvec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;","\tgl_FragColor = vec4( uBaseColor, 1.0 );","\tif ( length(lightWeighting) < 1.00 ) {","\t\tif ( mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","\t\t\tgl_FragColor = vec4( uLineColor1, 1.0 );","\t\t}","\t}","\tif ( length(lightWeighting) < 0.75 ) {","\t\tif (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","\t\t\tgl_FragColor = vec4( uLineColor2, 1.0 );","\t\t}","\t}","\tif ( length(lightWeighting) < 0.50 ) {","\t\tif (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","\t\t\tgl_FragColor = vec4( uLineColor3, 1.0 );","\t\t}","\t}","\tif ( length(lightWeighting) < 0.3465 ) {","\t\tif (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","\t\t\tgl_FragColor = vec4( uLineColor4, 1.0 );","\t}","\t}","}"].join("\n")},Uu={uniforms:{uDirLightPos:{value:new A.Vector3},uDirLightColor:{value:new A.Color(15658734)},uAmbientLightColor:{value:new A.Color(328965)},uBaseColor:{value:new A.Color(16777215)},uLineColor1:{value:new A.Color(0)}},vertexShader:["varying vec3 vNormal;","void main() {","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tvNormal = normalize( normalMatrix * normal );","}"].join("\n"),fragmentShader:["uniform vec3 uBaseColor;","uniform vec3 uLineColor1;","uniform vec3 uLineColor2;","uniform vec3 uLineColor3;","uniform vec3 uLineColor4;","uniform vec3 uDirLightPos;","uniform vec3 uDirLightColor;","uniform vec3 uAmbientLightColor;","varying vec3 vNormal;","void main() {","float directionalLightWeighting = max( dot( normalize(vNormal), uDirLightPos ), 0.0);","vec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;","gl_FragColor = vec4( uBaseColor, 1.0 );","if ( length(lightWeighting) < 1.00 ) {","\t\tif ( ( mod(gl_FragCoord.x, 4.001) + mod(gl_FragCoord.y, 4.0) ) > 6.00 ) {","\t\t\tgl_FragColor = vec4( uLineColor1, 1.0 );","\t\t}","\t}","\tif ( length(lightWeighting) < 0.50 ) {","\t\tif ( ( mod(gl_FragCoord.x + 2.0, 4.001) + mod(gl_FragCoord.y + 2.0, 4.0) ) > 6.00 ) {","\t\t\tgl_FragColor = vec4( uLineColor1, 1.0 );","\t\t}","\t}","}"].join("\n")},zu={uniforms:{texture:{value:null},delta:{value:new A.Vector2(1,1)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#define ITERATIONS 10.0","uniform sampler2D texture;","uniform vec2 delta;","varying vec2 vUv;","void main() {","\tvec4 color = vec4( 0.0 );","\tfloat total = 0.0;","\tfloat offset = rand( vUv );","\tfor ( float t = -ITERATIONS; t <= ITERATIONS; t ++ ) {","\t\tfloat percent = ( t + offset - 0.5 ) / ITERATIONS;","\t\tfloat weight = 1.0 - abs( percent );","\t\tcolor += texture2D( texture, vUv + delta * percent ) * weight;","\t\ttotal += weight;","\t}","\tgl_FragColor = color / total;","}"].join("\n")},Gu={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "},Qu={uniforms:{tDiffuse:{value:null},v:{value:1/512},r:{value:.35}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","uniform float r;","varying vec2 vUv;","void main() {","\tvec4 sum = vec4( 0.0 );","\tfloat vv = v * abs( r - vUv.y );","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * vv ) ) * 0.051;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * vv ) ) * 0.0918;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * vv ) ) * 0.12245;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * vv ) ) * 0.1531;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * vv ) ) * 0.1531;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * vv ) ) * 0.12245;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * vv ) ) * 0.0918;","\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * vv ) ) * 0.051;","\tgl_FragColor = sum;","}"].join("\n")},Zu={uniforms:{tDiffuse:{value:null},offset:{value:1},darkness:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float offset;","uniform float darkness;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tvec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );","\tgl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );","}"].join("\n")},Hu={uniforms:{u_size:{value:new A.Vector3(1,1,1)},u_renderstyle:{value:0},u_renderthreshold:{value:.5},u_clim:{value:new A.Vector2(1,1)},u_data:{value:null},u_cmdata:{value:null}},vertexShader:["\t\tvarying vec4 v_nearpos;","\t\tvarying vec4 v_farpos;","\t\tvarying vec3 v_position;","\t\tvoid main() {","\t\t\t\tmat4 viewtransformf = modelViewMatrix;","\t\t\t\tmat4 viewtransformi = inverse(modelViewMatrix);","\t\t\t\tvec4 position4 = vec4(position, 1.0);","\t\t\t\tvec4 pos_in_cam = viewtransformf * position4;","\t\t\t\tpos_in_cam.z = -pos_in_cam.w;","\t\t\t\tv_nearpos = viewtransformi * pos_in_cam;","\t\t\t\tpos_in_cam.z = pos_in_cam.w;","\t\t\t\tv_farpos = viewtransformi * pos_in_cam;","\t\t\t\tv_position = position;","\t\t\t\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * position4;","\t\t}"].join("\n"),fragmentShader:["\t\tprecision highp float;","\t\tprecision mediump sampler3D;","\t\tuniform vec3 u_size;","\t\tuniform int u_renderstyle;","\t\tuniform float u_renderthreshold;","\t\tuniform vec2 u_clim;","\t\tuniform sampler3D u_data;","\t\tuniform sampler2D u_cmdata;","\t\tvarying vec3 v_position;","\t\tvarying vec4 v_nearpos;","\t\tvarying vec4 v_farpos;","\t\tconst int MAX_STEPS = 887;\t// 887 for 512^3, 1774 for 1024^3","\t\tconst int REFINEMENT_STEPS = 4;","\t\tconst float relative_step_size = 1.0;","\t\tconst vec4 ambient_color = vec4(0.2, 0.4, 0.2, 1.0);","\t\tconst vec4 diffuse_color = vec4(0.8, 0.2, 0.2, 1.0);","\t\tconst vec4 specular_color = vec4(1.0, 1.0, 1.0, 1.0);","\t\tconst float shininess = 40.0;","\t\tvoid cast_mip(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray);","\t\tvoid cast_iso(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray);","\t\tfloat sample1(vec3 texcoords);","\t\tvec4 apply_colormap(float val);","\t\tvec4 add_lighting(float val, vec3 loc, vec3 step, vec3 view_ray);","\t\tvoid main() {","\t\t\t\tvec3 farpos = v_farpos.xyz / v_farpos.w;","\t\t\t\tvec3 nearpos = v_nearpos.xyz / v_nearpos.w;","\t\t\t\tvec3 view_ray = normalize(nearpos.xyz - farpos.xyz);","\t\t\t\tfloat distance = dot(nearpos - v_position, view_ray);","\t\t\t\tdistance = max(distance, min((-0.5 - v_position.x) / view_ray.x,","\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(u_size.x - 0.5 - v_position.x) / view_ray.x));","\t\t\t\tdistance = max(distance, min((-0.5 - v_position.y) / view_ray.y,","\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(u_size.y - 0.5 - v_position.y) / view_ray.y));","\t\t\t\tdistance = max(distance, min((-0.5 - v_position.z) / view_ray.z,","\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(u_size.z - 0.5 - v_position.z) / view_ray.z));","\t\t\t\tvec3 front = v_position + view_ray * distance;","\t\t\t\tint nsteps = int(-distance / relative_step_size + 0.5);","\t\t\t\tif ( nsteps < 1 )","\t\t\t\t\t\tdiscard;","\t\t\t\tvec3 step = ((v_position - front) / u_size) / float(nsteps);","\t\t\t\tvec3 start_loc = front / u_size;","\t\t\t\tif (u_renderstyle == 0)","\t\t\t\t\t\tcast_mip(start_loc, step, nsteps, view_ray);","\t\t\t\telse if (u_renderstyle == 1)","\t\t\t\t\t\tcast_iso(start_loc, step, nsteps, view_ray);","\t\t\t\tif (gl_FragColor.a < 0.05)","\t\t\t\t\t\tdiscard;","\t\t}","\t\tfloat sample1(vec3 texcoords) {","\t\t\t\t/* Sample float value from a 3D texture. Assumes intensity data. */","\t\t\t\treturn texture(u_data, texcoords.xyz).r;","\t\t}","\t\tvec4 apply_colormap(float val) {","\t\t\t\tval = (val - u_clim[0]) / (u_clim[1] - u_clim[0]);","\t\t\t\treturn texture2D(u_cmdata, vec2(val, 0.5));","\t\t}","\t\tvoid cast_mip(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray) {","\t\t\t\tfloat max_val = -1e6;","\t\t\t\tint max_i = 100;","\t\t\t\tvec3 loc = start_loc;","\t\t\t\tfor (int iter=0; iter<MAX_STEPS; iter++) {","\t\t\t\t\t\tif (iter >= nsteps)","\t\t\t\t\t\t\t\tbreak;","\t\t\t\t\t\tfloat val = sample1(loc);","\t\t\t\t\t\tif (val > max_val) {","\t\t\t\t\t\t\t\tmax_val = val;","\t\t\t\t\t\t\t\tmax_i = iter;","\t\t\t\t\t\t}","\t\t\t\t\t\tloc += step;","\t\t\t\t}","\t\t\t\tvec3 iloc = start_loc + step * (float(max_i) - 0.5);","\t\t\t\tvec3 istep = step / float(REFINEMENT_STEPS);","\t\t\t\tfor (int i=0; i<REFINEMENT_STEPS; i++) {","\t\t\t\t\t\tmax_val = max(max_val, sample1(iloc));","\t\t\t\t\t\tiloc += istep;","\t\t\t\t}","\t\t\t\tgl_FragColor = apply_colormap(max_val);","\t\t}","\t\tvoid cast_iso(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray) {","\t\t\t\tgl_FragColor = vec4(0.0);\t// init transparent","\t\t\t\tvec4 color3 = vec4(0.0);\t// final color","\t\t\t\tvec3 dstep = 1.5 / u_size;\t// step to sample derivative","\t\t\t\tvec3 loc = start_loc;","\t\t\t\tfloat low_threshold = u_renderthreshold - 0.02 * (u_clim[1] - u_clim[0]);","\t\t\t\tfor (int iter=0; iter<MAX_STEPS; iter++) {","\t\t\t\t\t\tif (iter >= nsteps)","\t\t\t\t\t\t\t\tbreak;","\t\t\t\t\t\tfloat val = sample1(loc);","\t\t\t\t\t\tif (val > low_threshold) {","\t\t\t\t\t\t\t\tvec3 iloc = loc - 0.5 * step;","\t\t\t\t\t\t\t\tvec3 istep = step / float(REFINEMENT_STEPS);","\t\t\t\t\t\t\t\tfor (int i=0; i<REFINEMENT_STEPS; i++) {","\t\t\t\t\t\t\t\t\t\tval = sample1(iloc);","\t\t\t\t\t\t\t\t\t\tif (val > u_renderthreshold) {","\t\t\t\t\t\t\t\t\t\t\t\tgl_FragColor = add_lighting(val, iloc, dstep, view_ray);","\t\t\t\t\t\t\t\t\t\t\t\treturn;","\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\tiloc += istep;","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t}","\t\t\t\t\t\tloc += step;","\t\t\t\t}","\t\t}","\t\tvec4 add_lighting(float val, vec3 loc, vec3 step, vec3 view_ray)","\t\t{","\t\t\t\tvec3 V = normalize(view_ray);","\t\t\t\tvec3 N;","\t\t\t\tfloat val1, val2;","\t\t\t\tval1 = sample1(loc + vec3(-step[0], 0.0, 0.0));","\t\t\t\tval2 = sample1(loc + vec3(+step[0], 0.0, 0.0));","\t\t\t\tN[0] = val1 - val2;","\t\t\t\tval = max(max(val1, val2), val);","\t\t\t\tval1 = sample1(loc + vec3(0.0, -step[1], 0.0));","\t\t\t\tval2 = sample1(loc + vec3(0.0, +step[1], 0.0));","\t\t\t\tN[1] = val1 - val2;","\t\t\t\tval = max(max(val1, val2), val);","\t\t\t\tval1 = sample1(loc + vec3(0.0, 0.0, -step[2]));","\t\t\t\tval2 = sample1(loc + vec3(0.0, 0.0, +step[2]));","\t\t\t\tN[2] = val1 - val2;","\t\t\t\tval = max(max(val1, val2), val);","\t\t\t\tfloat gm = length(N); // gradient magnitude","\t\t\t\tN = normalize(N);","\t\t\t\tfloat Nselect = float(dot(N, V) > 0.0);","\t\t\t\tN = (2.0 * Nselect - 1.0) * N;\t// ==\tNselect * N - (1.0-Nselect)*N;","\t\t\t\tvec4 ambient_color = vec4(0.0, 0.0, 0.0, 0.0);","\t\t\t\tvec4 diffuse_color = vec4(0.0, 0.0, 0.0, 0.0);","\t\t\t\tvec4 specular_color = vec4(0.0, 0.0, 0.0, 0.0);","\t\t\t\tfor (int i=0; i<1; i++)","\t\t\t\t{","\t\t\t\t\t\tvec3 L = normalize(view_ray);\t//lightDirs[i];","\t\t\t\t\t\tfloat lightEnabled = float( length(L) > 0.0 );","\t\t\t\t\t\tL = normalize(L + (1.0 - lightEnabled));","\t\t\t\t\t\tfloat lambertTerm = clamp(dot(N, L), 0.0, 1.0);","\t\t\t\t\t\tvec3 H = normalize(L+V); // Halfway vector","\t\t\t\t\t\tfloat specularTerm = pow(max(dot(H, N), 0.0), shininess);","\t\t\t\t\t\tfloat mask1 = lightEnabled;","\t\t\t\t\t\tambient_color +=\tmask1 * ambient_color;\t// * gl_LightSource[i].ambient;","\t\t\t\t\t\tdiffuse_color +=\tmask1 * lambertTerm;","\t\t\t\t\t\tspecular_color += mask1 * specularTerm * specular_color;","\t\t\t\t}","\t\t\t\tvec4 final_color;","\t\t\t\tvec4 color = apply_colormap(val);","\t\t\t\tfinal_color = color * (ambient_color + diffuse_color) + specular_color;","\t\t\t\tfinal_color.a = color.a;","\t\t\t\treturn final_color;","\t\t}"].join("\n")},ju={uniforms:{color:{value:null},time:{value:0},tDiffuse:{value:null},tDudv:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec2 vUv;","varying vec4 vUvRefraction;","void main() {","\tvUv = uv;","\tvUvRefraction = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform float time;","uniform sampler2D tDiffuse;","uniform sampler2D tDudv;","varying vec2 vUv;","varying vec4 vUvRefraction;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ),blendOverlay( base.b, blend.b ) );","}","void main() {"," float waveStrength = 0.1;"," float waveSpeed = 0.03;","\tvec2 distortedUv = texture2D( tDudv, vec2( vUv.x + time * waveSpeed, vUv.y ) ).rg * waveStrength;","\tdistortedUv = vUv.xy + vec2( distortedUv.x, distortedUv.y + time * waveSpeed );","\tvec2 distortion = ( texture2D( tDudv, distortedUv ).rg * 2.0 - 1.0 ) * waveStrength;"," vec4 uv = vec4( vUvRefraction );"," uv.xy += distortion;","\tvec4 base = texture2DProj( tDiffuse, uv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")},Vu=null,Wu=null,Xu=new WeakMap;function Yu(e){var t=document.createRange(),n=new Color;function r(e,t,n,r){""!==r&&("uppercase"===e.textTransform&&(r=r.toUpperCase()),l.font=e.fontWeight+" "+e.fontSize+" "+e.fontFamily,l.textBaseline="top",l.fillStyle=e.color,l.fillText(r,t,n+.1*parseFloat(e.fontSize)))}function i(e,t,n,r,i){n<2*i&&(i=n/2),r<2*i&&(i=r/2),l.beginPath(),l.moveTo(e+i,t),l.arcTo(e+n,t,e+n,t+r,i),l.arcTo(e+n,t+r,e,t+r,i),l.arcTo(e,t+r,e,t,i),l.arcTo(e,t,e+n,t,i),l.closePath()}function a(e,t,n,r,i,a){var o=e[t+"Width"],s=e[t+"Style"],u=e[t+"Color"];"0px"!==o&&"none"!==s&&"transparent"!==u&&"rgba(0, 0, 0, 0)"!==u&&(l.strokeStyle=u,l.lineWidth=parseFloat(o),l.beginPath(),l.moveTo(n,r),l.lineTo(n+i,r+a),l.stroke())}var o=e.getBoundingClientRect(),s=Xu.get(e);void 0===s&&((s=document.createElement("canvas")).width=o.width,s.height=o.height,Xu.set(e,s));var l=s.getContext("2d"),u=new function(e){var t=[],n=!1;function r(){if(n&&(n=!1,e.restore()),0!==t.length){for(var r=-1/0,i=-1/0,a=1/0,o=1/0,s=0;s<t.length;s++){var l=t[s];r=Math.max(r,l.x),i=Math.max(i,l.y),a=Math.min(a,l.x+l.width),o=Math.min(o,l.y+l.height)}e.save(),e.beginPath(),e.rect(r,i,a-r,o-i),e.clip(),n=!0}}return{add:function(e){t.push(e),r()},remove:function(){t.pop(),r()}}}(l);return function e(s,c){var f=0,d=0,h=0,p=0;if(s.nodeType===Node.TEXT_NODE){t.selectNode(s);var v=t.getBoundingClientRect();f=v.left-o.left-.5,d=v.top-o.top-.5,h=v.width,p=v.height,r(c,f,d,s.nodeValue.trim())}else{if(s.nodeType===Node.COMMENT_NODE)return;if(s instanceof HTMLCanvasElement){if("none"===s.style.display)return;l.save();var m=window.devicePixelRatio;l.scale(1/m,1/m),l.drawImage(s,0,0),l.restore()}else{if("none"===s.style.display)return;var g=s.getBoundingClientRect();f=g.left-o.left-.5,d=g.top-o.top-.5,h=g.width,p=g.height,c=window.getComputedStyle(s),i(f,d,h,p,parseFloat(c.borderRadius));var y=c.backgroundColor;"transparent"!==y&&"rgba(0, 0, 0, 0)"!==y&&(l.fillStyle=y,l.fill());for(var A=!0,b=null,x=0,_=["borderTop","borderLeft","borderBottom","borderRight"];x<_.length;x++){var w=_[x];if(null!==b&&(A=c[w+"Width"]===c[b+"Width"]&&c[w+"Color"]===c[b+"Color"]&&c[w+"Style"]===c[b+"Style"]),!1===A)break;b=w}if(!0===A){var S=parseFloat(c.borderTopWidth);"0px"!==c.borderTopWidth&&"none"!==c.borderTopStyle&&"transparent"!==c.borderTopColor&&"rgba(0, 0, 0, 0)"!==c.borderTopColor&&(l.strokeStyle=c.borderTopColor,l.lineWidth=S,l.stroke())}else a(c,"borderTop",f,d,h,0),a(c,"borderLeft",f,d,0,p),a(c,"borderBottom",f,d+p,h,0),a(c,"borderRight",f+h,d,0,p);if(s instanceof HTMLInputElement){var E=c.accentColor;void 0!==E&&"auto"!==E||(E=c.color),n.set(E);var C=Math.sqrt(.299*Math.pow(n.r,2)+.587*Math.pow(n.g,2)+.114*Math.pow(n.b,2))<.5?"white":"#111111";if("radio"===s.type&&(i(f,d,h,p,p),l.fillStyle="white",l.strokeStyle=E,l.lineWidth=1,l.fill(),l.stroke(),s.checked&&(i(f+2,d+2,h-4,p-4,p),l.fillStyle=E,l.strokeStyle=C,l.lineWidth=2,l.fill(),l.stroke())),"checkbox"===s.type&&(i(f,d,h,p,2),l.fillStyle=s.checked?E:"white",l.strokeStyle=s.checked?C:E,l.lineWidth=1,l.stroke(),l.fill(),s.checked)){var T=l.textAlign;l.textAlign="center",r({color:C,fontFamily:c.fontFamily,fontSize:p+"px",fontWeight:"bold"},f+h/2,d,"\u2714"),l.textAlign=T}if("range"===s.type){var M=["min","max","value"].map((function(e){return parseFloat(s[e])})),I=_slicedToArray(M,3),k=I[0],B=I[1],R=(I[2]-k)/(B-k)*(h-p);i(f,d+p/4,h,p/2,p/4),l.fillStyle=C,l.strokeStyle=E,l.lineWidth=1,l.fill(),l.stroke(),i(f,d+p/4,R+p/2,p/2,p/4),l.fillStyle=E,l.fill(),i(f+R,d,p,p,p/2),l.fillStyle=E,l.fill()}"color"!==s.type&&"text"!==s.type&&"number"!==s.type||(u.add({x:f,y:d,width:h,height:p}),r(c,f+parseInt(c.paddingLeft),d+parseInt(c.paddingTop),s.value),u.remove())}}}var P="auto"===c.overflow||"hidden"===c.overflow;P&&u.add({x:f,y:d,width:h,height:p});for(var D=0;D<s.childNodes.length;D++)e(s.childNodes[D],c);P&&u.remove()}(e),s}function Ku(e,t,n,r){var i={clientX:n*e.offsetWidth+e.offsetLeft,clientY:r*e.offsetHeight+e.offsetTop,view:e.ownerDocument.defaultView};window.dispatchEvent(new MouseEvent(t,i));var a=e.getBoundingClientRect();n=n*a.width+a.left,r=r*a.height+a.top,function e(a){if(a.nodeType!==Node.TEXT_NODE&&a.nodeType!==Node.COMMENT_NODE){var o=a.getBoundingClientRect();if(n>o.left&&n<o.right&&r>o.top&&r<o.bottom&&(a.dispatchEvent(new MouseEvent(t,i)),a instanceof HTMLInputElement&&"range"===a.type&&("mousedown"===t||"click"===t))){var s=["min","max"].map((function(e){return parseFloat(a[e])})),l=_slicedToArray(s,2),u=l[0],c=l[1],f=o.width,d=(n-o.x)/f;a.value=u+(c-u)*d,a.dispatchEvent(new InputEvent("input",{bubbles:!0}))}for(var h=0;h<a.childNodes.length;h++)e(a.childNodes[h])}}(e)}var Ju=new A.Vector2,qu={type:"",data:Ju},$u=null,ec=null,tc=new A.Frustum,nc=new A.Vector3,rc=new A.Vector3,ic=new A.Vector3,ac=new A.Vector3,oc=new A.Vector3,sc=new A.Vector3,lc=new A.Vector3,uc=new A.Vector3,cc=new A.Vector3,fc=new A.Vector3,dc=new A.Vector3,hc=new A.Vector3,pc=new A.Vector3,vc=new A.Vector3,mc=null;function gc(){return yc.apply(this,arguments)}function yc(){return yc=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,i,a,o,s,l,u,c,f,d,h,p,v,m;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=function(){var e=performance.now();if(v>0){var t=(e-v)/1e3;o.stepSimulation(t,10)}v=e;for(var n=0,r=u.length;n<r;n++){var i=u[n];if(i.isInstancedMesh){for(var a=i.instanceMatrix.array,l=c.get(i),f=0;f<l.length;f++){l[f].getMotionState().getWorldTransform(s),Ac(s.getOrigin(),s.getRotation(),a,16*f)}i.instanceMatrix.needsUpdate=!0}else if(i.isMesh){c.get(i).getMotionState().getWorldTransform(s);var d=s.getOrigin(),h=s.getRotation();i.position.set(d.x(),d.y(),d.z()),i.quaternion.set(h.x(),h.y(),h.z(),h.w())}}},p=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.isInstancedMesh){var i=c.get(e)[r];i.setAngularVelocity(new t.btVector3(0,0,0)),i.setLinearVelocity(new t.btVector3(0,0,0)),s.setIdentity(),s.setOrigin(new t.btVector3(n.x,n.y,n.z)),i.setWorldTransform(s)}else if(e.isMesh){var a=c.get(e);a.setAngularVelocity(new t.btVector3(0,0,0)),a.setLinearVelocity(new t.btVector3(0,0,0)),s.setIdentity(),s.setOrigin(new t.btVector3(n.x,n.y,n.z)),a.setWorldTransform(s)}},h=function(e,n,r){for(var i=e.instanceMatrix.array,a=[],s=0;s<e.count;s++){var l=16*s,f=new t.btTransform;f.setFromOpenGLMatrix(i.slice(l,l+16));var d=new t.btDefaultMotionState(f),h=new t.btVector3(0,0,0);r.calculateLocalInertia(n,h);var p=new t.btRigidBodyConstructionInfo(n,d,r,h),v=new t.btRigidBody(p);o.addRigidBody(v),a.push(v)}n>0&&(e.instanceMatrix.setUsage(35048),u.push(e),c.set(e,a))},d=function(e,n,r){var i=e.position,a=e.quaternion,s=new t.btTransform;s.setIdentity(),s.setOrigin(new t.btVector3(i.x,i.y,i.z)),s.setRotation(new t.btQuaternion(a.x,a.y,a.z,a.w));var l=new t.btDefaultMotionState(s),f=new t.btVector3(0,0,0);r.calculateLocalInertia(n,f);var d=new t.btRigidBodyConstructionInfo(n,l,r,f),h=new t.btRigidBody(d);o.addRigidBody(h),n>0&&(u.push(e),c.set(e,h))},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=l(e.geometry);null!==n&&(e.isInstancedMesh?h(e,t,n):e.isMesh&&d(e,t,n))},l=function(e){var n=e.parameters;if("BoxGeometry"===e.type){var r=void 0!==n.width?n.width/2:.5,i=void 0!==n.height?n.height/2:.5,a=void 0!==n.depth?n.depth/2:.5,o=new t.btBoxShape(new t.btVector3(r,i,a));return o.setMargin(.05),o}if("SphereGeometry"===e.type||"IcosahedronGeometry"===e.type){var s=void 0!==n.radius?n.radius:1,l=new t.btSphereShape(s);return l.setMargin(.05),l}return null},"Ammo"in window!==!1){e.next=9;break}return console.error("AmmoPhysics: Couldn't find Ammo.js"),e.abrupt("return");case 9:return e.next=11,Ammo();case 11:return t=e.sent,60,n=new t.btDefaultCollisionConfiguration,r=new t.btCollisionDispatcher(n),i=new t.btDbvtBroadphase,a=new t.btSequentialImpulseConstraintSolver,(o=new t.btDiscreteDynamicsWorld(r,i,a,n)).setGravity(new t.btVector3(0,-9.8,0)),s=new t.btTransform,u=[],c=new WeakMap,v=0,setInterval(m,1e3/60),e.abrupt("return",{addMesh:f,setMeshPosition:p});case 25:case"end":return e.stop()}}),e)}))),yc.apply(this,arguments)}function Ac(e,t,n,r){var i=t.x(),a=t.y(),o=t.z(),s=t.w(),l=i+i,u=a+a,c=o+o,f=i*l,d=i*u,h=i*c,p=a*u,v=a*c,m=o*c,g=s*l,y=s*u,A=s*c;n[r+0]=1-(p+m),n[r+1]=d+A,n[r+2]=h-y,n[r+3]=0,n[r+4]=d-A,n[r+5]=1-(f+m),n[r+6]=v+g,n[r+7]=0,n[r+8]=h+y,n[r+9]=v-g,n[r+10]=1-(f+p),n[r+11]=0,n[r+12]=e.x(),n[r+13]=e.y(),n[r+14]=e.z(),n[r+15]=1}var bc=null,xc=null,_c=null,wc=null,Sc=null,Ec=null;function Cc(e,t,n){var r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;for(var i=e,a=r,o=Math.floor((i+a)/2);t<n[o]||t>=n[o+1];)t<n[o]?a=o:i=o,o=Math.floor((i+a)/2);return o}function Tc(e,t,n,r){var i=[],a=[],o=[];i[0]=1;for(var s=1;s<=n;++s){a[s]=t-r[e+1-s],o[s]=r[e+s]-t;for(var l=0,u=0;u<s;++u){var c=o[u+1],f=a[s-u],d=i[u]/(c+f);i[u]=l+c*d,l=f*d}i[s]=l}return i}function Mc(e,t,n,r){for(var i=Cc(e,r,t),a=Tc(i,r,e,t),o=new Vector4(0,0,0,0),s=0;s<=e;++s){var l=n[i-e+s],u=a[s],c=l.w*u;o.x+=l.x*c,o.y+=l.y*c,o.z+=l.z*c,o.w+=l.w*u}return o}function Ic(e,t,n,r,i){for(var a=[],o=0;o<=n;++o)a[o]=0;for(var s=[],l=0;l<=r;++l)s[l]=a.slice(0);for(var u=[],c=0;c<=n;++c)u[c]=a.slice(0);u[0][0]=1;for(var f=a.slice(0),d=a.slice(0),h=1;h<=n;++h){f[h]=t-i[e+1-h],d[h]=i[e+h]-t;for(var p=0,v=0;v<h;++v){var m=d[v+1],g=f[h-v];u[h][v]=m+g;var y=u[v][h-1]/u[h][v];u[v][h]=p+m*y,p=g*y}u[h][h]=p}for(var A=0;A<=n;++A)s[0][A]=u[A][n];for(var b=0;b<=n;++b){for(var x=0,_=1,w=[],S=0;S<=n;++S)w[S]=a.slice(0);w[0][0]=1;for(var E=1;E<=r;++E){var C=0,T=b-E,M=n-E;b>=E&&(w[_][0]=w[x][0]/u[M+1][T],C=w[_][0]*u[T][M]);for(var I=b-1<=M?E-1:n-b,k=T>=-1?1:-T;k<=I;++k)w[_][k]=(w[x][k]-w[x][k-1])/u[M+1][T+k],C+=w[_][k]*u[T+k][M];b<=M&&(w[_][E]=-w[x][E-1]/u[M+1][b],C+=w[_][E]*u[b][M]),s[E][b]=C;var B=x;x=_,_=B}}for(var R=n,P=1;P<=r;++P){for(var D=0;D<=n;++D)s[P][D]*=R;R*=n-P}return s}function kc(e,t,n,r,i){for(var a=i<e?i:e,o=[],s=Cc(e,r,t),l=Ic(s,r,e,a,t),u=[],c=0;c<n.length;++c){var f=n[c].clone(),d=f.w;f.x*=d,f.y*=d,f.z*=d,u[c]=f}for(var h=0;h<=a;++h){for(var p=u[s-e].clone().multiplyScalar(l[h][0]),v=1;v<=e;++v)p.add(u[s-e+v].clone().multiplyScalar(l[h][v]));o[h]=p}for(var m=a+1;m<=i+1;++m)o[m]=new Vector4(0,0,0);return o}function Bc(e,t){for(var n=1,r=2;r<=e;++r)n*=r;for(var i=1,a=2;a<=t;++a)i*=a;for(var o=2;o<=e-t;++o)i*=o;return n/i}function Rc(e){for(var t=e.length,n=[],r=[],i=0;i<t;++i){var a=e[i];n[i]=new Vector3(a.x,a.y,a.z),r[i]=a.w}for(var o=[],s=0;s<t;++s){for(var l=n[s].clone(),u=1;u<=s;++u)l.sub(o[s-u].clone().multiplyScalar(Bc(s,u)*r[u]));o[s]=l.divideScalar(r[0])}return o}function Pc(e,t,n,r,i){return Rc(kc(e,t,n,r,i))}function Dc(e,t,n,r,i,a,o,s){for(var l=Cc(e,a,n),u=Cc(t,o,r),c=Tc(l,a,e,n),f=Tc(u,o,t,r),d=[],h=0;h<=t;++h){d[h]=new Vector4(0,0,0,0);for(var p=0;p<=e;++p){var v=i[l-e+p][u-t+h].clone(),m=v.w;v.x*=m,v.y*=m,v.z*=m,d[h].add(v.multiplyScalar(c[p]))}}for(var g=new Vector4(0,0,0,0),y=0;y<=t;++y)g.add(d[y].multiplyScalar(f[y]));g.divideScalar(g.w),s.set(g.x,g.y,g.z)}var Lc=null,Nc,Fc,Oc,Uc=null,zc=null,Gc=null,Qc=null,Zc=null,Hc=null,jc=null,Vc=null;function Wc(e){var t="Kaydara FBX Binary  \0";return e.byteLength>=21&&t===af(e,0,21)}function Xc(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;function r(t){var r=e[t-1];return e=e.slice(n+t),n++,r}for(var i=0;i<t.length;++i){if(r(1)===t[i])return!1}return!0}function Yc(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Kc(e){return e/46186158e3}var Jc=null;function qc(e,t,n,r){var i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);var a=i*r.dataSize,o=a+r.dataSize;return sf(Jc,r.buffer,a,o)}var $c=new A.Euler,ef=new A.Vector3;function tf(e){var t=new Matrix4,n=new Matrix4,r=new Matrix4,i=new Matrix4,a=new Matrix4,o=new Matrix4,s=new Matrix4,l=new Matrix4,u=new Matrix4,c=new Matrix4,f=new Matrix4,d=new Matrix4,h=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(ef.fromArray(e.translation)),e.preRotation){var p=e.preRotation.map(MathUtils.degToRad);p.push(e.eulerOrder),n.makeRotationFromEuler($c.fromArray(p))}if(e.rotation){var v=e.rotation.map(MathUtils.degToRad);v.push(e.eulerOrder),r.makeRotationFromEuler($c.fromArray(v))}if(e.postRotation){var m=e.postRotation.map(MathUtils.degToRad);m.push(e.eulerOrder),i.makeRotationFromEuler($c.fromArray(m)),i.invert()}e.scale&&a.scale(ef.fromArray(e.scale)),e.scalingOffset&&s.setPosition(ef.fromArray(e.scalingOffset)),e.scalingPivot&&o.setPosition(ef.fromArray(e.scalingPivot)),e.rotationOffset&&l.setPosition(ef.fromArray(e.rotationOffset)),e.rotationPivot&&u.setPosition(ef.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(f.copy(e.parentMatrix),c.copy(e.parentMatrixWorld));var g=n.clone().multiply(r).multiply(i),y=new Matrix4;y.extractRotation(c);var A=new Matrix4;A.copyPosition(c);var b=A.clone().invert().multiply(c),x=y.clone().invert().multiply(b),_=a,w=new Matrix4;if(0===h)w.copy(y).multiply(g).multiply(x).multiply(_);else if(1===h)w.copy(y).multiply(x).multiply(g).multiply(_);else{var S=(new Matrix4).scale((new Vector3).setFromMatrixScale(f)).clone().invert(),E=x.clone().multiply(S);w.copy(y).multiply(g).multiply(E).multiply(_)}var C=u.clone().invert(),T=o.clone().invert(),M=t.clone().multiply(l).multiply(u).multiply(n).multiply(r).multiply(i).multiply(C).multiply(s).multiply(o).multiply(a).multiply(T),I=(new Matrix4).copyPosition(M),k=c.clone().multiply(I);return d.copyPosition(k),(M=d.clone().multiply(w)).premultiply(c.invert()),M}function nf(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function rf(e){return e.split(",").map((function(e){return parseFloat(e)}))}function af(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),LoaderUtils.decodeText(new Uint8Array(e,t,n))}function of(e,t){for(var n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}function sf(e,t,n,r){for(var i=n,a=0;i<r;i++,a++)e[a]=t[i];return e}function lf(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}var uf=null,cf=function(){function e(t){(0,v.Z)(this,e),T(this,"data"),this.data=t}return(0,m.Z)(e,[{key:"generateShapes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2?arguments[2]:void 0,r=[],i=(0,l.Z)({letterSpacing:0,lineHeight:1},n),a=ff(e,t,this.data,i),o=0,s=a.length;o<s;o++)Array.prototype.push.apply(r,a[o].toShapes(!1));return r}}]),e}();function ff(e,t,n,r){for(var i=Array.from(e),a=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*a,s=[],l=0,u=0,c=0;c<i.length;c++){var f=i[c];if("\n"===f)l=0,u-=o*r.lineHeight;else{var d=df(f,a,l,u,n);d&&(l+=d.offsetX+r.letterSpacing,s.push(d.path))}}return s}function df(e,t,n,r,i){var a=i.glyphs[e]||i.glyphs["?"];if(a){var o,s,l,u,c,f,d,h,p=new A.ShapePath;if(a.o)for(var v=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),m=0,g=v.length;m<g;){switch(v[m++]){case"m":o=parseInt(v[m++])*t+n,s=parseInt(v[m++])*t+r,p.moveTo(o,s);break;case"l":o=parseInt(v[m++])*t+n,s=parseInt(v[m++])*t+r,p.lineTo(o,s);break;case"q":l=parseInt(v[m++])*t+n,u=parseInt(v[m++])*t+r,c=parseInt(v[m++])*t+n,f=parseInt(v[m++])*t+r,p.quadraticCurveTo(c,f,l,u);break;case"b":l=parseInt(v[m++])*t+n,u=parseInt(v[m++])*t+r,c=parseInt(v[m++])*t+n,f=parseInt(v[m++])*t+r,d=parseInt(v[m++])*t+n,h=parseInt(v[m++])*t+r,p.bezierCurveTo(c,f,d,h,l,u)}}return{offsetX:a.ha*t,path:p}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}var hf=null,pf=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,v.Z)(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=A.NearestFilter,e.minFilter=A.NearestFilter,e.wrapR=A.ClampToEdgeWrapping,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,m.Z)(n)}(A.Texture),vf=null,mf=null,gf={type:function(e){switch(e){case"uchar":case"unsigned char":case"uint8":case"uint8_t":this.__array=Uint8Array;break;case"signed char":case"int8":case"int8_t":this.__array=Int8Array;break;case"short":case"short int":case"signed short":case"signed short int":case"int16":case"int16_t":this.__array=Int16Array;break;case"ushort":case"unsigned short":case"unsigned short int":case"uint16":case"uint16_t":this.__array=Uint16Array;break;case"int":case"signed int":case"int32":case"int32_t":this.__array=Int32Array;break;case"uint":case"unsigned int":case"uint32":case"uint32_t":this.__array=Uint32Array;break;case"float":this.__array=Float32Array;break;case"double":this.__array=Float64Array;break;default:throw new Error("Unsupported NRRD data type: "+e)}return this.type=e},endian:function(e){return this.endian=e},encoding:function(e){return this.encoding=e},dimension:function(e){return this.dim=parseInt(e,10)},sizes:function(e){var t;return this.sizes=function(){for(var n=e.split(/\s+/),r=[],i=0,a=n.length;i<a;i++)t=n[i],r.push(parseInt(t,10));return r}()},space:function(e){return this.space=e},"space origin":function(e){return this.space_origin=e.split("(")[1].split(")")[0].split(",")},"space directions":function(e){var t,n,r=e.match(/\(.*?\)/g);return this.vectors=function(){for(var e=[],i=0,a=r.length;i<a;i++)n=r[i],e.push(function(){for(var e=n.slice(1,-1).split(/,/),r=[],i=0,a=e.length;i<a;i++)t=e[i],r.push(parseFloat(t));return r}());return e}()},spacings:function(e){var t,n=e.split(/\s+/);return this.spacings=function(){for(var e=[],r=0,i=n.length;r<i;r++)t=n[r],e.push(parseFloat(t));return e}()}},yf=null,Af=null,bf=null,xf=null,_f=null,wf=null,Sf=null,Ef=null,Cf=function(){var e="object"==typeof global&&global&&global.Object===Object&&global,t="object"==typeof self&&self&&self.Object===Object&&self,n=e||t||Function("return this")(),r=n.Symbol,o=Object.prototype,s=o.hasOwnProperty,l=o.toString,u=r?r.toStringTag:void 0;var c=Object.prototype.toString;var f="[object Null]",A="[object Undefined]",b=r?r.toStringTag:void 0;function x(e){return null==e?void 0===e?A:f:b&&b in Object(e)?function(e){var t=s.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(a){}var i=l.call(e);return r&&(t?e[u]=n:delete e[u]),i}(e):function(e){return c.call(e)}(e)}function _(e){return null!=e&&"object"==typeof e}var w="[object Symbol]";function S(e){return"symbol"==typeof e||_(e)&&x(e)==w}function E(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var C=Array.isArray,T=1/0,M=r?r.prototype:void 0,I=M?M.toString:void 0;function k(e){if("string"==typeof e)return e;if(C(e))return E(e,k)+"";if(S(e))return I?I.call(e):"";var t=e+"";return"0"==t&&1/e==-T?"-0":t}var B=/\s/;var R=/^\s+/;function P(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&B.test(e.charAt(t)););return t}(e)+1).replace(R,""):e}function D(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var L=NaN,N=/^[-+]0x[0-9a-f]+$/i,F=/^0b[01]+$/i,O=/^0o[0-7]+$/i,U=parseInt;var z=1/0,G=17976931348623157e292;function Q(e){return e?(e=function(e){if("number"==typeof e)return e;if(S(e))return L;if(D(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=D(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=P(e);var n=F.test(e);return n||O.test(e)?U(e.slice(2),n?2:8):N.test(e)?L:+e}(e))===z||e===-z?(e<0?-1:1)*G:e===e?e:0:0===e?e:0}function Z(e){var t=Q(e),n=t%1;return t===t?n?t-n:t:0}function H(e){return e}var j="[object AsyncFunction]",V="[object Function]",W="[object GeneratorFunction]",X="[object Proxy]";function Y(e){if(!D(e))return!1;var t=x(e);return t==V||t==W||t==j||t==X}var K=n["__core-js_shared__"],J=function(){var e=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var q=Function.prototype.toString;function $(e){if(null!=e){try{return q.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var ee=/^\[object .+?Constructor\]$/,te=Function.prototype,ne=Object.prototype,re=te.toString,ie=ne.hasOwnProperty,ae=RegExp("^"+re.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oe(e){return!(!D(e)||(t=e,J&&J in t))&&(Y(e)?ae:ee).test($(e));var t}function se(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return oe(n)?n:void 0}var le=se(n,"WeakMap"),ue=Object.create,ce=function(){function e(){}return function(t){if(!D(t))return{};if(ue)return ue(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function fe(){}var de=Date.now;var he=function(){try{var e=se(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),pe=function(e){var t=0,n=0;return function(){var r=de(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(he?function(e,t){return he(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:H),ve=pe;function me(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function ge(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function ye(e){return e!==e}function Ae(e,t,n){return t===t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):ge(e,ye,n)}function be(e,t){return!!(null==e?0:e.length)&&Ae(e,t,0)>-1}var xe=9007199254740991,_e=/^(?:0|[1-9]\d*)$/;function we(e,t){var n=typeof e;return!!(t=null==t?xe:t)&&("number"==n||"symbol"!=n&&_e.test(e))&&e>-1&&e%1==0&&e<t}function Se(e,t,n){"__proto__"==t&&he?he(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ee(e,t){return e===t||e!==e&&t!==t}var Ce=Object.prototype.hasOwnProperty;function Te(e,t,n){var r=e[t];Ce.call(e,t)&&Ee(r,n)&&(void 0!==n||t in e)||Se(e,t,n)}function Me(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?Se(n,s,l):Te(n,s,l)}return n}var Ie=Math.max;function ke(e,t){return ve(function(e,t,n){return t=Ie(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Ie(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,H),e+"")}var Be=9007199254740991;function Re(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Be}function Pe(e){return null!=e&&Re(e.length)&&!Y(e)}function De(e,t,n){if(!D(n))return!1;var r=typeof t;return!!("number"==r?Pe(n)&&we(t,n.length):"string"==r&&t in n)&&Ee(n[t],e)}var Le=Object.prototype;function Ne(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function Fe(e){return _(e)&&"[object Arguments]"==x(e)}var Oe=Object.prototype,Ue=Oe.hasOwnProperty,ze=Oe.propertyIsEnumerable,Ge=Fe(function(){return arguments}())?Fe:function(e){return _(e)&&Ue.call(e,"callee")&&!ze.call(e,"callee")},Qe=Ge;var Ze="object"==typeof exports&&exports&&!exports.nodeType&&exports,He=Ze&&"object"==typeof module&&module&&!module.nodeType&&module,je=He&&He.exports===Ze?n.Buffer:void 0,Ve=(je?je.isBuffer:void 0)||function(){return!1},We={};function Xe(e){return function(t){return e(t)}}We["[object Float32Array]"]=We["[object Float64Array]"]=We["[object Int8Array]"]=We["[object Int16Array]"]=We["[object Int32Array]"]=We["[object Uint8Array]"]=We["[object Uint8ClampedArray]"]=We["[object Uint16Array]"]=We["[object Uint32Array]"]=!0,We["[object Arguments]"]=We["[object Array]"]=We["[object ArrayBuffer]"]=We["[object Boolean]"]=We["[object DataView]"]=We["[object Date]"]=We["[object Error]"]=We["[object Function]"]=We["[object Map]"]=We["[object Number]"]=We["[object Object]"]=We["[object RegExp]"]=We["[object Set]"]=We["[object String]"]=We["[object WeakMap]"]=!1;var Ye="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ke=Ye&&"object"==typeof module&&module&&!module.nodeType&&module,Je=Ke&&Ke.exports===Ye&&e.process,qe=function(){try{var e=Ke&&Ke.require&&Ke.require("util").types;return e||Je&&Je.binding&&Je.binding("util")}catch(t){}}(),$e=qe&&qe.isTypedArray,et=$e?Xe($e):function(e){return _(e)&&Re(e.length)&&!!We[x(e)]},tt=Object.prototype.hasOwnProperty;function nt(e,t){var n=C(e),r=!n&&Qe(e),i=!n&&!r&&Ve(e),a=!n&&!r&&!i&&et(e),o=n||r||i||a,s=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var u in e)!t&&!tt.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||we(u,l))||s.push(u);return s}function rt(e,t){return function(n){return e(t(n))}}var it=rt(Object.keys,Object),at=Object.prototype.hasOwnProperty;function ot(e){if(!Ne(e))return it(e);var t=[];for(var n in Object(e))at.call(e,n)&&"constructor"!=n&&t.push(n);return t}function st(e){return Pe(e)?nt(e):ot(e)}var lt,ut=Object.prototype.hasOwnProperty,ct=(lt=function(e,t){if(Ne(t)||Pe(t))Me(t,st(t),e);else for(var n in t)ut.call(t,n)&&Te(e,n,t[n])},ke((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(i=lt.length>3&&"function"==typeof i?(r--,i):void 0,a&&De(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var o=t[n];o&&lt(e,o,n,i)}return e})));var ft=Object.prototype.hasOwnProperty;function dt(e){if(!D(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Ne(e),n=[];for(var r in e)("constructor"!=r||!t&&ft.call(e,r))&&n.push(r);return n}function ht(e){return Pe(e)?nt(e,!0):dt(e)}var pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vt=/^\w*$/;function mt(e,t){if(C(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!S(e))||(vt.test(e)||!pt.test(e)||null!=t&&e in Object(t))}var gt=se(Object,"create");var yt=Object.prototype.hasOwnProperty;var At=Object.prototype.hasOwnProperty;function bt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function xt(e,t){for(var n=e.length;n--;)if(Ee(e[n][0],t))return n;return-1}bt.prototype.clear=function(){this.__data__=gt?gt(null):{},this.size=0},bt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},bt.prototype.get=function(e){var t=this.__data__;if(gt){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return yt.call(t,e)?t[e]:void 0},bt.prototype.has=function(e){var t=this.__data__;return gt?void 0!==t[e]:At.call(t,e)},bt.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gt&&void 0===t?"__lodash_hash_undefined__":t,this};var _t=Array.prototype.splice;function wt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}wt.prototype.clear=function(){this.__data__=[],this.size=0},wt.prototype.delete=function(e){var t=this.__data__,n=xt(t,e);return!(n<0)&&(n==t.length-1?t.pop():_t.call(t,n,1),--this.size,!0)},wt.prototype.get=function(e){var t=this.__data__,n=xt(t,e);return n<0?void 0:t[n][1]},wt.prototype.has=function(e){return xt(this.__data__,e)>-1},wt.prototype.set=function(e,t){var n=this.__data__,r=xt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var St=se(n,"Map");function Et(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Ct(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ct.prototype.clear=function(){this.size=0,this.__data__={hash:new bt,map:new(St||wt),string:new bt}},Ct.prototype.delete=function(e){var t=Et(this,e).delete(e);return this.size-=t?1:0,t},Ct.prototype.get=function(e){return Et(this,e).get(e)},Ct.prototype.has=function(e){return Et(this,e).has(e)},Ct.prototype.set=function(e,t){var n=Et(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var Tt="Expected a function";function Mt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Tt);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Mt.Cache||Ct),n}Mt.Cache=Ct;var It=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kt=/\\(\\)?/g,Bt=function(e){var t=Mt(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(It,(function(e,n,r,i){t.push(r?i.replace(kt,"$1"):n||e)})),t}));function Rt(e,t){return C(e)?e:mt(e,t)?[e]:Bt(function(e){return null==e?"":k(e)}(e))}var Pt=1/0;function Dt(e){if("string"==typeof e||S(e))return e;var t=e+"";return"0"==t&&1/e==-Pt?"-0":t}function Lt(e,t){for(var n=0,r=(t=Rt(t,e)).length;null!=e&&n<r;)e=e[Dt(t[n++])];return n&&n==r?e:void 0}function Nt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Ft=r?r.isConcatSpreadable:void 0;function Ot(e){return C(e)||Qe(e)||!!(Ft&&e&&e[Ft])}function Ut(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=Ot),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?Ut(s,t-1,n,r,i):Nt(i,s):r||(i[i.length]=s)}return i}function zt(e){return(null==e?0:e.length)?Ut(e,1):[]}var Gt=rt(Object.getPrototypeOf,Object);function Qt(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}function Zt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function Ht(e){var t=this.__data__=new wt(e);this.size=t.size}Ht.prototype.clear=function(){this.__data__=new wt,this.size=0},Ht.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ht.prototype.get=function(e){return this.__data__.get(e)},Ht.prototype.has=function(e){return this.__data__.has(e)},Ht.prototype.set=function(e,t){var n=this.__data__;if(n instanceof wt){var r=n.__data__;if(!St||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ct(r)}return n.set(e,t),this.size=n.size,this};var jt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Vt=jt&&"object"==typeof module&&module&&!module.nodeType&&module,Wt=Vt&&Vt.exports===jt?n.Buffer:void 0,Xt=Wt?Wt.allocUnsafe:void 0;function Yt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Kt(){return[]}var Jt=Object.prototype.propertyIsEnumerable,qt=Object.getOwnPropertySymbols,$t=qt?function(e){return null==e?[]:(e=Object(e),Yt(qt(e),(function(t){return Jt.call(e,t)})))}:Kt;var en=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Nt(t,$t(e)),e=Gt(e);return t}:Kt;function tn(e,t,n){var r=t(e);return C(e)?r:Nt(r,n(e))}function nn(e){return tn(e,st,$t)}function rn(e){return tn(e,ht,en)}var an=se(n,"DataView"),on=se(n,"Promise"),sn=se(n,"Set"),ln="[object Map]",un="[object Promise]",cn="[object Set]",fn="[object WeakMap]",dn="[object DataView]",hn=$(an),pn=$(St),vn=$(on),mn=$(sn),gn=$(le),yn=x;(an&&yn(new an(new ArrayBuffer(1)))!=dn||St&&yn(new St)!=ln||on&&yn(on.resolve())!=un||sn&&yn(new sn)!=cn||le&&yn(new le)!=fn)&&(yn=function(e){var t=x(e),n="[object Object]"==t?e.constructor:void 0,r=n?$(n):"";if(r)switch(r){case hn:return dn;case pn:return ln;case vn:return un;case mn:return cn;case gn:return fn}return t});var An=yn,bn=Object.prototype.hasOwnProperty;var xn=n.Uint8Array;function _n(e){var t=new e.constructor(e.byteLength);return new xn(t).set(new xn(e)),t}var wn=/\w*$/;var Sn=r?r.prototype:void 0,En=Sn?Sn.valueOf:void 0;var Cn="[object Boolean]",Tn="[object Date]",Mn="[object Map]",In="[object Number]",kn="[object RegExp]",Bn="[object Set]",Rn="[object String]",Pn="[object Symbol]",Dn="[object ArrayBuffer]",Ln="[object DataView]",Nn="[object Float32Array]",Fn="[object Float64Array]",On="[object Int8Array]",Un="[object Int16Array]",zn="[object Int32Array]",Gn="[object Uint8Array]",Qn="[object Uint8ClampedArray]",Zn="[object Uint16Array]",Hn="[object Uint32Array]";function jn(e,t,n){var r,i=e.constructor;switch(t){case Dn:return _n(e);case Cn:case Tn:return new i(+e);case Ln:return function(e,t){var n=t?_n(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case Nn:case Fn:case On:case Un:case zn:case Gn:case Qn:case Zn:case Hn:return function(e,t){var n=t?_n(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case Mn:return new i;case In:case Rn:return new i(e);case kn:return function(e){var t=new e.constructor(e.source,wn.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Bn:return new i;case Pn:return r=e,En?Object(En.call(r)):{}}}var Vn=qe&&qe.isMap,Wn=Vn?Xe(Vn):function(e){return _(e)&&"[object Map]"==An(e)};var Xn=qe&&qe.isSet,Yn=Xn?Xe(Xn):function(e){return _(e)&&"[object Set]"==An(e)},Kn=1,Jn=2,qn=4,$n="[object Arguments]",er="[object Function]",tr="[object GeneratorFunction]",nr="[object Object]",rr={};function ir(e,t,n,r,i,a){var o,s=t&Kn,l=t&Jn,u=t&qn;if(n&&(o=i?n(e,r,i,a):n(e)),void 0!==o)return o;if(!D(e))return e;var c=C(e);if(c){if(o=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&bn.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e,o)}else{var f=An(e),d=f==er||f==tr;if(Ve(e))return function(e,t){if(t)return e.slice();var n=e.length,r=Xt?Xt(n):new e.constructor(n);return e.copy(r),r}(e,s);if(f==nr||f==$n||d&&!i){if(o=l||d?{}:function(e){return"function"!=typeof e.constructor||Ne(e)?{}:ce(Gt(e))}(e),!s)return l?function(e,t){return Me(e,en(e),t)}(e,function(e,t){return e&&Me(t,ht(t),e)}(o,e)):function(e,t){return Me(e,$t(e),t)}(e,function(e,t){return e&&Me(t,st(t),e)}(o,e))}else{if(!rr[f])return i?e:{};o=jn(e,f,s)}}a||(a=new Ht);var h=a.get(e);if(h)return h;a.set(e,o),Yn(e)?e.forEach((function(r){o.add(ir(r,t,n,r,e,a))})):Wn(e)&&e.forEach((function(r,i){o.set(i,ir(r,t,n,i,e,a))}));var p=c?void 0:(u?l?rn:nn:l?ht:st)(e);return me(p||e,(function(r,i){p&&(r=e[i=r]),Te(o,i,ir(r,t,n,i,e,a))})),o}rr[$n]=rr["[object Array]"]=rr["[object ArrayBuffer]"]=rr["[object DataView]"]=rr["[object Boolean]"]=rr["[object Date]"]=rr["[object Float32Array]"]=rr["[object Float64Array]"]=rr["[object Int8Array]"]=rr["[object Int16Array]"]=rr["[object Int32Array]"]=rr["[object Map]"]=rr["[object Number]"]=rr[nr]=rr["[object RegExp]"]=rr["[object Set]"]=rr["[object String]"]=rr["[object Symbol]"]=rr["[object Uint8Array]"]=rr["[object Uint8ClampedArray]"]=rr["[object Uint16Array]"]=rr["[object Uint32Array]"]=!0,rr["[object Error]"]=rr[er]=rr["[object WeakMap]"]=!1;var ar=4;function or(e){return ir(e,ar)}function sr(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i}function lr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ct;++t<n;)this.add(e[t])}function ur(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function cr(e,t){return e.has(t)}lr.prototype.add=lr.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},lr.prototype.has=function(e){return this.__data__.has(e)};var fr=1,dr=2;function hr(e,t,n,r,i,a){var o=n&fr,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(e),c=a.get(t);if(u&&c)return u==t&&c==e;var f=-1,d=!0,h=n&dr?new lr:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var p=e[f],v=t[f];if(r)var m=o?r(v,p,f,t,e,a):r(p,v,f,e,t,a);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!ur(t,(function(e,t){if(!cr(h,t)&&(p===e||i(p,e,n,r,a)))return h.push(t)}))){d=!1;break}}else if(p!==v&&!i(p,v,n,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function pr(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function vr(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var mr=1,gr=2,yr="[object Boolean]",Ar="[object Date]",br="[object Error]",xr="[object Map]",_r="[object Number]",wr="[object RegExp]",Sr="[object Set]",Er="[object String]",Cr="[object Symbol]",Tr="[object ArrayBuffer]",Mr="[object DataView]",Ir=r?r.prototype:void 0,kr=Ir?Ir.valueOf:void 0;var Br=1,Rr=Object.prototype.hasOwnProperty;var Pr=1,Dr="[object Arguments]",Lr="[object Array]",Nr="[object Object]",Fr=Object.prototype.hasOwnProperty;function Or(e,t,n,r,i,a){var o=C(e),s=C(t),l=o?Lr:An(e),u=s?Lr:An(t),c=(l=l==Dr?Nr:l)==Nr,f=(u=u==Dr?Nr:u)==Nr,d=l==u;if(d&&Ve(e)){if(!Ve(t))return!1;o=!0,c=!1}if(d&&!c)return a||(a=new Ht),o||et(e)?hr(e,t,n,r,i,a):function(e,t,n,r,i,a,o){switch(n){case Mr:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Tr:return!(e.byteLength!=t.byteLength||!a(new xn(e),new xn(t)));case yr:case Ar:case _r:return Ee(+e,+t);case br:return e.name==t.name&&e.message==t.message;case wr:case Er:return e==t+"";case xr:var s=pr;case Sr:var l=r&mr;if(s||(s=vr),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;r|=gr,o.set(e,t);var c=hr(s(e),s(t),r,i,a,o);return o.delete(e),c;case Cr:if(kr)return kr.call(e)==kr.call(t)}return!1}(e,t,l,n,r,i,a);if(!(n&Pr)){var h=c&&Fr.call(e,"__wrapped__"),p=f&&Fr.call(t,"__wrapped__");if(h||p){var v=h?e.value():e,m=p?t.value():t;return a||(a=new Ht),i(v,m,n,r,a)}}return!!d&&(a||(a=new Ht),function(e,t,n,r,i,a){var o=n&Br,s=nn(e),l=s.length;if(l!=nn(t).length&&!o)return!1;for(var u=l;u--;){var c=s[u];if(!(o?c in t:Rr.call(t,c)))return!1}var f=a.get(e),d=a.get(t);if(f&&d)return f==t&&d==e;var h=!0;a.set(e,t),a.set(t,e);for(var p=o;++u<l;){var v=e[c=s[u]],m=t[c];if(r)var g=o?r(m,v,c,t,e,a):r(v,m,c,e,t,a);if(!(void 0===g?v===m||i(v,m,n,r,a):g)){h=!1;break}p||(p="constructor"==c)}if(h&&!p){var y=e.constructor,A=t.constructor;y==A||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof A&&A instanceof A||(h=!1)}return a.delete(e),a.delete(t),h}(e,t,n,r,i,a))}function Ur(e,t,n,r,i){return e===t||(null==e||null==t||!_(e)&&!_(t)?e!==e&&t!==t:Or(e,t,n,r,Ur,i))}var zr=1,Gr=2;function Qr(e){return e===e&&!D(e)}function Zr(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function Hr(e){var t=function(e){for(var t=st(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Qr(i)]}return t}(e);return 1==t.length&&t[0][2]?Zr(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var l=(s=n[i])[0],u=e[l],c=s[1];if(o&&s[2]){if(void 0===u&&!(l in e))return!1}else{var f=new Ht;if(r)var d=r(u,c,l,e,t,f);if(!(void 0===d?Ur(c,u,zr|Gr,r,f):d))return!1}}return!0}(n,e,t)}}function jr(e,t){return null!=e&&t in Object(e)}function Vr(e,t,n){for(var r=-1,i=(t=Rt(t,e)).length,a=!1;++r<i;){var o=Dt(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&Re(i)&&we(o,i)&&(C(e)||Qe(e))}var Wr=1,Xr=2;function Yr(e,t){return mt(e)&&Qr(t)?Zr(Dt(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:Lt(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&Vr(e,t,jr)}(n,e):Ur(t,r,Wr|Xr)}}function Kr(e){return mt(e)?(t=Dt(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return Lt(t,e)}}(e);var t}function Jr(e){return"function"==typeof e?e:null==e?H:"object"==typeof e?C(e)?Yr(e[0],e[1]):Hr(e):Kr(e)}function qr(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}var $r,ei=function(e,t,n){for(var r=-1,i=Object(e),a=n(e),o=a.length;o--;){var s=a[$r?o:++r];if(!1===t(i[s],s,i))break}return e};var ti=function(e,t){return function(n,r){if(null==n)return n;if(!Pe(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}((function(e,t){return e&&ei(e,t,st)})),ni=ti;function ri(e,t,n,r){return ni(e,(function(e,i,a){t(r,e,n(e),a)})),r}var ii=Object.prototype,ai=ii.hasOwnProperty,oi=ke((function(e,t){e=Object(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&De(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],o=ht(a),s=-1,l=o.length;++s<l;){var u=o[s],c=e[u];(void 0===c||Ee(c,ii[u])&&!ai.call(e,u))&&(e[u]=a[u])}return e}));function si(e){return _(e)&&Pe(e)}function li(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var ui=ke((function(e,t){return si(e)?function(e,t,n,r){var i=-1,a=be,o=!0,s=e.length,l=[],u=t.length;if(!s)return l;n&&(t=E(t,Xe(n))),r?(a=li,o=!1):t.length>=200&&(a=cr,o=!1,t=new lr(t));e:for(;++i<s;){var c=e[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,o&&f===f){for(var d=u;d--;)if(t[d]===f)continue e;l.push(c)}else a(t,f,r)||l.push(c)}return l}(e,Ut(t,1,si,!0)):[]}));function ci(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function fi(e,t,n){var r=null==e?0:e.length;return r?Qt(e,(t=n||void 0===t?1:Z(t))<0?0:t,r):[]}function di(e,t,n){var r=null==e?0:e.length;return r?Qt(e,0,(t=r-(t=n||void 0===t?1:Z(t)))<0?0:t):[]}function hi(e,t){var n;return(C(e)?me:ni)(e,"function"==typeof(n=t)?n:H)}function pi(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function vi(e,t){var n=!0;return ni(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mi(e,t,n){var r=C(e)?pi:vi;return n&&De(e,t,n)&&(t=void 0),r(e,Jr(t))}function gi(e,t){var n=[];return ni(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yi(e,t){return(C(e)?Yt:gi)(e,Jr(t))}var Ai=Math.max;var bi,xi=(bi=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Z(n);return i<0&&(i=Ai(r+i,0)),ge(e,Jr(t),i)},function(e,t,n){var r=Object(e);if(!Pe(e)){var i=Jr(t);e=st(e),t=function(e){return i(r[e],e,r)}}var a=bi(e,t,n);return a>-1?r[i?e[a]:a]:void 0});function _i(e){return e&&e.length?e[0]:void 0}function wi(e,t){var n=-1,r=Pe(e)?Array(e.length):[];return ni(e,(function(e,i,a){r[++n]=t(e,i,a)})),r}function Si(e,t){return(C(e)?E:wi)(e,Jr(t))}function Ei(e,t){return Ut(Si(e,t),1)}var Ci,Ti,Mi=Object.prototype.hasOwnProperty,Ii=(Ci=function(e,t,n){Mi.call(e,n)?e[n].push(t):Se(e,n,[t])},function(e,t){var n=C(e)?qr:ri,r=Ti?Ti():{};return n(e,Ci,Jr(t),r)}),ki=Object.prototype.hasOwnProperty;function Bi(e,t){return null!=e&&ki.call(e,t)}function Ri(e,t){return null!=e&&Vr(e,t,Bi)}var Pi="[object String]";function Di(e){return"string"==typeof e||!C(e)&&_(e)&&x(e)==Pi}function Li(e){return null==e?[]:function(e,t){return E(t,(function(t){return e[t]}))}(e,st(e))}var Ni=Math.max;function Fi(e,t,n,r){e=Pe(e)?e:Li(e),n=n&&!r?Z(n):0;var i=e.length;return n<0&&(n=Ni(i+n,0)),Di(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ae(e,t,n)>-1}var Oi=Math.max;function Ui(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Z(n);return i<0&&(i=Oi(r+i,0)),Ae(e,t,i)}var zi="[object Map]",Gi="[object Set]",Qi=Object.prototype.hasOwnProperty;function Zi(e){if(null==e)return!0;if(Pe(e)&&(C(e)||"string"==typeof e||"function"==typeof e.splice||Ve(e)||et(e)||Qe(e)))return!e.length;var t=An(e);if(t==zi||t==Gi)return!e.size;if(Ne(e))return!ot(e).length;for(var n in e)if(Qi.call(e,n))return!1;return!0}var Hi=qe&&qe.isRegExp,ji=Hi?Xe(Hi):function(e){return _(e)&&"[object RegExp]"==x(e)};function Vi(e){return void 0===e}var Wi="Expected a function";function Xi(e,t,n,r){if(!D(e))return e;for(var i=-1,a=(t=Rt(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var l=Dt(t[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=o){var c=s[l];void 0===(u=r?r(c,l,s):void 0)&&(u=D(c)?c:we(t[i+1])?[]:{})}Te(s,l,u),s=s[l]}return e}function Yi(e,t){if(null==e)return{};var n=E(rn(e),(function(e){return[e]}));return t=Jr(t),function(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=Lt(e,o);n(s,o)&&Xi(a,Rt(o,e),s)}return a}(e,n,(function(e,n){return t(e,n[0])}))}function Ki(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Ji(e,t,n){var r=C(e)?Zt:Ki,i=arguments.length<3;return r(e,Jr(t),n,i,ni)}function qi(e,t){return(C(e)?Yt:gi)(e,function(e){if("function"!=typeof e)throw new TypeError(Wi);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}(Jr(t)))}function $i(e,t){var n;return ni(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ea(e,t,n){var r=C(e)?ur:$i;return n&&De(e,t,n)&&(t=void 0),r(e,Jr(t))}var ta=sn&&1/vr(new sn([,-0]))[1]==1/0?function(e){return new sn(e)}:fe,na=200;function ra(e){return e&&e.length?function(e,t,n){var r=-1,i=be,a=e.length,o=!0,s=[],l=s;if(n)o=!1,i=li;else if(a>=na){var u=t?null:ta(e);if(u)return vr(u);o=!1,i=cr,l=new lr}else l=t?[]:s;e:for(;++r<a;){var c=e[r],f=t?t(c):c;if(c=n||0!==c?c:0,o&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),s.push(c)}else i(l,f,n)||(l!==s&&l.push(f),s.push(c))}return s}(e):[]}function ia(e){console&&console.error&&console.error("Error: ".concat(e))}function aa(e){console&&console.warn&&console.warn("Warning: ".concat(e))}function oa(e){var t=(new Date).getTime(),n=e();return{time:(new Date).getTime()-t,value:n}}function sa(e){function t(){}t.prototype=e;var n=new t;function r(){return typeof n.bar}return r(),r(),e}function la(e){return Di((t=e).LABEL)&&""!==t.LABEL?e.LABEL:e.name;var t}var ua=function(){function e(t){(0,v.Z)(this,e),this._definition=t}return(0,m.Z)(e,[{key:"definition",get:function(){return this._definition},set:function(e){this._definition=e}},{key:"accept",value:function(e){e.visit(this),hi(this.definition,(function(t){t.accept(e)}))}}]),e}(),ca=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,[])).idx=1,ct((0,d.Z)(r),Yi(e,(function(e){return void 0!==e}))),r}return(0,m.Z)(n,[{key:"definition",get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(e){}},{key:"accept",value:function(e){e.visit(this)}}]),n}(ua),fa=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e.definition)).orgText="",ct((0,d.Z)(r),Yi(e,(function(e){return void 0!==e}))),r}return(0,m.Z)(n)}(ua),da=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e.definition)).ignoreAmbiguities=!1,ct((0,d.Z)(r),Yi(e,(function(e){return void 0!==e}))),r}return(0,m.Z)(n)}(ua),ha=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e.definition)).idx=1,ct((0,d.Z)(r),Yi(e,(function(e){return void 0!==e}))),r}return(0,m.Z)(n)}(ua),pa=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e.definition)).idx=1,ct((0,d.Z)(r),Yi(e,(function(e){return void 0!==e}))),r}return(0,m.Z)(n)}(ua),va=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e.definition)).idx=1,ct((0,d.Z)(r),Yi(e,(function(e){return void 0!==e}))),r}return(0,m.Z)(n)}(ua),ma=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e.definition)).idx=1,ct((0,d.Z)(r),Yi(e,(function(e){return void 0!==e}))),r}return(0,m.Z)(n)}(ua),ga=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e.definition)).idx=1,ct((0,d.Z)(r),Yi(e,(function(e){return void 0!==e}))),r}return(0,m.Z)(n)}(ua),ya=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e.definition)).idx=1,r.ignoreAmbiguities=!1,r.hasPredicates=!1,ct((0,d.Z)(r),Yi(e,(function(e){return void 0!==e}))),r}return(0,m.Z)(n,[{key:"definition",get:function(){return this._definition},set:function(e){this._definition=e}}]),n}(ua),Aa=function(){function e(t){(0,v.Z)(this,e),this.idx=1,ct(this,Yi(t,(function(e){return void 0!==e})))}return(0,m.Z)(e,[{key:"accept",value:function(e){e.visit(this)}}]),e}();function ba(e){function t(e){return Si(e,ba)}if(e instanceof ca){var n={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return Di(e.label)&&(n.label=e.label),n}if(e instanceof da)return{type:"Alternative",definition:t(e.definition)};if(e instanceof ha)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof pa)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof va)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:ba(new Aa({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof ga)return{type:"RepetitionWithSeparator",idx:e.idx,separator:ba(new Aa({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof ma)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof ya)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof Aa){var r={type:"Terminal",name:e.terminalType.name,label:la(e.terminalType),idx:e.idx};Di(e.label)&&(r.terminalLabel=e.label);var i=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(r.pattern=ji(i)?i.source:i),r}if(e instanceof fa)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}var xa=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"visit",value:function(e){var t=e;switch(t.constructor){case ca:return this.visitNonTerminal(t);case da:return this.visitAlternative(t);case ha:return this.visitOption(t);case pa:return this.visitRepetitionMandatory(t);case va:return this.visitRepetitionMandatoryWithSeparator(t);case ga:return this.visitRepetitionWithSeparator(t);case ma:return this.visitRepetition(t);case ya:return this.visitAlternation(t);case Aa:return this.visitTerminal(t);case fa:return this.visitRule(t);default:throw Error("non exhaustive match")}}},{key:"visitNonTerminal",value:function(e){}},{key:"visitAlternative",value:function(e){}},{key:"visitOption",value:function(e){}},{key:"visitRepetition",value:function(e){}},{key:"visitRepetitionMandatory",value:function(e){}},{key:"visitRepetitionMandatoryWithSeparator",value:function(e){}},{key:"visitRepetitionWithSeparator",value:function(e){}},{key:"visitAlternation",value:function(e){}},{key:"visitTerminal",value:function(e){}},{key:"visitRule",value:function(e){}}]),e}();function _a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!!(e instanceof ha||e instanceof ma||e instanceof ga)||(e instanceof ya?ea(e.definition,(function(e){return _a(e,t)})):!(e instanceof ca&&Fi(t,e))&&(e instanceof ua&&(e instanceof ca&&t.push(e),mi(e.definition,(function(e){return _a(e,t)})))))}function wa(e){if(e instanceof ca)return"SUBRULE";if(e instanceof ha)return"OPTION";if(e instanceof ya)return"OR";if(e instanceof pa)return"AT_LEAST_ONE";if(e instanceof va)return"AT_LEAST_ONE_SEP";if(e instanceof ga)return"MANY_SEP";if(e instanceof ma)return"MANY";if(e instanceof Aa)return"CONSUME";throw Error("non exhaustive match")}var Sa=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"walk",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];hi(e.definition,(function(r,i){var a=fi(e.definition,i+1);if(r instanceof ca)t.walkProdRef(r,a,n);else if(r instanceof Aa)t.walkTerminal(r,a,n);else if(r instanceof da)t.walkFlat(r,a,n);else if(r instanceof ha)t.walkOption(r,a,n);else if(r instanceof pa)t.walkAtLeastOne(r,a,n);else if(r instanceof va)t.walkAtLeastOneSep(r,a,n);else if(r instanceof ga)t.walkManySep(r,a,n);else if(r instanceof ma)t.walkMany(r,a,n);else{if(!(r instanceof ya))throw Error("non exhaustive match");t.walkOr(r,a,n)}}))}},{key:"walkTerminal",value:function(e,t,n){}},{key:"walkProdRef",value:function(e,t,n){}},{key:"walkFlat",value:function(e,t,n){var r=t.concat(n);this.walk(e,r)}},{key:"walkOption",value:function(e,t,n){var r=t.concat(n);this.walk(e,r)}},{key:"walkAtLeastOne",value:function(e,t,n){var r=[new ha({definition:e.definition})].concat(t,n);this.walk(e,r)}},{key:"walkAtLeastOneSep",value:function(e,t,n){var r=Ea(e,t,n);this.walk(e,r)}},{key:"walkMany",value:function(e,t,n){var r=[new ha({definition:e.definition})].concat(t,n);this.walk(e,r)}},{key:"walkManySep",value:function(e,t,n){var r=Ea(e,t,n);this.walk(e,r)}},{key:"walkOr",value:function(e,t,n){var r=this,i=t.concat(n);hi(e.definition,(function(e){var t=new da({definition:[e]});r.walk(t,i)}))}}]),e}();function Ea(e,t,n){return[new ha({definition:[new Aa({terminalType:e.separator})].concat(e.definition)})].concat(t,n)}function Ca(e){if(e instanceof ca)return Ca(e.referencedRule);if(e instanceof Aa)return[e.terminalType];if(function(e){return e instanceof da||e instanceof ha||e instanceof ma||e instanceof pa||e instanceof va||e instanceof ga||e instanceof Aa||e instanceof fa}(e))return function(e){var t,n=[],r=e.definition,i=0,a=r.length>i,o=!0;for(;a&&o;)o=_a(t=r[i]),n=n.concat(Ca(t)),i+=1,a=r.length>i;return ra(n)}(e);if(function(e){return e instanceof ya}(e))return function(e){var t=Si(e.definition,(function(e){return Ca(e)}));return ra(zt(t))}(e);throw Error("non exhaustive match")}var Ta="_~IN~_",Ma=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this)).topProd=e,r.follows={},r}return(0,m.Z)(n,[{key:"startWalking",value:function(){return this.walk(this.topProd),this.follows}},{key:"walkTerminal",value:function(e,t,n){}},{key:"walkProdRef",value:function(e,t,n){var r,i,a=(r=e.referencedRule,i=e.idx,r.name+i+Ta+this.topProd.name),o=t.concat(n),s=Ca(new da({definition:o}));this.follows[a]=s}}]),n}(Sa);function Ia(e){return e.charCodeAt(0)}function ka(e,t){Array.isArray(e)?e.forEach((function(e){t.push(e)})):t.push(e)}function Ba(e,t){if(!0===e[t])throw"duplicate flag "+t;e[t],e[t]=!0}function Ra(e){if(void 0===e)throw Error("Internal Error - Should never get here!");return!0}function Pa(e){return"Character"===e.type}for(var Da=[],La=Ia("0");La<=Ia("9");La++)Da.push(La);for(var Na=[Ia("_")].concat(Da),Fa=Ia("a");Fa<=Ia("z");Fa++)Na.push(Fa);for(var Oa=Ia("A");Oa<=Ia("Z");Oa++)Na.push(Oa);var Ua=[Ia(" "),Ia("\f"),Ia("\n"),Ia("\r"),Ia("\t"),Ia("\v"),Ia("\t"),Ia("\xa0"),Ia("\u1680"),Ia("\u2000"),Ia("\u2001"),Ia("\u2002"),Ia("\u2003"),Ia("\u2004"),Ia("\u2005"),Ia("\u2006"),Ia("\u2007"),Ia("\u2008"),Ia("\u2009"),Ia("\u200a"),Ia("\u2028"),Ia("\u2029"),Ia("\u202f"),Ia("\u205f"),Ia("\u3000"),Ia("\ufeff")],za=/[0-9a-fA-F]/,Ga=/[0-9]/,Qa=/[1-9]/,Za=function(){function e(){(0,v.Z)(this,e),this.idx=0,this.input="",this.groupIdx=0}return(0,m.Z)(e,[{key:"saveState",value:function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}},{key:"restoreState",value:function(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}},{key:"pattern",value:function(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");var t=this.disjunction();this.consumeChar("/");for(var n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":Ba(n,"global");break;case"i":Ba(n,"ignoreCase");break;case"m":Ba(n,"multiLine");break;case"u":Ba(n,"unicode");break;case"y":Ba(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:t,loc:this.loc(0)}}},{key:"disjunction",value:function(){var e=[],t=this.idx;for(e.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}},{key:"alternative",value:function(){for(var e=[],t=this.idx;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}},{key:"term",value:function(){return this.isAssertion()?this.assertion():this.atom()}},{key:"assertion",value:function(){var e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":var t;switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}Ra(t);var n=this.disjunction();return this.consumeChar(")"),{type:t,value:n,loc:this.loc(e)}}return function(){throw Error("Internal Error - Should never get here!")}()}},{key:"quantifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,n=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":var r=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:r,atMost:r};break;case",":t=this.isDigit()?{atLeast:r,atMost:this.integerIncludingZero()}:{atLeast:r,atMost:1/0},this.consumeChar("}")}if(!0===e&&void 0===t)return;Ra(t)}if(!0!==e||void 0!==t)return Ra(t)?("?"===this.peekChar(0)?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(n),t):void 0}},{key:"atom",value:function(){var e,t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group()}if(void 0===e&&this.isPatternCharacter()&&(e=this.patternCharacter()),Ra(e))return e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}},{key:"dotAll",value:function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[Ia("\n"),Ia("\r"),Ia("\u2028"),Ia("\u2029")]}}},{key:"atomEscape",value:function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}},{key:"decimalEscapeAtom",value:function(){return{type:"GroupBackReference",value:this.positiveInteger()}}},{key:"characterClassEscape",value:function(){var e,t=!1;switch(this.popChar()){case"d":e=Da;break;case"D":e=Da,t=!0;break;case"s":e=Ua;break;case"S":e=Ua,t=!0;break;case"w":e=Na;break;case"W":e=Na,t=!0}if(Ra(e))return{type:"Set",value:e,complement:t}}},{key:"controlEscapeAtom",value:function(){var e;switch(this.popChar()){case"f":e=Ia("\f");break;case"n":e=Ia("\n");break;case"r":e=Ia("\r");break;case"t":e=Ia("\t");break;case"v":e=Ia("\v")}if(Ra(e))return{type:"Character",value:e}}},{key:"controlLetterEscapeAtom",value:function(){this.consumeChar("c");var e=this.popChar();if(!1===/[a-zA-Z]/.test(e))throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}},{key:"nulCharacterAtom",value:function(){return this.consumeChar("0"),{type:"Character",value:Ia("\0")}}},{key:"hexEscapeSequenceAtom",value:function(){return this.consumeChar("x"),this.parseHexDigits(2)}},{key:"regExpUnicodeEscapeSequenceAtom",value:function(){return this.consumeChar("u"),this.parseHexDigits(4)}},{key:"identityEscapeAtom",value:function(){return{type:"Character",value:Ia(this.popChar())}}},{key:"classPatternCharacterAtom",value:function(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:Ia(this.popChar())}}}},{key:"characterClass",value:function(){var e=[],t=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),t=!0);this.isClassAtom();){var n=this.classAtom();if(n.type,Pa(n)&&this.isRangeDash()){this.consumeChar("-");var r=this.classAtom();if(r.type,Pa(r)){if(r.value<n.value)throw Error("Range out of order in character class");e.push({from:n.value,to:r.value})}else ka(n.value,e),e.push(Ia("-")),ka(r.value,e)}else ka(n.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}},{key:"classAtom",value:function(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}},{key:"classEscape",value:function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:Ia("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}},{key:"group",value:function(){var e=!0;if(this.consumeChar("("),"?"===this.peekChar(0))this.consumeChar("?"),this.consumeChar(":"),e=!1;else this.groupIdx++;var t=this.disjunction();this.consumeChar(")");var n={type:"Group",capturing:e,value:t};return e&&(n.idx=this.groupIdx),n}},{key:"positiveInteger",value:function(){var e=this.popChar();if(!1===Qa.test(e))throw Error("Expecting a positive integer");for(;Ga.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}},{key:"integerIncludingZero",value:function(){var e=this.popChar();if(!1===Ga.test(e))throw Error("Expecting an integer");for(;Ga.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}},{key:"patternCharacter",value:function(){var e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:Ia(e)}}}},{key:"isRegExpFlag",value:function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}},{key:"isRangeDash",value:function(){return"-"===this.peekChar()&&this.isClassAtom(1)}},{key:"isDigit",value:function(){return Ga.test(this.peekChar(0))}},{key:"isClassAtom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(this.peekChar(e)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}},{key:"isTerm",value:function(){return this.isAtom()||this.isAssertion()}},{key:"isAtom",value:function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}},{key:"isAssertion",value:function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}}},{key:"isQuantifier",value:function(){var e=this.saveState();try{return void 0!==this.quantifier(!0)}catch(t){return!1}finally{this.restoreState(e)}}},{key:"isPatternCharacter",value:function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}},{key:"parseHexDigits",value:function(e){for(var t="",n=0;n<e;n++){var r=this.popChar();if(!1===za.test(r))throw Error("Expecting a HexDecimal digits");t+=r}return{type:"Character",value:parseInt(t,16)}}},{key:"peekChar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.input[this.idx+e]}},{key:"popChar",value:function(){var e=this.peekChar(0);return this.consumeChar(void 0),e}},{key:"consumeChar",value:function(e){if(void 0!==e&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}},{key:"loc",value:function(e){return{begin:e,end:this.idx}}}]),e}(),Ha=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"visitChildren",value:function(e){var t=this;for(var n in e){var r=e[n];e.hasOwnProperty(n)&&(void 0!==r.type?this.visit(r):Array.isArray(r)&&r.forEach((function(e){t.visit(e)}),this))}}},{key:"visit",value:function(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e)}this.visitChildren(e)}},{key:"visitPattern",value:function(e){}},{key:"visitFlags",value:function(e){}},{key:"visitDisjunction",value:function(e){}},{key:"visitAlternative",value:function(e){}},{key:"visitStartAnchor",value:function(e){}},{key:"visitEndAnchor",value:function(e){}},{key:"visitWordBoundary",value:function(e){}},{key:"visitNonWordBoundary",value:function(e){}},{key:"visitLookahead",value:function(e){}},{key:"visitNegativeLookahead",value:function(e){}},{key:"visitCharacter",value:function(e){}},{key:"visitSet",value:function(e){}},{key:"visitGroup",value:function(e){}},{key:"visitGroupBackReference",value:function(e){}},{key:"visitQuantifier",value:function(e){}}]),e}(),ja={},Va=new Za;function Wa(e){var t=e.toString();if(ja.hasOwnProperty(t))return ja[t];var n=Va.pattern(t);return ja[t]=n,n}var Xa="Complement Sets are not supported for first char optimization",Ya='Unable to use "first char" lexer optimizations:\n';function Ka(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=Wa(e);return Ja(n.value,{},n.flags.ignoreCase)}catch(i){if(i.message===Xa)t&&aa("".concat(Ya,"\tUnable to optimize: < ").concat(e.toString()," >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details."));else{var r="";t&&(r="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),ia("".concat(Ya,"\n\tFailed parsing: < ").concat(e.toString()," >\n\tUsing the @chevrotain/regexp-to-ast library\n\tPlease open an issue at: https://github.com/chevrotain/chevrotain/issues")+r)}}return[]}function Ja(e,t,n){switch(e.type){case"Disjunction":for(var r=0;r<e.value.length;r++)Ja(e.value[r],t,n);break;case"Alternative":for(var i=e.value,a=0;a<i.length;a++){var o=i[a];switch(o.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var s=o;switch(s.type){case"Character":qa(s.value,t,n);break;case"Set":if(!0===s.complement)throw Error(Xa);hi(s.value,(function(e){if("number"===typeof e)qa(e,t,n);else{var r=e;if(!0===n)for(var i=r.from;i<=r.to;i++)qa(i,t,n);else{for(var a=r.from;a<=r.to&&a<xo;a++)qa(a,t,n);if(r.to>=xo)for(var o=r.from>=xo?r.from:xo,s=r.to,l=wo(o),u=wo(s),c=l;c<=u;c++)t[c]=c}}}));break;case"Group":Ja(s.value,t,n);break;default:throw Error("Non Exhaustive Match")}var l=void 0!==s.quantifier&&0===s.quantifier.atLeast;if("Group"===s.type&&!1===eo(s)||"Group"!==s.type&&!1===l)break}break;default:throw Error("non exhaustive match!")}return Li(t)}function qa(e,t,n){var r=wo(e);t[r]=r,!0===n&&function(e,t){var n=String.fromCharCode(e),r=n.toUpperCase();if(r!==n){var i=wo(r.charCodeAt(0));t[i]=i}else{var a=n.toLowerCase();if(a!==n){var o=wo(a.charCodeAt(0));t[o]=o}}}(e,t)}function $a(e,t){return xi(e.value,(function(e){if("number"===typeof e)return Fi(t,e);var n=e;return void 0!==xi(t,(function(e){return n.from<=e&&e<=n.to}))}))}function eo(e){var t=e.quantifier;return!(!t||0!==t.atLeast)||!!e.value&&(C(e.value)?mi(e.value,eo):eo(e.value))}var to=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this)).targetCharCodes=e,r.found=!1,r}return(0,m.Z)(n,[{key:"visitChildren",value:function(e){if(!0!==this.found){switch(e.type){case"Lookahead":return void this.visitLookahead(e);case"NegativeLookahead":return void this.visitNegativeLookahead(e)}(0,h.Z)((0,p.Z)(n.prototype),"visitChildren",this).call(this,e)}}},{key:"visitCharacter",value:function(e){Fi(this.targetCharCodes,e.value)&&(this.found=!0)}},{key:"visitSet",value:function(e){e.complement?void 0===$a(e,this.targetCharCodes)&&(this.found=!0):void 0!==$a(e,this.targetCharCodes)&&(this.found=!0)}}]),n}(Ha);function no(e,t){if(t instanceof RegExp){var n=Wa(t),r=new to(e);return r.visit(n),r.found}return void 0!==xi(t,(function(t){return Fi(e,t.charCodeAt(0))}))}var ro="PATTERN",io="defaultMode",ao="modes",oo="boolean"===typeof new RegExp("(?:)").sticky;function so(e,t){var n,r=(t=oi(t,{useSticky:oo,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:function(e,t){return t()}})).tracer;r("initCharCodeToOptimizedIndexMap",(function(){!function(){if(Zi(_o)){_o=new Array(65536);for(var e=0;e<65536;e++)_o[e]=e>255?255+~~(e/255):e}}()})),r("Reject Lexer.NA",(function(){n=qi(e,(function(e){return e[ro]===No.NA}))}));var i,a,o,s,l,u,c,f,d,h,p,v=!1;r("Transform Patterns",(function(){v=!1,i=Si(n,(function(e){var n=e[ro];if(ji(n)){var r=n.source;return 1!==r.length||"^"===r||"$"===r||"."===r||n.ignoreCase?2!==r.length||"\\"!==r[0]||Fi(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],r[1])?t.useSticky?ho(n):fo(n):r[1]:r}if(Y(n))return v=!0,{exec:n};if("object"===typeof n)return v=!0,n;if("string"===typeof n){if(1===n.length)return n;var i=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),a=new RegExp(i);return t.useSticky?ho(a):fo(a)}throw Error("non exhaustive match")}))})),r("misc mapping",(function(){a=Si(n,(function(e){return e.tokenTypeIdx})),o=Si(n,(function(e){var t=e.GROUP;if(t!==No.SKIPPED){if(Di(t))return t;if(Vi(t))return!1;throw Error("non exhaustive match")}})),s=Si(n,(function(e){var t=e.LONGER_ALT;if(t)return C(t)?Si(t,(function(e){return Ui(n,e)})):[Ui(n,t)]})),l=Si(n,(function(e){return e.PUSH_MODE})),u=Si(n,(function(e){return Ri(e,"POP_MODE")}))})),r("Line Terminator Handling",(function(){var e=Ao(t.lineTerminatorCharacters);c=Si(n,(function(e){return!1})),"onlyOffset"!==t.positionTracking&&(c=Si(n,(function(t){return Ri(t,"LINE_BREAKS")?!!t.LINE_BREAKS:!1===yo(t,e)&&no(e,t.PATTERN)})))})),r("Misc Mapping #2",(function(){f=Si(n,vo),d=Si(i,mo),h=Ji(n,(function(e,t){var n=t.GROUP;return Di(n)&&n!==No.SKIPPED&&(e[n]=[]),e}),{}),p=Si(i,(function(e,t){return{pattern:i[t],longerAlt:s[t],canLineTerminator:c[t],isCustom:f[t],short:d[t],group:o[t],push:l[t],pop:u[t],tokenTypeIdx:a[t],tokenType:n[t]}}))}));var m=!0,g=[];return t.safeMode||r("First Char Optimization",(function(){g=Ji(n,(function(e,n,r){if("string"===typeof n.PATTERN){var i=wo(n.PATTERN.charCodeAt(0));bo(e,i,p[r])}else if(C(n.START_CHARS_HINT)){var a;hi(n.START_CHARS_HINT,(function(t){var n=wo("string"===typeof t?t.charCodeAt(0):t);a!==n&&(a=n,bo(e,n,p[r]))}))}else if(ji(n.PATTERN))if(n.PATTERN.unicode)m=!1,t.ensureOptimizations&&ia("".concat(Ya,"\tUnable to analyze < ").concat(n.PATTERN.toString()," > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE"));else{var o=Ka(n.PATTERN,t.ensureOptimizations);Zi(o)&&(m=!1),hi(o,(function(t){bo(e,t,p[r])}))}else t.ensureOptimizations&&ia("".concat(Ya,"\tTokenType: <").concat(n.name,"> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE")),m=!1;return e}),[])})),{emptyGroups:h,patternIdxToConfig:p,charCodeToPatternIdxToConfig:g,hasCustom:v,canBeOptimized:m}}function lo(e,t){var n=[],r=function(e){var t=yi(e,(function(e){return!Ri(e,ro)})),n=Si(t,(function(e){return{message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:Po.MISSING_PATTERN,tokenTypes:[e]}})),r=ui(e,t);return{errors:n,valid:r}}(e);n=n.concat(r.errors);var i=function(e){var t=yi(e,(function(e){var t=e[ro];return!ji(t)&&!Y(t)&&!Ri(t,"exec")&&!Di(t)})),n=Si(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:Po.INVALID_PATTERN,tokenTypes:[e]}})),r=ui(e,t);return{errors:n,valid:r}}(r.valid),a=i.valid;return n=(n=n.concat(i.errors)).concat(function(e){var t=[],n=yi(e,(function(e){return ji(e[ro])}));return t=t.concat(function(e){var t=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){var e;return(0,v.Z)(this,n),(e=t.apply(this,arguments)).found=!1,e}return(0,m.Z)(n,[{key:"visitEndAnchor",value:function(e){this.found=!0}}]),n}(Ha),n=yi(e,(function(e){var n=e.PATTERN;try{var r=Wa(n),i=new t;return i.visit(r),i.found}catch(a){return uo.test(n.source)}})),r=Si(n,(function(e){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:Po.EOI_ANCHOR_FOUND,tokenTypes:[e]}}));return r}(n)),t=t.concat(function(e){var t=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){var e;return(0,v.Z)(this,n),(e=t.apply(this,arguments)).found=!1,e}return(0,m.Z)(n,[{key:"visitStartAnchor",value:function(e){this.found=!0}}]),n}(Ha),n=yi(e,(function(e){var n=e.PATTERN;try{var r=Wa(n),i=new t;return i.visit(r),i.found}catch(a){return co.test(n.source)}})),r=Si(n,(function(e){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:Po.SOI_ANCHOR_FOUND,tokenTypes:[e]}}));return r}(n)),t=t.concat(function(e){var t=yi(e,(function(e){var t=e[ro];return t instanceof RegExp&&(t.multiline||t.global)})),n=Si(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:Po.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[e]}}));return n}(n)),t=t.concat(function(e){var t=[],n=Si(e,(function(n){return Ji(e,(function(e,r){return n.PATTERN.source!==r.PATTERN.source||Fi(t,r)||r.PATTERN===No.NA||(t.push(r),e.push(r)),e}),[])})),r=Si(yi(n=sr(n),(function(e){return e.length>1})),(function(e){var t=Si(e,(function(e){return e.name})),n=_i(e).PATTERN;return{message:"The same RegExp pattern ->".concat(n,"<-has been used in all of the following Token Types: ").concat(t.join(", ")," <-"),type:Po.DUPLICATE_PATTERNS_FOUND,tokenTypes:e}}));return r}(n)),t=t.concat(function(e){var t=yi(e,(function(e){return e.PATTERN.test("")})),n=Si(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' must not match an empty string",type:Po.EMPTY_MATCH_PATTERN,tokenTypes:[e]}}));return n}(n)),t}(a)),n=n.concat(function(e){var t=yi(e,(function(e){if(!Ri(e,"GROUP"))return!1;var t=e.GROUP;return t!==No.SKIPPED&&t!==No.NA&&!Di(t)})),n=Si(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:Po.INVALID_GROUP_TYPE_FOUND,tokenTypes:[e]}}));return n}(a)),n=n.concat(function(e,t){var n=yi(e,(function(e){return void 0!==e.PUSH_MODE&&!Fi(t,e.PUSH_MODE)})),r=Si(n,(function(e){return{message:"Token Type: ->".concat(e.name,"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->").concat(e.PUSH_MODE,"<-which does not exist"),type:Po.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[e]}}));return r}(a,t)),n=n.concat(function(e){var t=[],n=Ji(e,(function(e,t,n){var r,i=t.PATTERN;return i===No.NA||(Di(i)?e.push({str:i,idx:n,tokenType:t}):ji(i)&&(r=i,void 0===xi([".","\\","[","]","|","^","$","(",")","?","*","+","{"],(function(e){return-1!==r.source.indexOf(e)})))&&e.push({str:i.source,idx:n,tokenType:t})),e}),[]);return hi(e,(function(e,r){hi(n,(function(n){var i=n.str,a=n.idx,o=n.tokenType;if(r<a&&function(e,t){if(ji(t)){var n=t.exec(e);return null!==n&&0===n.index}if(Y(t))return t(e,0,[],{});if(Ri(t,"exec"))return t.exec(e,0,[],{});if("string"===typeof t)return t===e;throw Error("non exhaustive match")}(i,e.PATTERN)){var s="Token: ->".concat(o.name,"<- can never be matched.\nBecause it appears AFTER the Token Type ->").concat(e.name,"<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE");t.push({message:s,type:Po.UNREACHABLE_PATTERN,tokenTypes:[e,o]})}}))})),t}(a)),n}var uo=/[^\\][$]/;var co=/[^\\[][\^]|^\^/;function fo(e){var t=e.ignoreCase?"i":"";return new RegExp("^(?:".concat(e.source,")"),t)}function ho(e){var t=e.ignoreCase?"iy":"y";return new RegExp("".concat(e.source),t)}function po(e,t,n){var r=[],i=!1,a=qi(sr(zt(Li(e.modes))),(function(e){return e[ro]===No.NA})),o=Ao(n);return t&&hi(a,(function(e){var t=yo(e,o);if(!1!==t){var n=function(e,t){if(t.issue===Po.IDENTIFY_TERMINATOR)return"Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <".concat(e.name,"> Token Type\n\t Root cause: ").concat(t.errMsg,".\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR");if(t.issue===Po.CUSTOM_LINE_BREAK)return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <".concat(e.name,"> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK");throw Error("non exhaustive match")}(e,t),a={message:n,type:t.issue,tokenType:e};r.push(a)}else Ri(e,"LINE_BREAKS")?!0===e.LINE_BREAKS&&(i=!0):no(o,e.PATTERN)&&(i=!0)})),t&&!i&&r.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:Po.NO_LINE_BREAKS_FLAGS}),r}function vo(e){var t=e.PATTERN;if(ji(t))return!1;if(Y(t))return!0;if(Ri(t,"exec"))return!0;if(Di(t))return!1;throw Error("non exhaustive match")}function mo(e){return!(!Di(e)||1!==e.length)&&e.charCodeAt(0)}var go={test:function(e){for(var t=e.length,n=this.lastIndex;n<t;n++){var r=e.charCodeAt(n);if(10===r)return this.lastIndex=n+1,!0;if(13===r)return 10===e.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function yo(e,t){if(Ri(e,"LINE_BREAKS"))return!1;if(ji(e.PATTERN)){try{no(t,e.PATTERN)}catch(n){return{issue:Po.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}if(Di(e.PATTERN))return!1;if(vo(e))return{issue:Po.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function Ao(e){return Si(e,(function(e){return Di(e)?e.charCodeAt(0):e}))}function bo(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}var xo=256,_o=[];function wo(e){return e<xo?e:_o[e]}function So(e,t){var n=e.tokenTypeIdx;return n===t.tokenTypeIdx||!0===t.isParent&&!0===t.categoryMatchesMap[n]}function Eo(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}var Co=1,To={};function Mo(e){var t=function(e){var t=or(e),n=e,r=!0;for(;r;){n=sr(zt(Si(n,(function(e){return e.CATEGORIES}))));var i=ui(n,t);t=t.concat(i),Zi(i)?r=!1:n=i}return t}(e);!function(e){hi(e,(function(e){ko(e)||(To[Co]=e,e.tokenTypeIdx=Co++),Bo(e)&&!C(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Bo(e)||(e.CATEGORIES=[]),Ri(e,"categoryMatches")||(e.categoryMatches=[]),function(e){return Ri(e,"categoryMatchesMap")}(e)||(e.categoryMatchesMap={})}))}(t),function(e){hi(e,(function(e){Io([],e)}))}(t),function(e){hi(e,(function(e){e.categoryMatches=[],hi(e.categoryMatchesMap,(function(t,n){e.categoryMatches.push(To[n].tokenTypeIdx)}))}))}(t),hi(t,(function(e){e.isParent=e.categoryMatches.length>0}))}function Io(e,t){hi(e,(function(e){t.categoryMatchesMap[e.tokenTypeIdx]=!0})),hi(t.CATEGORIES,(function(n){var r=e.concat(t);Fi(r,n)||Io(r,n)}))}function ko(e){return Ri(e,"tokenTypeIdx")}function Bo(e){return Ri(e,"CATEGORIES")}function Ro(e){return Ri(e,"tokenTypeIdx")}var Po,Do;(Do=Po||(Po={}))[Do.MISSING_PATTERN=0]="MISSING_PATTERN",Do[Do.INVALID_PATTERN=1]="INVALID_PATTERN",Do[Do.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",Do[Do.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",Do[Do.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",Do[Do.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",Do[Do.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",Do[Do.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",Do[Do.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",Do[Do.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",Do[Do.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",Do[Do.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",Do[Do.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",Do[Do.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",Do[Do.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",Do[Do.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",Do[Do.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",Do[Do.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE";var Lo={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:{buildUnableToPopLexerModeMessage:function(e){return"Unable to pop Lexer Mode after encountering Token ->".concat(e.image,"<- The Mode Stack is empty")},buildUnexpectedCharactersMessage:function(e,t,n,r,i){return"unexpected character: ->".concat(e.charAt(t),"<- at offset: ").concat(t,", skipped ").concat(n," characters.")}},traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Lo);var No=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lo;if((0,v.Z)(this,e),this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=function(e,t){if(!0===n.traceInitPerf){n.traceInitIndent++;var r=new Array(n.traceInitIndent+1).join("\t");n.traceInitIndent<n.traceInitMaxIdent&&console.log("".concat(r,"--\x3e <").concat(e,">"));var i=oa(t),a=i.time,o=i.value,s=a>10?console.warn:console.log;return n.traceInitIndent<n.traceInitMaxIdent&&s("".concat(r,"<-- <").concat(e,"> time: ").concat(a,"ms")),n.traceInitIndent--,o}return t()},"boolean"===typeof r)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=ct({},Lo,r);var i=this.config.traceInitPerf;!0===i?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"===typeof i&&(this.traceInitMaxIdent=i,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(function(){var e,i=!0;n.TRACE_INIT("Lexer Config handling",(function(){if(n.config.lineTerminatorsPattern===Lo.lineTerminatorsPattern)n.config.lineTerminatorsPattern=go;else if(n.config.lineTerminatorCharacters===Lo.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(r.safeMode&&r.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');n.trackStartLines=/full|onlyStart/i.test(n.config.positionTracking),n.trackEndLines=/full/i.test(n.config.positionTracking),C(t)?e={modes:{defaultMode:or(t)},defaultMode:io}:(i=!1,e=or(t))})),!1===n.config.skipValidations&&(n.TRACE_INIT("performRuntimeChecks",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(function(e,t,n){var r=[];return Ri(e,io)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+io+"> property in its definition\n",type:Po.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),Ri(e,ao)||r.push({message:"A MultiMode Lexer cannot be initialized without a <modes> property in its definition\n",type:Po.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),Ri(e,ao)&&Ri(e,io)&&!Ri(e.modes,e.defaultMode)&&r.push({message:"A MultiMode Lexer cannot be initialized with a ".concat(io,": <").concat(e.defaultMode,">which does not exist\n"),type:Po.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),Ri(e,ao)&&hi(e.modes,(function(e,t){hi(e,(function(n,i){Vi(n)?r.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:<".concat(t,"> at index: <").concat(i,">\n"),type:Po.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED}):Ri(n,"LONGER_ALT")&&hi(C(n.LONGER_ALT)?n.LONGER_ALT:[n.LONGER_ALT],(function(i){Vi(i)||Fi(e,i)||r.push({message:"A MultiMode Lexer cannot be initialized with a longer_alt <".concat(i.name,"> on token <").concat(n.name,"> outside of mode <").concat(t,">\n"),type:Po.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})}))}))})),r}(e,n.trackStartLines,n.config.lineTerminatorCharacters))})),n.TRACE_INIT("performWarningRuntimeChecks",(function(){n.lexerDefinitionWarning=n.lexerDefinitionWarning.concat(po(e,n.trackStartLines,n.config.lineTerminatorCharacters))}))),e.modes=e.modes?e.modes:{},hi(e.modes,(function(t,n){e.modes[n]=qi(t,(function(e){return Vi(e)}))}));var a=st(e.modes);if(hi(e.modes,(function(e,t){n.TRACE_INIT("Mode: <".concat(t,"> processing"),(function(){var i;(n.modes.push(t),!1===n.config.skipValidations&&n.TRACE_INIT("validatePatterns",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(lo(e,a))})),Zi(n.lexerDefinitionErrors))&&(Mo(e),n.TRACE_INIT("analyzeTokenTypes",(function(){i=so(e,{lineTerminatorCharacters:n.config.lineTerminatorCharacters,positionTracking:r.positionTracking,ensureOptimizations:r.ensureOptimizations,safeMode:r.safeMode,tracer:n.TRACE_INIT})})),n.patternIdxToConfig[t]=i.patternIdxToConfig,n.charCodeToPatternIdxToConfig[t]=i.charCodeToPatternIdxToConfig,n.emptyGroups=ct({},n.emptyGroups,i.emptyGroups),n.hasCustom=i.hasCustom||n.hasCustom,n.canModeBeOptimized[t]=i.canBeOptimized)}))})),n.defaultMode=e.defaultMode,!Zi(n.lexerDefinitionErrors)&&!n.config.deferDefinitionErrorsHandling){var o=Si(n.lexerDefinitionErrors,(function(e){return e.message})).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+o)}hi(n.lexerDefinitionWarning,(function(e){aa(e.message)})),n.TRACE_INIT("Choosing sub-methods implementations",(function(){if(oo?(n.chopInput=H,n.match=n.matchWithTest):(n.updateLastIndex=fe,n.match=n.matchWithExec),i&&(n.handleModes=fe),!1===n.trackStartLines&&(n.computeNewColumn=H),!1===n.trackEndLines&&(n.updateTokenEndLineColumnLocation=fe),/full/i.test(n.config.positionTracking))n.createTokenInstance=n.createFullToken;else if(/onlyStart/i.test(n.config.positionTracking))n.createTokenInstance=n.createStartOnlyToken;else{if(!/onlyOffset/i.test(n.config.positionTracking))throw Error('Invalid <positionTracking> config option: "'.concat(n.config.positionTracking,'"'));n.createTokenInstance=n.createOffsetOnlyToken}n.hasCustom?(n.addToken=n.addTokenUsingPush,n.handlePayload=n.handlePayloadWithCustom):(n.addToken=n.addTokenUsingMemberAccess,n.handlePayload=n.handlePayloadNoCustom)})),n.TRACE_INIT("Failed Optimization Warnings",(function(){var e=Ji(n.canModeBeOptimized,(function(e,t,n){return!1===t&&e.push(n),e}),[]);if(r.ensureOptimizations&&!Zi(e))throw Error("Lexer Modes: < ".concat(e.join(", "),' > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.'))})),n.TRACE_INIT("clearRegExpParserCache",(function(){ja={}})),n.TRACE_INIT("toFastProperties",(function(){sa(n)}))}))}return(0,m.Z)(e,[{key:"tokenize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultMode;if(!Zi(this.lexerDefinitionErrors)){var n=Si(this.lexerDefinitionErrors,(function(e){return e.message})).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+n)}return this.tokenizeInternal(e,t)}},{key:"tokenizeInternal",value:function(e,t){var n,r,i,a,o,s,l,u,c,f,d,h,p,v,m,g,y=this,A=e,b=A.length,x=0,_=0,w=this.hasCustom?0:Math.floor(e.length/10),S=new Array(w),E=[],T=this.trackStartLines?1:void 0,M=this.trackStartLines?1:void 0,I=function(e){var t={};return hi(st(e),(function(n){var r=e[n];if(!C(r))throw Error("non exhaustive match");t[n]=[]})),t}(this.emptyGroups),k=this.trackStartLines,B=this.config.lineTerminatorsPattern,R=0,P=[],D=[],L=[],N=[];function F(){return P}function O(e){var t=wo(e),n=D[t];return void 0===n?N:n}Object.freeze(N);var U,z=function(e){if(1===L.length&&void 0===e.tokenType.PUSH_MODE){var t=y.config.errorMessageProvider.buildUnableToPopLexerModeMessage(e);E.push({offset:e.startOffset,line:e.startLine,column:e.startColumn,length:e.image.length,message:t})}else{L.pop();var n=ci(L);P=y.patternIdxToConfig[n],D=y.charCodeToPatternIdxToConfig[n],R=P.length;var r=y.canModeBeOptimized[n]&&!1===y.config.safeMode;g=D&&r?O:F}};function G(e){L.push(e),D=this.charCodeToPatternIdxToConfig[e],P=this.patternIdxToConfig[e],R=P.length,R=P.length;var t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;g=D&&t?O:F}G.call(this,t);for(var Q=this.config.recoveryEnabled;x<b;){s=null;var Z=A.charCodeAt(x),H=g(Z),j=H.length;for(n=0;n<j;n++){var V=(U=H[n]).pattern;l=null;var W=U.short;if(!1!==W?Z===W&&(s=V):!0===U.isCustom?null!==(m=V.exec(A,x,S,I))?(s=m[0],void 0!==m.payload&&(l=m.payload)):s=null:(this.updateLastIndex(V,x),s=this.match(V,e,x)),null!==s){if(void 0!==(o=U.longerAlt)){var X=o.length;for(i=0;i<X;i++){var Y=P[o[i]],K=Y.pattern;if(u=null,!0===Y.isCustom?null!==(m=K.exec(A,x,S,I))?(a=m[0],void 0!==m.payload&&(u=m.payload)):a=null:(this.updateLastIndex(K,x),a=this.match(K,e,x)),a&&a.length>s.length){s=a,l=u,U=Y;break}}}break}}if(null!==s){if(c=s.length,void 0!==(f=U.group)&&(d=U.tokenTypeIdx,h=this.createTokenInstance(s,x,d,U.tokenType,T,M,c),this.handlePayload(h,l),!1===f?_=this.addToken(S,_,h):I[f].push(h)),e=this.chopInput(e,c),x+=c,M=this.computeNewColumn(M,c),!0===k&&!0===U.canLineTerminator){var J=0,q=void 0,$=void 0;B.lastIndex=0;do{!0===(q=B.test(s))&&($=B.lastIndex-1,J++)}while(!0===q);0!==J&&(T+=J,M=c-$,this.updateTokenEndLineColumnLocation(h,f,$,J,T,M,c))}this.handleModes(U,z,G,h)}else{for(var ee=x,te=T,ne=M,re=!1===Q;!1===re&&x<b;)for(e=this.chopInput(e,1),x++,r=0;r<R;r++){var ie=P[r],ae=ie.pattern,oe=ie.short;if(!1!==oe?A.charCodeAt(x)===oe&&(re=!0):!0===ie.isCustom?re=null!==ae.exec(A,x,S,I):(this.updateLastIndex(ae,x),re=null!==ae.exec(e)),!0===re)break}if(p=x-ee,M=this.computeNewColumn(M,p),v=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(A,ee,p,te,ne),E.push({offset:ee,line:te,column:ne,length:p,message:v}),!1===Q)break}}return this.hasCustom||(S.length=_),{tokens:S,groups:I,errors:E}}},{key:"handleModes",value:function(e,t,n,r){if(!0===e.pop){var i=e.push;t(r),void 0!==i&&n.call(this,i)}else void 0!==e.push&&n.call(this,e.push)}},{key:"chopInput",value:function(e,t){return e.substring(t)}},{key:"updateLastIndex",value:function(e,t){e.lastIndex=t}},{key:"updateTokenEndLineColumnLocation",value:function(e,t,n,r,i,a,o){var s,l;void 0!==t&&(l=(s=n===o-1)?-1:0,1===r&&!0===s||(e.endLine=i+l,e.endColumn=a-1-l))}},{key:"computeNewColumn",value:function(e,t){return e+t}},{key:"createOffsetOnlyToken",value:function(e,t,n,r){return{image:e,startOffset:t,tokenTypeIdx:n,tokenType:r}}},{key:"createStartOnlyToken",value:function(e,t,n,r,i,a){return{image:e,startOffset:t,startLine:i,startColumn:a,tokenTypeIdx:n,tokenType:r}}},{key:"createFullToken",value:function(e,t,n,r,i,a,o){return{image:e,startOffset:t,endOffset:t+o-1,startLine:i,endLine:i,startColumn:a,endColumn:a+o-1,tokenTypeIdx:n,tokenType:r}}},{key:"addTokenUsingPush",value:function(e,t,n){return e.push(n),t}},{key:"addTokenUsingMemberAccess",value:function(e,t,n){return e[t]=n,++t}},{key:"handlePayloadNoCustom",value:function(e,t){}},{key:"handlePayloadWithCustom",value:function(e,t){null!==t&&(e.payload=t)}},{key:"matchWithTest",value:function(e,t,n){return!0===e.test(t)?t.substring(n,e.lastIndex):null}},{key:"matchWithExec",value:function(e,t){var n=e.exec(t);return null!==n?n[0]:null}}]),e}();function Fo(e){return Oo(e)?e.LABEL:e.name}function Oo(e){return Di(e.LABEL)&&""!==e.LABEL}No.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",No.NA=/NOT_APPLICABLE/;var Uo="parent",zo="categories",Go="label",Qo="group",Zo="push_mode",Ho="pop_mode",jo="longer_alt",Vo="line_breaks",Wo="start_chars_hint";function Xo(e){return function(e){var t=e.pattern,n={};n.name=e.name,Vi(t)||(n.PATTERN=t);if(Ri(e,Uo))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";Ri(e,zo)&&(n.CATEGORIES=e[zo]);Mo([n]),Ri(e,Go)&&(n.LABEL=e[Go]);Ri(e,Qo)&&(n.GROUP=e[Qo]);Ri(e,Ho)&&(n.POP_MODE=e[Ho]);Ri(e,Zo)&&(n.PUSH_MODE=e[Zo]);Ri(e,jo)&&(n.LONGER_ALT=e[jo]);Ri(e,Vo)&&(n.LINE_BREAKS=e[Vo]);Ri(e,Wo)&&(n.START_CHARS_HINT=e[Wo]);return n}(e)}var Yo=Xo({name:"EOF",pattern:No.NA});function Ko(e,t,n,r,i,a,o,s){return{image:t,startOffset:n,endOffset:r,startLine:i,endLine:a,startColumn:o,endColumn:s,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}Mo([Yo]);var Jo={buildMismatchTokenMessage:function(e){var t=e.expected,n=e.actual,r=(e.previous,e.ruleName,Oo(t)?"--\x3e ".concat(Fo(t)," <--"):"token of type --\x3e ".concat(t.name," <--"));return"Expecting ".concat(r," but found --\x3e '").concat(n.image,"' <--")},buildNotAllInputParsedMessage:function(e){var t=e.firstRedundant;e.ruleName;return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage:function(e){var t=e.expectedPathsPerAlt,n=e.actual,r=(e.previous,e.customUserDescription),i=(e.ruleName,"Expecting: "),a="\nbut found: '"+_i(n).image+"'";if(r)return i+r+a;var o=Si(Ji(t,(function(e,t){return e.concat(t)}),[]),(function(e){return"[".concat(Si(e,(function(e){return Fo(e)})).join(", "),"]")})),s=Si(o,(function(e,t){return"  ".concat(t+1,". ").concat(e)}));return i+"one of these possible Token sequences:\n".concat(s.join("\n"))+a},buildEarlyExitMessage:function(e){var t=e.expectedIterationPaths,n=e.actual,r=e.customUserDescription,i=(e.ruleName,"Expecting: "),a="\nbut found: '"+_i(n).image+"'";if(r)return i+r+a;var o=Si(t,(function(e){return"[".concat(Si(e,(function(e){return Fo(e)})).join(","),"]")}));return i+"expecting at least one iteration which starts with one of these possible Token sequences::\n  <".concat(o.join(" ,"),">")+a}};Object.freeze(Jo);var qo={buildRuleNotFoundError:function(e,t){return"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\ninside top level rule: ->"+e.name+"<-"}},$o={buildDuplicateFoundError:function(e,t){var n,r=e.name,i=_i(t),a=i.idx,o=wa(i),s=(n=i)instanceof Aa?n.terminalType.name:n instanceof ca?n.nonTerminalName:"",l=a>0,u="->".concat(o).concat(l?a:"","<- ").concat(s?"with argument: ->".concat(s,"<-"):"","\n                  appears more than once (").concat(t.length," times) in the top level rule: ->").concat(r,"<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  ");return u=(u=u.replace(/[ \t]+/g," ")).replace(/\s\s+/g,"\n")},buildNamespaceConflictError:function(e){return"Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <".concat(e.name,">.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter.")},buildAlternationPrefixAmbiguityError:function(e){var t=Si(e.prefixPath,(function(e){return Fo(e)})).join(", "),n=0===e.alternation.idx?"":e.alternation.idx;return"Ambiguous alternatives: <".concat(e.ambiguityIndices.join(" ,"),"> due to common lookahead prefix\nin <OR").concat(n,"> inside <").concat(e.topLevelRule.name,"> Rule,\n<").concat(t,"> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details.")},buildAlternationAmbiguityError:function(e){var t=Si(e.prefixPath,(function(e){return Fo(e)})).join(", "),n=0===e.alternation.idx?"":e.alternation.idx,r="Ambiguous Alternatives Detected: <".concat(e.ambiguityIndices.join(" ,"),"> in <OR").concat(n,"> inside <").concat(e.topLevelRule.name,"> Rule,\n<").concat(t,"> may appears as a prefix path in all these alternatives.\n");return r+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details."},buildEmptyRepetitionError:function(e){var t=wa(e.repetition);return 0!==e.repetition.idx&&(t+=e.repetition.idx),"The repetition <".concat(t,"> within Rule <").concat(e.topLevelRule.name,"> can never consume any tokens.\nThis could lead to an infinite loop.")},buildTokenNameError:function(e){return"deprecated"},buildEmptyAlternationError:function(e){return"Ambiguous empty alternative: <".concat(e.emptyChoiceIdx+1,"> in <OR").concat(e.alternation.idx,"> inside <").concat(e.topLevelRule.name,"> Rule.\nOnly the last alternative may be an empty alternative.")},buildTooManyAlternativesError:function(e){return"An Alternation cannot have more than 256 alternatives:\n<OR".concat(e.alternation.idx,"> inside <").concat(e.topLevelRule.name,"> Rule.\n has ").concat(e.alternation.definition.length+1," alternatives.")},buildLeftRecursionError:function(e){var t=e.topLevelRule.name,n=Si(e.leftRecursionPath,(function(e){return e.name})),r="".concat(t," --\x3e ").concat(n.concat([t]).join(" --\x3e "));return"Left Recursion found in grammar.\nrule: <".concat(t,"> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n ").concat(r,"\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.")},buildInvalidRuleNameError:function(e){return"deprecated"},buildDuplicateRuleNameError:function(e){var t;return t=e.topLevelRule instanceof fa?e.topLevelRule.name:e.topLevelRule,"Duplicate definition, rule: ->".concat(t,"<- is already defined in the grammar: ->").concat(e.grammarName,"<-")}};var es,ts,ns=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r){var i;return(0,v.Z)(this,n),(i=t.call(this)).nameToTopRule=e,i.errMsgProvider=r,i.errors=[],i}return(0,m.Z)(n,[{key:"resolveRefs",value:function(){var e=this;hi(Li(this.nameToTopRule),(function(t){e.currTopLevel=t,t.accept(e)}))}},{key:"visitNonTerminal",value:function(e){var t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{var n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:n,type:Rl.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}]),n}(xa),rs=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r){var i;return(0,v.Z)(this,n),(i=t.call(this)).topProd=e,i.path=r,i.possibleTokTypes=[],i.nextProductionName="",i.nextProductionOccurrence=0,i.found=!1,i.isAtEndOfPath=!1,i}return(0,m.Z)(n,[{key:"startWalking",value:function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=or(this.path.ruleStack).reverse(),this.occurrenceStack=or(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}},{key:"walk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.found||(0,h.Z)((0,p.Z)(n.prototype),"walk",this).call(this,e,t)}},{key:"walkProdRef",value:function(e,t,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){var r=t.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,r)}}},{key:"updateExpectedNext",value:function(){Zi(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}]),n}(Sa),is=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r){var i;return(0,v.Z)(this,n),(i=t.call(this,e,r)).path=r,i.nextTerminalName="",i.nextTerminalOccurrence=0,i.nextTerminalName=i.path.lastTok.name,i.nextTerminalOccurrence=i.path.lastTokOccurrence,i}return(0,m.Z)(n,[{key:"walkTerminal",value:function(e,t,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){var r=t.concat(n),i=new da({definition:r});this.possibleTokTypes=Ca(i),this.found=!0}}}]),n}(rs),as=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r){var i;return(0,v.Z)(this,n),(i=t.call(this)).topRule=e,i.occurrence=r,i.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},i}return(0,m.Z)(n,[{key:"startWalking",value:function(){return this.walk(this.topRule),this.result}}]),n}(Sa),os=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,m.Z)(n,[{key:"walkMany",value:function(e,t,r){if(e.idx===this.occurrence){var i=_i(t.concat(r));this.result.isEndOfRule=void 0===i,i instanceof Aa&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else(0,h.Z)((0,p.Z)(n.prototype),"walkMany",this).call(this,e,t,r)}}]),n}(as),ss=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,m.Z)(n,[{key:"walkManySep",value:function(e,t,r){if(e.idx===this.occurrence){var i=_i(t.concat(r));this.result.isEndOfRule=void 0===i,i instanceof Aa&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else(0,h.Z)((0,p.Z)(n.prototype),"walkManySep",this).call(this,e,t,r)}}]),n}(as),ls=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,m.Z)(n,[{key:"walkAtLeastOne",value:function(e,t,r){if(e.idx===this.occurrence){var i=_i(t.concat(r));this.result.isEndOfRule=void 0===i,i instanceof Aa&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else(0,h.Z)((0,p.Z)(n.prototype),"walkAtLeastOne",this).call(this,e,t,r)}}]),n}(as),us=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,m.Z)(n,[{key:"walkAtLeastOneSep",value:function(e,t,r){if(e.idx===this.occurrence){var i=_i(t.concat(r));this.result.isEndOfRule=void 0===i,i instanceof Aa&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else(0,h.Z)((0,p.Z)(n.prototype),"walkAtLeastOneSep",this).call(this,e,t,r)}}]),n}(as);function cs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n=or(n);var r=[],i=0;function a(a){var o=cs(a.concat(fi(e,i+1)),t,n);return r.concat(o)}for(;n.length<t&&i<e.length;){var o=e[i];if(o instanceof da)return a(o.definition);if(o instanceof ca)return a(o.definition);if(o instanceof ha)r=a(o.definition);else{if(o instanceof pa)return a(o.definition.concat([new ma({definition:o.definition})]));if(o instanceof va)return a([new da({definition:o.definition}),new ma({definition:[new Aa({terminalType:o.separator})].concat(o.definition)})]);if(o instanceof ga){var s=o.definition.concat([new ma({definition:[new Aa({terminalType:o.separator})].concat(o.definition)})]);r=a(s)}else if(o instanceof ma){var l=o.definition.concat([new ma({definition:o.definition})]);r=a(l)}else{if(o instanceof ya)return hi(o.definition,(function(e){!1===Zi(e.definition)&&(r=a(e.definition))})),r;if(!(o instanceof Aa))throw Error("non exhaustive match");n.push(o.terminalType)}}i++}return r.push({partialPath:n,suffixDef:fi(e,i)}),r}function fs(e,t,n,r){var i="EXIT_NONE_TERMINAL",a=[i],o="EXIT_ALTERNATIVE",s=!1,l=t.length,u=l-r-1,c=[],f=[];for(f.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!Zi(f);){var d=f.pop();if(d!==o){var h=d.def,p=d.idx,v=d.ruleStack,m=d.occurrenceStack;if(!Zi(h)){var g=h[0];if(g===i){var y={idx:p,def:fi(h),ruleStack:di(v),occurrenceStack:di(m)};f.push(y)}else if(g instanceof Aa)if(p<l-1){var A=p+1;if(n(t[A],g.terminalType)){var b={idx:A,def:fi(h),ruleStack:v,occurrenceStack:m};f.push(b)}}else{if(p!==l-1)throw Error("non exhaustive match");c.push({nextTokenType:g.terminalType,nextTokenOccurrence:g.idx,ruleStack:v,occurrenceStack:m}),s=!0}else if(g instanceof ca){var x=or(v);x.push(g.nonTerminalName);var _=or(m);_.push(g.idx);var w={idx:p,def:g.definition.concat(a,fi(h)),ruleStack:x,occurrenceStack:_};f.push(w)}else if(g instanceof ha){var S={idx:p,def:fi(h),ruleStack:v,occurrenceStack:m};f.push(S),f.push(o);var E={idx:p,def:g.definition.concat(fi(h)),ruleStack:v,occurrenceStack:m};f.push(E)}else if(g instanceof pa){var C=new ma({definition:g.definition,idx:g.idx}),T={idx:p,def:g.definition.concat([C],fi(h)),ruleStack:v,occurrenceStack:m};f.push(T)}else if(g instanceof va){var M=new Aa({terminalType:g.separator}),I=new ma({definition:[M].concat(g.definition),idx:g.idx}),k={idx:p,def:g.definition.concat([I],fi(h)),ruleStack:v,occurrenceStack:m};f.push(k)}else if(g instanceof ga){var B={idx:p,def:fi(h),ruleStack:v,occurrenceStack:m};f.push(B),f.push(o);var R=new Aa({terminalType:g.separator}),P=new ma({definition:[R].concat(g.definition),idx:g.idx}),D={idx:p,def:g.definition.concat([P],fi(h)),ruleStack:v,occurrenceStack:m};f.push(D)}else if(g instanceof ma){var L={idx:p,def:fi(h),ruleStack:v,occurrenceStack:m};f.push(L),f.push(o);var N=new ma({definition:g.definition,idx:g.idx}),F={idx:p,def:g.definition.concat([N],fi(h)),ruleStack:v,occurrenceStack:m};f.push(F)}else if(g instanceof ya)for(var O=g.definition.length-1;O>=0;O--){var U={idx:p,def:g.definition[O].definition.concat(fi(h)),ruleStack:v,occurrenceStack:m};f.push(U),f.push(o)}else if(g instanceof da)f.push({idx:p,def:g.definition.concat(fi(h)),ruleStack:v,occurrenceStack:m});else{if(!(g instanceof fa))throw Error("non exhaustive match");f.push(ds(g,p,v,m))}}}else s&&ci(f).idx<=u&&f.pop()}return c}function ds(e,t,n,r){var i=or(n);i.push(e.name);var a=or(r);return a.push(1),{idx:t,def:e.definition,ruleStack:i,occurrenceStack:a}}function hs(e){if(e instanceof ha||"Option"===e)return es.OPTION;if(e instanceof ma||"Repetition"===e)return es.REPETITION;if(e instanceof pa||"RepetitionMandatory"===e)return es.REPETITION_MANDATORY;if(e instanceof va||"RepetitionMandatoryWithSeparator"===e)return es.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof ga||"RepetitionWithSeparator"===e)return es.REPETITION_WITH_SEPARATOR;if(e instanceof ya||"Alternation"===e)return es.ALTERNATION;throw Error("non exhaustive match")}function ps(e,t,n,r){var i=e.length,a=mi(e,(function(e){return mi(e,(function(e){return 1===e.length}))}));if(t)return function(t){for(var r=Si(t,(function(e){return e.GATE})),a=0;a<i;a++){var o=e[a],s=o.length,l=r[a];if(void 0===l||!1!==l.call(this))e:for(var u=0;u<s;u++){for(var c=o[u],f=c.length,d=0;d<f;d++){var h=this.LA(d+1);if(!1===n(h,c[d]))continue e}return a}}};if(a&&!r){var o=Ji(Si(e,(function(e){return zt(e)})),(function(e,t,n){return hi(t,(function(t){Ri(e,t.tokenTypeIdx)||(e[t.tokenTypeIdx]=n),hi(t.categoryMatches,(function(t){Ri(e,t)||(e[t]=n)}))})),e}),{});return function(){var e=this.LA(1);return o[e.tokenTypeIdx]}}return function(){for(var t=0;t<i;t++){var r=e[t],a=r.length;e:for(var o=0;o<a;o++){for(var s=r[o],l=s.length,u=0;u<l;u++){var c=this.LA(u+1);if(!1===n(c,s[u]))continue e}return t}}}}function vs(e,t,n){var r=mi(e,(function(e){return 1===e.length})),i=e.length;if(r&&!n){var a=zt(e);if(1===a.length&&Zi(a[0].categoryMatches)){var o=a[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}var s=Ji(a,(function(e,t,n){return e[t.tokenTypeIdx]=!0,hi(t.categoryMatches,(function(t){e[t]=!0})),e}),[]);return function(){var e=this.LA(1);return!0===s[e.tokenTypeIdx]}}return function(){e:for(var n=0;n<i;n++){for(var r=e[n],a=r.length,o=0;o<a;o++){var s=this.LA(o+1);if(!1===t(s,r[o]))continue e}return!0}return!1}}(ts=es||(es={}))[ts.OPTION=0]="OPTION",ts[ts.REPETITION=1]="REPETITION",ts[ts.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",ts[ts.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",ts[ts.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",ts[ts.ALTERNATION=5]="ALTERNATION";var ms=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r,i){var a;return(0,v.Z)(this,n),(a=t.call(this)).topProd=e,a.targetOccurrence=r,a.targetProdType=i,a}return(0,m.Z)(n,[{key:"startWalking",value:function(){return this.walk(this.topProd),this.restDef}},{key:"checkIsTarget",value:function(e,t,n,r){return e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.restDef=n.concat(r),!0)}},{key:"walkOption",value:function(e,t,r){this.checkIsTarget(e,es.OPTION,t,r)||(0,h.Z)((0,p.Z)(n.prototype),"walkOption",this).call(this,e,t,r)}},{key:"walkAtLeastOne",value:function(e,t,r){this.checkIsTarget(e,es.REPETITION_MANDATORY,t,r)||(0,h.Z)((0,p.Z)(n.prototype),"walkOption",this).call(this,e,t,r)}},{key:"walkAtLeastOneSep",value:function(e,t,r){this.checkIsTarget(e,es.REPETITION_MANDATORY_WITH_SEPARATOR,t,r)||(0,h.Z)((0,p.Z)(n.prototype),"walkOption",this).call(this,e,t,r)}},{key:"walkMany",value:function(e,t,r){this.checkIsTarget(e,es.REPETITION,t,r)||(0,h.Z)((0,p.Z)(n.prototype),"walkOption",this).call(this,e,t,r)}},{key:"walkManySep",value:function(e,t,r){this.checkIsTarget(e,es.REPETITION_WITH_SEPARATOR,t,r)||(0,h.Z)((0,p.Z)(n.prototype),"walkOption",this).call(this,e,t,r)}}]),n}(Sa),gs=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r,i){var a;return(0,v.Z)(this,n),(a=t.call(this)).targetOccurrence=e,a.targetProdType=r,a.targetRef=i,a.result=[],a}return(0,m.Z)(n,[{key:"checkIsTarget",value:function(e,t){e.idx!==this.targetOccurrence||this.targetProdType!==t||void 0!==this.targetRef&&e!==this.targetRef||(this.result=e.definition)}},{key:"visitOption",value:function(e){this.checkIsTarget(e,es.OPTION)}},{key:"visitRepetition",value:function(e){this.checkIsTarget(e,es.REPETITION)}},{key:"visitRepetitionMandatory",value:function(e){this.checkIsTarget(e,es.REPETITION_MANDATORY)}},{key:"visitRepetitionMandatoryWithSeparator",value:function(e){this.checkIsTarget(e,es.REPETITION_MANDATORY_WITH_SEPARATOR)}},{key:"visitRepetitionWithSeparator",value:function(e){this.checkIsTarget(e,es.REPETITION_WITH_SEPARATOR)}},{key:"visitAlternation",value:function(e){this.checkIsTarget(e,es.ALTERNATION)}}]),n}(xa);function ys(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=[];return t}function As(e){for(var t=[""],n=0;n<e.length;n++){for(var r=e[n],i=[],a=0;a<t.length;a++){var o=t[a];i.push(o+"_"+r.tokenTypeIdx);for(var s=0;s<r.categoryMatches.length;s++){var l="_"+r.categoryMatches[s];i.push(o+l)}}t=i}return t}function bs(e,t,n){for(var r=0;r<e.length;r++)if(r!==n)for(var i=e[r],a=0;a<t.length;a++){if(!0===i[t[a]])return!1}return!0}function xs(e,t){for(var n=Si(e,(function(e){return cs([e],1)})),r=ys(n.length),i=Si(n,(function(e){var t={};return hi(e,(function(e){hi(As(e.partialPath),(function(e){t[e]=!0}))})),t})),a=n,o=1;o<=t;o++){var s=a;a=ys(s.length);for(var l=function(e){for(var n=s[e],l=0;l<n.length;l++){var u=n[l].partialPath,c=n[l].suffixDef,f=As(u);if(bs(i,f,e)||Zi(c)||u.length===t){var d=r[e];if(!1===Ss(d,u)){d.push(u);for(var h=0;h<f.length;h++){var p=f[h];i[e][p]=!0}}}else{var v=cs(c,o+1,u);a[e]=a[e].concat(v),hi(v,(function(t){hi(As(t.partialPath),(function(t){i[e][t]=!0}))}))}}},u=0;u<s.length;u++)l(u)}return r}function _s(e,t,n,r){var i=new gs(e,es.ALTERNATION,r);return t.accept(i),xs(i.result,n)}function ws(e,t,n,r){var i=new gs(e,n);t.accept(i);var a=i.result,o=new ms(t,e,n).startWalking();return xs([new da({definition:a}),new da({definition:o})],r)}function Ss(e,t){e:for(var n=0;n<e.length;n++){var r=e[n];if(r.length===t.length){for(var i=0;i<r.length;i++){var a=t[i],o=r[i];if(!1===(a===o||void 0!==o.categoryMatchesMap[a.tokenTypeIdx]))continue e}return!0}}return!1}function Es(e){return mi(e,(function(e){return mi(e,(function(e){return mi(e,(function(e){return Zi(e.categoryMatches)}))}))}))}function Cs(e,t,n,r){var i=Ei(e,(function(e){return function(e,t){var n=new Is;e.accept(n);var r=n.allProductions,i=Si(Li(Yi(Ii(r,Ts),(function(e){return e.length>1}))),(function(n){var r=_i(n),i=t.buildDuplicateFoundError(e,n),a=wa(r),o={message:i,type:Rl.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:a,occurrence:r.idx},s=Ms(r);return s&&(o.parameter=s),o}));return i}(e,n)})),a=function(e,t,n){var r=[],i=Si(t,(function(e){return e.name}));return hi(e,(function(e){var t=e.name;if(Fi(i,t)){var a=n.buildNamespaceConflictError(e);r.push({message:a,type:Rl.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:t})}})),r}(e,t,n),o=Ei(e,(function(e){return function(e,t){var n=new Rs;e.accept(n);var r=Ei(n.alternations,(function(n){return n.definition.length>255?[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:n}),type:Rl.TOO_MANY_ALTS,ruleName:e.name,occurrence:n.idx}]:[]}));return r}(e,n)})),s=Ei(e,(function(t){return function(e,t,n,r){var i=[],a=Ji(t,(function(t,n){return n.name===e.name?t+1:t}),0);if(a>1){var o=r.buildDuplicateRuleNameError({topLevelRule:e,grammarName:n});i.push({message:o,type:Rl.DUPLICATE_RULE_NAME,ruleName:e.name})}return i}(t,e,r,n)}));return i.concat(a,o,s)}function Ts(e){return"".concat(wa(e),"_#_").concat(e.idx,"_#_").concat(Ms(e))}function Ms(e){return e instanceof Aa?e.terminalType.name:e instanceof ca?e.nonTerminalName:""}var Is=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){var e;return(0,v.Z)(this,n),(e=t.apply(this,arguments)).allProductions=[],e}return(0,m.Z)(n,[{key:"visitNonTerminal",value:function(e){this.allProductions.push(e)}},{key:"visitOption",value:function(e){this.allProductions.push(e)}},{key:"visitRepetitionWithSeparator",value:function(e){this.allProductions.push(e)}},{key:"visitRepetitionMandatory",value:function(e){this.allProductions.push(e)}},{key:"visitRepetitionMandatoryWithSeparator",value:function(e){this.allProductions.push(e)}},{key:"visitRepetition",value:function(e){this.allProductions.push(e)}},{key:"visitAlternation",value:function(e){this.allProductions.push(e)}},{key:"visitTerminal",value:function(e){this.allProductions.push(e)}}]),n}(xa);function ks(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=[],a=Bs(t.definition);if(Zi(a))return[];var o=e.name;Fi(a,e)&&i.push({message:n.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:r}),type:Rl.LEFT_RECURSION,ruleName:o});var s=Ei(ui(a,r.concat([e])),(function(t){var i=or(r);return i.push(t),ks(e,t,n,i)}));return i.concat(s)}function Bs(e){var t=[];if(Zi(e))return t;var n=_i(e);if(n instanceof ca)t.push(n.referencedRule);else if(n instanceof da||n instanceof ha||n instanceof pa||n instanceof va||n instanceof ga||n instanceof ma)t=t.concat(Bs(n.definition));else if(n instanceof ya)t=zt(Si(n.definition,(function(e){return Bs(e.definition)})));else if(!(n instanceof Aa))throw Error("non exhaustive match");var r=_a(n),i=e.length>1;if(r&&i){var a=fi(e);return t.concat(Bs(a))}return t}var Rs=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){var e;return(0,v.Z)(this,n),(e=t.apply(this,arguments)).alternations=[],e}return(0,m.Z)(n,[{key:"visitAlternation",value:function(e){this.alternations.push(e)}}]),n}(xa);function Ps(e,t,n){var r=new Rs;e.accept(r);var i=r.alternations,a=Ei(i=qi(i,(function(e){return!0===e.ignoreAmbiguities})),(function(r){var i=r.idx,a=r.maxLookahead||t,o=_s(i,e,a,r),s=function(e,t,n,r){var i=[],a=Ji(e,(function(n,r,a){return!0===t.definition[a].ignoreAmbiguities||hi(r,(function(r){var o=[a];hi(e,(function(e,n){a!==n&&Ss(e,r)&&!0!==t.definition[n].ignoreAmbiguities&&o.push(n)})),o.length>1&&!Ss(i,r)&&(i.push(r),n.push({alts:o,path:r}))})),n}),[]),o=Si(a,(function(e){var i=Si(e.alts,(function(e){return e+1}));return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:Rl.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:t.idx,alternatives:e.alts}}));return o}(o,r,e,n),l=function(e,t,n,r){var i=Ji(e,(function(e,t,n){var r=Si(t,(function(e){return{idx:n,path:e}}));return e.concat(r)}),[]),a=sr(Ei(i,(function(e){if(!0===t.definition[e.idx].ignoreAmbiguities)return[];var a=e.idx,o=e.path;return Si(yi(i,(function(e){return!0!==t.definition[e.idx].ignoreAmbiguities&&e.idx<a&&(n=e.path,r=o,n.length<r.length&&mi(n,(function(e,t){var n=r[t];return e===n||n.categoryMatchesMap[e.tokenTypeIdx]})));var n,r})),(function(e){var i=[e.idx+1,a+1],o=0===t.idx?"":t.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:Rl.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:o,alternatives:i}}))})));return a}(o,r,e,n);return s.concat(l)}));return a}var Ds=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){var e;return(0,v.Z)(this,n),(e=t.apply(this,arguments)).allProductions=[],e}return(0,m.Z)(n,[{key:"visitRepetitionWithSeparator",value:function(e){this.allProductions.push(e)}},{key:"visitRepetitionMandatory",value:function(e){this.allProductions.push(e)}},{key:"visitRepetitionMandatoryWithSeparator",value:function(e){this.allProductions.push(e)}},{key:"visitRepetition",value:function(e){this.allProductions.push(e)}}]),n}(xa);function Ls(e){var t=oi(e,{errMsgProvider:qo}),n={};return hi(e.rules,(function(e){n[e.name]=e})),function(e,t){var n=new ns(e,t);return n.resolveRefs(),n.errors}(n,t.errMsgProvider)}var Ns="MismatchedTokenException",Fs="NoViableAltException",Os="EarlyExitException",Us="NotAllInputParsedException",zs=[Ns,Fs,Os,Us];function Gs(e){return Fi(zs,e.name)}Object.freeze(zs);var Qs=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r){var i;return(0,v.Z)(this,n),(i=t.call(this,e)).token=r,i.resyncedTokens=[],Object.setPrototypeOf((0,d.Z)(i),(this instanceof n?this.constructor:void 0).prototype),Error.captureStackTrace&&Error.captureStackTrace((0,d.Z)(i),i.constructor),i}return(0,m.Z)(n)}((0,a.Z)(Error)),Zs=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r,i){var a;return(0,v.Z)(this,n),(a=t.call(this,e,r)).previousToken=i,a.name=Ns,a}return(0,m.Z)(n)}(Qs),Hs=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r,i){var a;return(0,v.Z)(this,n),(a=t.call(this,e,r)).previousToken=i,a.name=Fs,a}return(0,m.Z)(n)}(Qs),js=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r){var i;return(0,v.Z)(this,n),(i=t.call(this,e,r)).name=Us,i}return(0,m.Z)(n)}(Qs),Vs=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r,i){var a;return(0,v.Z)(this,n),(a=t.call(this,e,r)).previousToken=i,a.name=Os,a}return(0,m.Z)(n)}(Qs),Ws={},Xs="InRuleRecoveryException",Ys=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e)).name=Xs,r}return(0,m.Z)(n)}((0,a.Z)(Error)),Ks=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"initRecoverable",value:function(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=Ri(e,"recoveryEnabled")?e.recoveryEnabled:Dl.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Js)}},{key:"getTokenToInsert",value:function(e){var t=Ko(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}},{key:"canTokenTypeBeInsertedInRecovery",value:function(e){return!0}},{key:"canTokenTypeBeDeletedInRecovery",value:function(e){return!0}},{key:"tryInRepetitionRecovery",value:function(e,t,n,r){for(var i=this,a=this.findReSyncTokenType(),o=this.exportLexerState(),s=[],l=!1,u=this.LA(1),c=this.LA(1),f=function(){var e=i.LA(0),t=i.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:u,previous:e,ruleName:i.getCurrRuleFullName()}),n=new Zs(t,u,i.LA(0));n.resyncedTokens=di(s),i.SAVE_ERROR(n)};!l;){if(this.tokenMatcher(c,r))return void f();if(n.call(this))return f(),void e.apply(this,t);this.tokenMatcher(c,a)?l=!0:(c=this.SKIP_TOKEN(),this.addToResyncTokens(c,s))}this.importLexerState(o)}},{key:"shouldInRepetitionRecoveryBeTried",value:function(e,t,n){return!1!==n&&(!this.tokenMatcher(this.LA(1),e)&&(!this.isBackTracking()&&!this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t))))}},{key:"getFollowsForInRuleRecovery",value:function(e,t){var n=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(n)}},{key:"tryInRuleRecovery",value:function(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){var n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new Ys("sad sad panda")}},{key:"canPerformInRuleRecovery",value:function(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}},{key:"canRecoverWithSingleTokenInsertion",value:function(e,t){var n=this;if(!this.canTokenTypeBeInsertedInRecovery(e))return!1;if(Zi(t))return!1;var r=this.LA(1);return void 0!==xi(t,(function(e){return n.tokenMatcher(r,e)}))}},{key:"canRecoverWithSingleTokenDeletion",value:function(e){return!!this.canTokenTypeBeDeletedInRecovery(e)&&this.tokenMatcher(this.LA(2),e)}},{key:"isInCurrentRuleReSyncSet",value:function(e){var t=this.getCurrFollowKey();return Fi(this.getFollowSetFromFollowKey(t),e)}},{key:"findReSyncTokenType",value:function(){for(var e=this.flattenFollowSet(),t=this.LA(1),n=2;;){var r=xi(e,(function(e){return So(t,e)}));if(void 0!==r)return r;t=this.LA(n),n++}}},{key:"getCurrFollowKey",value:function(){if(1===this.RULE_STACK.length)return Ws;var e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(n)}}},{key:"buildFullFollowKeyStack",value:function(){var e=this,t=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return Si(t,(function(r,i){return 0===i?Ws:{ruleName:e.shortRuleNameToFullName(r),idxInCallingRule:n[i],inRule:e.shortRuleNameToFullName(t[i-1])}}))}},{key:"flattenFollowSet",value:function(){var e=this;return zt(Si(this.buildFullFollowKeyStack(),(function(t){return e.getFollowSetFromFollowKey(t)})))}},{key:"getFollowSetFromFollowKey",value:function(e){if(e===Ws)return[Yo];var t=e.ruleName+e.idxInCallingRule+Ta+e.inRule;return this.resyncFollows[t]}},{key:"addToResyncTokens",value:function(e,t){return this.tokenMatcher(e,Yo)||t.push(e),t}},{key:"reSyncTo",value:function(e){for(var t=[],n=this.LA(1);!1===this.tokenMatcher(n,e);)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,t);return di(t)}},{key:"attemptInRepetitionRecovery",value:function(e,t,n,r,i,a,o){}},{key:"getCurrentGrammarPath",value:function(e,t){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:or(this.RULE_OCCURRENCE_STACK),lastTok:e,lastTokOccurrence:t}}},{key:"getHumanReadableRuleStack",value:function(){var e=this;return Si(this.RULE_STACK,(function(t){return e.shortRuleNameToFullName(t)}))}}]),e}();function Js(e,t,n,r,i,a,o){var s=this.getKeyForAutomaticLookahead(r,i),l=this.firstAfterRepMap[s];if(void 0===l){var u=this.getCurrRuleFullName();l=new a(this.getGAstProductions()[u],i).startWalking(),this.firstAfterRepMap[s]=l}var c=l.token,f=l.occurrence,d=l.isEndOfRule;1===this.RULE_STACK.length&&d&&void 0===c&&(c=Yo,f=1),void 0!==c&&void 0!==f&&this.shouldInRepetitionRecoveryBeTried(c,f,o)&&this.tryInRepetitionRecovery(e,t,n,c)}var qs=1024,$s=1280,el=1536;function tl(e,t,n){return n|t|e}var nl=function(){function e(t){var n;(0,v.Z)(this,e),this.maxLookahead=null!==(n=null===t||void 0===t?void 0:t.maxLookahead)&&void 0!==n?n:Dl.maxLookahead}return(0,m.Z)(e,[{key:"validate",value:function(e){var t=this.validateNoLeftRecursion(e.rules);if(Zi(t)){var n=this.validateEmptyOrAlternatives(e.rules),r=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),a=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[].concat((0,i.Z)(t),(0,i.Z)(n),(0,i.Z)(r),(0,i.Z)(a))}return t}},{key:"validateNoLeftRecursion",value:function(e){return Ei(e,(function(e){return ks(e,e,$o)}))}},{key:"validateEmptyOrAlternatives",value:function(e){return Ei(e,(function(e){return function(e,t){var n=new Rs;return e.accept(n),Ei(n.alternations,(function(n){return Ei(di(n.definition),(function(r,i){return Zi(fs([r],[],So,1))?[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:n,emptyChoiceIdx:i}),type:Rl.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:n.idx,alternative:i+1}]:[]}))}))}(e,$o)}))}},{key:"validateAmbiguousAlternationAlternatives",value:function(e,t){return Ei(e,(function(e){return Ps(e,t,$o)}))}},{key:"validateSomeNonEmptyLookaheadPath",value:function(e,t){return function(e,t,n){var r=[];return hi(e,(function(e){var i=new Ds;e.accept(i),hi(i.allProductions,(function(i){var a=hs(i),o=i.maxLookahead||t;if(Zi(zt(ws(i.idx,e,a,o)[0]))){var s=n.buildEmptyRepetitionError({topLevelRule:e,repetition:i});r.push({message:s,type:Rl.NO_NON_EMPTY_LOOKAHEAD,ruleName:e.name})}}))})),r}(e,t,$o)}},{key:"buildLookaheadForAlternation",value:function(e){return function(e,t,n,r,i,a){var o=_s(e,t,n);return a(o,r,Es(o)?Eo:So,i)}(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,ps)}},{key:"buildLookaheadForOptional",value:function(e){return function(e,t,n,r,i,a){var o=ws(e,t,i,n),s=Es(o)?Eo:So;return a(o[0],s,r)}(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,hs(e.prodType),vs)}}]),e}(),rl=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"initLooksAhead",value:function(e){this.dynamicTokensEnabled=Ri(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:Dl.dynamicTokensEnabled,this.maxLookahead=Ri(e,"maxLookahead")?e.maxLookahead:Dl.maxLookahead,this.lookaheadStrategy=Ri(e,"lookaheadStrategy")?e.lookaheadStrategy:new nl({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}},{key:"preComputeLookaheadFunctions",value:function(e){var t=this;hi(e,(function(e){t.TRACE_INIT("".concat(e.name," Rule Lookahead"),(function(){var n=function(e){al.reset(),e.accept(al);var t=al.dslMethods;return al.reset(),t}(e),r=n.alternation,i=n.repetition,a=n.option,o=n.repetitionMandatory,s=n.repetitionMandatoryWithSeparator,l=n.repetitionWithSeparator;hi(r,(function(n){var r=0===n.idx?"":n.idx;t.TRACE_INIT("".concat(wa(n)).concat(r),(function(){var r=t.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:n.idx,rule:e,maxLookahead:n.maxLookahead||t.maxLookahead,hasPredicates:n.hasPredicates,dynamicTokensEnabled:t.dynamicTokensEnabled}),i=tl(t.fullRuleNameToShort[e.name],256,n.idx);t.setLaFuncCache(i,r)}))})),hi(i,(function(n){t.computeLookaheadFunc(e,n.idx,768,"Repetition",n.maxLookahead,wa(n))})),hi(a,(function(n){t.computeLookaheadFunc(e,n.idx,512,"Option",n.maxLookahead,wa(n))})),hi(o,(function(n){t.computeLookaheadFunc(e,n.idx,qs,"RepetitionMandatory",n.maxLookahead,wa(n))})),hi(s,(function(n){t.computeLookaheadFunc(e,n.idx,el,"RepetitionMandatoryWithSeparator",n.maxLookahead,wa(n))})),hi(l,(function(n){t.computeLookaheadFunc(e,n.idx,$s,"RepetitionWithSeparator",n.maxLookahead,wa(n))}))}))}))}},{key:"computeLookaheadFunc",value:function(e,t,n,r,i,a){var o=this;this.TRACE_INIT("".concat(a).concat(0===t?"":t),(function(){var a=o.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:i||o.maxLookahead,dynamicTokensEnabled:o.dynamicTokensEnabled,prodType:r}),s=tl(o.fullRuleNameToShort[e.name],n,t);o.setLaFuncCache(s,a)}))}},{key:"getKeyForAutomaticLookahead",value:function(e,t){return tl(this.getLastExplicitRuleShortName(),e,t)}},{key:"getLaFuncFromCache",value:function(e){return this.lookAheadFuncsCache.get(e)}},{key:"setLaFuncCache",value:function(e,t){this.lookAheadFuncsCache.set(e,t)}}]),e}(),il=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){var e;return(0,v.Z)(this,n),(e=t.apply(this,arguments)).dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},e}return(0,m.Z)(n,[{key:"reset",value:function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}},{key:"visitOption",value:function(e){this.dslMethods.option.push(e)}},{key:"visitRepetitionWithSeparator",value:function(e){this.dslMethods.repetitionWithSeparator.push(e)}},{key:"visitRepetitionMandatory",value:function(e){this.dslMethods.repetitionMandatory.push(e)}},{key:"visitRepetitionMandatoryWithSeparator",value:function(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}},{key:"visitRepetition",value:function(e){this.dslMethods.repetition.push(e)}},{key:"visitAlternation",value:function(e){this.dslMethods.alternation.push(e)}}]),n}(xa),al=new il;function ol(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset===!0&&(e.endOffset=t.endOffset)}function sl(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset===!0&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}var ll,ul,cl="name";function fl(e,t){Object.defineProperty(e,cl,{enumerable:!1,configurable:!0,writable:!1,value:t})}function dl(e,t){for(var n=st(e),r=n.length,i=0;i<r;i++)for(var a=e[n[i]],o=a.length,s=0;s<o;s++){var l=a[s];void 0===l.tokenTypeIdx&&this[l.name](l.children,t)}}function hl(e,t){var n=function(){};fl(n,e+"BaseSemantics");var r={visit:function(e,t){if(C(e)&&(e=e[0]),!Vi(e))return this[e.name](e.children,t)},validateVisitor:function(){var e=function(e,t){var n=function(e,t){var n=yi(t,(function(t){return!1===Y(e[t])})),r=Si(n,(function(t){return{msg:"Missing visitor method: <".concat(t,"> on ").concat(e.constructor.name," CST Visitor."),type:ll.MISSING_METHOD,methodName:t}}));return sr(r)}(e,t);return n}(this,t);if(!Zi(e)){var n=Si(e,(function(e){return e.msg}));throw Error("Errors Detected in CST Visitor <".concat(this.constructor.name,">:\n\t").concat(n.join("\n\n").replace(/\n/g,"\n\t")))}}};return(n.prototype=r).constructor=n,n._RULE_NAMES=t,n}(ul=ll||(ll={}))[ul.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",ul[ul.MISSING_METHOD=1]="MISSING_METHOD";var pl=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"initTreeBuilder",value:function(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=Ri(e,"nodeLocationTracking")?e.nodeLocationTracking:Dl.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=sl,this.setNodeLocationFromNode=sl,this.cstPostRule=fe,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=fe,this.setNodeLocationFromNode=fe,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=ol,this.setNodeLocationFromNode=ol,this.cstPostRule=fe,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=fe,this.setNodeLocationFromNode=fe,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error('Invalid <nodeLocationTracking> config option: "'.concat(e.nodeLocationTracking,'"'));this.setNodeLocationFromToken=fe,this.setNodeLocationFromNode=fe,this.cstPostRule=fe,this.setInitialNodeLocation=fe}else this.cstInvocationStateUpdate=fe,this.cstFinallyStateUpdate=fe,this.cstPostTerminal=fe,this.cstPostNonTerminal=fe,this.cstPostRule=fe}},{key:"setInitialNodeLocationOnlyOffsetRecovery",value:function(e){e.location={startOffset:NaN,endOffset:NaN}}},{key:"setInitialNodeLocationOnlyOffsetRegular",value:function(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}},{key:"setInitialNodeLocationFullRecovery",value:function(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}},{key:"setInitialNodeLocationFullRegular",value:function(e){var t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}},{key:"cstInvocationStateUpdate",value:function(e){var t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}},{key:"cstFinallyStateUpdate",value:function(){this.CST_STACK.pop()}},{key:"cstPostRuleFull",value:function(e){var t=this.LA(0),n=e.location;n.startOffset<=t.startOffset===!0?(n.endOffset=t.endOffset,n.endLine=t.endLine,n.endColumn=t.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}},{key:"cstPostRuleOnlyOffset",value:function(e){var t=this.LA(0),n=e.location;n.startOffset<=t.startOffset===!0?n.endOffset=t.endOffset:n.startOffset=NaN}},{key:"cstPostTerminal",value:function(e,t){var n,r,i,a=this.CST_STACK[this.CST_STACK.length-1];r=t,i=e,void 0===(n=a).children[i]?n.children[i]=[r]:n.children[i].push(r),this.setNodeLocationFromToken(a.location,t)}},{key:"cstPostNonTerminal",value:function(e,t){var n=this.CST_STACK[this.CST_STACK.length-1];!function(e,t,n){void 0===e.children[t]?e.children[t]=[n]:e.children[t].push(n)}(n,t,e),this.setNodeLocationFromNode(n.location,e.location)}},{key:"getBaseCstVisitorConstructor",value:function(){if(Vi(this.baseCstVisitorConstructor)){var e=hl(this.className,st(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}},{key:"getBaseCstVisitorConstructorWithDefaults",value:function(){if(Vi(this.baseCstVisitorWithDefaultsConstructor)){var e=function(e,t,n){var r=function(){};fl(r,e+"BaseSemanticsWithDefaults");var i=Object.create(n.prototype);return hi(t,(function(e){i[e]=dl})),(r.prototype=i).constructor=r,r}(this.className,st(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}},{key:"getLastExplicitRuleShortName",value:function(){var e=this.RULE_STACK;return e[e.length-1]}},{key:"getPreviousExplicitRuleShortName",value:function(){var e=this.RULE_STACK;return e[e.length-2]}},{key:"getLastExplicitRuleOccurrenceIndex",value:function(){var e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}]),e}(),vl=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"initLexerAdapter",value:function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}},{key:"input",get:function(){return this.tokVector},set:function(e){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}},{key:"SKIP_TOKEN",value:function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Bl}},{key:"LA",value:function(e){var t=this.currIdx+e;return t<0||this.tokVectorLength<=t?Bl:this.tokVector[t]}},{key:"consumeToken",value:function(){this.currIdx++}},{key:"exportLexerState",value:function(){return this.currIdx}},{key:"importLexerState",value:function(e){this.currIdx=e}},{key:"resetLexerState",value:function(){this.currIdx=-1}},{key:"moveToTerminatedState",value:function(){this.currIdx=this.tokVector.length-1}},{key:"getLexerPosition",value:function(){return this.exportLexerState()}}]),e}(),ml=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"ACTION",value:function(e){return e.call(this)}},{key:"consume",value:function(e,t,n){return this.consumeInternal(t,e,n)}},{key:"subrule",value:function(e,t,n){return this.subruleInternal(t,e,n)}},{key:"option",value:function(e,t){return this.optionInternal(t,e)}},{key:"or",value:function(e,t){return this.orInternal(t,e)}},{key:"many",value:function(e,t){return this.manyInternal(e,t)}},{key:"atLeastOne",value:function(e,t){return this.atLeastOneInternal(e,t)}},{key:"CONSUME",value:function(e,t){return this.consumeInternal(e,0,t)}},{key:"CONSUME1",value:function(e,t){return this.consumeInternal(e,1,t)}},{key:"CONSUME2",value:function(e,t){return this.consumeInternal(e,2,t)}},{key:"CONSUME3",value:function(e,t){return this.consumeInternal(e,3,t)}},{key:"CONSUME4",value:function(e,t){return this.consumeInternal(e,4,t)}},{key:"CONSUME5",value:function(e,t){return this.consumeInternal(e,5,t)}},{key:"CONSUME6",value:function(e,t){return this.consumeInternal(e,6,t)}},{key:"CONSUME7",value:function(e,t){return this.consumeInternal(e,7,t)}},{key:"CONSUME8",value:function(e,t){return this.consumeInternal(e,8,t)}},{key:"CONSUME9",value:function(e,t){return this.consumeInternal(e,9,t)}},{key:"SUBRULE",value:function(e,t){return this.subruleInternal(e,0,t)}},{key:"SUBRULE1",value:function(e,t){return this.subruleInternal(e,1,t)}},{key:"SUBRULE2",value:function(e,t){return this.subruleInternal(e,2,t)}},{key:"SUBRULE3",value:function(e,t){return this.subruleInternal(e,3,t)}},{key:"SUBRULE4",value:function(e,t){return this.subruleInternal(e,4,t)}},{key:"SUBRULE5",value:function(e,t){return this.subruleInternal(e,5,t)}},{key:"SUBRULE6",value:function(e,t){return this.subruleInternal(e,6,t)}},{key:"SUBRULE7",value:function(e,t){return this.subruleInternal(e,7,t)}},{key:"SUBRULE8",value:function(e,t){return this.subruleInternal(e,8,t)}},{key:"SUBRULE9",value:function(e,t){return this.subruleInternal(e,9,t)}},{key:"OPTION",value:function(e){return this.optionInternal(e,0)}},{key:"OPTION1",value:function(e){return this.optionInternal(e,1)}},{key:"OPTION2",value:function(e){return this.optionInternal(e,2)}},{key:"OPTION3",value:function(e){return this.optionInternal(e,3)}},{key:"OPTION4",value:function(e){return this.optionInternal(e,4)}},{key:"OPTION5",value:function(e){return this.optionInternal(e,5)}},{key:"OPTION6",value:function(e){return this.optionInternal(e,6)}},{key:"OPTION7",value:function(e){return this.optionInternal(e,7)}},{key:"OPTION8",value:function(e){return this.optionInternal(e,8)}},{key:"OPTION9",value:function(e){return this.optionInternal(e,9)}},{key:"OR",value:function(e){return this.orInternal(e,0)}},{key:"OR1",value:function(e){return this.orInternal(e,1)}},{key:"OR2",value:function(e){return this.orInternal(e,2)}},{key:"OR3",value:function(e){return this.orInternal(e,3)}},{key:"OR4",value:function(e){return this.orInternal(e,4)}},{key:"OR5",value:function(e){return this.orInternal(e,5)}},{key:"OR6",value:function(e){return this.orInternal(e,6)}},{key:"OR7",value:function(e){return this.orInternal(e,7)}},{key:"OR8",value:function(e){return this.orInternal(e,8)}},{key:"OR9",value:function(e){return this.orInternal(e,9)}},{key:"MANY",value:function(e){this.manyInternal(0,e)}},{key:"MANY1",value:function(e){this.manyInternal(1,e)}},{key:"MANY2",value:function(e){this.manyInternal(2,e)}},{key:"MANY3",value:function(e){this.manyInternal(3,e)}},{key:"MANY4",value:function(e){this.manyInternal(4,e)}},{key:"MANY5",value:function(e){this.manyInternal(5,e)}},{key:"MANY6",value:function(e){this.manyInternal(6,e)}},{key:"MANY7",value:function(e){this.manyInternal(7,e)}},{key:"MANY8",value:function(e){this.manyInternal(8,e)}},{key:"MANY9",value:function(e){this.manyInternal(9,e)}},{key:"MANY_SEP",value:function(e){this.manySepFirstInternal(0,e)}},{key:"MANY_SEP1",value:function(e){this.manySepFirstInternal(1,e)}},{key:"MANY_SEP2",value:function(e){this.manySepFirstInternal(2,e)}},{key:"MANY_SEP3",value:function(e){this.manySepFirstInternal(3,e)}},{key:"MANY_SEP4",value:function(e){this.manySepFirstInternal(4,e)}},{key:"MANY_SEP5",value:function(e){this.manySepFirstInternal(5,e)}},{key:"MANY_SEP6",value:function(e){this.manySepFirstInternal(6,e)}},{key:"MANY_SEP7",value:function(e){this.manySepFirstInternal(7,e)}},{key:"MANY_SEP8",value:function(e){this.manySepFirstInternal(8,e)}},{key:"MANY_SEP9",value:function(e){this.manySepFirstInternal(9,e)}},{key:"AT_LEAST_ONE",value:function(e){this.atLeastOneInternal(0,e)}},{key:"AT_LEAST_ONE1",value:function(e){return this.atLeastOneInternal(1,e)}},{key:"AT_LEAST_ONE2",value:function(e){this.atLeastOneInternal(2,e)}},{key:"AT_LEAST_ONE3",value:function(e){this.atLeastOneInternal(3,e)}},{key:"AT_LEAST_ONE4",value:function(e){this.atLeastOneInternal(4,e)}},{key:"AT_LEAST_ONE5",value:function(e){this.atLeastOneInternal(5,e)}},{key:"AT_LEAST_ONE6",value:function(e){this.atLeastOneInternal(6,e)}},{key:"AT_LEAST_ONE7",value:function(e){this.atLeastOneInternal(7,e)}},{key:"AT_LEAST_ONE8",value:function(e){this.atLeastOneInternal(8,e)}},{key:"AT_LEAST_ONE9",value:function(e){this.atLeastOneInternal(9,e)}},{key:"AT_LEAST_ONE_SEP",value:function(e){this.atLeastOneSepFirstInternal(0,e)}},{key:"AT_LEAST_ONE_SEP1",value:function(e){this.atLeastOneSepFirstInternal(1,e)}},{key:"AT_LEAST_ONE_SEP2",value:function(e){this.atLeastOneSepFirstInternal(2,e)}},{key:"AT_LEAST_ONE_SEP3",value:function(e){this.atLeastOneSepFirstInternal(3,e)}},{key:"AT_LEAST_ONE_SEP4",value:function(e){this.atLeastOneSepFirstInternal(4,e)}},{key:"AT_LEAST_ONE_SEP5",value:function(e){this.atLeastOneSepFirstInternal(5,e)}},{key:"AT_LEAST_ONE_SEP6",value:function(e){this.atLeastOneSepFirstInternal(6,e)}},{key:"AT_LEAST_ONE_SEP7",value:function(e){this.atLeastOneSepFirstInternal(7,e)}},{key:"AT_LEAST_ONE_SEP8",value:function(e){this.atLeastOneSepFirstInternal(8,e)}},{key:"AT_LEAST_ONE_SEP9",value:function(e){this.atLeastOneSepFirstInternal(9,e)}},{key:"RULE",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll;if(Fi(this.definedRulesNames,e)){var r={message:$o.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:Rl.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(r)}this.definedRulesNames.push(e);var i=this.defineRule(e,t,n);return this[e]=i,i}},{key:"OVERRIDE_RULE",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ll,r=function(e,t,n){var r,i=[];return Fi(t,e)||(r="Invalid rule override, rule: ->".concat(e,"<- cannot be overridden in the grammar: ->").concat(n,"<-as it is not defined in any of the super grammars "),i.push({message:r,type:Rl.INVALID_RULE_OVERRIDE,ruleName:e})),i}(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(r);var i=this.defineRule(e,t,n);return this[e]=i,i}},{key:"BACKTRACK",value:function(e,t){return function(){this.isBackTrackingStack.push(1);var n=this.saveRecogState();try{return e.apply(this,t),!0}catch(r){if(Gs(r))return!1;throw r}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}},{key:"getGAstProductions",value:function(){return this.gastProductionsCache}},{key:"getSerializedGastProductions",value:function(){return Si(Li(this.gastProductionsCache),ba)}}]),e}(),gl=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"initRecognizerEngine",value:function(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Eo,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},Ri(t,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if(C(e)){if(Zi(e))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"===typeof e[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(C(e))this.tokensMap=Ji(e,(function(e,t){return e[t.name]=t,e}),{});else if(Ri(e,"modes")&&mi(zt(Li(e.modes)),Ro)){var n=ra(zt(Li(e.modes)));this.tokensMap=Ji(n,(function(e,t){return e[t.name]=t,e}),{})}else{if(!D(e))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=or(e)}this.tokensMap.EOF=Yo;var r=mi(Ri(e,"modes")?zt(Li(e.modes)):Li(e),(function(e){return Zi(e.categoryMatches)}));this.tokenMatcher=r?Eo:So,Mo(Li(this.tokensMap))}},{key:"defineRule",value:function(e,t,n){if(this.selfAnalysisDone)throw Error("Grammar rule <".concat(e,"> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called."));var r,i=Ri(n,"resyncEnabled")?n.resyncEnabled:Ll.resyncEnabled,a=Ri(n,"recoveryValueFunc")?n.recoveryValueFunc:Ll.recoveryValueFunc,o=this.ruleShortNameIdx<<12;return this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=e,this.fullRuleNameToShort[e]=o,r=!0===this.outputCst?function(){try{this.ruleInvocationStateUpdate(o,e,this.subruleIdx);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];t.apply(this,r);var l=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(l),l}catch(u){return this.invokeRuleCatch(u,i,a)}finally{this.ruleFinallyStateUpdate()}}:function(){try{this.ruleInvocationStateUpdate(o,e,this.subruleIdx);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.apply(this,r)}catch(l){return this.invokeRuleCatch(l,i,a)}finally{this.ruleFinallyStateUpdate()}},Object.assign(r,{ruleName:e,originalGrammarAction:t})}},{key:"invokeRuleCatch",value:function(e,t,n){var r=1===this.RULE_STACK.length,i=t&&!this.isBackTracking()&&this.recoveryEnabled;if(Gs(e)){var a=e;if(i){var o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o)){if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){var s=this.CST_STACK[this.CST_STACK.length-1];return s.recoveredNode=!0,s}return n(e)}if(this.outputCst){var l=this.CST_STACK[this.CST_STACK.length-1];l.recoveredNode=!0,a.partialCstResult=l}throw a}if(r)return this.moveToTerminatedState(),n(e);throw a}throw e}},{key:"optionInternal",value:function(e,t){var n=this.getKeyForAutomaticLookahead(512,t);return this.optionInternalLogic(e,t,n)}},{key:"optionInternalLogic",value:function(e,t,n){var r,i=this,a=this.getLaFuncFromCache(n);if("function"!==typeof e){r=e.DEF;var o=e.GATE;if(void 0!==o){var s=a;a=function(){return o.call(i)&&s.call(i)}}}else r=e;if(!0===a.call(this))return r.call(this)}},{key:"atLeastOneInternal",value:function(e,t){var n=this.getKeyForAutomaticLookahead(qs,e);return this.atLeastOneInternalLogic(e,t,n)}},{key:"atLeastOneInternalLogic",value:function(e,t,n){var r,i=this,a=this.getLaFuncFromCache(n);if("function"!==typeof t){r=t.DEF;var o=t.GATE;if(void 0!==o){var s=a;a=function(){return o.call(i)&&s.call(i)}}}else r=t;if(!0!==a.call(this))throw this.raiseEarlyExitException(e,es.REPETITION_MANDATORY,t.ERR_MSG);for(var l=this.doSingleRepetition(r);!0===a.call(this)&&!0===l;)l=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],a,qs,e,ls)}},{key:"atLeastOneSepFirstInternal",value:function(e,t){var n=this.getKeyForAutomaticLookahead(el,e);this.atLeastOneSepFirstInternalLogic(e,t,n)}},{key:"atLeastOneSepFirstInternalLogic",value:function(e,t,n){var r=this,i=t.DEF,a=t.SEP;if(!0!==this.getLaFuncFromCache(n).call(this))throw this.raiseEarlyExitException(e,es.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG);i.call(this);for(var o=function(){return r.tokenMatcher(r.LA(1),a)};!0===this.tokenMatcher(this.LA(1),a);)this.CONSUME(a),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,a,o,i,us],o,el,e,us)}},{key:"manyInternal",value:function(e,t){var n=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,t,n)}},{key:"manyInternalLogic",value:function(e,t,n){var r,i=this,a=this.getLaFuncFromCache(n);if("function"!==typeof t){r=t.DEF;var o=t.GATE;if(void 0!==o){var s=a;a=function(){return o.call(i)&&s.call(i)}}}else r=t;for(var l=!0;!0===a.call(this)&&!0===l;)l=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],a,768,e,os,l)}},{key:"manySepFirstInternal",value:function(e,t){var n=this.getKeyForAutomaticLookahead($s,e);this.manySepFirstInternalLogic(e,t,n)}},{key:"manySepFirstInternalLogic",value:function(e,t,n){var r=this,i=t.DEF,a=t.SEP;if(!0===this.getLaFuncFromCache(n).call(this)){i.call(this);for(var o=function(){return r.tokenMatcher(r.LA(1),a)};!0===this.tokenMatcher(this.LA(1),a);)this.CONSUME(a),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,a,o,i,ss],o,$s,e,ss)}}},{key:"repetitionSepSecondInternal",value:function(e,t,n,r,i){for(;n();)this.CONSUME(t),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,n,r,i],n,el,e,i)}},{key:"doSingleRepetition",value:function(e){var t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}},{key:"orInternal",value:function(e,t){var n=this.getKeyForAutomaticLookahead(256,t),r=C(e)?e:e.DEF,i=this.getLaFuncFromCache(n).call(this,r);if(void 0!==i)return r[i].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}},{key:"ruleFinallyStateUpdate",value:function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){var e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new js(t,e))}}},{key:"subruleInternal",value:function(e,t,n){var r;try{var i=void 0!==n?n.ARGS:void 0;return this.subruleIdx=t,r=e.apply(this,i),this.cstPostNonTerminal(r,void 0!==n&&void 0!==n.LABEL?n.LABEL:e.ruleName),r}catch(a){throw this.subruleInternalError(a,n,e.ruleName)}}},{key:"subruleInternalError",value:function(e,t,n){throw Gs(e)&&void 0!==e.partialCstResult&&(this.cstPostNonTerminal(e.partialCstResult,void 0!==t&&void 0!==t.LABEL?t.LABEL:n),delete e.partialCstResult),e}},{key:"consumeInternal",value:function(e,t,n){var r;try{var i=this.LA(1);!0===this.tokenMatcher(i,e)?(this.consumeToken(),r=i):this.consumeInternalError(e,i,n)}catch(a){r=this.consumeInternalRecovery(e,t,a)}return this.cstPostTerminal(void 0!==n&&void 0!==n.LABEL?n.LABEL:e.name,r),r}},{key:"consumeInternalError",value:function(e,t,n){var r,i=this.LA(0);throw r=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Zs(r,t,i))}},{key:"consumeInternalRecovery",value:function(e,t,n){if(!this.recoveryEnabled||"MismatchedTokenException"!==n.name||this.isBackTracking())throw n;var r=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,r)}catch(i){throw i.name===Xs?n:i}}},{key:"saveRecogState",value:function(){var e=this.errors,t=or(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}},{key:"reloadRecogState",value:function(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}},{key:"ruleInvocationStateUpdate",value:function(e,t,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}},{key:"isBackTracking",value:function(){return 0!==this.isBackTrackingStack.length}},{key:"getCurrRuleFullName",value:function(){var e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}},{key:"shortRuleNameToFullName",value:function(e){return this.shortRuleNameToFull[e]}},{key:"isAtEndOfInput",value:function(){return this.tokenMatcher(this.LA(1),Yo)}},{key:"reset",value:function(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}]),e}(),yl=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"initErrorHandler",value:function(e){this._errors=[],this.errorMessageProvider=Ri(e,"errorMessageProvider")?e.errorMessageProvider:Dl.errorMessageProvider}},{key:"SAVE_ERROR",value:function(e){if(Gs(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:or(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}},{key:"errors",get:function(){return or(this._errors)},set:function(e){this._errors=e}},{key:"raiseEarlyExitException",value:function(e,t,n){for(var r=this.getCurrRuleFullName(),i=ws(e,this.getGAstProductions()[r],t,this.maxLookahead)[0],a=[],o=1;o<=this.maxLookahead;o++)a.push(this.LA(o));var s=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:i,actual:a,previous:this.LA(0),customUserDescription:n,ruleName:r});throw this.SAVE_ERROR(new Vs(s,this.LA(1),this.LA(0)))}},{key:"raiseNoAltException",value:function(e,t){for(var n=this.getCurrRuleFullName(),r=_s(e,this.getGAstProductions()[n],this.maxLookahead),i=[],a=1;a<=this.maxLookahead;a++)i.push(this.LA(a));var o=this.LA(0),s=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:r,actual:i,previous:o,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Hs(s,this.LA(1),o))}}]),e}(),Al=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"initContentAssist",value:function(){}},{key:"computeContentAssist",value:function(e,t){var n=this.gastProductionsCache[e];if(Vi(n))throw Error("Rule ->".concat(e,"<- does not exist in this grammar."));return fs([n],t,this.tokenMatcher,this.maxLookahead)}},{key:"getNextPossibleTokenTypes",value:function(e){var t=_i(e.ruleStack),n=this.getGAstProductions()[t];return new is(n,e).startWalking()}}]),e}(),bl={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(bl);var xl=Math.pow(2,8)-1,_l=Xo({name:"RECORDING_PHASE_TOKEN",pattern:No.NA});Mo([_l]);var wl=Ko(_l,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(wl);var Sl={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}},El=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"initGastRecorder",value:function(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}},{key:"enableRecording",value:function(){var e=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(function(){for(var t=function(t){var n=t>0?t:"";e["CONSUME".concat(n)]=function(e,n){return this.consumeInternalRecord(e,t,n)},e["SUBRULE".concat(n)]=function(e,n){return this.subruleInternalRecord(e,t,n)},e["OPTION".concat(n)]=function(e){return this.optionInternalRecord(e,t)},e["OR".concat(n)]=function(e){return this.orInternalRecord(e,t)},e["MANY".concat(n)]=function(e){this.manyInternalRecord(t,e)},e["MANY_SEP".concat(n)]=function(e){this.manySepFirstInternalRecord(t,e)},e["AT_LEAST_ONE".concat(n)]=function(e){this.atLeastOneInternalRecord(t,e)},e["AT_LEAST_ONE_SEP".concat(n)]=function(e){this.atLeastOneSepFirstInternalRecord(t,e)}},n=0;n<10;n++)t(n);e.consume=function(e,t,n){return this.consumeInternalRecord(t,e,n)},e.subrule=function(e,t,n){return this.subruleInternalRecord(t,e,n)},e.option=function(e,t){return this.optionInternalRecord(t,e)},e.or=function(e,t){return this.orInternalRecord(t,e)},e.many=function(e,t){this.manyInternalRecord(e,t)},e.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},e.ACTION=e.ACTION_RECORD,e.BACKTRACK=e.BACKTRACK_RECORD,e.LA=e.LA_RECORD}))}},{key:"disableRecording",value:function(){var e=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(function(){for(var t=e,n=0;n<10;n++){var r=n>0?n:"";delete t["CONSUME".concat(r)],delete t["SUBRULE".concat(r)],delete t["OPTION".concat(r)],delete t["OR".concat(r)],delete t["MANY".concat(r)],delete t["MANY_SEP".concat(r)],delete t["AT_LEAST_ONE".concat(r)],delete t["AT_LEAST_ONE_SEP".concat(r)]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA}))}},{key:"ACTION_RECORD",value:function(e){}},{key:"BACKTRACK_RECORD",value:function(e,t){return function(){return!0}}},{key:"LA_RECORD",value:function(e){return Bl}},{key:"topLevelRuleRecord",value:function(e,t){try{var n=new fa({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),t.call(this),this.recordingProdStack.pop(),n}catch(r){if(!0!==r.KNOWN_RECORDER_ERROR)try{r.message=r.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch(i){throw r}throw r}}},{key:"optionInternalRecord",value:function(e,t){return Cl.call(this,ha,e,t)}},{key:"atLeastOneInternalRecord",value:function(e,t){Cl.call(this,pa,t,e)}},{key:"atLeastOneSepFirstInternalRecord",value:function(e,t){Cl.call(this,va,t,e,true)}},{key:"manyInternalRecord",value:function(e,t){Cl.call(this,ma,t,e)}},{key:"manySepFirstInternalRecord",value:function(e,t){Cl.call(this,ga,t,e,true)}},{key:"orInternalRecord",value:function(e,t){return Tl.call(this,e,t)}},{key:"subruleInternalRecord",value:function(e,t,n){if(Il(t),!e||!1===Ri(e,"ruleName")){var r=new Error("<SUBRULE".concat(Ml(t),"> argument is invalid expecting a Parser method reference but got: <").concat(JSON.stringify(e),">\n inside top level rule: <").concat(this.recordingProdStack[0].name,">"));throw r.KNOWN_RECORDER_ERROR=!0,r}var i=ci(this.recordingProdStack),a=e.ruleName,o=new ca({idx:t,nonTerminalName:a,label:null===n||void 0===n?void 0:n.LABEL,referencedRule:void 0});return i.definition.push(o),this.outputCst?Sl:bl}},{key:"consumeInternalRecord",value:function(e,t,n){if(Il(t),!ko(e)){var r=new Error("<CONSUME".concat(Ml(t),"> argument is invalid expecting a TokenType reference but got: <").concat(JSON.stringify(e),">\n inside top level rule: <").concat(this.recordingProdStack[0].name,">"));throw r.KNOWN_RECORDER_ERROR=!0,r}var i=ci(this.recordingProdStack),a=new Aa({idx:t,terminalType:e,label:null===n||void 0===n?void 0:n.LABEL});return i.definition.push(a),wl}}]),e}();function Cl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Il(n);var i=ci(this.recordingProdStack),a=Y(t)?t:t.DEF,o=new e({definition:[],idx:n});return r&&(o.separator=t.SEP),Ri(t,"MAX_LOOKAHEAD")&&(o.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(o),a.call(this),i.definition.push(o),this.recordingProdStack.pop(),bl}function Tl(e,t){var n=this;Il(t);var r=ci(this.recordingProdStack),i=!1===C(e),a=!1===i?e:e.DEF,o=new ya({definition:[],idx:t,ignoreAmbiguities:i&&!0===e.IGNORE_AMBIGUITIES});Ri(e,"MAX_LOOKAHEAD")&&(o.maxLookahead=e.MAX_LOOKAHEAD);var s=ea(a,(function(e){return Y(e.GATE)}));return o.hasPredicates=s,r.definition.push(o),hi(a,(function(e){var t=new da({definition:[]});o.definition.push(t),Ri(e,"IGNORE_AMBIGUITIES")?t.ignoreAmbiguities=e.IGNORE_AMBIGUITIES:Ri(e,"GATE")&&(t.ignoreAmbiguities=!0),n.recordingProdStack.push(t),e.ALT.call(n),n.recordingProdStack.pop()})),bl}function Ml(e){return 0===e?"":"".concat(e)}function Il(e){if(e<0||e>xl){var t=new Error("Invalid DSL Method idx value: <".concat(e,">\n\tIdx value must be a none negative value smaller than ").concat(xl+1));throw t.KNOWN_RECORDER_ERROR=!0,t}}var kl=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"initPerformanceTracer",value:function(e){if(Ri(e,"traceInitPerf")){var t=e.traceInitPerf,n="number"===typeof t;this.traceInitMaxIdent=n?t:1/0,this.traceInitPerf=n?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=Dl.traceInitPerf;this.traceInitIndent=-1}},{key:"TRACE_INIT",value:function(e,t){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log("".concat(n,"--\x3e <").concat(e,">"));var r=oa(t),i=r.time,a=r.value,o=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&o("".concat(n,"<-- <").concat(e,"> time: ").concat(i,"ms")),this.traceInitIndent--,a}return t()}}]),e}();var Bl=Ko(Yo,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Bl);var Rl,Pl,Dl=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Jo,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Ll=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0});(Pl=Rl||(Rl={}))[Pl.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",Pl[Pl.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",Pl[Pl.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",Pl[Pl.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",Pl[Pl.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",Pl[Pl.LEFT_RECURSION=5]="LEFT_RECURSION",Pl[Pl.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",Pl[Pl.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",Pl[Pl.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",Pl[Pl.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",Pl[Pl.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",Pl[Pl.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",Pl[Pl.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",Pl[Pl.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION";var Nl,Fl=function(){function e(t,n){(0,v.Z)(this,e),this.definitionErrors=[],this.selfAnalysisDone=!1;var r=this;if(r.initErrorHandler(n),r.initLexerAdapter(),r.initLooksAhead(n),r.initRecognizerEngine(t,n),r.initRecoverable(n),r.initTreeBuilder(n),r.initContentAssist(),r.initGastRecorder(n),r.initPerformanceTracer(n),Ri(n,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=Ri(n,"skipValidations")?n.skipValidations:Dl.skipValidations}return(0,m.Z)(e,[{key:"performSelfAnalysis",value:function(){var t=this;this.TRACE_INIT("performSelfAnalysis",(function(){var n;t.selfAnalysisDone=!0;var r=t.className;t.TRACE_INIT("toFastProps",(function(){sa(t)})),t.TRACE_INIT("Grammar Recording",(function(){try{t.enableRecording(),hi(t.definedRulesNames,(function(e){var n,r=t[e].originalGrammarAction;t.TRACE_INIT("".concat(e," Rule"),(function(){n=t.topLevelRuleRecord(e,r)})),t.gastProductionsCache[e]=n}))}finally{t.disableRecording()}}));var i=[];if(t.TRACE_INIT("Grammar Resolving",(function(){i=Ls({rules:Li(t.gastProductionsCache)}),t.definitionErrors=t.definitionErrors.concat(i)})),t.TRACE_INIT("Grammar Validations",(function(){if(Zi(i)&&!1===t.skipValidations){var e=(a={rules:Li(t.gastProductionsCache),tokenTypes:Li(t.tokensMap),errMsgProvider:$o,grammarName:r},Cs((a=oi(a,{errMsgProvider:$o})).rules,a.tokenTypes,a.errMsgProvider,a.grammarName)),n=function(e){return Si(e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName}),(function(e){return Object.assign({type:Rl.CUSTOM_LOOKAHEAD_VALIDATION},e)}))}({lookaheadStrategy:t.lookaheadStrategy,rules:Li(t.gastProductionsCache),tokenTypes:Li(t.tokensMap),grammarName:r});t.definitionErrors=t.definitionErrors.concat(e,n)}var a})),Zi(t.definitionErrors)&&(t.recoveryEnabled&&t.TRACE_INIT("computeAllProdsFollows",(function(){var e=function(e){var t={};return hi(e,(function(e){var n=new Ma(e).startWalking();ct(t,n)})),t}(Li(t.gastProductionsCache));t.resyncFollows=e})),t.TRACE_INIT("ComputeLookaheadFunctions",(function(){var e,n;null===(n=(e=t.lookaheadStrategy).initialize)||void 0===n||n.call(e,{rules:Li(t.gastProductionsCache)}),t.preComputeLookaheadFunctions(Li(t.gastProductionsCache))}))),!e.DEFER_DEFINITION_ERRORS_HANDLING&&!Zi(t.definitionErrors))throw n=Si(t.definitionErrors,(function(e){return e.message})),new Error("Parser Definition Errors detected:\n ".concat(n.join("\n-------------------------------\n")))}))}}],[{key:"performSelfAnalysis",value:function(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")}}]),e}();Fl.DEFER_DEFINITION_ERRORS_HANDLING=!1,Nl=Fl,[Ks,rl,pl,vl,gl,ml,yl,Al,El,kl].forEach((function(e){var t=e.prototype;Object.getOwnPropertyNames(t).forEach((function(n){if("constructor"!==n){var r=Object.getOwnPropertyDescriptor(t,n);r&&(r.get||r.set)?Object.defineProperty(Nl.prototype,n,r):Nl.prototype[n]=e.prototype[n]}}))}));var Ol=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dl;(0,v.Z)(this,n);var i=or(r);return i.outputCst=!0,t.call(this,e,i)}return(0,m.Z)(n)}(Fl);return{CstParser:Ol,Lexer:No,createToken:Xo}}(),Tf=Cf.CstParser,Mf=Cf.Lexer,If=Cf.createToken,kf=null,Bf=null,Rf=null,Pf=null,Df={INTENSITY:1,INTENSITY_ALPHA:2,RGB:3,RGBA:4},Lf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;(0,v.Z)(this,e),this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}return(0,m.Z)(e,[{key:"_initWorker",value:function(e){if(!this.workers[e]){var t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}},{key:"_getIdleWorker",value:function(){for(var e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}},{key:"_onMessage",value:function(e,t){var n=this.workersResolve[e];if(n&&n(t),this.queue.length){var r=this.queue.shift(),i=r.resolve,a=r.msg,o=r.transfer;this.workersResolve[e]=i,this.workers[e].postMessage(a,o)}else this.workerStatus^=1<<e}},{key:"setWorkerCreator",value:function(e){this.workerCreator=e}},{key:"setWorkerLimit",value:function(e){this.pool=e}},{key:"postMessage",value:function(e,t){var n=this;return new Promise((function(r){var i=n._getIdleWorker();-1!==i?(n._initWorker(i),n.workerStatus|=1<<i,n.workersResolve[i]=r,n.workers[i].postMessage(e,t)):n.queue.push({resolve:r,msg:e,transfer:t})}))}},{key:"dispose",value:function(){this.workers.forEach((function(e){return e.terminate()})),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}]),e}(),Nf=0,Ff=2,Of=0,Uf=0,zf=2,Gf=0,Qf=0,Zf=1,Hf=2,jf=1,Vf=64,Wf=0,Xf=9,Yf=15,Kf=16,Jf=22,qf=37,$f=43,ed=76,td=83,nd=97,rd=100,id=103,ad=109,od=(0,m.Z)((function e(){(0,v.Z)(this,e),this.vkFormat=Wf,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=Nf,this.levels=[],this.dataFormatDescriptor=[{vendorId:Uf,descriptorType:Of,descriptorBlockSize:0,versionNumber:zf,colorModel:Gf,colorPrimaries:jf,transferFunction:Hf,flags:Qf,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null})),sd=function(){function e(t,n,r,i){(0,v.Z)(this,e),this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+n,r),this._littleEndian=i,this._offset=0}return(0,m.Z)(e,[{key:"_nextUint8",value:function(){var e=this._dataView.getUint8(this._offset);return this._offset+=1,e}},{key:"_nextUint16",value:function(){var e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}},{key:"_nextUint32",value:function(){var e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}},{key:"_nextUint64",value:function(){var e=this._dataView.getUint32(this._offset,this._littleEndian),t=this._dataView.getUint32(this._offset+4,this._littleEndian),n=e+Math.pow(2,32)*t;return this._offset+=8,n}},{key:"_nextInt32",value:function(){var e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}},{key:"_nextUint8Array",value:function(e){var t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}},{key:"_skip",value:function(e){return this._offset+=e,this}},{key:"_scan",value:function(e,t){void 0===t&&(t=0);for(var n=this._offset,r=0;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}]),e}(),ld=[171,75,84,88,32,50,48,187,13,10,26,10],ud,cd,fd;function dd(e){return"undefined"!==typeof TextDecoder?(new TextDecoder).decode(e):Buffer.from(e).toString("utf8")}function hd(e){var t=new Uint8Array(e.buffer,e.byteOffset,ld.length);if(t[0]!==ld[0]||t[1]!==ld[1]||t[2]!==ld[2]||t[3]!==ld[3]||t[4]!==ld[4]||t[5]!==ld[5]||t[6]!==ld[6]||t[7]!==ld[7]||t[8]!==ld[8]||t[9]!==ld[9]||t[10]!==ld[10]||t[11]!==ld[11])throw new Error("Missing KTX 2.0 identifier.");var n=new od,r=17*Uint32Array.BYTES_PER_ELEMENT,i=new sd(e,ld.length,r,!0);n.vkFormat=i._nextUint32(),n.typeSize=i._nextUint32(),n.pixelWidth=i._nextUint32(),n.pixelHeight=i._nextUint32(),n.pixelDepth=i._nextUint32(),n.layerCount=i._nextUint32(),n.faceCount=i._nextUint32();var a=i._nextUint32();n.supercompressionScheme=i._nextUint32();for(var o=i._nextUint32(),s=i._nextUint32(),l=i._nextUint32(),u=i._nextUint32(),c=i._nextUint64(),f=i._nextUint64(),d=3*a*8,h=new sd(e,ld.length+r,d,!0),p=0;p<a;p++)n.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+h._nextUint64(),h._nextUint64()),uncompressedByteLength:h._nextUint64()});for(var v=new sd(e,o,s,!0),m={vendorId:v._skip(4)._nextUint16(),descriptorType:v._nextUint16(),versionNumber:v._nextUint16(),descriptorBlockSize:v._nextUint16(),colorModel:v._nextUint8(),colorPrimaries:v._nextUint8(),transferFunction:v._nextUint8(),flags:v._nextUint8(),texelBlockDimension:[v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8()],bytesPlane:[v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8()],samples:[]},g=(m.descriptorBlockSize/4-6)/4,y=0;y<g;y++){var A={bitOffset:v._nextUint16(),bitLength:v._nextUint8(),channelType:v._nextUint8(),samplePosition:[v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};A.channelType&Vf?(A.sampleLower=v._nextInt32(),A.sampleUpper=v._nextInt32()):(A.sampleLower=v._nextUint32(),A.sampleUpper=v._nextUint32()),m.samples[y]=A}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(m);for(var b=new sd(e,l,u,!0);b._offset<u;){var x=b._nextUint32(),_=b._scan(x),w=dd(_);if(n.keyValue[w]=b._nextUint8Array(x-_.byteLength-1),w.match(/^ktx/i)){var S=dd(n.keyValue[w]);n.keyValue[w]=S.substring(0,S.lastIndexOf("\0"))}var E=x%4?4-x%4:0;b._skip(E)}if(f<=0)return n;for(var C=new sd(e,c,f,!0),T=C._nextUint16(),M=C._nextUint16(),I=C._nextUint32(),k=C._nextUint32(),B=C._nextUint32(),R=C._nextUint32(),P=[],D=0;D<a;D++)P.push({imageFlags:C._nextUint32(),rgbSliceByteOffset:C._nextUint32(),rgbSliceByteLength:C._nextUint32(),alphaSliceByteOffset:C._nextUint32(),alphaSliceByteLength:C._nextUint32()});var L=c+C._offset,N=L+I,F=N+k,O=F+B,U=new Uint8Array(e.buffer,e.byteOffset+L,I),z=new Uint8Array(e.buffer,e.byteOffset+N,k),G=new Uint8Array(e.buffer,e.byteOffset+F,B),Q=new Uint8Array(e.buffer,e.byteOffset+O,R);return n.globalData={endpointCount:T,selectorCount:M,imageDescs:P,endpointsData:U,selectorsData:z,tablesData:G,extendedData:Q},n}var pd={env:{emscripten_notify_memory_growth:function(e){fd=new Uint8Array(cd.exports.memory.buffer)}}},vd=function(){function e(){(0,v.Z)(this,e)}return(0,m.Z)(e,[{key:"init",value:function(){return ud||(ud="undefined"!==typeof fetch?fetch("data:application/wasm;base64,"+md).then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,pd)})).then(this._init):WebAssembly.instantiate(Buffer.from(md,"base64"),pd).then(this._init))}},{key:"_init",value:function(e){cd=e.instance,pd.env.emscripten_notify_memory_growth(0)}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!cd)throw new Error("ZSTDDecoder: Await .init() before decoding.");var n=e.byteLength,r=cd.exports.malloc(n);fd.set(e,r),t=t||Number(cd.exports.ZSTD_findDecompressedSize(r,n));var i=cd.exports.malloc(t),a=cd.exports.ZSTD_decompress(i,t,r,n),o=fd.slice(i,i+a);return cd.exports.free(r),cd.exports.free(i),o}}]),e}(),md="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",gd=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e,r,i,a,o,s){var l;return(0,v.Z)(this,n),(l=t.call(this,e,r,i,o,s)).isCompressedArrayTexture=!0,l.image.depth=a,l.wrapR=A.ClampToEdgeWrapping,l}return(0,m.Z)(n)}(A.CompressedTexture),yd=new WeakMap,Ad=0,bd,xd=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e)).transcoderPath="",r.transcoderBinary=null,r.transcoderPending=null,r.workerPool=new Lf,r.workerSourceURL="",r.workerConfig=null,"undefined"!==typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.'),r}return(0,m.Z)(n,[{key:"setTranscoderPath",value:function(e){return this.transcoderPath=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerPool.setWorkerLimit(e),this}},{key:"detectSupport",value:function(e){return this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},e.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}},{key:"init",value:function(){var e=this;if(!this.transcoderPending){var t=new A.FileLoader(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);var r=t.loadAsync("basis_transcoder.js"),i=new A.FileLoader(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);var a=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([r,a]).then((function(t){var r=(0,o.Z)(t,2),i=r[0],a=r[1],s=n.BasisWorker.toString(),l=["/* constants */","let _EngineFormat = "+JSON.stringify(n.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(n.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(n.BasisFormat),"/* basis_transcoder.js */",i,"/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([l])),e.transcoderBinary=a,e.workerPool.setWorkerCreator((function(){var t=new Worker(e.workerSourceURL),n=e.transcoderBinary.slice(0);return t.postMessage({type:"init",config:e.workerConfig,transcoderBinary:n},[n]),t}))})),Ad>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),Ad++}return this.transcoderPending}},{key:"load",value:function(e,t,n,r){var i=this;if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");var a=new A.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){if(yd.has(e))return yd.get(e).promise.then(t).catch(r);i._createTexture(e).then((function(e){return t?t(e):null})).catch(r)}),n,r)}},{key:"_createTextureFrom",value:function(e,t){var n=e.mipmaps,r=e.width,i=e.height,a=e.format,o=e.type,s=e.error,l=e.dfdTransferFn,u=e.dfdFlags;if("error"===o)return Promise.reject(s);var c=t.layerCount>1?new gd(n,r,i,t.layerCount,a,A.UnsignedByteType):new A.CompressedTexture(n,r,i,a,A.UnsignedByteType);return c.minFilter=1===n.length?A.LinearFilter:A.LinearMipmapLinearFilter,c.magFilter=A.LinearFilter,c.generateMipmaps=!1,c.needsUpdate=!0,"colorSpace"in c?c.colorSpace=l===Hf?"srgb":"srgb-linear":c.encoding=l===Hf?3001:3e3,c.premultiplyAlpha=!!(u&Zf),c}},{key:"_createTexture",value:function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t){var n,r,i,a,o=this,s=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:{},(r=hd(new Uint8Array(t))).vkFormat===Wf){e.next=4;break}return e.abrupt("return",Cd(r));case 4:return i=n,a=this.init().then((function(){return o.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:i},[t])})).then((function(e){return o._createTextureFrom(e.data,r)})),yd.set(t,{promise:a}),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),Ad--,this}}]),n}(A.Loader),_d=xd;A.RGBAFormat,A.RGBA_ASTC_4x4_Format,A.RGBA_BPTC_Format,A.RGBA_ETC2_EAC_Format,A.RGBA_PVRTC_4BPPV1_Format,A.RGBA_S3TC_DXT5_Format,A.RGB_ETC1_Format,A.RGB_ETC2_Format,A.RGB_PVRTC_4BPPV1_Format,A.RGB_S3TC_DXT1_Format;var wd=(x={},(0,r.Z)(x,ad,A.RGBAFormat),(0,r.Z)(x,nd,A.RGBAFormat),(0,r.Z)(x,qf,A.RGBAFormat),(0,r.Z)(x,$f,A.RGBAFormat),(0,r.Z)(x,id,A.RGFormat),(0,r.Z)(x,td,A.RGFormat),(0,r.Z)(x,Kf,A.RGFormat),(0,r.Z)(x,Jf,A.RGFormat),(0,r.Z)(x,rd,A.RedFormat),(0,r.Z)(x,ed,A.RedFormat),(0,r.Z)(x,Yf,A.RedFormat),(0,r.Z)(x,Xf,A.RedFormat),x),Sd=(_={},(0,r.Z)(_,ad,A.FloatType),(0,r.Z)(_,nd,A.HalfFloatType),(0,r.Z)(_,qf,A.UnsignedByteType),(0,r.Z)(_,$f,A.UnsignedByteType),(0,r.Z)(_,id,A.FloatType),(0,r.Z)(_,td,A.HalfFloatType),(0,r.Z)(_,Kf,A.UnsignedByteType),(0,r.Z)(_,Jf,A.UnsignedByteType),(0,r.Z)(_,rd,A.FloatType),(0,r.Z)(_,ed,A.HalfFloatType),(0,r.Z)(_,Yf,A.UnsignedByteType),(0,r.Z)(_,Xf,A.UnsignedByteType),_),Ed=(w={},(0,r.Z)(w,$f,3001),(0,r.Z)(w,Jf,3001),(0,r.Z)(w,Yf,3001),w);function Cd(e){return Td.apply(this,arguments)}function Td(){return Td=(0,c.Z)((0,u.Z)().mark((function e(t){var n,r,i,a,o,s,l,f;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.vkFormat,r=t.pixelWidth,i=t.pixelHeight,a=t.pixelDepth,void 0!==wd[n]){e.next=3;break}throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");case 3:if(o=t.levels[0],t.supercompressionScheme!==Nf){e.next=8;break}s=o.levelData,e.next=16;break;case 8:if(t.supercompressionScheme!==Ff){e.next=15;break}return bd||(bd=new Promise(function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new vd,e.next=3,n.init();case 3:t(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.next=12,bd;case 12:s=e.sent.decode(o.levelData,o.uncompressedByteLength),e.next=16;break;case 15:throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");case 16:return l=Sd[n]===A.FloatType?new Float32Array(s.buffer,s.byteOffset,s.byteLength/Float32Array.BYTES_PER_ELEMENT):Sd[n]===A.HalfFloatType?new Uint16Array(s.buffer,s.byteOffset,s.byteLength/Uint16Array.BYTES_PER_ELEMENT):s,(f=0===a?new A.DataTexture(l,r,i):new pf(l,r,i,a)).type=Sd[n],f.format=wd[n],f.encoding=Ed[n]||3e3,f.needsUpdate=!0,e.abrupt("return",Promise.resolve(f));case 23:case"end":return e.stop()}}),e)}))),Td.apply(this,arguments)}var Md=null,Id=null,kd=function(){var e=0,t=-3;function n(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function r(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new n,this.dtree=new n}var i=new n,a=new n,o=new Uint8Array(30),s=new Uint16Array(30),l=new Uint8Array(30),u=new Uint16Array(30),c=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=new n,d=new Uint8Array(320);function h(e,t,n,r){var i,a;for(i=0;i<n;++i)e[i]=0;for(i=0;i<30-n;++i)e[i+n]=i/n|0;for(a=r,i=0;i<30;++i)t[i]=a,a+=1<<e[i]}var p=new Uint16Array(16);function v(e,t,n,r){var i,a;for(i=0;i<16;++i)e.table[i]=0;for(i=0;i<r;++i)e.table[t[n+i]]++;for(e.table[0]=0,a=0,i=0;i<16;++i)p[i]=a,a+=e.table[i];for(i=0;i<r;++i)t[n+i]&&(e.trans[p[t[n+i]]++]=i)}function m(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function g(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,r+n}function y(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=0,r=0,i=0,a=e.tag;do{r=2*r+(1&a),a>>>=1,++i,n+=t.table[i],r-=t.table[i]}while(r>=0);return e.tag=a,e.bitcount-=i,t.trans[n+r]}function A(e,t,n){var r,i,a,o,s,l;for(r=g(e,5,257),i=g(e,5,1),a=g(e,4,4),o=0;o<19;++o)d[o]=0;for(o=0;o<a;++o){var u=g(e,3,0);d[c[o]]=u}for(v(f,d,0,19),s=0;s<r+i;){var h=y(e,f);switch(h){case 16:var p=d[s-1];for(l=g(e,2,3);l;--l)d[s++]=p;break;case 17:for(l=g(e,3,3);l;--l)d[s++]=0;break;case 18:for(l=g(e,7,11);l;--l)d[s++]=0;break;default:d[s++]=h}}v(t,d,0,r),v(n,d,r,i)}function b(t,n,r){for(;;){var i,a,c,f,d=y(t,n);if(256===d)return e;if(d<256)t.dest[t.destLen++]=d;else for(i=g(t,o[d-=257],s[d]),a=y(t,r),f=c=t.destLen-g(t,l[a],u[a]);f<c+i;++f)t.dest[t.destLen++]=t.dest[f]}}function x(n){for(var r,i;n.bitcount>8;)n.sourceIndex--,n.bitcount-=8;if((r=256*(r=n.source[n.sourceIndex+1])+n.source[n.sourceIndex])!==(65535&~(256*n.source[n.sourceIndex+3]+n.source[n.sourceIndex+2])))return t;for(n.sourceIndex+=4,i=r;i;--i)n.dest[n.destLen++]=n.source[n.sourceIndex++];return n.bitcount=0,e}!function(e,t){var n;for(n=0;n<7;++n)e.table[n]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,n=0;n<24;++n)e.trans[n]=256+n;for(n=0;n<144;++n)e.trans[24+n]=n;for(n=0;n<8;++n)e.trans[168+n]=280+n;for(n=0;n<112;++n)e.trans[176+n]=144+n;for(n=0;n<5;++n)t.table[n]=0;for(t.table[5]=32,n=0;n<32;++n)t.trans[n]=n}(i,a),h(o,s,4,3),h(l,u,2,1),o[28]=0,s[28]=258;var _=function(n,o){var s,l,u=new r(n,o);do{switch(s=m(u),g(u,2,0)){case 0:l=x(u);break;case 1:l=b(u,i,a);break;case 2:A(u,u.ltree,u.dtree),l=b(u,u.ltree,u.dtree);break;default:l=t}if(l!==e)throw new Error("Data error")}while(!s);return u.destLen<u.dest.length?"function"===typeof u.dest.slice?u.dest.slice(0,u.destLen):u.dest.subarray(0,u.destLen):u.dest};function w(e,t,n,r,i){return Math.pow(1-i,3)*e+3*Math.pow(1-i,2)*i*t+3*(1-i)*Math.pow(i,2)*n+Math.pow(i,3)*r}function S(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function E(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function C(e){throw new Error(e)}function T(e,t){e||C(t)}S.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},S.prototype.addPoint=function(e,t){"number"===typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"===typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},S.prototype.addX=function(e){this.addPoint(e,null)},S.prototype.addY=function(e){this.addPoint(null,e)},S.prototype.addBezier=function(e,t,n,r,i,a,o,s){var l=[e,t],u=[n,r],c=[i,a],f=[o,s];this.addPoint(e,t),this.addPoint(o,s);for(var d=0;d<=1;d++){var h=6*l[d]-12*u[d]+6*c[d],p=-3*l[d]+9*u[d]-9*c[d]+3*f[d],v=3*u[d]-3*l[d];if(0!==p){var m=Math.pow(h,2)-4*v*p;if(!(m<0)){var g=(-h+Math.sqrt(m))/(2*p);0<g&&g<1&&(0===d&&this.addX(w(l[d],u[d],c[d],f[d],g)),1===d&&this.addY(w(l[d],u[d],c[d],f[d],g)));var y=(-h-Math.sqrt(m))/(2*p);0<y&&y<1&&(0===d&&this.addX(w(l[d],u[d],c[d],f[d],y)),1===d&&this.addY(w(l[d],u[d],c[d],f[d],y)))}}else{if(0===h)continue;var A=-v/h;0<A&&A<1&&(0===d&&this.addX(w(l[d],u[d],c[d],f[d],A)),1===d&&this.addY(w(l[d],u[d],c[d],f[d],A)))}}},S.prototype.addQuad=function(e,t,n,r,i,a){var o=e+2/3*(n-e),s=t+2/3*(r-t),l=o+1/3*(i-e),u=s+1/3*(a-t);this.addBezier(e,t,o,s,l,u,i,a)},E.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},E.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},E.prototype.curveTo=E.prototype.bezierCurveTo=function(e,t,n,r,i,a){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:r,x:i,y:a})},E.prototype.quadTo=E.prototype.quadraticCurveTo=function(e,t,n,r){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:r})},E.prototype.close=E.prototype.closePath=function(){this.commands.push({type:"Z"})},E.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof S){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},E.prototype.getBoundingBox=function(){for(var e=new S,t=0,n=0,r=0,i=0,a=0;a<this.commands.length;a++){var o=this.commands[a];switch(o.type){case"M":e.addPoint(o.x,o.y),t=r=o.x,n=i=o.y;break;case"L":e.addPoint(o.x,o.y),r=o.x,i=o.y;break;case"Q":e.addQuad(r,i,o.x1,o.y1,o.x,o.y),r=o.x,i=o.y;break;case"C":e.addBezier(r,i,o.x1,o.y1,o.x2,o.y2,o.x,o.y),r=o.x,i=o.y;break;case"Z":r=t,i=n;break;default:throw new Error("Unexpected path command "+o.type)}}return e.isEmpty()&&e.addPoint(0,0),e},E.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];"M"===n.type?e.moveTo(n.x,n.y):"L"===n.type?e.lineTo(n.x,n.y):"C"===n.type?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},E.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function n(){for(var e=arguments,n="",r=0;r<arguments.length;r+=1){var i=e[r];i>=0&&r>0&&(n+=" "),n+=t(i)}return n}e=void 0!==e?e:2;for(var r="",i=0;i<this.commands.length;i+=1){var a=this.commands[i];"M"===a.type?r+="M"+n(a.x,a.y):"L"===a.type?r+="L"+n(a.x,a.y):"C"===a.type?r+="C"+n(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?r+="Q"+n(a.x1,a.y1,a.x,a.y):"Z"===a.type&&(r+="Z")}return r},E.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>"},E.prototype.toDOMElement=function(e){var t=this.toPathData(e),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),n};var M={fail:C,argument:T,assert:T},I=2147483648,k={},B={},R={};function P(e){return function(){return e}}B.BYTE=function(e){return M.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},R.BYTE=P(1),B.CHAR=function(e){return[e.charCodeAt(0)]},R.CHAR=P(1),B.CHARARRAY=function(e){"undefined"===typeof e&&(e="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var t=[],n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t},R.CHARARRAY=function(e){return"undefined"===typeof e?0:e.length},B.USHORT=function(e){return[e>>8&255,255&e]},R.USHORT=P(2),B.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},R.SHORT=P(2),B.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},R.UINT24=P(3),B.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},R.ULONG=P(4),B.LONG=function(e){return e>=I&&(e=-(2*I-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},R.LONG=P(4),B.FIXED=B.ULONG,R.FIXED=R.ULONG,B.FWORD=B.SHORT,R.FWORD=R.SHORT,B.UFWORD=B.USHORT,R.UFWORD=R.USHORT,B.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},R.LONGDATETIME=P(8),B.TAG=function(e){return M.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},R.TAG=P(4),B.Card8=B.BYTE,R.Card8=R.BYTE,B.Card16=B.USHORT,R.Card16=R.USHORT,B.OffSize=B.BYTE,R.OffSize=R.BYTE,B.SID=B.USHORT,R.SID=R.USHORT,B.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?B.NUMBER16(e):B.NUMBER32(e)},R.NUMBER=function(e){return B.NUMBER(e).length},B.NUMBER16=function(e){return[28,e>>8&255,255&e]},R.NUMBER16=P(3),B.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},R.NUMBER32=P(5),B.REAL=function(e){var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(n){var r=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*r)/r).toString()}for(var i="",a=0,o=t.length;a<o;a+=1){var s=t[a];i+="e"===s?"-"===t[++a]?"c":"b":"."===s?"a":"-"===s?"e":s}for(var l=[30],u=0,c=(i+=1&i.length?"f":"ff").length;u<c;u+=2)l.push(parseInt(i.substr(u,2),16));return l},R.REAL=function(e){return B.REAL(e).length},B.NAME=B.CHARARRAY,R.NAME=R.CHARARRAY,B.STRING=B.CHARARRAY,R.STRING=R.CHARARRAY,k.UTF8=function(e,t,n){for(var r=[],i=n,a=0;a<i;a++,t+=1)r[a]=e.getUint8(t);return String.fromCharCode.apply(null,r)},k.UTF16=function(e,t,n){for(var r=[],i=n/2,a=0;a<i;a++,t+=2)r[a]=e.getUint16(t);return String.fromCharCode.apply(null,r)},B.UTF16=function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t[t.length]=r>>8&255,t[t.length]=255&r}return t},R.UTF16=function(e){return 2*e.length};var D={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026 \xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026 \u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026 \xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026 \u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026 \xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026 \u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026 \u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026 \xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026 \xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026 \xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"};k.MACSTRING=function(e,t,n,r){var i=D[r];if(void 0!==i){for(var a="",o=0;o<n;o++){var s=e.getUint8(t+o);a+=s<=127?String.fromCharCode(s):i[127&s]}return a}};var L,N="function"===typeof WeakMap&&new WeakMap;function F(e){return e>=-128&&e<=127}function O(e,t,n){for(var r=0,i=e.length;t<i&&r<64&&0===e[t];)++t,++r;return n.push(128|r-1),t}function U(e,t,n){for(var r=0,i=e.length,a=t;a<i&&r<64;){var o=e[a];if(!F(o))break;if(0===o&&a+1<i&&0===e[a+1])break;++a,++r}n.push(r-1);for(var s=t;s<a;++s)n.push(e[s]+256&255);return a}function z(e,t,n){for(var r=0,i=e.length,a=t;a<i&&r<64;){var o=e[a];if(0===o)break;if(F(o)&&a+1<i&&F(e[a+1]))break;++a,++r}n.push(64|r-1);for(var s=t;s<a;++s){var l=e[s];n.push(l+65536>>8&255,l+256&255)}return a}B.MACSTRING=function(e,t){var n=function(e){if(!L)for(var t in L={},D)L[t]=new String(t);var n=L[e];if(void 0!==n){if(N){var r=N.get(n);if(void 0!==r)return r}var i=D[e];if(void 0!==i){for(var a={},o=0;o<i.length;o++)a[i.charCodeAt(o)]=o+128;return N&&N.set(n,a),a}}}(t);if(void 0!==n){for(var r=[],i=0;i<e.length;i++){var a=e.charCodeAt(i);if(a>=128&&void 0===(a=n[a]))return;r[i]=a}return r}},R.MACSTRING=function(e,t){var n=B.MACSTRING(e,t);return void 0!==n?n.length:0},B.VARDELTAS=function(e){for(var t=0,n=[];t<e.length;){var r=e[t];t=0===r?O(e,t,n):r>=-128&&r<=127?U(e,t,n):z(e,t,n)}return n},B.INDEX=function(e){for(var t=1,n=[t],r=[],i=0;i<e.length;i+=1){var a=B.OBJECT(e[i]);Array.prototype.push.apply(r,a),t+=a.length,n.push(t)}if(0===r.length)return[0,0];for(var o=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,l=[void 0,B.BYTE,B.USHORT,B.UINT24,B.ULONG][s],u=0;u<n.length;u+=1){var c=l(n[u]);Array.prototype.push.apply(o,c)}return Array.prototype.concat(B.Card16(e.length),B.OffSize(s),o,r)},R.INDEX=function(e){return B.INDEX(e).length},B.DICT=function(e){for(var t=[],n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var a=parseInt(n[i],0),o=e[a];t=(t=t.concat(B.OPERAND(o.value,o.type))).concat(B.OPERATOR(a))}return t},R.DICT=function(e){return B.DICT(e).length},B.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},B.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r+=1)M.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(B.OPERAND(e[r],t[r]));else if("SID"===t)n=n.concat(B.NUMBER(e));else if("offset"===t)n=n.concat(B.NUMBER32(e));else if("number"===t)n=n.concat(B.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);n=n.concat(B.REAL(e))}return n},B.OP=B.BYTE,R.OP=R.BYTE;var G="function"===typeof WeakMap&&new WeakMap;function Q(e,t,n){if(t.length&&("coverageFormat"!==t[0].name||1===t[0].value))for(var r=0;r<t.length;r+=1){var i=t[r];this[i.name]=i.value}if(this.tableName=e,this.fields=t,n)for(var a=Object.keys(n),o=0;o<a.length;o+=1){var s=a[o],l=n[s];void 0!==this[s]&&(this[s]=l)}}function Z(e,t,n){void 0===n&&(n=t.length);var r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:n};for(var i=0;i<t.length;i++)r[i+1]={name:e+i,type:"USHORT",value:t[i]};return r}function H(e,t,n){var r=t.length,i=new Array(r+1);i[0]={name:e+"Count",type:"USHORT",value:r};for(var a=0;a<r;a++)i[a+1]={name:e+a,type:"TABLE",value:n(t[a],a)};return i}function j(e,t,n){var r=t.length,i=[];i[0]={name:e+"Count",type:"USHORT",value:r};for(var a=0;a<r;a++)i=i.concat(n(t[a],a));return i}function V(e){1===e.format?Q.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Z("glyph",e.glyphs))):2===e.format?Q.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(j("rangeRecord",e.ranges,(function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]})))):M.assert(!1,"Coverage format must be 1 or 2.")}function W(e){Q.call(this,"scriptListTable",j("scriptRecord",e,(function(e,t){var n=e.script,r=n.defaultLangSys;return M.assert(!!r,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new Q("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Q("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(Z("featureIndex",r.featureIndexes)))}].concat(j("langSys",n.langSysRecords,(function(e,t){var n=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new Q("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(Z("featureIndex",n.featureIndexes)))}]}))))}]})))}function X(e){Q.call(this,"featureListTable",j("featureRecord",e,(function(e,t){var n=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new Q("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(Z("lookupListIndex",n.lookupListIndexes)))}]})))}function Y(e,t){Q.call(this,"lookupListTable",H("lookup",e,(function(e){var n=t[e.lookupType];return M.assert(!!n,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new Q("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(H("subtable",e.subtables,n)))})))}B.CHARSTRING=function(e){if(G){var t=G.get(e);if(void 0!==t)return t}for(var n=[],r=e.length,i=0;i<r;i+=1){var a=e[i];n=n.concat(B[a.type](a.value))}return G&&G.set(e,n),n},R.CHARSTRING=function(e){return B.CHARSTRING(e).length},B.OBJECT=function(e){var t=B[e.type];return M.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},R.OBJECT=function(e){var t=R[e.type];return M.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},B.TABLE=function(e){for(var t=[],n=e.fields.length,r=[],i=[],a=0;a<n;a+=1){var o=e.fields[a],s=B[o.type];M.argument(void 0!==s,"No encoding function for field type "+o.type+" ("+o.name+")");var l=e[o.name];void 0===l&&(l=o.value);var u=s(l);"TABLE"===o.type?(i.push(t.length),t=t.concat([0,0]),r.push(u)):t=t.concat(u)}for(var c=0;c<r.length;c+=1){var f=i[c],d=t.length;M.argument(d<65536,"Table "+e.tableName+" too big."),t[f]=d>>8,t[f+1]=255&d,t=t.concat(r[c])}return t},R.TABLE=function(e){for(var t=0,n=e.fields.length,r=0;r<n;r+=1){var i=e.fields[r],a=R[i.type];M.argument(void 0!==a,"No sizeOf function for field type "+i.type+" ("+i.name+")");var o=e[i.name];void 0===o&&(o=i.value),t+=a(o),"TABLE"===i.type&&(t+=2)}return t},B.RECORD=B.TABLE,R.RECORD=R.TABLE,B.LITERAL=function(e){return e},R.LITERAL=function(e){return e.length},Q.prototype.encode=function(){return B.TABLE(this)},Q.prototype.sizeOf=function(){return R.TABLE(this)},V.prototype=Object.create(Q.prototype),V.prototype.constructor=V,W.prototype=Object.create(Q.prototype),W.prototype.constructor=W,X.prototype=Object.create(Q.prototype),X.prototype.constructor=X,Y.prototype=Object.create(Q.prototype),Y.prototype.constructor=Y;var K={Table:Q,Record:Q,Coverage:V,ScriptList:W,FeatureList:X,LookupList:Y,ushortList:Z,tableList:H,recordList:j};function J(e,t){return e.getUint8(t)}function q(e,t){return e.getUint16(t,!1)}function $(e,t){return e.getUint32(t,!1)}function ee(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var te={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ne(e,t){this.data=e,this.offset=t,this.relativeOffset=0}ne.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ne.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ne.prototype.parseCard8=ne.prototype.parseByte,ne.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ne.prototype.parseCard16=ne.prototype.parseUShort,ne.prototype.parseSID=ne.prototype.parseUShort,ne.prototype.parseOffset16=ne.prototype.parseUShort,ne.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ne.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},ne.prototype.parseULong=function(){var e=$(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ne.prototype.parseOffset32=ne.prototype.parseULong,ne.prototype.parseFixed=function(){var e=ee(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ne.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,r="";this.relativeOffset+=e;for(var i=0;i<e;i++)r+=String.fromCharCode(t.getUint8(n+i));return r},ne.prototype.parseTag=function(){return this.parseString(4)},ne.prototype.parseLongDateTime=function(){var e=$(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},ne.prototype.parseVersion=function(e){var t=q(this.data,this.offset+this.relativeOffset),n=q(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+n/e/10},ne.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=te[e]*t},ne.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint32(r),r+=4;return this.relativeOffset+=4*e,t},ne.prototype.parseOffset16List=ne.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint16(r),r+=2;return this.relativeOffset+=2*e,t},ne.prototype.parseShortList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getInt16(r),r+=2;return this.relativeOffset+=2*e,t},ne.prototype.parseByteList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint8(r++);return this.relativeOffset+=e,t},ne.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},ne.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},ne.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=Object.keys(t),i=0;i<e;i++){for(var a={},o=0;o<r.length;o++){var s=r[o],l=t[s];a[s]=l.call(this)}n[i]=a}return n},ne.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=Object.keys(t),i=0;i<e;i++){for(var a={},o=0;o<r.length;o++){var s=r[o],l=t[s];a[s]=l.call(this)}n[i]=a}return n},ne.prototype.parseStruct=function(e){if("function"===typeof e)return e.call(this);for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r],a=e[i];n[i]=a.call(this)}return n},ne.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},ne.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),n=new Array(t),r=0;r<t;r++)n[r]=this.parseValueRecord(e);return n},ne.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new ne(this.data,this.offset+t).parseStruct(e)},ne.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new ne(this.data,this.offset+t).parseStruct(e)},ne.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),n=t.length,r=this.relativeOffset,i=new Array(n),a=0;a<n;a++){var o=t[a];if(0!==o)if(this.relativeOffset=o,e){for(var s=this.parseOffset16List(),l=new Array(s.length),u=0;u<s.length;u++)this.relativeOffset=o+s[u],l[u]=e.call(this);i[a]=l}else i[a]=this.parseUShortList();else i[a]=void 0}return this.relativeOffset=r,i},ne.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(n)};if(2===t){for(var r=new Array(n),i=0;i<n;i++)r[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},ne.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:ne.uShort,end:ne.uShort,classId:ne.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},ne.list=function(e,t){return function(){return this.parseList(e,t)}},ne.list32=function(e,t){return function(){return this.parseList32(e,t)}},ne.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},ne.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},ne.pointer=function(e){return function(){return this.parsePointer(e)}},ne.pointer32=function(e){return function(){return this.parsePointer32(e)}},ne.tag=ne.prototype.parseTag,ne.byte=ne.prototype.parseByte,ne.uShort=ne.offset16=ne.prototype.parseUShort,ne.uShortList=ne.prototype.parseUShortList,ne.uLong=ne.offset32=ne.prototype.parseULong,ne.uLongList=ne.prototype.parseULongList,ne.struct=ne.prototype.parseStruct,ne.coverage=ne.prototype.parseCoverage,ne.classDef=ne.prototype.parseClassDef;var re={reserved:ne.uShort,reqFeatureIndex:ne.uShort,featureIndexes:ne.uShortList};ne.prototype.parseScriptList=function(){return this.parsePointer(ne.recordList({tag:ne.tag,script:ne.pointer({defaultLangSys:ne.pointer(re),langSysRecords:ne.recordList({tag:ne.tag,langSys:ne.pointer(re)})})}))||[]},ne.prototype.parseFeatureList=function(){return this.parsePointer(ne.recordList({tag:ne.tag,feature:ne.pointer({featureParams:ne.offset16,lookupListIndexes:ne.uShortList})}))||[]},ne.prototype.parseLookupList=function(e){return this.parsePointer(ne.list(ne.pointer((function(){var t=this.parseUShort();M.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var n=this.parseUShort(),r=16&n;return{lookupType:t,lookupFlag:n,subtables:this.parseList(ne.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}}))))||[]},ne.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return M.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ne.offset32,featureTableSubstitutionOffset:ne.offset32})}))||[]};var ie={getByte:J,getCard8:J,getUShort:q,getCard16:q,getShort:function(e,t){return e.getInt16(t,!1)},getULong:$,getFixed:ee,getTag:function(e,t){for(var n="",r=t;r<t+4;r+=1)n+=String.fromCharCode(e.getInt8(r));return n},getOffset:function(e,t,n){for(var r=0,i=0;i<n;i+=1)r<<=8,r+=e.getUint8(t+i);return r},getBytes:function(e,t,n){for(var r=[],i=t;i<n;i+=1)r.push(e.getUint8(i));return r},bytesToString:function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t},Parser:ne};function ae(e,t,n){e.segments.push({end:t,start:t,delta:-(t-n),offset:0,glyphIndex:n})}var oe={parse:function(e,t){var n={};n.version=ie.getUShort(e,t),M.argument(0===n.version,"cmap table version should be 0."),n.numTables=ie.getUShort(e,t+2);for(var r=-1,i=n.numTables-1;i>=0;i-=1){var a=ie.getUShort(e,t+4+8*i),o=ie.getUShort(e,t+4+8*i+2);if(3===a&&(0===o||1===o||10===o)||0===a&&(0===o||1===o||2===o||3===o||4===o)){r=ie.getULong(e,t+4+8*i+4);break}}if(-1===r)throw new Error("No valid cmap sub-tables found.");var s=new ie.Parser(e,t+r);if(n.format=s.parseUShort(),12===n.format)!function(e,t){var n;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=n=t.parseULong(),e.glyphIndexMap={};for(var r=0;r<n;r+=1)for(var i=t.parseULong(),a=t.parseULong(),o=t.parseULong(),s=i;s<=a;s+=1)e.glyphIndexMap[s]=o,o++}(n,s);else{if(4!==n.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");!function(e,t,n,r,i){var a;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=a=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var o=new ie.Parser(n,r+i+14),s=new ie.Parser(n,r+i+16+2*a),l=new ie.Parser(n,r+i+16+4*a),u=new ie.Parser(n,r+i+16+6*a),c=r+i+16+8*a,f=0;f<a-1;f+=1)for(var d=void 0,h=o.parseUShort(),p=s.parseUShort(),v=l.parseShort(),m=u.parseUShort(),g=p;g<=h;g+=1)0!==m?(c=u.offset+u.relativeOffset-2,c+=m,c+=2*(g-p),0!==(d=ie.getUShort(n,c))&&(d=d+v&65535)):d=g+v&65535,e.glyphIndexMap[g]=d}(n,s,e,t,r)}return n},make:function(e){var t,n=!0;for(t=e.length-1;t>0;t-=1){if(e.get(t).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),n=!1;break}}var r=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:n?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:n?12:20}];n||(r=r.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),r=r.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var i=new K.Table("cmap",r);for(i.segments=[],t=0;t<e.length;t+=1){for(var a=e.get(t),o=0;o<a.unicodes.length;o+=1)ae(i,a.unicodes[o],t);i.segments=i.segments.sort((function(e,t){return e.start-t.start}))}!function(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}(i);var s=i.segments.length,l=0,u=[],c=[],f=[],d=[],h=[],p=[];for(t=0;t<s;t+=1){var v=i.segments[t];v.end<=65535&&v.start<=65535?(u=u.concat({name:"end_"+t,type:"USHORT",value:v.end}),c=c.concat({name:"start_"+t,type:"USHORT",value:v.start}),f=f.concat({name:"idDelta_"+t,type:"SHORT",value:v.delta}),d=d.concat({name:"idRangeOffset_"+t,type:"USHORT",value:v.offset}),void 0!==v.glyphId&&(h=h.concat({name:"glyph_"+t,type:"USHORT",value:v.glyphId}))):l+=1,n||void 0===v.glyphIndex||(p=(p=(p=p.concat({name:"cmap12Start_"+t,type:"ULONG",value:v.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:v.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:v.glyphIndex}))}if(i.segCountX2=2*(s-l),i.searchRange=2*Math.pow(2,Math.floor(Math.log(s-l)/Math.log(2))),i.entrySelector=Math.log(i.searchRange/2)/Math.log(2),i.rangeShift=i.segCountX2-i.searchRange,i.fields=i.fields.concat(u),i.fields.push({name:"reservedPad",type:"USHORT",value:0}),i.fields=i.fields.concat(c),i.fields=i.fields.concat(f),i.fields=i.fields.concat(d),i.fields=i.fields.concat(h),i.cmap4Length=14+2*u.length+2+2*c.length+2*f.length+2*d.length+2*h.length,!n){var m=16+4*p.length;i.cmap12Offset=20+i.cmap4Length,i.fields=i.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:m},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:p.length/3}]),i.fields=i.fields.concat(p)}return i}},se=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],le=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ue=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ce=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function fe(e){this.font=e}function de(e){this.cmap=e}function he(e,t){this.encoding=e,this.charset=t}function pe(e){switch(e.version){case 1:this.names=ce.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<ce.length?this.names[t]=ce[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-ce.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var n=0;n<e.numberOfGlyphs;n++)this.names[n]=ce[n+e.glyphNameIndex[n]];break;default:this.names=[]}}function ve(e,t){t.lowMemory?function(e){e._IndexToUnicodeMap={};for(var t=e.tables.cmap.glyphIndexMap,n=Object.keys(t),r=0;r<n.length;r+=1){var i=n[r],a=t[i];void 0===e._IndexToUnicodeMap[a]?e._IndexToUnicodeMap[a]={unicodes:[parseInt(i)]}:e._IndexToUnicodeMap[a].unicodes.push(parseInt(i))}}(e):function(e){for(var t,n=e.tables.cmap.glyphIndexMap,r=Object.keys(n),i=0;i<r.length;i+=1){var a=r[i],o=n[a];(t=e.glyphs.get(o)).addUnicode(parseInt(a))}for(var s=0;s<e.glyphs.length;s+=1)t=e.glyphs.get(s),e.cffEncoding?e.isCIDFont?t.name="gid"+s:t.name=e.cffEncoding.charset[s]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(s))}(e)}fe.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.font.glyphs;if(n)for(var r=0;r<n.length;r+=1)for(var i=n.get(r),a=0;a<i.unicodes.length;a+=1)if(i.unicodes[a]===t)return r;return null},de.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},he.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.encoding[t];return this.charset.indexOf(n)},pe.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},pe.prototype.glyphIndexToName=function(e){return this.names[e]};var me={line:function(e,t,n,r,i){e.beginPath(),e.moveTo(t,n),e.lineTo(r,i),e.stroke()}};function ge(e){this.bindConstructorValues(e)}function ye(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(t){e[n]=t},enumerable:!0,configurable:!0})}function Ae(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];r.path.unitsPerEm=e.unitsPerEm,this.glyphs[n]=r}this.length=t&&t.length||0}ge.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],"xMin"in e&&(this.xMin=e.xMin),"yMin"in e&&(this.yMin=e.yMin),"xMax"in e&&(this.xMax=e.xMax),"yMax"in e&&(this.yMax=e.yMax),"advanceWidth"in e&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",function(e,t){var n=t||new E;return{configurable:!0,get:function(){return"function"===typeof n&&(n=n()),n},set:function(e){n=e}}}(0,e.path))},ge.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},ge.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},ge.prototype.getPath=function(e,t,n,r,i){var a,o;e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:72,r||(r={});var s=r.xScale,l=r.yScale;if(r.hinting&&i&&i.hinting&&(o=this.path&&i.hinting.exec(this,n)),o)a=i.hinting.getCommands(o),e=Math.round(e),t=Math.round(t),s=l=1;else{a=this.path.commands;var u=1/(this.path.unitsPerEm||1e3)*n;void 0===s&&(s=u),void 0===l&&(l=u)}for(var c=new E,f=0;f<a.length;f+=1){var d=a[f];"M"===d.type?c.moveTo(e+d.x*s,t+-d.y*l):"L"===d.type?c.lineTo(e+d.x*s,t+-d.y*l):"Q"===d.type?c.quadraticCurveTo(e+d.x1*s,t+-d.y1*l,e+d.x*s,t+-d.y*l):"C"===d.type?c.curveTo(e+d.x1*s,t+-d.y1*l,e+d.x2*s,t+-d.y2*l,e+d.x*s,t+-d.y*l):"Z"===d.type&&c.closePath()}return c},ge.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){var r=this.points[n];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return M.argument(0===t.length,"There are still points left in the current contour."),e},ge.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],r=0;r<e.length;r+=1){var i=e[r];"Z"!==i.type&&(t.push(i.x),n.push(i.y)),"Q"!==i.type&&"C"!==i.type||(t.push(i.x1),n.push(i.y1)),"C"===i.type&&(t.push(i.x2),n.push(i.y2))}var a={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(a.xMin)||(a.xMin=0),isFinite(a.xMax)||(a.xMax=this.advanceWidth),isFinite(a.yMin)||(a.yMin=0),isFinite(a.yMax)||(a.yMax=0),a.rightSideBearing=this.advanceWidth-a.leftSideBearing-(a.xMax-a.xMin),a},ge.prototype.draw=function(e,t,n,r,i){this.getPath(t,n,r,i).draw(e)},ge.prototype.drawPoints=function(e,t,n,r){function i(t,n,r,i){e.beginPath();for(var a=0;a<t.length;a+=1)e.moveTo(n+t[a].x*i,r+t[a].y*i),e.arc(n+t[a].x*i,r+t[a].y*i,2,0,2*Math.PI,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:24;for(var a=1/this.path.unitsPerEm*r,o=[],s=[],l=this.path,u=0;u<l.commands.length;u+=1){var c=l.commands[u];void 0!==c.x&&o.push({x:c.x,y:-c.y}),void 0!==c.x1&&s.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&s.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",i(o,t,n,a),e.fillStyle="red",i(s,t,n,a)},ge.prototype.drawMetrics=function(e,t,n,r){var i;t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:24,i=1/this.path.unitsPerEm*r,e.lineWidth=1,e.strokeStyle="black",me.line(e,t,-1e4,t,1e4),me.line(e,-1e4,n,1e4,n);var a=this.xMin||0,o=this.yMin||0,s=this.xMax||0,l=this.yMax||0,u=this.advanceWidth||0;e.strokeStyle="blue",me.line(e,t+a*i,-1e4,t+a*i,1e4),me.line(e,t+s*i,-1e4,t+s*i,1e4),me.line(e,-1e4,n+-o*i,1e4,n+-o*i),me.line(e,-1e4,n+-l*i,1e4,n+-l*i),e.strokeStyle="green",me.line(e,t+u*i,-1e4,t+u*i,1e4)},Ae.prototype.get=function(e){if(void 0===this.glyphs[e]){this.font._push(e),"function"===typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());var t=this.glyphs[e],n=this.font._IndexToUnicodeMap[e];if(n)for(var r=0;r<n.unicodes.length;r++)t.addUnicode(n.unicodes[r]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+e:t.name=this.font.cffEncoding.charset[e]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(e)),this.glyphs[e].advanceWidth=this.font._hmtxTableData[e].advanceWidth,this.glyphs[e].leftSideBearing=this.font._hmtxTableData[e].leftSideBearing}else"function"===typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());return this.glyphs[e]},Ae.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var be={GlyphSet:Ae,glyphLoader:function(e,t){return new ge({index:t,font:e})},ttfGlyphLoader:function(e,t,n,r,i,a){return function(){var o=new ge({index:t,font:e});return o.path=function(){n(o,r,i);var t=a(e.glyphs,o);return t.unitsPerEm=e.unitsPerEm,t},ye(o,"xMin","_xMin"),ye(o,"xMax","_xMax"),ye(o,"yMin","_yMin"),ye(o,"yMax","_yMax"),o}},cffGlyphLoader:function(e,t,n,r){return function(){var i=new ge({index:t,font:e});return i.path=function(){var t=n(e,i,r);return t.unitsPerEm=e.unitsPerEm,t},i}}};function xe(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(!xe(e[n],t[n]))return!1;return!0}return!1}function _e(e){return e.length<1240?107:e.length<33900?1131:32768}function we(e,t,n){var r,i,a=[],o=[],s=ie.getCard16(e,t);if(0!==s){var l=ie.getByte(e,t+2);r=t+(s+1)*l+2;for(var u=t+3,c=0;c<s+1;c+=1)a.push(ie.getOffset(e,u,l)),u+=l;i=r+a[s]}else i=t+2;for(var f=0;f<a.length-1;f+=1){var d=ie.getBytes(e,r+a[f],r+a[f+1]);n&&(d=n(d)),o.push(d)}return{objects:o,startOffset:t,endOffset:i}}function Se(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var r=e.parseByte(),i=r>>4,a=15&r;if(15===i)break;if(t+=n[i],15===a)break;t+=n[a]}return parseFloat(t)}(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return 256*(t-247)+e.parseByte()+108;if(t>=251&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function Ee(e,t,n){t=void 0!==t?t:0;var r=new ie.Parser(e,t),i=[],a=[];for(n=void 0!==n?n:e.length;r.relativeOffset<n;){var o=r.parseByte();o<=21?(12===o&&(o=1200+r.parseByte()),i.push([o,a]),a=[]):a.push(Se(r,o))}return function(e){for(var t={},n=0;n<e.length;n+=1){var r=e[n][0],i=e[n][1],a=void 0;if(a=1===i.length?i[0]:i,t.hasOwnProperty(r)&&!isNaN(t[r]))throw new Error("Object "+t+" already has key "+r);t[r]=a}return t}(i)}function Ce(e,t){return t=t<=390?se[t]:e[t-391]}function Te(e,t,n){for(var r,i={},a=0;a<t.length;a+=1){var o=t[a];if(Array.isArray(o.type)){var s=[];s.length=o.type.length;for(var l=0;l<o.type.length;l++)void 0===(r=void 0!==e[o.op]?e[o.op][l]:void 0)&&(r=void 0!==o.value&&void 0!==o.value[l]?o.value[l]:null),"SID"===o.type[l]&&(r=Ce(n,r)),s[l]=r;i[o.name]=s}else void 0===(r=e[o.op])&&(r=void 0!==o.value?o.value:null),"SID"===o.type&&(r=Ce(n,r)),i[o.name]=r}return i}var Me=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Ie=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function ke(e,t){return Te(Ee(e,0,e.byteLength),Me,t)}function Be(e,t,n,r){return Te(Ee(e,t,n),Ie,r)}function Re(e,t,n,r){for(var i=[],a=0;a<n.length;a+=1){var o=ke(new DataView(new Uint8Array(n[a]).buffer),r);o._subrs=[],o._subrsBias=0,o._defaultWidthX=0,o._nominalWidthX=0;var s=o.private[0],l=o.private[1];if(0!==s&&0!==l){var u=Be(e,l+t,s,r);if(o._defaultWidthX=u.defaultWidthX,o._nominalWidthX=u.nominalWidthX,0!==u.subrs){var c=we(e,l+u.subrs+t);o._subrs=c.objects,o._subrsBias=_e(o._subrs)}o._privateDict=u}i.push(o)}return i}function Pe(e,t,n){var r,i,a,o,s,l,u,c,f=new E,d=[],h=0,p=!1,v=!1,m=0,g=0;if(e.isCIDFont){var y=e.tables.cff.topDict._fdSelect[t.index],A=e.tables.cff.topDict._fdArray[y];s=A._subrs,l=A._subrsBias,u=A._defaultWidthX,c=A._nominalWidthX}else s=e.tables.cff.topDict._subrs,l=e.tables.cff.topDict._subrsBias,u=e.tables.cff.topDict._defaultWidthX,c=e.tables.cff.topDict._nominalWidthX;var b=u;function x(e,t){v&&f.closePath(),f.moveTo(e,t),v=!0}function _(){d.length%2!==0&&!p&&(b=d.shift()+c),h+=d.length>>1,d.length=0,p=!0}return function n(u){for(var y,A,w,S,E,C,T,M,I,k,B,R,P=0;P<u.length;){var D=u[P];switch(P+=1,D){case 1:case 3:case 18:case 23:_();break;case 4:d.length>1&&!p&&(b=d.shift()+c,p=!0),g+=d.pop(),x(m,g);break;case 5:for(;d.length>0;)m+=d.shift(),g+=d.shift(),f.lineTo(m,g);break;case 6:for(;d.length>0&&(m+=d.shift(),f.lineTo(m,g),0!==d.length);)g+=d.shift(),f.lineTo(m,g);break;case 7:for(;d.length>0&&(g+=d.shift(),f.lineTo(m,g),0!==d.length);)m+=d.shift(),f.lineTo(m,g);break;case 8:for(;d.length>0;)r=m+d.shift(),i=g+d.shift(),a=r+d.shift(),o=i+d.shift(),m=a+d.shift(),g=o+d.shift(),f.curveTo(r,i,a,o,m,g);break;case 10:E=d.pop()+l,(C=s[E])&&n(C);break;case 11:return;case 12:switch(D=u[P],P+=1,D){case 35:r=m+d.shift(),i=g+d.shift(),a=r+d.shift(),o=i+d.shift(),T=a+d.shift(),M=o+d.shift(),I=T+d.shift(),k=M+d.shift(),B=I+d.shift(),R=k+d.shift(),m=B+d.shift(),g=R+d.shift(),d.shift(),f.curveTo(r,i,a,o,T,M),f.curveTo(I,k,B,R,m,g);break;case 34:r=m+d.shift(),i=g,a=r+d.shift(),o=i+d.shift(),T=a+d.shift(),M=o,I=T+d.shift(),k=o,B=I+d.shift(),R=g,m=B+d.shift(),f.curveTo(r,i,a,o,T,M),f.curveTo(I,k,B,R,m,g);break;case 36:r=m+d.shift(),i=g+d.shift(),a=r+d.shift(),o=i+d.shift(),T=a+d.shift(),M=o,I=T+d.shift(),k=o,B=I+d.shift(),R=k+d.shift(),m=B+d.shift(),f.curveTo(r,i,a,o,T,M),f.curveTo(I,k,B,R,m,g);break;case 37:r=m+d.shift(),i=g+d.shift(),a=r+d.shift(),o=i+d.shift(),T=a+d.shift(),M=o+d.shift(),I=T+d.shift(),k=M+d.shift(),B=I+d.shift(),R=k+d.shift(),Math.abs(B-m)>Math.abs(R-g)?m=B+d.shift():g=R+d.shift(),f.curveTo(r,i,a,o,T,M),f.curveTo(I,k,B,R,m,g);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+D),d.length=0}break;case 14:d.length>0&&!p&&(b=d.shift()+c,p=!0),v&&(f.closePath(),v=!1);break;case 19:case 20:_(),P+=h+7>>3;break;case 21:d.length>2&&!p&&(b=d.shift()+c,p=!0),g+=d.pop(),x(m+=d.pop(),g);break;case 22:d.length>1&&!p&&(b=d.shift()+c,p=!0),x(m+=d.pop(),g);break;case 24:for(;d.length>2;)r=m+d.shift(),i=g+d.shift(),a=r+d.shift(),o=i+d.shift(),m=a+d.shift(),g=o+d.shift(),f.curveTo(r,i,a,o,m,g);m+=d.shift(),g+=d.shift(),f.lineTo(m,g);break;case 25:for(;d.length>6;)m+=d.shift(),g+=d.shift(),f.lineTo(m,g);r=m+d.shift(),i=g+d.shift(),a=r+d.shift(),o=i+d.shift(),m=a+d.shift(),g=o+d.shift(),f.curveTo(r,i,a,o,m,g);break;case 26:for(d.length%2&&(m+=d.shift());d.length>0;)r=m,i=g+d.shift(),a=r+d.shift(),o=i+d.shift(),m=a,g=o+d.shift(),f.curveTo(r,i,a,o,m,g);break;case 27:for(d.length%2&&(g+=d.shift());d.length>0;)r=m+d.shift(),i=g,a=r+d.shift(),o=i+d.shift(),m=a+d.shift(),g=o,f.curveTo(r,i,a,o,m,g);break;case 28:y=u[P],A=u[P+1],d.push((y<<24|A<<16)>>16),P+=2;break;case 29:E=d.pop()+e.gsubrsBias,(C=e.gsubrs[E])&&n(C);break;case 30:for(;d.length>0&&(r=m,i=g+d.shift(),a=r+d.shift(),o=i+d.shift(),m=a+d.shift(),g=o+(1===d.length?d.shift():0),f.curveTo(r,i,a,o,m,g),0!==d.length);)r=m+d.shift(),i=g,a=r+d.shift(),o=i+d.shift(),g=o+d.shift(),m=a+(1===d.length?d.shift():0),f.curveTo(r,i,a,o,m,g);break;case 31:for(;d.length>0&&(r=m+d.shift(),i=g,a=r+d.shift(),o=i+d.shift(),g=o+d.shift(),m=a+(1===d.length?d.shift():0),f.curveTo(r,i,a,o,m,g),0!==d.length);)r=m,i=g+d.shift(),a=r+d.shift(),o=i+d.shift(),m=a+d.shift(),g=o+(1===d.length?d.shift():0),f.curveTo(r,i,a,o,m,g);break;default:D<32?console.log("Glyph "+t.index+": unknown operator "+D):D<247?d.push(D-139):D<251?(y=u[P],P+=1,d.push(256*(D-247)+y+108)):D<255?(y=u[P],P+=1,d.push(256*-(D-251)-y-108)):(y=u[P],A=u[P+1],w=u[P+2],S=u[P+3],P+=4,d.push((y<<24|A<<16|w<<8|S)/65536))}}}(n),t.advanceWidth=b,f}function De(e,t){var n,r=se.indexOf(e);return r>=0&&(n=r),(r=t.indexOf(e))>=0?n=r+se.length:(n=se.length+t.length,t.push(e)),n}function Le(e,t,n){for(var r={},i=0;i<e.length;i+=1){var a=e[i],o=t[a.name];void 0===o||xe(o,a.value)||("SID"===a.type&&(o=De(o,n)),r[a.op]={name:a.name,type:a.type,value:o})}return r}function Ne(e,t){var n=new K.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=Le(Me,e,t),n}function Fe(e){var t=new K.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function Oe(e){var t=[],n=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var r=0,i=0,a=0;a<n.commands.length;a+=1){var o=void 0,s=void 0,l=n.commands[a];if("Q"===l.type){var u=1/3,c=2/3;l={type:"C",x:l.x,y:l.y,x1:Math.round(u*r+c*l.x1),y1:Math.round(u*i+c*l.y1),x2:Math.round(u*l.x+c*l.x1),y2:Math.round(u*l.y+c*l.y1)}}if("M"===l.type)o=Math.round(l.x-r),s=Math.round(l.y-i),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(l.x),i=Math.round(l.y);else if("L"===l.type)o=Math.round(l.x-r),s=Math.round(l.y-i),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(l.x),i=Math.round(l.y);else if("C"===l.type){var f=Math.round(l.x1-r),d=Math.round(l.y1-i),h=Math.round(l.x2-l.x1),p=Math.round(l.y2-l.y1);o=Math.round(l.x-l.x2),s=Math.round(l.y-l.y2),t.push({name:"dx1",type:"NUMBER",value:f}),t.push({name:"dy1",type:"NUMBER",value:d}),t.push({name:"dx2",type:"NUMBER",value:h}),t.push({name:"dy2",type:"NUMBER",value:p}),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(l.x),i=Math.round(l.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var Ue={parse:function(e,t,n,r){n.tables.cff={};var i=function(e,t){var n={};return n.formatMajor=ie.getCard8(e,t),n.formatMinor=ie.getCard8(e,t+1),n.size=ie.getCard8(e,t+2),n.offsetSize=ie.getCard8(e,t+3),n.startOffset=t,n.endOffset=t+4,n}(e,t),a=we(e,i.endOffset,ie.bytesToString),o=we(e,a.endOffset),s=we(e,o.endOffset,ie.bytesToString),l=we(e,s.endOffset);n.gsubrs=l.objects,n.gsubrsBias=_e(n.gsubrs);var u=Re(e,t,o.objects,s.objects);if(1!==u.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+u.length);var c=u[0];if(n.tables.cff.topDict=c,c._privateDict&&(n.defaultWidthX=c._privateDict.defaultWidthX,n.nominalWidthX=c._privateDict.nominalWidthX),void 0!==c.ros[0]&&void 0!==c.ros[1]&&(n.isCIDFont=!0),n.isCIDFont){var f=c.fdArray,d=c.fdSelect;if(0===f||0===d)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var h=we(e,f+=t),p=Re(e,t,h.objects,s.objects);c._fdArray=p,d+=t,c._fdSelect=function(e,t,n,r){var i,a=[],o=new ie.Parser(e,t),s=o.parseCard8();if(0===s)for(var l=0;l<n;l++){if((i=o.parseCard8())>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+r+")");a.push(i)}else{if(3!==s)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+s);var u,c=o.parseCard16(),f=o.parseCard16();if(0!==f)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+f);for(var d=0;d<c;d++){if(i=o.parseCard8(),u=o.parseCard16(),i>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+r+")");if(u>n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+u);for(;f<u;f++)a.push(i);f=u}if(u!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+u)}return a}(e,d,n.numGlyphs,p.length)}var v,m=t+c.private[1],g=Be(e,m,c.private[0],s.objects);if(n.defaultWidthX=g.defaultWidthX,n.nominalWidthX=g.nominalWidthX,0!==g.subrs){var y=m+g.subrs,A=we(e,y);n.subrs=A.objects,n.subrsBias=_e(n.subrs)}else n.subrs=[],n.subrsBias=0;r.lowMemory?(v=function(e,t){var n,r,i=[],a=ie.getCard16(e,t);if(0!==a){var o=ie.getByte(e,t+2);n=t+(a+1)*o+2;for(var s=t+3,l=0;l<a+1;l+=1)i.push(ie.getOffset(e,s,o)),s+=o;r=n+i[a]}else r=t+2;return{offsets:i,startOffset:t,endOffset:r}}(e,t+c.charStrings),n.nGlyphs=v.offsets.length):(v=we(e,t+c.charStrings),n.nGlyphs=v.objects.length);var b=function(e,t,n,r){var i,a,o=new ie.Parser(e,t);n-=1;var s=[".notdef"],l=o.parseCard8();if(0===l)for(var u=0;u<n;u+=1)i=o.parseSID(),s.push(Ce(r,i));else if(1===l)for(;s.length<=n;){i=o.parseSID(),a=o.parseCard8();for(var c=0;c<=a;c+=1)s.push(Ce(r,i)),i+=1}else{if(2!==l)throw new Error("Unknown charset format "+l);for(;s.length<=n;){i=o.parseSID(),a=o.parseCard16();for(var f=0;f<=a;f+=1)s.push(Ce(r,i)),i+=1}}return s}(e,t+c.charset,n.nGlyphs,s.objects);if(0===c.encoding?n.cffEncoding=new he(le,b):1===c.encoding?n.cffEncoding=new he(ue,b):n.cffEncoding=function(e,t,n){var r,i={},a=new ie.Parser(e,t),o=a.parseCard8();if(0===o)for(var s=a.parseCard8(),l=0;l<s;l+=1)i[r=a.parseCard8()]=l;else{if(1!==o)throw new Error("Unknown encoding format "+o);var u=a.parseCard8();r=1;for(var c=0;c<u;c+=1)for(var f=a.parseCard8(),d=a.parseCard8(),h=f;h<=f+d;h+=1)i[h]=r,r+=1}return new he(i,n)}(e,t+c.encoding,b),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new be.GlyphSet(n),r.lowMemory)n._push=function(r){var i=function(e,t,n,r,i){var a=ie.getCard16(n,r),o=0;0!==a&&(o=r+(a+1)*ie.getByte(n,r+2)+2);var s=ie.getBytes(n,o+t[e],o+t[e+1]);return i&&(s=i(s)),s}(r,v.offsets,e,t+c.charStrings);n.glyphs.push(r,be.cffGlyphLoader(n,r,Pe,i))};else for(var x=0;x<n.nGlyphs;x+=1){var _=v.objects[x];n.glyphs.push(x,be.cffGlyphLoader(n,x,Pe,_))}},make:function(e,t){for(var n,r=new K.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),i=1/t.unitsPerEm,a={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[i,0,0,i,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o=[],s=1;s<e.length;s+=1)n=e.get(s),o.push(n.name);var l=[];r.header=new K.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),r.nameIndex=function(e){var t=new K.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}([t.postScriptName]);var u=Ne(a,l);r.topDictIndex=Fe(u),r.globalSubrIndex=new K.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),r.charsets=function(e,t){for(var n=new K.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var i=De(e[r],t);n.fields.push({name:"glyph_"+r,type:"SID",value:i})}return n}(o,l),r.charStringsIndex=function(e){for(var t=new K.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var r=e.get(n),i=Oe(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return t}(e),r.privateDict=function(e,t){var n=new K.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=Le(Ie,e,t),n}({},l),r.stringIndex=function(e){var t=new K.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}(l);var c=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return a.charset=c,a.encoding=0,a.charStrings=a.charset+r.charsets.sizeOf(),a.private[1]=a.charStrings+r.charStringsIndex.sizeOf(),u=Ne(a,l),r.topDictIndex=Fe(u),r}};var ze={parse:function(e,t){var n={},r=new ie.Parser(e,t);return n.version=r.parseVersion(),n.fontRevision=Math.round(1e3*r.parseFixed())/1e3,n.checkSumAdjustment=r.parseULong(),n.magicNumber=r.parseULong(),M.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),n.flags=r.parseUShort(),n.unitsPerEm=r.parseUShort(),n.created=r.parseLongDateTime(),n.modified=r.parseLongDateTime(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.macStyle=r.parseUShort(),n.lowestRecPPEM=r.parseUShort(),n.fontDirectionHint=r.parseShort(),n.indexToLocFormat=r.parseShort(),n.glyphDataFormat=r.parseShort(),n},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new K.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}};var Ge={parse:function(e,t){var n={},r=new ie.Parser(e,t);return n.version=r.parseVersion(),n.ascender=r.parseShort(),n.descender=r.parseShort(),n.lineGap=r.parseShort(),n.advanceWidthMax=r.parseUShort(),n.minLeftSideBearing=r.parseShort(),n.minRightSideBearing=r.parseShort(),n.xMaxExtent=r.parseShort(),n.caretSlopeRise=r.parseShort(),n.caretSlopeRun=r.parseShort(),n.caretOffset=r.parseShort(),r.relativeOffset+=8,n.metricDataFormat=r.parseShort(),n.numberOfHMetrics=r.parseUShort(),n},make:function(e){return new K.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}};var Qe={parse:function(e,t,n,r,i,a,o){o.lowMemory?function(e,t,n,r,i){var a,o;e._hmtxTableData={};for(var s=new ie.Parser(t,n),l=0;l<i;l+=1)l<r&&(a=s.parseUShort(),o=s.parseShort()),e._hmtxTableData[l]={advanceWidth:a,leftSideBearing:o}}(e,t,n,r,i):function(e,t,n,r,i){for(var a,o,s=new ie.Parser(e,t),l=0;l<r;l+=1){l<n&&(a=s.parseUShort(),o=s.parseShort());var u=i.get(l);u.advanceWidth=a,u.leftSideBearing=o}}(t,n,r,i,a)},make:function(e){for(var t=new K.Table("hmtx",[]),n=0;n<e.length;n+=1){var r=e.get(n),i=r.advanceWidth||0,a=r.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:i}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:a})}return t}};var Ze={make:function(e){for(var t=new K.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),n="",r=12+4*e.length,i=0;i<e.length;++i){var a=n.indexOf(e[i]);a<0&&(a=n.length,n+=e[i]),t.fields.push({name:"offset "+i,type:"USHORT",value:r+a}),t.fields.push({name:"length "+i,type:"USHORT",value:e[i].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t},parse:function(e,t){var n=new ie.Parser(e,t),r=n.parseULong();M.argument(1===r,"Unsupported ltag table version."),n.skip("uLong",1);for(var i=n.parseULong(),a=[],o=0;o<i;o++){for(var s="",l=t+n.parseUShort(),u=n.parseUShort(),c=l;c<l+u;++c)s+=String.fromCharCode(e.getInt8(c));a.push(s)}return a}};var He={parse:function(e,t){var n={},r=new ie.Parser(e,t);return n.version=r.parseVersion(),n.numGlyphs=r.parseUShort(),1===n.version&&(n.maxPoints=r.parseUShort(),n.maxContours=r.parseUShort(),n.maxCompositePoints=r.parseUShort(),n.maxCompositeContours=r.parseUShort(),n.maxZones=r.parseUShort(),n.maxTwilightPoints=r.parseUShort(),n.maxStorage=r.parseUShort(),n.maxFunctionDefs=r.parseUShort(),n.maxInstructionDefs=r.parseUShort(),n.maxStackElements=r.parseUShort(),n.maxSizeOfInstructions=r.parseUShort(),n.maxComponentElements=r.parseUShort(),n.maxComponentDepth=r.parseUShort()),n},make:function(e){return new K.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},je=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ve={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},We={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Xe={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Ye(e,t,n){switch(e){case 0:if(65535===t)return"und";if(n)return n[t];break;case 1:return Ve[t];case 3:return Xe[t]}}var Ke="utf-16",Je={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},qe={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function $e(e,t,n){switch(e){case 0:return Ke;case 1:return qe[n]||Je[t];case 3:if(1===t||10===t)return Ke}}function et(e){var t={};for(var n in e)t[e[n]]=parseInt(n);return t}function tt(e,t,n,r,i,a){return new K.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:a}])}function nt(e,t){var n=function(e,t){var n=e.length,r=t.length-n+1;e:for(var i=0;i<r;i++)for(;i<r;i++){for(var a=0;a<n;a++)if(t[i+a]!==e[a])continue e;return i}return-1}(e,t);if(n<0){n=t.length;for(var r=0,i=e.length;r<i;++r)t.push(e[r])}return n}var rt={parse:function(e,t,n){for(var r={},i=new ie.Parser(e,t),a=i.parseUShort(),o=i.parseUShort(),s=i.offset+i.parseUShort(),l=0;l<o;l++){var u=i.parseUShort(),c=i.parseUShort(),f=i.parseUShort(),d=i.parseUShort(),h=je[d]||d,p=i.parseUShort(),v=i.parseUShort(),m=Ye(u,f,n),g=$e(u,c,f);if(void 0!==g&&void 0!==m){var y=void 0;if(y=g===Ke?k.UTF16(e,s+v,p):k.MACSTRING(e,s+v,p,g)){var A=r[h];void 0===A&&(A=r[h]={}),A[m]=y}}}return 1===a&&i.parseUShort(),r},make:function(e,t){var n,r=[],i={},a=et(je);for(var o in e){var s=a[o];if(void 0===s&&(s=o),n=parseInt(s),isNaN(n))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');i[n]=e[o],r.push(n)}for(var l=et(Ve),u=et(Xe),c=[],f=[],d=0;d<r.length;d++){var h=i[n=r[d]];for(var p in h){var v=h[p],m=1,g=l[p],y=We[g],A=$e(m,y,g),b=B.MACSTRING(v,A);void 0===b&&(m=0,(g=t.indexOf(p))<0&&(g=t.length,t.push(p)),y=4,b=B.UTF16(v));var x=nt(b,f);c.push(tt(m,y,g,n,b.length,x));var _=u[p];if(void 0!==_){var w=B.UTF16(v),S=nt(w,f);c.push(tt(3,1,_,n,w.length,S))}}}c.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var E=new K.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+12*c.length}]),C=0;C<c.length;C++)E.fields.push({name:"record_"+C,type:"RECORD",value:c[C]});return E.fields.push({name:"strings",type:"LITERAL",value:f}),E}},it=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];var at={parse:function(e,t){var n={},r=new ie.Parser(e,t);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(var i=0;i<10;i++)n.panose[i]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),n.version>=1&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),n.version>=2&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n},make:function(e){return new K.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:it,getUnicodeRange:function(e){for(var t=0;t<it.length;t+=1){var n=it[t];if(e>=n.begin&&e<n.end)return t}return-1}};var ot={parse:function(e,t){var n={},r=new ie.Parser(e,t);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=ce.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var i=0;i<n.numberOfGlyphs;i++)n.glyphNameIndex[i]=r.parseUShort();n.names=[];for(var a=0;a<n.numberOfGlyphs;a++)if(n.glyphNameIndex[a]>=ce.length){var o=r.parseChar();n.names.push(r.parseString(o))}break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var s=0;s<n.numberOfGlyphs;s++)n.offset[s]=r.parseChar()}return n},make:function(){return new K.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},st=new Array(9);st[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ne.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(ne.coverage),substitute:this.parseOffset16List()}:void M.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},st[2]=function(){var e=this.parseUShort();return M.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ne.coverage),sequences:this.parseListOfLists()}},st[3]=function(){var e=this.parseUShort();return M.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ne.coverage),alternateSets:this.parseListOfLists()}},st[4]=function(){var e=this.parseUShort();return M.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ne.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var lt={sequenceIndex:ne.uShort,lookupListIndex:ne.uShort};st[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(ne.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,lt)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(ne.coverage),classDef:this.parsePointer(ne.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,lt)}}))};if(3===t){var n=this.parseUShort(),r=this.parseUShort();return{substFormat:t,coverages:this.parseList(n,ne.pointer(ne.coverage)),lookupRecords:this.parseRecordList(r,lt)}}M.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},st[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ne.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lt)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(ne.coverage),backtrackClassDef:this.parsePointer(ne.classDef),inputClassDef:this.parsePointer(ne.classDef),lookaheadClassDef:this.parsePointer(ne.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lt)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(ne.pointer(ne.coverage)),inputCoverage:this.parseList(ne.pointer(ne.coverage)),lookaheadCoverage:this.parseList(ne.pointer(ne.coverage)),lookupRecords:this.parseRecordList(lt)}:void M.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},st[7]=function(){var e=this.parseUShort();M.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),n=new ne(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:st[t].call(n)}},st[8]=function(){var e=this.parseUShort();return M.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ne.coverage),backtrackCoverage:this.parseList(ne.pointer(ne.coverage)),lookaheadCoverage:this.parseList(ne.pointer(ne.coverage)),substitutes:this.parseUShortList()}};var ut=new Array(9);ut[1]=function(e){return 1===e.substFormat?new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)}].concat(K.ushortList("substitute",e.substitute)))},ut[2]=function(e){return M.assert(1===e.substFormat,"Lookup type 2 substFormat must be 1."),new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)}].concat(K.tableList("seqSet",e.sequences,(function(e){return new K.Table("sequenceSetTable",K.ushortList("sequence",e))}))))},ut[3]=function(e){return M.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)}].concat(K.tableList("altSet",e.alternateSets,(function(e){return new K.Table("alternateSetTable",K.ushortList("alternate",e))}))))},ut[4]=function(e){return M.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)}].concat(K.tableList("ligSet",e.ligatureSets,(function(e){return new K.Table("ligatureSetTable",K.tableList("ligature",e,(function(e){return new K.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(K.ushortList("component",e.components,e.components.length+1)))})))}))))},ut[6]=function(e){if(1===e.substFormat)return new K.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)}].concat(K.tableList("chainRuleSet",e.chainRuleSets,(function(e){return new K.Table("chainRuleSetTable",K.tableList("chainRule",e,(function(e){var t=K.ushortList("backtrackGlyph",e.backtrack,e.backtrack.length).concat(K.ushortList("inputGlyph",e.input,e.input.length+1)).concat(K.ushortList("lookaheadGlyph",e.lookahead,e.lookahead.length)).concat(K.ushortList("substitution",[],e.lookupRecords.length));return e.lookupRecords.forEach((function(e,n){t=t.concat({name:"sequenceIndex"+n,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+n,type:"USHORT",value:e.lookupListIndex})})),new K.Table("chainRuleTable",t)})))}))));if(2===e.substFormat)M.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===e.substFormat){var t=[{name:"substFormat",type:"USHORT",value:e.substFormat}];return t.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach((function(e,n){t.push({name:"backtrackCoverage"+n,type:"TABLE",value:new K.Coverage(e)})})),t.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach((function(e,n){t.push({name:"inputCoverage"+n,type:"TABLE",value:new K.Coverage(e)})})),t.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach((function(e,n){t.push({name:"lookaheadCoverage"+n,type:"TABLE",value:new K.Coverage(e)})})),t.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach((function(e,n){t=t.concat({name:"sequenceIndex"+n,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+n,type:"USHORT",value:e.lookupListIndex})})),new K.Table("chainContextTable",t)}M.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var ct={parse:function(e,t){var n=new ne(e,t=t||0),r=n.parseVersion(1);return M.argument(1===r||1.1===r,"Unsupported GSUB table version."),1===r?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(st)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(st),variations:n.parseFeatureVariationsList()}},make:function(e){return new K.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new K.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new K.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new K.LookupList(e.lookups,ut)}])}};var ft={parse:function(e,t){var n=new ie.Parser(e,t),r=n.parseULong();M.argument(1===r,"Unsupported META table version."),n.parseULong(),n.parseULong();for(var i=n.parseULong(),a={},o=0;o<i;o++){var s=n.parseTag(),l=n.parseULong(),u=n.parseULong(),c=k.UTF8(e,t+l,u);a[s]=c}return a},make:function(e){var t=Object.keys(e).length,n="",r=16+12*t,i=new K.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:t}]);for(var a in e){var o=n.length;n+=e[a],i.fields.push({name:"tag "+a,type:"TAG",value:a}),i.fields.push({name:"offset "+a,type:"ULONG",value:r+o}),i.fields.push({name:"length "+a,type:"ULONG",value:e[a].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),i}};function dt(e){return Math.log(e)/Math.log(2)|0}function ht(e){for(;e.length%4!==0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%=Math.pow(2,32)}function pt(e,t,n,r){return new K.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function vt(e){var t=new K.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var n=Math.pow(2,dt(t.numTables));t.searchRange=16*n,t.entrySelector=dt(n),t.rangeShift=16*t.numTables-t.searchRange;for(var r=[],i=[],a=t.sizeOf()+pt().sizeOf()*t.numTables;a%4!==0;)a+=1,i.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<e.length;o+=1){var s=e[o];M.argument(4===s.tableName.length,"Table name"+s.tableName+" is invalid.");var l=s.sizeOf(),u=pt(s.tableName,ht(s.encode()),a,l);for(r.push({name:u.tag+" Table Record",type:"RECORD",value:u}),i.push({name:s.tableName+" table",type:"RECORD",value:s}),a+=l,M.argument(!isNaN(a),"Something went wrong calculating the offset.");a%4!==0;)a+=1,i.push({name:"padding",type:"BYTE",value:0})}return r.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(r),t.fields=t.fields.concat(i),t}function mt(e,t,n){for(var r=0;r<t.length;r+=1){var i=e.charToGlyphIndex(t[r]);if(i>0)return e.glyphs.get(i).getMetrics()}return n}function gt(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length}var yt={make:vt,fontToTable:function(e){for(var t,n=[],r=[],i=[],a=[],o=[],s=[],l=[],u=0,c=0,f=0,d=0,h=0,p=0;p<e.glyphs.length;p+=1){var v=e.glyphs.get(p),m=0|v.unicode;if(isNaN(v.advanceWidth))throw new Error("Glyph "+v.name+" ("+p+"): advanceWidth is not a number.");(t>m||void 0===t)&&m>0&&(t=m),u<m&&(u=m);var g=at.getUnicodeRange(m);if(g<32)c|=1<<g;else if(g<64)f|=1<<g-32;else if(g<96)d|=1<<g-64;else{if(!(g<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");h|=1<<g-96}if(".notdef"!==v.name){var y=v.getMetrics();n.push(y.xMin),r.push(y.yMin),i.push(y.xMax),a.push(y.yMax),s.push(y.leftSideBearing),l.push(y.rightSideBearing),o.push(v.advanceWidth)}}var A={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,i),yMax:Math.max.apply(null,a),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:gt(o),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,l)};A.ascender=e.ascender,A.descender=e.descender;var b=ze.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:A.xMin,yMin:A.yMin,xMax:A.xMax,yMax:A.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),x=Ge.make({ascender:A.ascender,descender:A.descender,advanceWidthMax:A.advanceWidthMax,minLeftSideBearing:A.minLeftSideBearing,minRightSideBearing:A.minRightSideBearing,xMaxExtent:A.maxLeftSideBearing+(A.xMax-A.xMin),numberOfHMetrics:e.glyphs.length}),_=He.make(e.glyphs.length),w=at.make(Object.assign({xAvgCharWidth:Math.round(A.advanceWidthAvg),usFirstCharIndex:t,usLastCharIndex:u,ulUnicodeRange1:c,ulUnicodeRange2:f,ulUnicodeRange3:d,ulUnicodeRange4:h,sTypoAscender:A.ascender,sTypoDescender:A.descender,sTypoLineGap:0,usWinAscent:A.yMax,usWinDescent:Math.abs(A.yMin),ulCodePageRange1:1,sxHeight:mt(e,"xyvw",{yMax:Math.round(A.ascender/2)}).yMax,sCapHeight:mt(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",A).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0},e.tables.os2)),S=Qe.make(e.glyphs),E=oe.make(e.glyphs),C=e.getEnglishName("fontFamily"),T=e.getEnglishName("fontSubfamily"),M=C+" "+T,I=e.getEnglishName("postScriptName");I||(I=C.replace(/\s/g,"")+"-"+T);var k={};for(var B in e.names)k[B]=e.names[B];k.uniqueID||(k.uniqueID={en:e.getEnglishName("manufacturer")+":"+M}),k.postScriptName||(k.postScriptName={en:I}),k.preferredFamily||(k.preferredFamily=e.names.fontFamily),k.preferredSubfamily||(k.preferredSubfamily=e.names.fontSubfamily);var R=[],P=rt.make(k,R),D=R.length>0?Ze.make(R):void 0,L=ot.make(),N=Ue.make(e.glyphs,{version:e.getEnglishName("version"),fullName:M,familyName:C,weightName:T,postScriptName:I,unitsPerEm:e.unitsPerEm,fontBBox:[0,A.yMin,A.ascender,A.advanceWidthMax]}),F=e.metas&&Object.keys(e.metas).length>0?ft.make(e.metas):void 0,O=[b,x,_,w,P,E,L,N,S];D&&O.push(D),e.tables.gsub&&O.push(ct.make(e.tables.gsub)),F&&O.push(F);for(var U=vt(O),z=ht(U.encode()),G=U.fields,Q=!1,Z=0;Z<G.length;Z+=1)if("head table"===G[Z].name){G[Z].value.checkSumAdjustment=2981146554-z,Q=!0;break}if(!Q)throw new Error("Could not find head table with checkSum to adjust.");return U},computeCheckSum:ht};function At(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+r>>>1,a=e[i].tag;if(a===t)return i;a<t?n=i+1:r=i-1}return-n-1}function bt(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+r>>>1,a=e[i];if(a===t)return i;a<t?n=i+1:r=i-1}return-n-1}function xt(e,t){for(var n,r=0,i=e.length-1;r<=i;){var a=r+i>>>1,o=(n=e[a]).start;if(o===t)return n;o<t?r=a+1:i=a-1}if(r>0)return t>(n=e[r-1]).end?0:n}function _t(e,t){this.font=e,this.tableName=t}function wt(e){_t.call(this,e,"gpos")}function St(e){_t.call(this,e,"gsub")}function Et(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Ct(e,t,n){for(var r=e.subtables,i=0;i<r.length;i++){var a=r[i];if(a.substFormat===t)return a}if(n)return r.push(n),n}function Tt(e,t){if(!e)throw t}function Mt(e,t,n,r,i){var a;return(t&r)>0?(a=e.parseByte(),0===(t&i)&&(a=-a),a=n+a):a=(t&i)>0?n:n+e.parseShort(),a}function It(e,t,n){var r,i,a=new ie.Parser(t,n);if(e.numberOfContours=a.parseShort(),e._xMin=a.parseShort(),e._yMin=a.parseShort(),e._xMax=a.parseShort(),e._yMax=a.parseShort(),e.numberOfContours>0){for(var o=e.endPointIndices=[],s=0;s<e.numberOfContours;s+=1)o.push(a.parseUShort());e.instructionLength=a.parseUShort(),e.instructions=[];for(var l=0;l<e.instructionLength;l+=1)e.instructions.push(a.parseByte());var u=o[o.length-1]+1;r=[];for(var c=0;c<u;c+=1)if(i=a.parseByte(),r.push(i),(8&i)>0)for(var f=a.parseByte(),d=0;d<f;d+=1)r.push(i),c+=1;if(M.argument(r.length===u,"Bad flags."),o.length>0){var h,p=[];if(u>0){for(var v=0;v<u;v+=1)i=r[v],(h={}).onCurve=!!(1&i),h.lastPointOfContour=o.indexOf(v)>=0,p.push(h);for(var m=0,g=0;g<u;g+=1)i=r[g],(h=p[g]).x=Mt(a,i,m,2,16),m=h.x;for(var y=0,A=0;A<u;A+=1)i=r[A],(h=p[A]).y=Mt(a,i,y,4,32),y=h.y}e.points=p}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var b=!0;b;){r=a.parseUShort();var x={glyphIndex:a.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&r)>0?(2&r)>0?(x.dx=a.parseShort(),x.dy=a.parseShort()):x.matchedPoints=[a.parseUShort(),a.parseUShort()]:(2&r)>0?(x.dx=a.parseChar(),x.dy=a.parseChar()):x.matchedPoints=[a.parseByte(),a.parseByte()],(8&r)>0?x.xScale=x.yScale=a.parseF2Dot14():(64&r)>0?(x.xScale=a.parseF2Dot14(),x.yScale=a.parseF2Dot14()):(128&r)>0&&(x.xScale=a.parseF2Dot14(),x.scale01=a.parseF2Dot14(),x.scale10=a.parseF2Dot14(),x.yScale=a.parseF2Dot14()),e.components.push(x),b=!!(32&r)}if(256&r){e.instructionLength=a.parseUShort(),e.instructions=[];for(var _=0;_<e.instructionLength;_+=1)e.instructions.push(a.parseByte())}}}function kt(e,t){for(var n=[],r=0;r<e.length;r+=1){var i=e[r],a={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};n.push(a)}return n}function Bt(e){var t=new E;if(!e)return t;for(var n=function(e){for(var t=[],n=[],r=0;r<e.length;r+=1){var i=e[r];n.push(i),i.lastPointOfContour&&(t.push(n),n=[])}return M.argument(0===n.length,"There are still points left in the current contour."),t}(e),r=0;r<n.length;++r){var i=n[r],a=null,o=i[i.length-1],s=i[0];if(o.onCurve)t.moveTo(o.x,o.y);else if(s.onCurve)t.moveTo(s.x,s.y);else{var l={x:.5*(o.x+s.x),y:.5*(o.y+s.y)};t.moveTo(l.x,l.y)}for(var u=0;u<i.length;++u)if(a=o,o=s,s=i[(u+1)%i.length],o.onCurve)t.lineTo(o.x,o.y);else{var c=s;a.onCurve||(o.x,a.x,o.y,a.y),s.onCurve||(c={x:.5*(o.x+s.x),y:.5*(o.y+s.y)}),t.quadraticCurveTo(o.x,o.y,c.x,c.y)}t.closePath()}return t}function Rt(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var r=t.components[n],i=e.get(r.glyphIndex);if(i.getPath(),i.points){var a=void 0;if(void 0===r.matchedPoints)a=kt(i.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+t.name);var o=t.points[r.matchedPoints[0]],s=i.points[r.matchedPoints[1]],l={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};s=kt([s],l)[0],l.dx=o.x-s.x,l.dy=o.y-s.y,a=kt(i.points,l)}t.points=t.points.concat(a)}}return Bt(t.points)}_t.prototype={searchTag:At,binSearch:bt,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,n=0;n<e.scripts.length;n++){var r=e.scripts[n].tag;if("DFLT"===r)return r;"latn"===r&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var n=this.getTable(t);if(n){e=e||"DFLT";var r=n.scripts,i=At(n.scripts,e);if(i>=0)return r[i].script;if(t){var a={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-i,0,a),a.script}}},getLangSysTable:function(e,t,n){var r=this.getScriptTable(e,n);if(r){if(!t||"dflt"===t||"DFLT"===t)return r.defaultLangSys;var i=At(r.langSysRecords,t);if(i>=0)return r.langSysRecords[i].langSys;if(n){var a={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-i,0,a),a.langSys}}},getFeatureTable:function(e,t,n,r){var i=this.getLangSysTable(e,t,r);if(i){for(var a,o=i.featureIndexes,s=this.font.tables[this.tableName].features,l=0;l<o.length;l++)if((a=s[o[l]]).tag===n)return a.feature;if(r){var u=s.length;return M.assert(0===u||n>=s[u-1].tag,"Features must be added in alphabetical order."),a={tag:n,feature:{params:0,lookupListIndexes:[]}},s.push(a),o.push(u),a.feature}}},getLookupTables:function(e,t,n,r,i){var a=this.getFeatureTable(e,t,n,i),o=[];if(a){for(var s,l=a.lookupListIndexes,u=this.font.tables[this.tableName].lookups,c=0;c<l.length;c++)(s=u[l[c]]).lookupType===r&&o.push(s);if(0===o.length&&i){s={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var f=u.length;return u.push(s),l.push(f),[s]}}return o},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var n=xt(e.ranges,t);return n?n.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var n=bt(e.glyphs,t);return n>=0?n:-1;case 2:var r=xt(e.ranges,t);return r?r.index+t-r.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],n=e.ranges,r=0;r<n.length;r++)for(var i=n[r],a=i.start,o=i.end,s=a;s<=o;s++)t.push(s);return t}},wt.prototype=_t.prototype,wt.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},wt.prototype.getKerningValue=function(e,t,n){for(var r=0;r<e.length;r++)for(var i=e[r].subtables,a=0;a<i.length;a++){var o=i[a],s=this.getCoverageIndex(o.coverage,t);if(!(s<0))switch(o.posFormat){case 1:for(var l=o.pairSets[s],u=0;u<l.length;u++){var c=l[u];if(c.secondGlyph===n)return c.value1&&c.value1.xAdvance||0}break;case 2:var f=this.getGlyphClass(o.classDef1,t),d=this.getGlyphClass(o.classDef2,n),h=o.classRecords[f][d];return h.value1&&h.value1.xAdvance||0}}return 0},wt.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},St.prototype=_t.prototype,St.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},St.prototype.getSingle=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,1),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++){var l=o[s],u=this.expandCoverage(l.coverage),c=void 0;if(1===l.substFormat){var f=l.deltaGlyphId;for(c=0;c<u.length;c++){var d=u[c];r.push({sub:d,by:d+f})}}else{var h=l.substitute;for(c=0;c<u.length;c++)r.push({sub:u[c],by:h[c]})}}return r},St.prototype.getMultiple=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,2),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++){var l=o[s],u=this.expandCoverage(l.coverage),c=void 0;for(c=0;c<u.length;c++){var f=u[c],d=l.sequences[c];r.push({sub:f,by:d})}}return r},St.prototype.getAlternates=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,3),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++)for(var l=o[s],u=this.expandCoverage(l.coverage),c=l.alternateSets,f=0;f<u.length;f++)r.push({sub:u[f],by:c[f]});return r},St.prototype.getLigatures=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,4),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++)for(var l=o[s],u=this.expandCoverage(l.coverage),c=l.ligatureSets,f=0;f<u.length;f++)for(var d=u[f],h=c[f],p=0;p<h.length;p++){var v=h[p];r.push({sub:[d].concat(v.components),by:v.ligGlyph})}return r},St.prototype.addSingle=function(e,t,n,r){var i=Ct(this.getLookupTables(n,r,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});M.assert(1===i.coverage.format,"Single: unable to modify coverage table format "+i.coverage.format);var a=t.sub,o=this.binSearch(i.coverage.glyphs,a);o<0&&(o=-1-o,i.coverage.glyphs.splice(o,0,a),i.substitute.splice(o,0,0)),i.substitute[o]=t.by},St.prototype.addMultiple=function(e,t,n,r){M.assert(t.by instanceof Array&&t.by.length>1,'Multiple: "by" must be an array of two or more ids');var i=Ct(this.getLookupTables(n,r,e,2,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});M.assert(1===i.coverage.format,"Multiple: unable to modify coverage table format "+i.coverage.format);var a=t.sub,o=this.binSearch(i.coverage.glyphs,a);o<0&&(o=-1-o,i.coverage.glyphs.splice(o,0,a),i.sequences.splice(o,0,0)),i.sequences[o]=t.by},St.prototype.addAlternate=function(e,t,n,r){var i=Ct(this.getLookupTables(n,r,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});M.assert(1===i.coverage.format,"Alternate: unable to modify coverage table format "+i.coverage.format);var a=t.sub,o=this.binSearch(i.coverage.glyphs,a);o<0&&(o=-1-o,i.coverage.glyphs.splice(o,0,a),i.alternateSets.splice(o,0,0)),i.alternateSets[o]=t.by},St.prototype.addLigature=function(e,t,n,r){var i=this.getLookupTables(n,r,e,4,!0)[0],a=i.subtables[0];a||(a={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=a),M.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);var o=t.sub[0],s=t.sub.slice(1),l={ligGlyph:t.by,components:s},u=this.binSearch(a.coverage.glyphs,o);if(u>=0){for(var c=a.ligatureSets[u],f=0;f<c.length;f++)if(Et(c[f].components,s))return;c.push(l)}else u=-1-u,a.coverage.glyphs.splice(u,0,o),a.ligatureSets.splice(u,0,[l])},St.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n);case"ccmp":return this.getMultiple(e,t,n).concat(this.getLigatures(e,t,n));case"stch":return this.getMultiple(e,t,n)}},St.prototype.add=function(e,t,n,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,r);switch(e){case"aalt":case"salt":return"number"===typeof t.by?this.addSingle(e,t,n,r):this.addAlternate(e,t,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,r);case"ccmp":return t.by instanceof Array?this.addMultiple(e,t,n,r):this.addLigature(e,t,n,r)}};var Pt,Dt,Lt,Nt,Ft={getPath:Bt,parse:function(e,t,n,r,i){return i.lowMemory?function(e,t,n,r){var i=new be.GlyphSet(r);return r._push=function(a){var o=n[a];o!==n[a+1]?i.push(a,be.ttfGlyphLoader(r,a,It,e,t+o,Rt)):i.push(a,be.glyphLoader(r,a))},i}(e,t,n,r):function(e,t,n,r){for(var i=new be.GlyphSet(r),a=0;a<n.length-1;a+=1){var o=n[a];o!==n[a+1]?i.push(a,be.ttfGlyphLoader(r,a,It,e,t+o,Rt)):i.push(a,be.glyphLoader(r,a))}return i}(e,t,n,r)}};function Ot(e){this.font=e,this.getCommands=function(e){return Ft.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Ut(e){return e}function zt(e){return Math.sign(e)*Math.round(Math.abs(e))}function Gt(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Qt(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Zt(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Ht(e){return Math.sign(e)*Math.floor(Math.abs(e))}var jt=function(e){var t=this.srPeriod,n=this.srPhase,r=1;return e<0&&(e=-e,r=-1),e+=this.srThreshold-n,e=Math.trunc(e/t)*t,(e+=n)<0?n*r:e*r},Vt={x:1,y:0,axis:"x",distance:function(e,t,n,r){return(n?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,n,r){var i,a,o,s,l,u,c;if(!r||r===this)return i=e.xo-t.xo,a=e.xo-n.xo,l=t.x-t.xo,u=n.x-n.xo,0===(c=(o=Math.abs(i))+(s=Math.abs(a)))?void(e.x=e.xo+(l+u)/2):void(e.x=e.xo+(l*s+u*o)/c);i=r.distance(e,t,!0,!0),a=r.distance(e,n,!0,!0),l=r.distance(t,t,!1,!0),u=r.distance(n,n,!1,!0),0!==(c=(o=Math.abs(i))+(s=Math.abs(a)))?Vt.setRelative(e,e,(l*s+u*o)/c,r,!0):Vt.setRelative(e,e,(l+u)/2,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,r,i){if(r&&r!==this){var a=i?t.xo:t.x,o=i?t.yo:t.y,s=a+n*r.x,l=o+n*r.y;e.x=s+(e.y-l)/r.normalSlope}else e.x=(i?t.xo:t.x)+n},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Wt={x:0,y:1,axis:"y",distance:function(e,t,n,r){return(n?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,n,r){var i,a,o,s,l,u,c;if(!r||r===this)return i=e.yo-t.yo,a=e.yo-n.yo,l=t.y-t.yo,u=n.y-n.yo,0===(c=(o=Math.abs(i))+(s=Math.abs(a)))?void(e.y=e.yo+(l+u)/2):void(e.y=e.yo+(l*s+u*o)/c);i=r.distance(e,t,!0,!0),a=r.distance(e,n,!0,!0),l=r.distance(t,t,!1,!0),u=r.distance(n,n,!1,!0),0!==(c=(o=Math.abs(i))+(s=Math.abs(a)))?Wt.setRelative(e,e,(l*s+u*o)/c,r,!0):Wt.setRelative(e,e,(l+u)/2,r,!0)},normalSlope:0,setRelative:function(e,t,n,r,i){if(r&&r!==this){var a=i?t.xo:t.x,o=i?t.yo:t.y,s=a+n*r.x,l=o+n*r.y;e.y=l+r.normalSlope*(e.x-s)}else e.y=(i?t.yo:t.y)+n},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function Xt(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Yt(e,t){var n=Math.sqrt(e*e+t*t);return t/=n,1===(e/=n)&&0===t?Vt:0===e&&1===t?Wt:new Xt(e,t)}function Kt(e,t,n,r){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Vt),Object.freeze(Wt),Xt.prototype.distance=function(e,t,n,r){return this.x*Vt.distance(e,t,n,r)+this.y*Wt.distance(e,t,n,r)},Xt.prototype.interpolate=function(e,t,n,r){var i,a,o,s,l,u,c;o=r.distance(e,t,!0,!0),s=r.distance(e,n,!0,!0),i=r.distance(t,t,!1,!0),a=r.distance(n,n,!1,!0),0!==(c=(l=Math.abs(o))+(u=Math.abs(s)))?this.setRelative(e,e,(i*u+a*l)/c,r,!0):this.setRelative(e,e,(i+a)/2,r,!0)},Xt.prototype.setRelative=function(e,t,n,r,i){r=r||this;var a=i?t.xo:t.x,o=i?t.yo:t.y,s=a+n*r.x,l=o+n*r.y,u=r.normalSlope,c=this.slope,f=e.x,d=e.y;e.x=(c*f-u*s+l-d)/(c-u),e.y=c*(e.x-f)+d},Xt.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},Kt.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},Kt.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Jt=Object.freeze(new Kt(0,0)),qt={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function $t(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Vt,this.round=zt}}function en(e){for(var t=e.tZone=new Array(e.gZone.length),n=0;n<t.length;n++)t[n]=new Kt(0,0)}function tn(e,t){var n,r=e.prog,i=e.ip,a=1;do{if(88===(n=r[++i]))a++;else if(89===n)a--;else if(64===n)i+=r[i+1]+1;else if(65===n)i+=2*r[i+1]+1;else if(n>=176&&n<=183)i+=n-176+1;else if(n>=184&&n<=191)i+=2*(n-184+1);else if(t&&1===a&&27===n)break}while(a>0);e.ip=i}function nn(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function rn(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function an(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function on(e,t){var n,r,i=t.stack,a=i.pop(),o=i.pop(),s=t.z2[a],l=t.z1[o];exports.DEBUG&&console.log("SPVTL["+e+"]",a,o),e?(n=s.y-l.y,r=l.x-s.x):(n=l.x-s.x,r=l.y-s.y),t.pv=t.dpv=Yt(n,r)}function sn(e,t){var n,r,i=t.stack,a=i.pop(),o=i.pop(),s=t.z2[a],l=t.z1[o];exports.DEBUG&&console.log("SFVTL["+e+"]",a,o),e?(n=s.y-l.y,r=l.x-s.x):(n=l.x-s.x,r=l.y-s.y),t.fv=Yt(n,r)}function ln(e){exports.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function un(e,t){var n=t.stack.pop(),r=t.z0[n],i=t.fv,a=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",n);var o=a.distance(r,Jt);e&&(o=t.round(o)),i.setRelative(r,Jt,o,a),i.touch(r),t.rp0=t.rp1=n}function cn(e,t){var n,r,i,a=t.z2,o=a.length-2;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(var s=0;s<o;s++)n=a[s],e.touched(n)||(r=n.prevTouched(e))!==n&&(r===(i=n.nextTouched(e))&&e.setRelative(n,n,e.distance(r,r,!1,!0),e,!0),e.interpolate(n,r,i,e))}function fn(e,t){for(var n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],a=t.fv,o=t.pv,s=t.loop,l=t.z2;s--;){var u=n.pop(),c=l[u],f=o.distance(i,i,!1,!0);a.setRelative(c,c,f,o),a.touch(c),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-s)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",u)}t.loop=1}function dn(e,t){var n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],a=t.fv,o=t.pv,s=n.pop(),l=t.z2[t.contours[s]],u=l;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",s);var c=o.distance(i,i,!1,!0);do{u!==i&&a.setRelative(u,u,c,o),u=u.nextPointOnContour}while(u!==l)}function hn(e,t){var n,r,i=t.stack,a=e?t.rp1:t.rp2,o=(e?t.z0:t.z1)[a],s=t.fv,l=t.pv,u=i.pop();switch(exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",u),u){case 0:n=t.tZone;break;case 1:n=t.gZone;break;default:throw new Error("Invalid zone")}for(var c=l.distance(o,o,!1,!0),f=n.length-2,d=0;d<f;d++)r=n[d],s.setRelative(r,r,c,l)}function pn(e,t){var n=t.stack,r=n.pop()/64,i=n.pop(),a=t.z1[i],o=t.z0[t.rp0],s=t.fv,l=t.pv;s.setRelative(a,o,r,l),s.touch(a),exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",r,i),t.rp1=t.rp0,t.rp2=i,e&&(t.rp0=i)}function vn(e,t){var n=t.stack,r=n.pop(),i=n.pop(),a=t.z0[i],o=t.fv,s=t.pv,l=t.cvt[r];exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",r,"(",l,")",i);var u=s.distance(a,Jt);e&&(Math.abs(u-l)<t.cvCutIn&&(u=l),u=t.round(u)),o.setRelative(a,Jt,u,s),0===t.zp0&&(a.xo=a.x,a.yo=a.y),o.touch(a),t.rp0=t.rp1=i}function mn(e,t){var n=t.stack,r=n.pop(),i=t.z2[r];exports.DEBUG&&console.log(t.step,"GC["+e+"]",r),n.push(64*t.dpv.distance(i,Jt,e,!1))}function gn(e,t){var n=t.stack,r=n.pop(),i=n.pop(),a=t.z1[r],o=t.z0[i],s=t.dpv.distance(o,a,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",r,i,"->",s),t.stack.push(Math.round(64*s))}function yn(e,t){var n=t.stack,r=n.pop(),i=t.fv,a=t.pv,o=t.ppem,s=t.deltaBase+16*(e-1),l=t.deltaShift,u=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",r,n);for(var c=0;c<r;c++){var f=n.pop(),d=n.pop();if(s+((240&d)>>4)===o){var h=(15&d)-8;h>=0&&h++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",f,"by",h*l);var p=u[f];i.setRelative(p,p,h*l,a)}}}function An(e,t){var n=t.stack,r=n.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),n.push(64*t.round(r/64))}function bn(e,t){var n=t.stack,r=n.pop(),i=t.ppem,a=t.deltaBase+16*(e-1),o=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",r,n);for(var s=0;s<r;s++){var l=n.pop(),u=n.pop();if(a+((240&u)>>4)===i){var c=(15&u)-8;c>=0&&c++;var f=c*o;exports.DEBUG&&console.log(t.step,"DELTACFIX",l,"by",f),t.cvt[l]+=f}}}function xn(e,t){var n,r,i=t.stack,a=i.pop(),o=i.pop(),s=t.z2[a],l=t.z1[o];exports.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",a,o),e?(n=s.y-l.y,r=l.x-s.x):(n=l.x-s.x,r=l.y-s.y),t.dpv=Yt(n,r)}function _n(e,t){var n=t.stack,r=t.prog,i=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(var a=0;a<e;a++)n.push(r[++i]);t.ip=i}function wn(e,t){var n=t.ip,r=t.prog,i=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(var a=0;a<e;a++){var o=r[++n]<<8|r[++n];32768&o&&(o=-(1+(65535^o))),i.push(o)}t.ip=n}function Sn(e,t,n,r,i,a){var o,s,l,u,c=a.stack,f=e&&c.pop(),d=c.pop(),h=a.rp0,p=a.z0[h],v=a.z1[d],m=a.minDis,g=a.fv,y=a.dpv;l=(s=o=y.distance(v,p,!0,!0))>=0?1:-1,s=Math.abs(s),e&&(u=a.cvt[f],r&&Math.abs(s-u)<a.cvCutIn&&(s=u)),n&&s<m&&(s=m),r&&(s=a.round(s)),g.setRelative(v,p,l*s,y),g.touch(v),exports.DEBUG&&console.log(a.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(n?">":"_")+(r?"R":"_")+(0===i?"Gr":1===i?"Bl":2===i?"Wh":"")+"]",e?f+"("+a.cvt[f]+","+u+")":"",d,"(d =",o,"->",l*s,")"),a.rp1=a.rp0,a.rp2=d,t&&(a.rp0=d)}function En(e){this.char=e,this.state={},this.activeState=null}function Cn(e,t,n){this.contextName=n,this.startIndex=e,this.endOffset=t}function Tn(e,t,n){this.contextName=e,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=n}function Mn(e,t){this.context=e,this.index=t,this.length=e.length,this.current=e[t],this.backtrack=e.slice(0,t),this.lookahead=e.slice(t+1)}function In(e){this.eventId=e,this.subscribers=[]}function kn(e){var t=this,n=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];n.forEach((function(e){Object.defineProperty(t.events,e,{value:new In(e)})})),e&&n.forEach((function(n){var r=e[n];"function"===typeof r&&t.events[n].subscribe(r)}));["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach((function(e){t.events[e].subscribe(t.updateContextsRanges)}))}function Bn(e){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],kn.call(this,e)}function Rn(e){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(e)}function Pn(e){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(e)}function Dn(e){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(e)}function Ln(e){return/[A-z]/.test(e)}function Nn(e){this.font=e,this.features={}}function Fn(e){this.id=e.id,this.tag=e.tag,this.substitution=e.substitution}function On(e,t){if(!e)return-1;switch(t.format){case 1:return t.glyphs.indexOf(e);case 2:for(var n=t.ranges,r=0;r<n.length;r++){var i=n[r];if(e>=i.start&&e<=i.end){var a=e-i.start;return i.index+a}}break;default:return-1}return-1}function Un(e,t){return-1===On(e,t.coverage)?null:e+t.deltaGlyphId}function zn(e,t){var n=On(e,t.coverage);return-1===n?null:t.substitute[n]}function Gn(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=t.current,o=On(a=Array.isArray(a)?a[0]:a,i);-1!==o&&n.push(o)}return n.length!==e.length?-1:n}function Qn(e,t){var n=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(e.context.length<n)return[];var r=Gn(t.inputCoverage,e);if(-1===r)return[];var i=t.inputCoverage.length-1;if(e.lookahead.length<t.lookaheadCoverage.length)return[];for(var a=e.lookahead.slice(i);a.length&&Dn(a[0].char);)a.shift();var o=new Mn(a,0),s=Gn(t.lookaheadCoverage,o),l=[].concat(e.backtrack);for(l.reverse();l.length&&Dn(l[0].char);)l.shift();if(l.length<t.backtrackCoverage.length)return[];var u=new Mn(l,0),c=Gn(t.backtrackCoverage,u),f=[];if(r.length===t.inputCoverage.length&&s.length===t.lookaheadCoverage.length&&c.length===t.backtrackCoverage.length)for(var d=0;d<t.lookupRecords.length;d++)for(var h=t.lookupRecords[d].lookupListIndex,p=this.getLookupByIndex(h),v=0;v<p.subtables.length;v++){var m=p.subtables[v],g=this.getLookupMethod(p,m);if("12"===this.getSubstitutionType(p,m))for(var y=0;y<r.length;y++){var A=g(e.get(y));A&&f.push(A)}}return f}function Zn(e,t){var n,r=On(e.current,t.coverage);if(-1===r)return null;for(var i=t.ligatureSets[r],a=0;a<i.length;a++){n=i[a];for(var o=0;o<n.components.length;o++){if(e.lookahead[o]!==n.components[o])break;if(o===n.components.length-1)return n}}return null}function Hn(e,t){var n=On(e,t.coverage);return-1===n?null:t.sequences[n]}Ot.prototype.exec=function(e,t){if("number"!==typeof t)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var n=this.font,r=this._prepState;if(!r||r.ppem!==t){var i=this._fpgmState;if(!i){$t.prototype=qt,(i=this._fpgmState=new $t("fpgm",n.tables.fpgm)).funcs=[],i.font=n,exports.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{Dt(i)}catch(u){return console.log("Hinting error in FPGM:"+u),void(this._errorState=3)}}$t.prototype=i,(r=this._prepState=new $t("prep",n.tables.prep)).ppem=t;var a=n.tables.cvt;if(a)for(var o=r.cvt=new Array(a.length),s=t/n.unitsPerEm,l=0;l<a.length;l++)o[l]=a[l]*s;else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{Dt(r)}catch(u){this._errorState<2&&console.log("Hinting error in PREP:"+u),this._errorState=2}}if(!(this._errorState>1))try{return Lt(e,r)}catch(u){return this._errorState<1&&(console.log("Hinting error:"+u),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},Lt=function(e,t){var n,r,i,a=t.ppem/t.font.unitsPerEm,o=a,s=e.components;if($t.prototype=t,s){var l=t.font;r=[],n=[];for(var u=0;u<s.length;u++){var c=s[u],f=l.glyphs.get(c.glyphIndex);i=new $t("glyf",f.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+u+"---"),i.step=-1),Nt(f,i,a,o);for(var d=Math.round(c.dx*a),h=Math.round(c.dy*o),p=i.gZone,v=i.contours,m=0;m<p.length;m++){var g=p[m];g.xTouched=g.yTouched=!1,g.xo=g.x=g.x+d,g.yo=g.y=g.y+h}var y=r.length;r.push.apply(r,p);for(var A=0;A<v.length;A++)n.push(v[A]+y)}e.instructions&&!i.inhibitGridFit&&((i=new $t("glyf",e.instructions)).gZone=i.z0=i.z1=i.z2=r,i.contours=n,r.push(new Kt(0,0),new Kt(Math.round(e.advanceWidth*a),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),i.step=-1),Dt(i),r.length-=2)}else i=new $t("glyf",e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),i.step=-1),Nt(e,i,a,o),r=i.gZone;return r},Nt=function(e,t,n,r){for(var i,a,o,s=e.points||[],l=s.length,u=t.gZone=t.z0=t.z1=t.z2=[],c=t.contours=[],f=0;f<l;f++)i=s[f],u[f]=new Kt(i.x*n,i.y*r,i.lastPointOfContour,i.onCurve);for(var d=0;d<l;d++)i=u[d],a||(a=i,c.push(d)),i.lastPointOfContour?(i.nextPointOnContour=a,a.prevPointOnContour=i,a=void 0):(o=u[d+1],i.nextPointOnContour=o,o.prevPointOnContour=i);if(!t.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var h=0;h<l;h++)console.log(h,u[h].x,u[h].y)}if(u.push(new Kt(0,0),new Kt(Math.round(e.advanceWidth*n),0)),Dt(t),u.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var p=0;p<l;p++)console.log(p,u[p].x,u[p].y)}}},Dt=function(e){var t=e.prog;if(t){var n,r=t.length;for(e.ip=0;e.ip<r;e.ip++){if(exports.DEBUG&&e.step++,!(n=Pt[t[e.ip]]))throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));n(e)}}},Pt=[nn.bind(void 0,Wt),nn.bind(void 0,Vt),rn.bind(void 0,Wt),rn.bind(void 0,Vt),an.bind(void 0,Wt),an.bind(void 0,Vt),on.bind(void 0,0),on.bind(void 0,1),sn.bind(void 0,0),sn.bind(void 0,1),function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.pv=e.dpv=Yt(r,n)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.fv=Yt(r,n)},function(e){var t=e.stack,n=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]"),t.push(16384*n.x),t.push(16384*n.y)},function(e){var t=e.stack,n=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]"),t.push(16384*n.x),t.push(16384*n.y)},function(e){e.fv=e.pv,exports.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var t=e.stack,n=t.pop(),r=t.pop(),i=t.pop(),a=t.pop(),o=t.pop(),s=e.z0,l=e.z1,u=s[n],c=s[r],f=l[i],d=l[a],h=e.z2[o];exports.DEBUG&&console.log("ISECT[], ",n,r,i,a,o);var p=u.x,v=u.y,m=c.x,g=c.y,y=f.x,A=f.y,b=d.x,x=d.y,_=(p-m)*(A-x)-(v-g)*(y-b),w=p*g-v*m,S=y*x-A*b;h.x=(w*(y-b)-S*(p-m))/_,h.y=(w*(A-x)-S*(v-g))/_},function(e){e.rp0=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||en(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||en(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||en(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||en(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){exports.DEBUG&&console.log(e.step,"RTG[]"),e.round=zt},function(e){exports.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Qt},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64},function(e){exports.DEBUG&&console.log(e.step,"ELSE[]"),tn(e,!1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64},void 0,void 0,function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])},ln,function(e){exports.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]"),t.push(n),t.push(r)},function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",n),t.push(t[t.length-n])},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",n),t.push(t.splice(t.length-n,1)[0])},void 0,void 0,void 0,function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",n,r);var i=e.ip,a=e.prog;e.prog=e.funcs[n];for(var o=0;o<r;o++)Dt(e),exports.DEBUG&&console.log(++e.step,o+1<r?"next loopcall":"done loopcall",o);e.ip=i,e.prog=a},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);var n=e.ip,r=e.prog;e.prog=e.funcs[t],Dt(e),e.ip=n,e.prog=r,exports.DEBUG&&console.log(++e.step,"returning from",t)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var t=e.stack,n=e.prog,r=e.ip,i=t.pop(),a=r;for(exports.DEBUG&&console.log(e.step,"FDEF[]",i);45!==n[++r];);e.ip=r,e.funcs[i]=n.slice(a+1,r)},void 0,un.bind(void 0,0),un.bind(void 0,1),cn.bind(void 0,Wt),cn.bind(void 0,Vt),fn.bind(void 0,0),fn.bind(void 0,1),dn.bind(void 0,0),dn.bind(void 0,1),hn.bind(void 0,0),hn.bind(void 0,1),function(e){for(var t=e.stack,n=e.loop,r=e.fv,i=t.pop()/64,a=e.z2;n--;){var o=t.pop(),s=a[o];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-n)+": ":"")+"SHPIX[]",o,i),r.setRelative(s,s,i),r.touch(s)}e.loop=1},function(e){for(var t=e.stack,n=e.rp1,r=e.rp2,i=e.loop,a=e.z0[n],o=e.z1[r],s=e.fv,l=e.dpv,u=e.z2;i--;){var c=t.pop(),f=u[c];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"IP[]",c,n,"<->",r),s.interpolate(f,a,o,l),s.touch(f)}e.loop=1},pn.bind(void 0,0),pn.bind(void 0,1),function(e){for(var t=e.stack,n=e.rp0,r=e.z0[n],i=e.loop,a=e.fv,o=e.pv,s=e.z1;i--;){var l=t.pop(),u=s[l];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"ALIGNRP[]",l),a.setRelative(u,r,0,o),a.touch(u)}e.loop=1},function(e){exports.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Gt},vn.bind(void 0,0),vn.bind(void 0,1),function(e){var t=e.prog,n=e.ip,r=e.stack,i=t[++n];exports.DEBUG&&console.log(e.step,"NPUSHB[]",i);for(var a=0;a<i;a++)r.push(t[++n]);e.ip=n},function(e){var t=e.ip,n=e.prog,r=e.stack,i=n[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",i);for(var a=0;a<i;a++){var o=n[++t]<<8|n[++t];32768&o&&(o=-(1+(65535^o))),r.push(o)}e.ip=t},function(e){var t=e.stack,n=e.store;n||(n=e.store=[]);var r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"WS",r,i),n[i]=r},function(e){var t=e.stack,n=e.store,r=t.pop();exports.DEBUG&&console.log(e.step,"RS",r);var i=n&&n[r]||0;t.push(i)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",n,r),e.cvt[r]=n/64},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",n),t.push(64*e.cvt[n])},mn.bind(void 0,0),mn.bind(void 0,1),void 0,gn.bind(void 0,0),gn.bind(void 0,1),function(e){exports.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){exports.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",n,r),t.push(r<n?1:0)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",n,r),t.push(r<=n?1:0)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",n,r),t.push(r>n?1:0)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",n,r),t.push(r>=n?1:0)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",n,r),t.push(n===r?1:0)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",n,r),t.push(n!==r?1:0)},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",n),t.push(Math.trunc(n)%2?1:0)},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",n),t.push(Math.trunc(n)%2?0:1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"IF[]",t),t||(tn(e,!0),exports.DEBUG&&console.log(e.step,"EIF[]"))},function(e){exports.DEBUG&&console.log(e.step,"EIF[]")},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",n,r),t.push(n&&r?1:0)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",n,r),t.push(n||r?1:0)},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",n),t.push(n?0:1)},yn.bind(void 0,1),function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDB[]",t),e.deltaBase=t},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDS[]",t),e.deltaShift=Math.pow(.5,t)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",n,r),t.push(r+n)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",n,r),t.push(r-n)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",n,r),t.push(64*r/n)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",n,r),t.push(r*n/64)},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",n),t.push(Math.abs(n))},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",n),t.push(-n)},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",n),t.push(64*Math.floor(n/64))},function(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",n),t.push(64*Math.ceil(n/64))},An.bind(void 0,0),An.bind(void 0,1),An.bind(void 0,2),An.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",n,r),e.cvt[r]=n*e.ppem/e.font.unitsPerEm},yn.bind(void 0,2),yn.bind(void 0,3),bn.bind(void 0,1),bn.bind(void 0,2),bn.bind(void 0,3),function(e){var t,n=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SROUND[]",n),e.round=jt,192&n){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=t,48&n){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}n&=15,e.srThreshold=0===n?0:(n/8-.5)*t},function(e){var t,n=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"S45ROUND[]",n),e.round=jt,192&n){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=t,48&n){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}n&=15,e.srThreshold=0===n?0:(n/8-.5)*t},void 0,void 0,function(e){exports.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Ut},void 0,function(e){exports.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Zt},function(e){exports.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Ht},ln,ln,void 0,void 0,void 0,void 0,void 0,function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)},xn.bind(void 0,0),xn.bind(void 0,1),function(e){var t=e.stack,n=t.pop(),r=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",n),1&n&&(r=35),32&n&&(r|=4096),t.push(r)},void 0,function(e){var t=e.stack,n=t.pop(),r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]"),t.push(r),t.push(n),t.push(i)},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",n,r),t.push(Math.max(r,n))},function(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",n,r),t.push(Math.min(r,n))},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)},function(e){var t=e.stack.pop(),n=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,n),t){case 1:return void(e.inhibitGridFit=!!n);case 2:return void(e.ignoreCvt=!!n);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,_n.bind(void 0,1),_n.bind(void 0,2),_n.bind(void 0,3),_n.bind(void 0,4),_n.bind(void 0,5),_n.bind(void 0,6),_n.bind(void 0,7),_n.bind(void 0,8),wn.bind(void 0,1),wn.bind(void 0,2),wn.bind(void 0,3),wn.bind(void 0,4),wn.bind(void 0,5),wn.bind(void 0,6),wn.bind(void 0,7),wn.bind(void 0,8),Sn.bind(void 0,0,0,0,0,0),Sn.bind(void 0,0,0,0,0,1),Sn.bind(void 0,0,0,0,0,2),Sn.bind(void 0,0,0,0,0,3),Sn.bind(void 0,0,0,0,1,0),Sn.bind(void 0,0,0,0,1,1),Sn.bind(void 0,0,0,0,1,2),Sn.bind(void 0,0,0,0,1,3),Sn.bind(void 0,0,0,1,0,0),Sn.bind(void 0,0,0,1,0,1),Sn.bind(void 0,0,0,1,0,2),Sn.bind(void 0,0,0,1,0,3),Sn.bind(void 0,0,0,1,1,0),Sn.bind(void 0,0,0,1,1,1),Sn.bind(void 0,0,0,1,1,2),Sn.bind(void 0,0,0,1,1,3),Sn.bind(void 0,0,1,0,0,0),Sn.bind(void 0,0,1,0,0,1),Sn.bind(void 0,0,1,0,0,2),Sn.bind(void 0,0,1,0,0,3),Sn.bind(void 0,0,1,0,1,0),Sn.bind(void 0,0,1,0,1,1),Sn.bind(void 0,0,1,0,1,2),Sn.bind(void 0,0,1,0,1,3),Sn.bind(void 0,0,1,1,0,0),Sn.bind(void 0,0,1,1,0,1),Sn.bind(void 0,0,1,1,0,2),Sn.bind(void 0,0,1,1,0,3),Sn.bind(void 0,0,1,1,1,0),Sn.bind(void 0,0,1,1,1,1),Sn.bind(void 0,0,1,1,1,2),Sn.bind(void 0,0,1,1,1,3),Sn.bind(void 0,1,0,0,0,0),Sn.bind(void 0,1,0,0,0,1),Sn.bind(void 0,1,0,0,0,2),Sn.bind(void 0,1,0,0,0,3),Sn.bind(void 0,1,0,0,1,0),Sn.bind(void 0,1,0,0,1,1),Sn.bind(void 0,1,0,0,1,2),Sn.bind(void 0,1,0,0,1,3),Sn.bind(void 0,1,0,1,0,0),Sn.bind(void 0,1,0,1,0,1),Sn.bind(void 0,1,0,1,0,2),Sn.bind(void 0,1,0,1,0,3),Sn.bind(void 0,1,0,1,1,0),Sn.bind(void 0,1,0,1,1,1),Sn.bind(void 0,1,0,1,1,2),Sn.bind(void 0,1,0,1,1,3),Sn.bind(void 0,1,1,0,0,0),Sn.bind(void 0,1,1,0,0,1),Sn.bind(void 0,1,1,0,0,2),Sn.bind(void 0,1,1,0,0,3),Sn.bind(void 0,1,1,0,1,0),Sn.bind(void 0,1,1,0,1,1),Sn.bind(void 0,1,1,0,1,2),Sn.bind(void 0,1,1,0,1,3),Sn.bind(void 0,1,1,1,0,0),Sn.bind(void 0,1,1,1,0,1),Sn.bind(void 0,1,1,1,0,2),Sn.bind(void 0,1,1,1,0,3),Sn.bind(void 0,1,1,1,1,0),Sn.bind(void 0,1,1,1,1,1),Sn.bind(void 0,1,1,1,1,2),Sn.bind(void 0,1,1,1,1,3)],En.prototype.setState=function(e,t){return this.state[e]=t,this.activeState={key:e,value:this.state[e]},this.activeState},En.prototype.getState=function(e){return this.state[e]||null},Bn.prototype.inboundIndex=function(e){return e>=0&&e<this.tokens.length},Bn.prototype.composeRUD=function(e){var t=this,n=e.map((function(e){return t[e[0]].apply(t,e.slice(1).concat(true))})),r=function(e){return"object"===typeof e&&e.hasOwnProperty("FAIL")};if(n.every(r))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:n.filter(r)};this.dispatch("composeRUD",[n.filter((function(e){return!r(e)}))])},Bn.prototype.replaceRange=function(e,t,n,r){t=null!==t?t:this.tokens.length;var i=n.every((function(e){return e instanceof En}));if(!isNaN(e)&&this.inboundIndex(e)&&i){var a=this.tokens.splice.apply(this.tokens,[e,t].concat(n));return r||this.dispatch("replaceToken",[e,t,n]),[a,n]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},Bn.prototype.replaceToken=function(e,t,n){if(!isNaN(e)&&this.inboundIndex(e)&&t instanceof En){var r=this.tokens.splice(e,1,t);return n||this.dispatch("replaceToken",[e,t]),[r[0],t]}return{FAIL:"replaceToken: invalid token or index."}},Bn.prototype.removeRange=function(e,t,n){t=isNaN(t)?this.tokens.length:t;var r=this.tokens.splice(e,t);return n||this.dispatch("removeRange",[r,e,t]),r},Bn.prototype.removeToken=function(e,t){if(!isNaN(e)&&this.inboundIndex(e)){var n=this.tokens.splice(e,1);return t||this.dispatch("removeToken",[n,e]),n}return{FAIL:"removeToken: invalid token index."}},Bn.prototype.insertToken=function(e,t,n){return e.every((function(e){return e instanceof En}))?(this.tokens.splice.apply(this.tokens,[t,0].concat(e)),n||this.dispatch("insertToken",[e,t]),e):{FAIL:"insertToken: invalid token(s)."}},Bn.prototype.registerModifier=function(e,t,n){this.events.newToken.subscribe((function(r,i){var a=[r,i],o=[r,i];if(null===t||!0===t.apply(this,a)){var s=n.apply(this,o);r.setState(e,s)}})),this.registeredModifiers.push(e)},In.prototype.subscribe=function(e){return"function"===typeof e?this.subscribers.push(e)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},In.prototype.unsubscribe=function(e){this.subscribers.splice(e,1)},Mn.prototype.setCurrentIndex=function(e){this.index=e,this.current=this.context[e],this.backtrack=this.context.slice(0,e),this.lookahead=this.context.slice(e+1)},Mn.prototype.get=function(e){switch(!0){case 0===e:return this.current;case e<0&&Math.abs(e)<=this.backtrack.length:return this.backtrack.slice(e)[0];case e>0&&e<=this.lookahead.length:return this.lookahead[e-1];default:return null}},Bn.prototype.rangeToText=function(e){if(e instanceof Cn)return this.getRangeTokens(e).map((function(e){return e.char})).join("")},Bn.prototype.getText=function(){return this.tokens.map((function(e){return e.char})).join("")},Bn.prototype.getContext=function(e){var t=this.registeredContexts[e];return t||null},Bn.prototype.on=function(e,t){var n=this.events[e];return n?n.subscribe(t):null},Bn.prototype.dispatch=function(e,t){var n=this,r=this.events[e];r instanceof In&&r.subscribers.forEach((function(e){e.apply(n,t||[])}))},Bn.prototype.registerContextChecker=function(e,t,n){if(this.getContext(e))return{FAIL:"context name '"+e+"' is already registered."};if("function"!==typeof t)return{FAIL:"missing context start check."};if("function"!==typeof n)return{FAIL:"missing context end check."};var r=new Tn(e,t,n);return this.registeredContexts[e]=r,this.contextCheckers.push(r),r},Bn.prototype.getRangeTokens=function(e){var t=e.startIndex+e.endOffset;return[].concat(this.tokens.slice(e.startIndex,t))},Bn.prototype.getContextRanges=function(e){var t=this.getContext(e);return t?t.ranges:{FAIL:"context checker '"+e+"' is not registered."}},Bn.prototype.resetContextsRanges=function(){var e=this.registeredContexts;for(var t in e){if(e.hasOwnProperty(t))e[t].ranges=[]}},Bn.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var e=this.tokens.map((function(e){return e.char})),t=0;t<e.length;t++){var n=new Mn(e,t);this.runContextCheck(n)}this.dispatch("updateContextsRanges",[this.registeredContexts])},Bn.prototype.setEndOffset=function(e,t){var n=new Cn(this.getContext(t).openRange.startIndex,e,t),r=this.getContext(t).ranges;return n.rangeId=t+"."+r.length,r.push(n),this.getContext(t).openRange=null,n},Bn.prototype.runContextCheck=function(e){var t=this,n=e.index;this.contextCheckers.forEach((function(r){var i=r.contextName,a=t.getContext(i).openRange;if(!a&&r.checkStart(e)&&(a=new Cn(n,null,i),t.getContext(i).openRange=a,t.dispatch("contextStart",[i,n])),a&&r.checkEnd(e)){var o=n-a.startIndex+1,s=t.setEndOffset(o,i);t.dispatch("contextEnd",[i,s])}}))},Bn.prototype.tokenize=function(e){this.tokens=[],this.resetContextsRanges();var t=Array.from(e);this.dispatch("start");for(var n=0;n<t.length;n++){var r=t[n],i=new Mn(t,n);this.dispatch("next",[i]),this.runContextCheck(i);var a=new En(r);this.tokens.push(a),this.dispatch("newToken",[a,i])}return this.dispatch("end",[this.tokens]),this.tokens},Nn.prototype.getDefaultScriptFeaturesIndexes=function(){for(var e=this.font.tables.gsub.scripts,t=0;t<e.length;t++){var n=e[t];if("DFLT"===n.tag)return n.script.defaultLangSys.featureIndexes}return[]},Nn.prototype.getScriptFeaturesIndexes=function(e){if(!this.font.tables.gsub)return[];if(!e)return this.getDefaultScriptFeaturesIndexes();for(var t=this.font.tables.gsub.scripts,n=0;n<t.length;n++){var r=t[n];if(r.tag===e&&r.script.defaultLangSys)return r.script.defaultLangSys.featureIndexes;var i=r.langSysRecords;if(i)for(var a=0;a<i.length;a++){var o=i[a];if(o.tag===e)return o.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},Nn.prototype.mapTagsToFeatures=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r].tag,a=e[r].feature;n[i]=a}this.features[t].tags=n},Nn.prototype.getScriptFeatures=function(e){var t=this.features[e];if(this.features.hasOwnProperty(e))return t;var n=this.getScriptFeaturesIndexes(e);if(!n)return null;var r=this.font.tables.gsub;return t=n.map((function(e){return r.features[e]})),this.features[e]=t,this.mapTagsToFeatures(t,e),t},Nn.prototype.getSubstitutionType=function(e,t){return e.lookupType.toString()+t.substFormat.toString()},Nn.prototype.getLookupMethod=function(e,t){var n=this;switch(this.getSubstitutionType(e,t)){case"11":return function(e){return Un.apply(n,[e,t])};case"12":return function(e){return zn.apply(n,[e,t])};case"63":return function(e){return Qn.apply(n,[e,t])};case"41":return function(e){return Zn.apply(n,[e,t])};case"21":return function(e){return Hn.apply(n,[e,t])};default:throw new Error("lookupType: "+e.lookupType+" - substFormat: "+t.substFormat+" is not yet supported")}},Nn.prototype.lookupFeature=function(e){var t=e.contextParams,n=t.index,r=this.getFeature({tag:e.tag,script:e.script});if(!r)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+e.tag+"' for script '"+e.script+"'.");for(var i=this.getFeatureLookups(r),a=[].concat(t.context),o=0;o<i.length;o++)for(var s=i[o],l=this.getLookupSubtables(s),u=0;u<l.length;u++){var c=l[u],f=this.getSubstitutionType(s,c),d=this.getLookupMethod(s,c),h=void 0;switch(f){case"11":(h=d(t.current))&&a.splice(n,1,new Fn({id:11,tag:e.tag,substitution:h}));break;case"12":(h=d(t.current))&&a.splice(n,1,new Fn({id:12,tag:e.tag,substitution:h}));break;case"63":h=d(t),Array.isArray(h)&&h.length&&a.splice(n,1,new Fn({id:63,tag:e.tag,substitution:h}));break;case"41":(h=d(t))&&a.splice(n,1,new Fn({id:41,tag:e.tag,substitution:h}));break;case"21":(h=d(t.current))&&a.splice(n,1,new Fn({id:21,tag:e.tag,substitution:h}))}t=new Mn(a,n),Array.isArray(h)&&!h.length||(h=null)}return a.length?a:null},Nn.prototype.supports=function(e){if(!e.script)return!1;this.getScriptFeatures(e.script);var t=this.features.hasOwnProperty(e.script);if(!e.tag)return t;var n=this.features[e.script].some((function(t){return t.tag===e.tag}));return t&&n},Nn.prototype.getLookupSubtables=function(e){return e.subtables||null},Nn.prototype.getLookupByIndex=function(e){return this.font.tables.gsub.lookups[e]||null},Nn.prototype.getFeatureLookups=function(e){return e.lookupListIndexes.map(this.getLookupByIndex.bind(this))},Nn.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};var jn={startCheck:function(e){var t=e.current,n=e.get(-1);return null===n&&Rn(t)||!Rn(n)&&Rn(t)},endCheck:function(e){var t=e.get(1);return null===t||!Rn(t)}};var Vn={startCheck:function(e){var t=e.current,n=e.get(-1);return(Rn(t)||Dn(t))&&!Rn(n)},endCheck:function(e){var t=e.get(1);switch(!0){case null===t:return!0;case!Rn(t)&&!Dn(t):var n=/\s/.test(t);if(!n)return!0;if(n){var r;if(r=e.lookahead.some((function(e){return Rn(e)||Dn(e)})),!r)return!0}break;default:return!1}}};var Wn={11:function(e,t,n){t[n].setState(e.tag,e.substitution)},12:function(e,t,n){t[n].setState(e.tag,e.substitution)},63:function(e,t,n){e.substitution.forEach((function(r,i){t[n+i].setState(e.tag,r)}))},41:function(e,t,n){var r=t[n];r.setState(e.tag,e.substitution.ligGlyph);for(var i=e.substitution.components.length,a=0;a<i;a++)(r=t[n+a+1]).setState("deleted",!0)}};function Xn(e,t,n){e instanceof Fn&&Wn[e.id]&&Wn[e.id](e,t,n)}function Yn(e){var t=this,n="arab",r=this.featuresTags[n],i=this.tokenizer.getRangeTokens(e);if(1!==i.length){var a=new Mn(i.map((function(e){return e.getState("glyphIndex")})),0),o=new Mn(i.map((function(e){return e.char})),0);i.forEach((function(e,s){if(!Dn(e.char)){a.setCurrentIndex(s),o.setCurrentIndex(s);var l,u=0;switch(function(e){for(var t=[].concat(e.backtrack),n=t.length-1;n>=0;n--){var r=t[n],i=Pn(r),a=Dn(r);if(!i&&!a)return!0;if(i)return!1}return!1}(o)&&(u|=1),function(e){if(Pn(e.current))return!1;for(var t=0;t<e.lookahead.length;t++)if(!Dn(e.lookahead[t]))return!0;return!1}(o)&&(u|=2),u){case 1:l="fina";break;case 2:l="init";break;case 3:l="medi"}if(-1!==r.indexOf(l)){var c=t.query.lookupFeature({tag:l,script:n,contextParams:a});if(c instanceof Error)return console.info(c.message);c.forEach((function(e,t){e instanceof Fn&&(Xn(e,i,t),a.context[t]=e.substitution)}))}}}))}}function Kn(e,t){return new Mn(e.map((function(e){return e.activeState.value})),t||0)}function Jn(e){var t=this,n=this.tokenizer.getRangeTokens(e),r=Kn(n);r.context.forEach((function(e,i){r.setCurrentIndex(i);var a=t.query.lookupFeature({tag:"rlig",script:"arab",contextParams:r});a.length&&(a.forEach((function(e){return Xn(e,n,i)})),r=Kn(n))}))}var qn={startCheck:function(e){var t=e.current,n=e.get(-1);return null===n&&Ln(t)||!Ln(n)&&Ln(t)},endCheck:function(e){var t=e.get(1);return null===t||!Ln(t)}};function $n(e,t){return new Mn(e.map((function(e){return e.activeState.value})),t||0)}function er(e){var t=this,n=this.tokenizer.getRangeTokens(e),r=$n(n);r.context.forEach((function(e,i){r.setCurrentIndex(i);var a=t.query.lookupFeature({tag:"liga",script:"latn",contextParams:r});a.length&&(a.forEach((function(e){return Xn(e,n,i)})),r=$n(n))}))}function tr(e){this.baseDir=e||"ltr",this.tokenizer=new Bn,this.featuresTags={}}function nr(e){var t=this.contextChecks[e+"Check"];return this.tokenizer.registerContextChecker(e,t.startCheck,t.endCheck)}function rr(){return nr.call(this,"latinWord"),nr.call(this,"arabicWord"),nr.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function ir(){var e=this;this.tokenizer.getContextRanges("arabicSentence").forEach((function(t){var n=e.tokenizer.getRangeTokens(t);e.tokenizer.replaceRange(t.startIndex,t.endOffset,n.reverse())}))}function ar(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function or(){var e=this;this.featuresTags.hasOwnProperty("arab")&&(ar.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){Yn.call(e,t)})))}function sr(){var e=this,t="arab";this.featuresTags.hasOwnProperty(t)&&(-1!==this.featuresTags[t].indexOf("rlig")&&(ar.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){Jn.call(e,t)}))))}function lr(){var e=this,t="latn";this.featuresTags.hasOwnProperty(t)&&(-1!==this.featuresTags[t].indexOf("liga")&&(ar.call(this),this.tokenizer.getContextRanges("latinWord").forEach((function(t){er.call(e,t)}))))}function ur(e){(e=e||{}).tables=e.tables||{},e.empty||(Tt(e.familyName,"When creating a new Font object, familyName is required."),Tt(e.styleName,"When creating a new Font object, styleName is required."),Tt(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Tt(e.ascender,"When creating a new Font object, ascender is required."),Tt(e.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables=Object.assign(e.tables,{os2:Object.assign({usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR},e.tables.os2)})),this.supported=!0,this.glyphs=new be.GlyphSet(this,e.glyphs||[]),this.encoding=new fe(this),this.position=new wt(this),this.substitution=new St(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new Ot(this):void 0}})}function cr(e,t){var n=JSON.stringify(e),r=256;for(var i in t){var a=parseInt(i);if(a&&!(a<256)){if(JSON.stringify(t[i])===n)return a;r<=a&&(r=a+1)}}return t[r]=e,r}function fr(e,t,n){var r=cr(t.name,n);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:r}]}function dr(e,t,n){var r={},i=new ie.Parser(e,t);return r.tag=i.parseTag(),r.minValue=i.parseFixed(),r.defaultValue=i.parseFixed(),r.maxValue=i.parseFixed(),i.skip("uShort",1),r.name=n[i.parseUShort()]||{},r}function hr(e,t,n,r){for(var i=[{name:"nameID_"+e,type:"USHORT",value:cr(t.name,r)},{name:"flags_"+e,type:"USHORT",value:0}],a=0;a<n.length;++a){var o=n[a].tag;i.push({name:"axis_"+e+" "+o,type:"FIXED",value:t.coordinates[o]<<16})}return i}function pr(e,t,n,r){var i={},a=new ie.Parser(e,t);i.name=r[a.parseUShort()]||{},a.skip("uShort",1),i.coordinates={};for(var o=0;o<n.length;++o)i.coordinates[n[o].tag]=a.parseFixed();return i}tr.prototype.setText=function(e){this.text=e},tr.prototype.contextChecks={latinWordCheck:qn,arabicWordCheck:jn,arabicSentenceCheck:Vn},tr.prototype.registerFeatures=function(e,t){var n=this,r=t.filter((function(t){return n.query.supports({script:e,tag:t})}));this.featuresTags.hasOwnProperty(e)?this.featuresTags[e]=this.featuresTags[e].concat(r):this.featuresTags[e]=r},tr.prototype.applyFeatures=function(e,t){if(!e)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Nn(e));for(var n=0;n<t.length;n++){var r=t[n];this.query.supports({script:r.script})&&this.registerFeatures(r.script,r.tags)}},tr.prototype.registerModifier=function(e,t,n){this.tokenizer.registerModifier(e,t,n)},tr.prototype.checkContextReady=function(e){return!!this.tokenizer.getContext(e)},tr.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(or.call(this),sr.call(this)),this.checkContextReady("latinWord")&&lr.call(this),this.checkContextReady("arabicSentence")&&ir.call(this)},tr.prototype.processText=function(e){this.text&&this.text===e||(this.setText(e),rr.call(this),this.applyFeaturesToContexts())},tr.prototype.getBidiText=function(e){return this.processText(e),this.tokenizer.getText()},tr.prototype.getTextGlyphs=function(e){this.processText(e);for(var t=[],n=0;n<this.tokenizer.tokens.length;n++){var r=this.tokenizer.tokens[n];if(!r.state.deleted){var i=r.activeState.value;t.push(Array.isArray(i)?i[0]:i)}}return t},ur.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},ur.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},ur.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n},ur.prototype.updateFeatures=function(e){return this.defaultRenderOptions.features.map((function(t){return"latn"===t.script?{script:"latn",tags:t.tags.filter((function(t){return e[t]}))}:t}))},ur.prototype.stringToGlyphs=function(e,t){var n=this,r=new tr;r.registerModifier("glyphIndex",null,(function(e){return n.charToGlyphIndex(e.char)}));var i=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;r.applyFeatures(this,i);for(var a=r.getTextGlyphs(e),o=a.length,s=new Array(o),l=this.glyphs.get(0),u=0;u<o;u+=1)s[u]=this.glyphs.get(a[u])||l;return s},ur.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},ur.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n},ur.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},ur.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,e,t):this.kerningPairs[e+","+t]||0},ur.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},ur.prototype.forEachGlyph=function(e,t,n,r,i,a){t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:72,i=Object.assign({},this.defaultRenderOptions,i);var o,s=1/this.unitsPerEm*r,l=this.stringToGlyphs(e,i);if(i.kerning){var u=i.script||this.position.getDefaultScriptName();o=this.position.getKerningTables(u,i.language)}for(var c=0;c<l.length;c+=1){var f=l[c];if(a.call(this,f,t,n,r,i),f.advanceWidth&&(t+=f.advanceWidth*s),i.kerning&&c<l.length-1)t+=(o?this.position.getKerningValue(o,f.index,l[c+1].index):this.getKerningValue(f,l[c+1]))*s;i.letterSpacing?t+=i.letterSpacing*r:i.tracking&&(t+=i.tracking/1e3*r)}return t},ur.prototype.getPath=function(e,t,n,r,i){var a=new E;return this.forEachGlyph(e,t,n,r,i,(function(e,t,n,r){var o=e.getPath(t,n,r,i,this);a.extend(o)})),a},ur.prototype.getPaths=function(e,t,n,r,i){var a=[];return this.forEachGlyph(e,t,n,r,i,(function(e,t,n,r){var o=e.getPath(t,n,r,i,this);a.push(o)})),a},ur.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,(function(){}))},ur.prototype.draw=function(e,t,n,r,i,a){this.getPath(t,n,r,i,a).draw(e)},ur.prototype.drawPoints=function(e,t,n,r,i,a){this.forEachGlyph(t,n,r,i,a,(function(t,n,r,i){t.drawPoints(e,n,r,i)}))},ur.prototype.drawMetrics=function(e,t,n,r,i,a){this.forEachGlyph(t,n,r,i,a,(function(t,n,r,i){t.drawMetrics(e,n,r,i)}))},ur.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},ur.prototype.validate=function(){var e=this;function t(t){var n=e.getEnglishName(t);n&&n.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},ur.prototype.toTables=function(){return yt.fontToTable(this)},ur.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},ur.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e[r];return t},ur.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},ur.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},ur.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var vr={make:function(e,t){var n=new K.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);n.offsetToData=n.sizeOf();for(var r=0;r<e.axes.length;r++)n.fields=n.fields.concat(fr(r,e.axes[r],t));for(var i=0;i<e.instances.length;i++)n.fields=n.fields.concat(hr(i,e.instances[i],e.axes,t));return n},parse:function(e,t,n){var r=new ie.Parser(e,t),i=r.parseULong();M.argument(65536===i,"Unsupported fvar table version.");var a=r.parseOffset16();r.skip("uShort",1);for(var o=r.parseUShort(),s=r.parseUShort(),l=r.parseUShort(),u=r.parseUShort(),c=[],f=0;f<o;f++)c.push(dr(e,t+a+f*s,n));for(var d=[],h=t+a+o*s,p=0;p<l;p++)d.push(pr(e,h+p*u,c,n));return{axes:c,instances:d}}},mr=function(){return{coverage:this.parsePointer(ne.coverage),attachPoints:this.parseList(ne.pointer(ne.uShortList))}},gr=function(){var e=this.parseUShort();return M.argument(1===e||2===e||3===e,"Unsupported CaretValue table version."),1===e?{coordinate:this.parseShort()}:2===e?{pointindex:this.parseShort()}:3===e?{coordinate:this.parseShort()}:void 0},yr=function(){return this.parseList(ne.pointer(gr))},Ar=function(){return{coverage:this.parsePointer(ne.coverage),ligGlyphs:this.parseList(ne.pointer(yr))}},br=function(){return this.parseUShort(),this.parseList(ne.pointer(ne.coverage))};var xr={parse:function(e,t){var n=new ne(e,t=t||0),r=n.parseVersion(1);M.argument(1===r||1.2===r||1.3===r,"Unsupported GDEF table version.");var i={version:r,classDef:n.parsePointer(ne.classDef),attachList:n.parsePointer(mr),ligCaretList:n.parsePointer(Ar),markAttachClassDef:n.parsePointer(ne.classDef)};return r>=1.2&&(i.markGlyphSets=n.parsePointer(br)),i}},_r=new Array(10);_r[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(ne.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(ne.coverage),values:this.parseValueRecordList()}:void M.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},_r[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();M.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var n=this.parsePointer(ne.coverage),r=this.parseUShort(),i=this.parseUShort();if(1===t)return{posFormat:t,coverage:n,valueFormat1:r,valueFormat2:i,pairSets:this.parseList(ne.pointer(ne.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(r),value2:this.parseValueRecord(i)}}))))};if(2===t){var a=this.parsePointer(ne.classDef),o=this.parsePointer(ne.classDef),s=this.parseUShort(),l=this.parseUShort();return{posFormat:t,coverage:n,valueFormat1:r,valueFormat2:i,classDef1:a,classDef2:o,class1Count:s,class2Count:l,classRecords:this.parseList(s,ne.list(l,(function(){return{value1:this.parseValueRecord(r),value2:this.parseValueRecord(i)}})))}}},_r[3]=function(){return{error:"GPOS Lookup 3 not supported"}},_r[4]=function(){return{error:"GPOS Lookup 4 not supported"}},_r[5]=function(){return{error:"GPOS Lookup 5 not supported"}},_r[6]=function(){return{error:"GPOS Lookup 6 not supported"}},_r[7]=function(){return{error:"GPOS Lookup 7 not supported"}},_r[8]=function(){return{error:"GPOS Lookup 8 not supported"}},_r[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var wr=new Array(10);var Sr={parse:function(e,t){var n=new ne(e,t=t||0),r=n.parseVersion(1);return M.argument(1===r||1.1===r,"Unsupported GPOS table version "+r),1===r?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(_r)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(_r),variations:n.parseFeatureVariationsList()}},make:function(e){return new K.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new K.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new K.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new K.LookupList(e.lookups,wr)}])}};var Er={parse:function(e,t){var n=new ie.Parser(e,t),r=n.parseUShort();if(0===r)return function(e){var t={};e.skip("uShort");var n=e.parseUShort();M.argument(0===n,"Unsupported kern sub-table version."),e.skip("uShort",2);var r=e.parseUShort();e.skip("uShort",3);for(var i=0;i<r;i+=1){var a=e.parseUShort(),o=e.parseUShort(),s=e.parseShort();t[a+","+o]=s}return t}(n);if(1===r)return function(e){var t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var n=255&e.parseUShort();if(e.skip("uShort"),0===n){var r=e.parseUShort();e.skip("uShort",3);for(var i=0;i<r;i+=1){var a=e.parseUShort(),o=e.parseUShort(),s=e.parseShort();t[a+","+o]=s}}return t}(n);throw new Error("Unsupported kern table version ("+r+").")}};var Cr={parse:function(e,t,n,r){for(var i=new ie.Parser(e,t),a=r?i.parseUShort:i.parseULong,o=[],s=0;s<n+1;s+=1){var l=a.call(i);r&&(l*=2),o.push(l)}return o}};function Tr(e,t){for(var n=[],r=12,i=0;i<t;i+=1){var a=ie.getTag(e,r),o=ie.getULong(e,r+4),s=ie.getULong(e,r+8),l=ie.getULong(e,r+12);n.push({tag:a,checksum:o,offset:s,length:l,compression:!1}),r+=16}return n}function Mr(e,t){if("WOFF"===t.compression){var n=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),r=new Uint8Array(t.length);if(_(n,r),r.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(r.buffer,0),offset:0}}return{data:e,offset:t.offset}}return{parseBuffer:function(e,t){var n,r;t=void 0===t||null===t?{}:t;var i,a,o,s,l,u,c,f,d,h,p,v,m,g=new ur({empty:!0}),y=new DataView(e,0),A=[],b=ie.getTag(y,0);if(b===String.fromCharCode(0,1,0,0)||"true"===b||"typ1"===b)g.outlinesFormat="truetype",A=Tr(y,i=ie.getUShort(y,4));else if("OTTO"===b)g.outlinesFormat="cff",A=Tr(y,i=ie.getUShort(y,4));else{if("wOFF"!==b)throw new Error("Unsupported OpenType signature "+b);var x=ie.getTag(y,4);if(x===String.fromCharCode(0,1,0,0))g.outlinesFormat="truetype";else{if("OTTO"!==x)throw new Error("Unsupported OpenType flavor "+b);g.outlinesFormat="cff"}A=function(e,t){for(var n=[],r=44,i=0;i<t;i+=1){var a=ie.getTag(e,r),o=ie.getULong(e,r+4),s=ie.getULong(e,r+8),l=ie.getULong(e,r+12),u=void 0;u=s<l&&"WOFF",n.push({tag:a,offset:o,compression:u,compressedLength:s,length:l}),r+=20}return n}(y,i=ie.getUShort(y,12))}for(var _=0;_<i;_+=1){var w=A[_],S=void 0;switch(w.tag){case"cmap":S=Mr(y,w),g.tables.cmap=oe.parse(S.data,S.offset),g.encoding=new de(g.tables.cmap);break;case"cvt ":S=Mr(y,w),m=new ie.Parser(S.data,S.offset),g.tables.cvt=m.parseShortList(w.length/2);break;case"fvar":o=w;break;case"fpgm":S=Mr(y,w),m=new ie.Parser(S.data,S.offset),g.tables.fpgm=m.parseByteList(w.length);break;case"head":S=Mr(y,w),g.tables.head=ze.parse(S.data,S.offset),g.unitsPerEm=g.tables.head.unitsPerEm,n=g.tables.head.indexToLocFormat;break;case"hhea":S=Mr(y,w),g.tables.hhea=Ge.parse(S.data,S.offset),g.ascender=g.tables.hhea.ascender,g.descender=g.tables.hhea.descender,g.numberOfHMetrics=g.tables.hhea.numberOfHMetrics;break;case"hmtx":f=w;break;case"ltag":S=Mr(y,w),r=Ze.parse(S.data,S.offset);break;case"maxp":S=Mr(y,w),g.tables.maxp=He.parse(S.data,S.offset),g.numGlyphs=g.tables.maxp.numGlyphs;break;case"name":p=w;break;case"OS/2":S=Mr(y,w),g.tables.os2=at.parse(S.data,S.offset);break;case"post":S=Mr(y,w),g.tables.post=ot.parse(S.data,S.offset),g.glyphNames=new pe(g.tables.post);break;case"prep":S=Mr(y,w),m=new ie.Parser(S.data,S.offset),g.tables.prep=m.parseByteList(w.length);break;case"glyf":s=w;break;case"loca":h=w;break;case"CFF ":a=w;break;case"kern":d=w;break;case"GDEF":l=w;break;case"GPOS":u=w;break;case"GSUB":c=w;break;case"meta":v=w}}var E=Mr(y,p);if(g.tables.name=rt.parse(E.data,E.offset,r),g.names=g.tables.name,s&&h){var C=0===n,T=Mr(y,h),M=Cr.parse(T.data,T.offset,g.numGlyphs,C),I=Mr(y,s);g.glyphs=Ft.parse(I.data,I.offset,M,g,t)}else{if(!a)throw new Error("Font doesn't contain TrueType or CFF outlines.");var k=Mr(y,a);Ue.parse(k.data,k.offset,g,t)}var B=Mr(y,f);if(Qe.parse(g,B.data,B.offset,g.numberOfHMetrics,g.numGlyphs,g.glyphs,t),ve(g,t),d){var R=Mr(y,d);g.kerningPairs=Er.parse(R.data,R.offset)}else g.kerningPairs={};if(l){var P=Mr(y,l);g.tables.gdef=xr.parse(P.data,P.offset)}if(u){var D=Mr(y,u);g.tables.gpos=Sr.parse(D.data,D.offset),g.position.init()}if(c){var L=Mr(y,c);g.tables.gsub=ct.parse(L.data,L.offset)}if(o){var N=Mr(y,o);g.tables.fvar=vr.parse(N.data,N.offset,g.names)}if(v){var F=Mr(y,v);g.tables.meta=ft.parse(F.data,F.offset),g.metas=g.tables.meta}return g}}}(),Bd=kd.parseBuffer,Rd=null,Pd=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e)).type=A.HalfFloatType,r}return(0,m.Z)(n,[{key:"parse",value:function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var r=e.pos,i=-1,a=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(i=s.indexOf("\n"))&&a<t&&r<e.byteLength;)o+=s,a+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=a+i+1),o+s.slice(0,i))},r=function(e,t,n,r){var i=e[t+3],a=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*a,n[r+1]=e[t+1]*a,n[r+2]=e[t+2]*a,n[r+3]=1},i=function(e,t,n,r){var i=e[t+3],a=Math.pow(2,i-128)/255;n[r+0]=A.DataUtils.toHalfFloat(Math.min(e[t+0]*a,65504)),n[r+1]=A.DataUtils.toHalfFloat(Math.min(e[t+1]*a,65504)),n[r+2]=A.DataUtils.toHalfFloat(Math.min(e[t+2]*a,65504)),n[r+3]=A.DataUtils.toHalfFloat(1)},a=new Uint8Array(e);a.pos=0;var o=function(e){var r,i,a=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=n(e)))return t(1,"no header found");if(!(i=r.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(u.valid|=1,u.programtype=i[1],u.string+=r+"\n";!1!==(r=n(e));)if(u.string+=r+"\n","#"!==r.charAt(0)){if((i=r.match(a))&&(u.gamma=parseFloat(i[1])),(i=r.match(o))&&(u.exposure=parseFloat(i[1])),(i=r.match(s))&&(u.valid|=2,u.format=i[1]),(i=r.match(l))&&(u.valid|=4,u.height=parseInt(i[1],10),u.width=parseInt(i[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=r+"\n";return 2&u.valid?4&u.valid?u:t(3,"missing image size specifier"):t(3,"missing format specifier")}(a);if(-1!==o){var s=o.width,l=o.height,u=function(e,n,r){var i=n;if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(i!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");var a=new Uint8Array(4*n*r);if(!a.length)return t(4,"unable to allocate buffer space");for(var o=0,s=0,l=4*i,u=new Uint8Array(4),c=new Uint8Array(l),f=r;f>0&&s<e.byteLength;){if(s+4>e.byteLength)return t(1);if(u[0]=e[s++],u[1]=e[s++],u[2]=e[s++],u[3]=e[s++],2!=u[0]||2!=u[1]||(u[2]<<8|u[3])!=i)return t(3,"bad rgbe scanline format");for(var d=0,h=void 0;d<l&&s<e.byteLength;){var p=(h=e[s++])>128;if(p&&(h-=128),0===h||d+h>l)return t(3,"bad scanline data");if(p)for(var v=e[s++],m=0;m<h;m++)c[d++]=v;else c.set(e.subarray(s,s+h),d),d+=h,s+=h}for(var g=i,y=0;y<g;y++){var A=0;a[o]=c[y+A],A+=i,a[o+1]=c[y+A],A+=i,a[o+2]=c[y+A],A+=i,a[o+3]=c[y+A],o+=4}f--}return a}(a.subarray(a.pos),s,l);if(-1!==u){var c,f,d;switch(this.type){case A.FloatType:d=u.length/4;for(var h=new Float32Array(4*d),p=0;p<d;p++)r(u,4*p,h,4*p);c=h,f=A.FloatType;break;case A.HalfFloatType:d=u.length/4;for(var v=new Uint16Array(4*d),m=0;m<d;m++)i(u,4*m,v,4*m);c=v,f=A.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:s,height:l,data:c,header:o.string,gamma:o.gamma,exposure:o.exposure,type:f}}}return null}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,r,i){return(0,h.Z)((0,p.Z)(n.prototype),"load",this).call(this,e,(function(e,n){switch(e.type){case A.FloatType:case A.HalfFloatType:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=A.LinearFilter,e.magFilter=A.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),r,i)}}]),n}(A.DataTextureLoader),Dd=null,Ld=null,Nd="colorSpace"in new A.Texture,Fd=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e)).type=A.HalfFloatType,r}return(0,m.Z)(n,[{key:"parse",value:function(e){var t,n=65536,i=n>>3,a=14,o=65537,s=1<<a,l=s-1,u=32768,c=65535,f=59,d=63,h=2+d-f,p=4,v=4,m=2,g=1,y=0,x=1,_=0,w=2,S=Math.pow(2.7182818,2.2);var E={l:0,c:0,lc:0};function C(e,t,n,r,i){for(;n<e;)t=t<<8|oe(r,i),n+=8;n-=e,E.l=t>>n&(1<<e)-1,E.c=t,E.lc=n}var T=new Array(59);function M(e,t,n,r,i,a,s){for(var l=n,u=0,c=0;i<=a;i++){if(l.value-n.value>r)return!1;C(6,u,c,e,l);var p=E.l;if(u=E.c,c=E.lc,s[i]=p,p==d){if(l.value-n.value>r)throw"Something wrong with hufUnpackEncTable";C(8,u,c,e,l);var v=E.l+h;if(u=E.c,c=E.lc,i+v>a+1)throw"Something wrong with hufUnpackEncTable";for(;v--;)s[i++]=0;i--}else if(p>=f){if(i+(v=p-f+2)>a+1)throw"Something wrong with hufUnpackEncTable";for(;v--;)s[i++]=0;i--}}!function(e){for(var t=0;t<=58;++t)T[t]=0;for(t=0;t<o;++t)T[e[t]]+=1;var n=0;for(t=58;t>0;--t){var r=n+T[t]>>1;T[t]=n,n=r}for(t=0;t<o;++t){var i=e[t];i>0&&(e[t]=i|T[i]++<<6)}}(s)}function I(e){return 63&e}function k(e){return e>>6}var B={c:0,lc:0};function R(e,t,n,r){e=e<<8|oe(n,r),t+=8,B.c=e,B.lc=t}var P={c:0,lc:0};function D(e,t,n,r,i,a,o,s,l,u){if(e==t){r<8&&(R(n,r,i,o),n=B.c,r=B.lc);var c=n>>(r-=8);c=new Uint8Array([c])[0];if(l.value+c>u)return!1;for(var f=s[l.value-1];c-- >0;)s[l.value++]=f}else{if(!(l.value<u))return!1;s[l.value++]=e}P.c=n,P.lc=r}function L(e){return 65535&e}function N(e){var t=L(e);return t>32767?t-65536:t}var F={a:0,b:0};function O(e,t){var n=N(e),r=N(t),i=n+(1&r)+(r>>1),a=i,o=i-r;F.a=a,F.b=o}function U(e,t){var n=L(e),r=L(t),i=n-(r>>1)&c,a=r+i-u&c;F.a=a,F.b=i}function z(e,t,n,r,i,a,o){for(var s,l=o<16384,u=n>i?i:n,c=1;c<=u;)c<<=1;for(s=c>>=1,c>>=1;c>=1;){for(var f,d,h,p,v=0,m=v+a*(i-s),g=a*c,y=a*s,A=r*c,b=r*s;v<=m;v+=y){for(var x=v,_=v+r*(n-s);x<=_;x+=b){var w=x+A,S=(E=x+g)+A;l?(O(e[x+t],e[E+t]),f=F.a,h=F.b,O(e[w+t],e[S+t]),d=F.a,p=F.b,O(f,d),e[x+t]=F.a,e[w+t]=F.b,O(h,p),e[E+t]=F.a,e[S+t]=F.b):(U(e[x+t],e[E+t]),f=F.a,h=F.b,U(e[w+t],e[S+t]),d=F.a,p=F.b,U(f,d),e[x+t]=F.a,e[w+t]=F.b,U(h,p),e[E+t]=F.a,e[S+t]=F.b)}if(n&c){var E=x+g;l?O(e[x+t],e[E+t]):U(e[x+t],e[E+t]),f=F.a,e[E+t]=F.b,e[x+t]=f}}if(i&c)for(x=v,_=v+r*(n-s);x<=_;x+=b){w=x+A;l?O(e[x+t],e[w+t]):U(e[x+t],e[w+t]),f=F.a,e[w+t]=F.b,e[x+t]=f}s=c,c>>=1}return v}function G(e,t,n,r,i,u){var c=n.value,f=ae(t,n),d=ae(t,n);n.value+=4;var h=ae(t,n);if(n.value+=4,f<0||f>=o||d<0||d>=o)throw"Something wrong with HUF_ENCSIZE";var p=new Array(o),v=new Array(s);if(function(e){for(var t=0;t<s;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(v),M(e,0,n,r-(n.value-c),f,d,p),h>8*(r-(n.value-c)))throw"Something wrong with hufUncompress";!function(e,t,n,r){for(;t<=n;t++){var i=k(e[t]),o=I(e[t]);if(i>>o)throw"Invalid table entry";if(o>a){if((c=r[i>>o-a]).len)throw"Invalid table entry";if(c.lit++,c.p){var s=c.p;c.p=new Array(c.lit);for(var l=0;l<c.lit-1;++l)c.p[l]=s[l]}else c.p=new Array(1);c.p[c.lit-1]=t}else if(o){var u=0;for(l=1<<a-o;l>0;l--){var c;if((c=r[(i<<a-o)+u]).len||c.p)throw"Invalid table entry";c.len=o,c.lit=t,u++}}}}(p,f,d,v),function(e,t,n,r,i,o,s,u,c,f){for(var d=0,h=0,p=u,v=Math.trunc(i.value+(o+7)/8);i.value<v;)for(R(d,h,n,i),d=B.c,h=B.lc;h>=a;)if((A=t[d>>h-a&l]).len)h-=A.len,D(A.lit,s,d,h,n,0,i,c,f,p),d=P.c,h=P.lc;else{if(!A.p)throw"hufDecode issues";var m;for(m=0;m<A.lit;m++){for(var g=I(e[A.p[m]]);h<g&&i.value<v;)R(d,h,n,i),d=B.c,h=B.lc;if(h>=g&&k(e[A.p[m]])==(d>>h-g&(1<<g)-1)){h-=g,D(A.p[m],s,d,h,n,0,i,c,f,p),d=P.c,h=P.lc;break}}if(m==A.lit)throw"hufDecode issues"}var y=8-o&7;for(d>>=y,h-=y;h>0;){var A;if(!(A=t[d<<a-h&l]).len)throw"hufDecode issues";h-=A.len,D(A.lit,s,d,h,n,0,i,c,f,p),d=P.c,h=P.lc}}(p,v,e,0,n,h,d,u,i,{value:0})}function Q(e){for(var t=1;t<e.length;t++){var n=e[t-1]+e[t]-128;e[t]=n}}function Z(e,t){for(var n=0,r=Math.floor((e.length+1)/2),i=0,a=e.length-1;!(i>a)&&(t[i++]=e[n++],!(i>a));)t[i++]=e[r++]}function H(e){for(var t=e.byteLength,n=new Array,r=0,i=new DataView(e);t>0;){var a=i.getInt8(r++);if(a<0){t-=(s=-a)+1;for(var o=0;o<s;o++)n.push(i.getUint8(r++))}else{var s=a;t-=2;var l=i.getUint8(r++);for(o=0;o<s+1;o++)n.push(l)}}return n}function j(e,t,n){for(var r,i=1;i<64;)65280==(r=t[e.value])?i=64:r>>8==255?i+=255&r:(n[i]=r,i++),e.value++}function V(e,t){t[0]=fe(e[0]),t[1]=fe(e[1]),t[2]=fe(e[5]),t[3]=fe(e[6]),t[4]=fe(e[14]),t[5]=fe(e[15]),t[6]=fe(e[27]),t[7]=fe(e[28]),t[8]=fe(e[2]),t[9]=fe(e[4]),t[10]=fe(e[7]),t[11]=fe(e[13]),t[12]=fe(e[16]),t[13]=fe(e[26]),t[14]=fe(e[29]),t[15]=fe(e[42]),t[16]=fe(e[3]),t[17]=fe(e[8]),t[18]=fe(e[12]),t[19]=fe(e[17]),t[20]=fe(e[25]),t[21]=fe(e[30]),t[22]=fe(e[41]),t[23]=fe(e[43]),t[24]=fe(e[9]),t[25]=fe(e[11]),t[26]=fe(e[18]),t[27]=fe(e[24]),t[28]=fe(e[31]),t[29]=fe(e[40]),t[30]=fe(e[44]),t[31]=fe(e[53]),t[32]=fe(e[10]),t[33]=fe(e[19]),t[34]=fe(e[23]),t[35]=fe(e[32]),t[36]=fe(e[39]),t[37]=fe(e[45]),t[38]=fe(e[52]),t[39]=fe(e[54]),t[40]=fe(e[20]),t[41]=fe(e[22]),t[42]=fe(e[33]),t[43]=fe(e[38]),t[44]=fe(e[46]),t[45]=fe(e[51]),t[46]=fe(e[55]),t[47]=fe(e[60]),t[48]=fe(e[21]),t[49]=fe(e[34]),t[50]=fe(e[37]),t[51]=fe(e[47]),t[52]=fe(e[50]),t[53]=fe(e[56]),t[54]=fe(e[59]),t[55]=fe(e[61]),t[56]=fe(e[35]),t[57]=fe(e[36]),t[58]=fe(e[48]),t[59]=fe(e[49]),t[60]=fe(e[57]),t[61]=fe(e[58]),t[62]=fe(e[62]),t[63]=fe(e[63])}function W(e){for(var t=.5*Math.cos(.7853975),n=.5*Math.cos(3.14159/16),r=.5*Math.cos(3.14159/8),i=.5*Math.cos(3*3.14159/16),a=.5*Math.cos(.981746875),o=.5*Math.cos(3*3.14159/8),s=.5*Math.cos(1.374445625),l=new Array(4),u=new Array(4),c=new Array(4),f=new Array(4),d=0;d<8;++d){var h=8*d;l[0]=r*e[h+2],l[1]=o*e[h+2],l[2]=r*e[h+6],l[3]=o*e[h+6],u[0]=n*e[h+1]+i*e[h+3]+a*e[h+5]+s*e[h+7],u[1]=i*e[h+1]-s*e[h+3]-n*e[h+5]-a*e[h+7],u[2]=a*e[h+1]-n*e[h+3]+s*e[h+5]+i*e[h+7],u[3]=s*e[h+1]-a*e[h+3]+i*e[h+5]-n*e[h+7],c[0]=t*(e[h+0]+e[h+4]),c[3]=t*(e[h+0]-e[h+4]),c[1]=l[0]+l[3],c[2]=l[1]-l[2],f[0]=c[0]+c[1],f[1]=c[3]+c[2],f[2]=c[3]-c[2],f[3]=c[0]-c[1],e[h+0]=f[0]+u[0],e[h+1]=f[1]+u[1],e[h+2]=f[2]+u[2],e[h+3]=f[3]+u[3],e[h+4]=f[3]-u[3],e[h+5]=f[2]-u[2],e[h+6]=f[1]-u[1],e[h+7]=f[0]-u[0]}for(var p=0;p<8;++p)l[0]=r*e[16+p],l[1]=o*e[16+p],l[2]=r*e[48+p],l[3]=o*e[48+p],u[0]=n*e[8+p]+i*e[24+p]+a*e[40+p]+s*e[56+p],u[1]=i*e[8+p]-s*e[24+p]-n*e[40+p]-a*e[56+p],u[2]=a*e[8+p]-n*e[24+p]+s*e[40+p]+i*e[56+p],u[3]=s*e[8+p]-a*e[24+p]+i*e[40+p]-n*e[56+p],c[0]=t*(e[p]+e[32+p]),c[3]=t*(e[p]-e[32+p]),c[1]=l[0]+l[3],c[2]=l[1]-l[2],f[0]=c[0]+c[1],f[1]=c[3]+c[2],f[2]=c[3]-c[2],f[3]=c[0]-c[1],e[0+p]=f[0]+u[0],e[8+p]=f[1]+u[1],e[16+p]=f[2]+u[2],e[24+p]=f[3]+u[3],e[32+p]=f[3]-u[3],e[40+p]=f[2]-u[2],e[48+p]=f[1]-u[1],e[56+p]=f[0]-u[0]}function X(e){for(var t=0;t<64;++t){var n=e[0][t],r=e[1][t],i=e[2][t];e[0][t]=n+1.5747*i,e[1][t]=n-.1873*r-.4682*i,e[2][t]=n+1.8556*r}}function Y(e,t,n){for(var r=0;r<64;++r)t[n+r]=A.DataUtils.toHalfFloat(K(e[r]))}function K(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(S,Math.abs(e)-1)}function J(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function q(e){var t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),n=new Uint8Array(H(t)),r=new Uint8Array(n.length);return Q(n),Z(n,r),new DataView(r.buffer)}function $(e){var t=e.array.slice(e.offset.value,e.offset.value+e.size),n=(0,b.HT)(t),r=new Uint8Array(n.length);return Q(n),Z(n,r),new DataView(r.buffer)}function ee(e){for(var t=e.viewer,r={value:e.offset.value},a=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),o=new Uint8Array(i),s=0,l=new Array(e.channels),u=0;u<e.channels;u++)l[u]={},l[u].start=s,l[u].end=l[u].start,l[u].nx=e.width,l[u].ny=e.lines,l[u].size=e.type,s+=l[u].nx*l[u].ny*l[u].size;var c=de(t,r),f=de(t,r);if(f>=i)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(c<=f)for(u=0;u<f-c+1;u++)o[u+c]=se(t,r);var d=new Uint16Array(n),h=function(e,t){for(var r=0,i=0;i<n;++i)(0==i||e[i>>3]&1<<(7&i))&&(t[r++]=i);for(var a=r-1;r<n;)t[r++]=0;return a}(o,d),p=ae(t,r);G(e.array,t,r,p,a,s);for(u=0;u<e.channels;++u)for(var v=l[u],g=0;g<l[u].size;++g)z(a,v.start+g,v.nx,v.size,v.ny,v.nx*v.size,h);!function(e,t,n){for(var r=0;r<n;++r)t[r]=e[t[r]]}(d,a,s);for(var y=0,A=new Uint8Array(a.buffer.byteLength),b=0;b<e.lines;b++)for(var x=0;x<e.channels;x++){var _=(v=l[x]).nx*v.size,w=new Uint8Array(a.buffer,v.end*m,_*m);A.set(w,y),y+=_*m,v.end+=_}return new DataView(A.buffer)}function te(e){for(var t=e.array.slice(e.offset.value,e.offset.value+e.size),n=(0,b.HT)(t),r=e.lines*e.channels*e.width,i=1==e.type?new Uint16Array(r):new Uint32Array(r),a=0,o=0,s=new Array(4),l=0;l<e.lines;l++)for(var u=0;u<e.channels;u++){var c=0;switch(e.type){case 1:s[0]=a,s[1]=s[0]+e.width,a=s[1]+e.width;for(var f=0;f<e.width;++f){c+=n[s[0]++]<<8|n[s[1]++],i[o]=c,o++}break;case 2:s[0]=a,s[1]=s[0]+e.width,s[2]=s[1]+e.width,a=s[2]+e.width;for(var d=0;d<e.width;++d){c+=n[s[0]++]<<24|n[s[1]++]<<16|n[s[2]++]<<8,i[o]=c,o++}}}return new DataView(i.buffer)}function ne(e){var t=e.viewer,n={value:e.offset.value},r=new Uint8Array(e.width*e.lines*(e.channels*e.type*m)),i={version:le(t,n),unknownUncompressedSize:le(t,n),unknownCompressedSize:le(t,n),acCompressedSize:le(t,n),dcCompressedSize:le(t,n),rleCompressedSize:le(t,n),rleUncompressedSize:le(t,n),rleRawSize:le(t,n),totalAcUncompressedCount:le(t,n),totalDcUncompressedCount:le(t,n),acCompression:le(t,n)};if(i.version<2)throw"EXRLoader.parse: "+ye.compression+" version "+i.version+" is unsupported";for(var a=new Array,o=de(t,n)-m;o>0;){var s=re(t.buffer,n),l=se(t,n),u=l>>2&3,c=new Int8Array([(l>>4)-1])[0],f=se(t,n);a.push({name:s,index:c,type:f,compression:u}),o-=s.length+3}for(var d=ye.channels,h=new Array(e.channels),p=0;p<e.channels;++p){var v=h[p]={},g=d[p];v.name=g.name,v.compression=_,v.decoded=!1,v.type=g.pixelType,v.pLinear=g.pLinear,v.width=e.width,v.height=e.lines}for(var A={idx:new Array(3)},S=0;S<e.channels;++S)for(v=h[S],p=0;p<a.length;++p){var E=a[p];v.name==E.name&&(v.compression=E.compression,E.index>=0&&(A.idx[E.index]=S),v.offset=S)}if(i.acCompressedSize>0)switch(i.acCompression){case y:var C=new Uint16Array(i.totalAcUncompressedCount);G(e.array,t,n,i.acCompressedSize,C,i.totalAcUncompressedCount);break;case x:var T=e.array.slice(n.value,n.value+i.totalAcUncompressedCount),M=(0,b.HT)(T);C=new Uint16Array(M.buffer);n.value+=i.totalAcUncompressedCount}if(i.dcCompressedSize>0){var I={array:e.array,offset:n,size:i.dcCompressedSize},k=new Uint16Array($(I).buffer);n.value+=i.dcCompressedSize}if(i.rleRawSize>0){T=e.array.slice(n.value,n.value+i.rleCompressedSize);var B=H((M=(0,b.HT)(T)).buffer);n.value+=i.rleCompressedSize}var R=0,P=new Array(h.length);for(p=0;p<P.length;++p)P[p]=new Array;for(var D=0;D<e.lines;++D)for(var L=0;L<h.length;++L)P[L].push(R),R+=h[L].width*e.type*m;!function(e,t,n,r,i,a){for(var o=new DataView(a.buffer),s=n[e.idx[0]].width,l=n[e.idx[0]].height,u=Math.floor(s/8),c=Math.ceil(s/8),f=Math.ceil(l/8),d=s-8*(c-1),h=l-8*(f-1),p={value:0},v=new Array(3),g=new Array(3),y=new Array(3),A=new Array(3),b=new Array(3),x=0;x<3;++x)b[x]=t[e.idx[x]],v[x]=x<1?0:v[x-1]+c*f,g[x]=new Float32Array(64),y[x]=new Uint16Array(64),A[x]=new Uint16Array(64*c);for(var _=0;_<f;++_){var w=8;_==f-1&&(w=h);for(var S=8,E=0;E<c;++E){E==c-1&&(S=d);for(var C=0;C<3;++C)y[C].fill(0),y[C][0]=i[v[C]++],j(p,r,y[C]),V(y[C],g[C]),W(g[C]);X(g);for(var T=0;T<3;++T)Y(g[T],A[T],64*E)}for(var M=0,I=0;I<3;++I){for(var k=n[e.idx[I]].type,B=8*_;B<8*_+w;++B){M=b[I][B];for(var R=0;R<u;++R){var P=64*R+8*(7&B);o.setUint16(M+0*m*k,A[I][P+0],!0),o.setUint16(M+1*m*k,A[I][P+1],!0),o.setUint16(M+2*m*k,A[I][P+2],!0),o.setUint16(M+3*m*k,A[I][P+3],!0),o.setUint16(M+4*m*k,A[I][P+4],!0),o.setUint16(M+5*m*k,A[I][P+5],!0),o.setUint16(M+6*m*k,A[I][P+6],!0),o.setUint16(M+7*m*k,A[I][P+7],!0),M+=8*m*k}}if(u!=c)for(var D=8*_;D<8*_+w;++D)for(var L=b[I][D]+8*u*m*k,N=64*u+8*(7&D),F=0;F<S;++F)o.setUint16(L+F*m*k,A[I][N+F],!0)}}for(var O=new Uint16Array(s),U=(o=new DataView(a.buffer),0);U<3;++U){n[e.idx[U]].decoded=!0;var z=n[e.idx[U]].type;if(2==n[U].type)for(var G=0;G<l;++G){for(var Q=b[U][G],Z=0;Z<s;++Z)O[Z]=o.getUint16(Q+Z*m*z,!0);for(Z=0;Z<s;++Z)o.setFloat32(Q+Z*m*z,fe(O[Z]),!0)}}}(A,P,h,C,k,r);for(p=0;p<h.length;++p){if(!(v=h[p]).decoded){if(v.compression!==w)throw"EXRLoader.parse: unsupported channel compression";var N=0,F=0;for(D=0;D<e.lines;++D){for(var O=P[p][N],U=0;U<v.width;++U){for(var z=0;z<m*v.type;++z)r[O++]=B[F+z*v.width*v.height];F++}N++}}}return new DataView(r.buffer)}function re(e,t){for(var n=new Uint8Array(e),r=0;0!=n[t.value+r];)r+=1;var i=(new TextDecoder).decode(n.slice(t.value,t.value+r));return t.value=t.value+r+1,i}function ie(e,t){var n=e.getInt32(t.value,!0);return t.value=t.value+v,n}function ae(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+v,n}function oe(e,t){var n=e[t.value];return t.value=t.value+g,n}function se(e,t){var n=e.getUint8(t.value);return t.value=t.value+g,n}var le=function(e,t){var n;return n="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,n};function ue(e,t){var n=e.getFloat32(t.value,!0);return t.value+=p,n}function ce(e,t){return A.DataUtils.toHalfFloat(ue(e,t))}function fe(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function de(e,t){var n=e.getUint16(t.value,!0);return t.value+=m,n}function he(e,t){return fe(de(e,t))}function pe(e,t,n,r,i){return"string"===r||"stringvector"===r||"iccProfile"===r?function(e,t,n){var r=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+n));return t.value=t.value+n,r}(t,n,i):"chlist"===r?function(e,t,n,r){for(var i=n.value,a=[];n.value<i+r-1;){var o=re(t,n),s=ie(e,n),l=se(e,n);n.value+=3;var u=ie(e,n),c=ie(e,n);a.push({name:o,pixelType:s,pLinear:l,xSampling:u,ySampling:c})}return n.value+=1,a}(e,t,n,i):"chromaticities"===r?function(e,t){return{redX:ue(e,t),redY:ue(e,t),greenX:ue(e,t),greenY:ue(e,t),blueX:ue(e,t),blueY:ue(e,t),whiteX:ue(e,t),whiteY:ue(e,t)}}(e,n):"compression"===r?function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][se(e,t)]}(e,n):"box2i"===r?function(e,t){return{xMin:ae(e,t),yMin:ae(e,t),xMax:ae(e,t),yMax:ae(e,t)}}(e,n):"lineOrder"===r?function(e,t){return["INCREASING_Y"][se(e,t)]}(e,n):"float"===r?ue(e,n):"v2f"===r?function(e,t){return[ue(e,t),ue(e,t)]}(e,n):"v3f"===r?function(e,t){return[ue(e,t),ue(e,t),ue(e,t)]}(e,n):"int"===r?ie(e,n):"rational"===r?function(e,t){return[ie(e,t),ae(e,t)]}(e,n):"timecode"===r?function(e,t){return[ae(e,t),ae(e,t)]}(e,n):"preview"===r?(n.value+=i,"skipped"):void(n.value+=i)}for(var ve=new DataView(e),me=new Uint8Array(e),ge={value:0},ye=function(e,t,n){var r={};if(20000630!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";r.version=e.getUint8(4);var i=e.getUint8(5);r.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},n.value=8;for(var a=!0;a;){var o=re(t,n);if(0==o)a=!1;else{var s=re(t,n),l=pe(e,t,n,s,ae(e,n));void 0===l?console.warn("EXRLoader.parse: skipped unknown header attribute type '".concat(s,"'.")):r[o]=l}}if(0!=i)throw console.error("EXRHeader:",r),"THREE.EXRLoader: provided file is currently unsupported.";return r}(ve,e,ge),Ae=function(e,t,n,i,a){var o=(0,r.Z)({size:0,viewer:t,array:n,offset:i,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null},Nd?"colorSpace":"encoding",null);switch(e.compression){case"NO_COMPRESSION":o.lines=1,o.uncompress=J;break;case"RLE_COMPRESSION":o.lines=1,o.uncompress=q;break;case"ZIPS_COMPRESSION":o.lines=1,o.uncompress=$;break;case"ZIP_COMPRESSION":o.lines=16,o.uncompress=$;break;case"PIZ_COMPRESSION":o.lines=32,o.uncompress=ee;break;case"PXR24_COMPRESSION":o.lines=16,o.uncompress=te;break;case"DWAA_COMPRESSION":o.lines=32,o.uncompress=ne;break;case"DWAB_COMPRESSION":o.lines=256,o.uncompress=ne;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(o.scanlineBlockSize=o.lines,1==o.type)switch(a){case A.FloatType:o.getter=he,o.inputSize=m;break;case A.HalfFloatType:o.getter=de,o.inputSize=m}else{if(2!=o.type)throw"EXRLoader.parse: unsupported pixelType "+o.type+" for "+e.compression+".";switch(a){case A.FloatType:o.getter=ue,o.inputSize=p;break;case A.HalfFloatType:o.getter=ce,o.inputSize=p}}o.blockCount=(e.dataWindow.yMax+1)/o.scanlineBlockSize;for(var s=0;s<o.blockCount;s++)le(t,i);o.outputChannels=3==o.channels?4:o.channels;var l=o.width*o.height*o.outputChannels;switch(a){case A.FloatType:o.byteArray=new Float32Array(l),o.channels<o.outputChannels&&o.byteArray.fill(1,0,l);break;case A.HalfFloatType:o.byteArray=new Uint16Array(l),o.channels<o.outputChannels&&o.byteArray.fill(15360,0,l);break;default:console.error("THREE.EXRLoader: unsupported type: ",a)}return o.bytesPerLine=o.width*o.inputSize*o.channels,4==o.outputChannels?o.format=A.RGBAFormat:o.format=A.RedFormat,Nd?o.colorSpace="srgb-linear":o.encoding=3e3,o}(ye,ve,me,ge,this.type),be={value:0},xe={R:0,G:1,B:2,A:3,Y:0},_e=0;_e<Ae.height/Ae.scanlineBlockSize;_e++){var we=ae(ve,ge);Ae.size=ae(ve,ge),Ae.lines=we+Ae.scanlineBlockSize>Ae.height?Ae.height-we:Ae.scanlineBlockSize;var Se=Ae.size<Ae.lines*Ae.bytesPerLine?Ae.uncompress(Ae):J(Ae);ge.value+=Ae.size;for(var Ee=0;Ee<Ae.scanlineBlockSize;Ee++){var Ce=Ee+_e*Ae.scanlineBlockSize;if(Ce>=Ae.height)break;for(var Te=0;Te<Ae.channels;Te++)for(var Me=xe[ye.channels[Te].name],Ie=0;Ie<Ae.width;Ie++){be.value=(Ee*(Ae.channels*Ae.width)+Te*Ae.width+Ie)*Ae.inputSize;var ke=(Ae.height-1-Ce)*(Ae.width*Ae.outputChannels)+Ie*Ae.outputChannels+Me;Ae.byteArray[ke]=Ae.getter(Se,be)}}}return t={header:ye,width:Ae.width,height:Ae.height,data:Ae.byteArray,format:Ae.format},(0,r.Z)(t,Nd?"colorSpace":"encoding",Ae[Nd?"colorSpace":"encoding"]),(0,r.Z)(t,"type",this.type),t}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,r,i){return(0,h.Z)((0,p.Z)(n.prototype),"load",this).call(this,e,(function(e,n){Nd?e.colorSpace=n.colorSpace:e.encoding=n.encoding,e.minFilter=A.LinearFilter,e.magFilter=A.LinearFilter,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,n)}),r,i)}}]),n}(A.DataTextureLoader),Od=null,Ud=null,zd=null,Gd=null,Qd=null,Zd=null;function Hd(e){var t,n,r=e.header,i=r[12],a=r[2],o=r[6],s=r[7],l=r[10],u=r[11];switch(a){case 0:t=2,n=RGB_PVRTC_2BPPV1_Format;break;case 1:t=2,n=RGBA_PVRTC_2BPPV1_Format;break;case 2:t=4,n=RGB_PVRTC_4BPPV1_Format;break;case 3:t=4,n=RGBA_PVRTC_4BPPV1_Format;break;default:console.error("THREE.PVRLoader: Unsupported PVR format:",a)}return e.dataPtr=52+i,e.bpp=t,e.format=n,e.width=s,e.height=o,e.numSurfaces=l,e.numMipmaps=u,e.isCubemap=6===l,Vd(e)}function jd(e){var t,n,r=e.header,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[10],c=r[12],f=255&l,d=u>0;return 25===f?(n=d?RGBA_PVRTC_4BPPV1_Format:RGB_PVRTC_4BPPV1_Format,t=4):24===f?(n=d?RGBA_PVRTC_2BPPV1_Format:RGB_PVRTC_2BPPV1_Format,t=2):console.error("THREE.PVRLoader: Unknown PVR format:",f),e.dataPtr=i,e.bpp=t,e.format=n,e.width=o,e.height=a,e.numSurfaces=c,e.numMipmaps=s+1,e.isCubemap=6===c,Vd(e)}function Vd(e){var t,n={mipmaps:[],width:e.width,height:e.height,format:e.format,mipmapCount:e.numMipmaps,isCubemap:e.isCubemap},r=e.buffer,i=e.dataPtr,a=0,o=0,s=0,l=0,u=0,c=e.bpp,f=e.numSurfaces;2===c?(o=8,s=4):(o=4,s=4),t=o*s*c/8,n.mipmaps.length=e.numMipmaps*f;for(var d=0;d<e.numMipmaps;){var h=e.width>>d,p=e.height>>d;(l=h/o)<2&&(l=2),(u=p/s)<2&&(u=2),a=l*u*t;for(var v=0;v<f;v++){var m={data:new Uint8Array(r,i,a),width:h,height:p};n.mipmaps[v*e.numMipmaps+d]=m,i+=a}d++}return n}var Wd=null,Xd=new WeakMap,Yd=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e)).transcoderPath="",r.transcoderBinary=null,r.transcoderPending=null,r.workerLimit=4,r.workerPool=[],r.workerNextTaskID=1,r.workerSourceURL="",r.workerConfig=null,r}return(0,m.Z)(n,[{key:"setTranscoderPath",value:function(e){return this.transcoderPath=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"detectSupport",value:function(e){return this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}},{key:"load",value:function(e,t,n,r){var i=this,a=new A.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.setWithCredentials(this.withCredentials);var o=new A.CompressedTexture;return a.load(e,(function(e){if(Xd.has(e))return Xd.get(e).promise.then(t).catch(r);i._createTexture([e]).then((function(e){o.copy(e),o.needsUpdate=!0,t&&t(o)})).catch(r)}),n,r),o}},{key:"parseInternalAsync",value:function(e){for(var t=e.levels,n=new Set,r=0;r<t.length;r++)n.add(t[r].data.buffer);return this._createTexture(Array.from(n),(0,l.Z)((0,l.Z)({},e),{},{lowLevel:!0}))}},{key:"_createTexture",value:function(e){for(var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=0,o=0;o<e.length;o++)a+=e[o].byteLength;var s=this._allocateWorker(a).then((function(a){return t=a,n=r.workerNextTaskID++,new Promise((function(r,a){t._callbacks[n]={resolve:r,reject:a},t.postMessage({type:"transcode",id:n,buffers:e,taskConfig:i},e)}))})).then((function(e){var t=e.mipmaps,n=e.width,r=e.height,i=e.format,a=new A.CompressedTexture(t,n,r,i,A.UnsignedByteType);return a.minFilter=1===t.length?A.LinearFilter:A.LinearMipmapLinearFilter,a.magFilter=A.LinearFilter,a.generateMipmaps=!1,a.needsUpdate=!0,a}));return s.catch((function(){return!0})).then((function(){t&&n&&(t._taskLoad-=a,delete t._callbacks[n])})),Xd.set(e[0],{promise:s}),s}},{key:"_initTranscoder",value:function(){var e=this;if(!this.transcoderPending){var t=new A.FileLoader(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);var r=new Promise((function(e,n){t.load("basis_transcoder.js",e,void 0,n)})),i=new A.FileLoader(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);var a=new Promise((function(e,t){i.load("basis_transcoder.wasm",e,void 0,t)}));this.transcoderPending=Promise.all([r,a]).then((function(t){var r=(0,o.Z)(t,2),i=r[0],a=r[1],s=n.BasisWorker.toString(),l=["/* constants */","let _EngineFormat = "+JSON.stringify(n.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(n.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(n.BasisFormat),"/* basis_transcoder.js */",i,"/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([l])),e.transcoderBinary=a}))}return this.transcoderPending}},{key:"_allocateWorker",value:function(e){var t=this;return this._initTranscoder().then((function(){if(t.workerPool.length<t.workerLimit){var n=new Worker(t.workerSourceURL);n._callbacks={},n._taskLoad=0,n.postMessage({type:"init",config:t.workerConfig,transcoderBinary:t.transcoderBinary}),n.onmessage=function(e){var t=e.data;switch(t.type){case"transcode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t);break;default:console.error('THREE.BasisTextureLoader: Unexpected message, "'+t.type+'"')}},t.workerPool.push(n)}else t.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var r=t.workerPool[t.workerPool.length-1];return r._taskLoad+=e,r}))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;e++)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}(A.Loader),Kd=Yd;A.RGBAFormat,A.RGBA_ASTC_4x4_Format,A.RGBA_BPTC_Format,A.RGBA_ETC2_EAC_Format,A.RGBA_PVRTC_4BPPV1_Format,A.RGBA_S3TC_DXT5_Format,A.RGB_ETC1_Format,A.RGB_ETC2_Format,A.RGB_PVRTC_4BPPV1_Format,A.RGB_S3TC_DXT1_Format;var Jd=null,qd=19789,$d=15786,eh=49725,th=2,nh=16,rh=17,ih=18,ah=19,oh=48,sh=49,lh=15677,uh=15678,ch=256,fh=45055,dh=40960,hh=40976,ph=40992,vh=41008,mh=41024,gh=41040,yh=41089,Ah=41091,bh=41093,xh=41095,_h=41472,wh=41488,Sh=41520,Eh=41476,Ch=41728,Th=41812,Mh=41814,Ih=41816,kh=41818,Bh=16384,Rh=16640,Ph=16656,Dh=16672,Lh=16688,Nh=16704,Fh=16736,Oh=0,Uh=1,zh=2,Gh=3,Qh=4,Zh=5,Hh=0,jh=1,Vh=2,Wh=3,Xh=4,Yh=5,Kh=6,Jh="16",qh="24",$h=new A.Vector3,ep=new A.Vector3,tp=null,np=null;function rp(e){for(var t=0,n=e.length;t<n;t++){var r=e[t],i=r.vertices,a=i[0],o=i[1],s=i[2];$h.subVectors(o,a),ep.subVectors(s,o),r.faceNormal=(new Vector3).crossVectors($h,ep).normalize()}}var ip=new A.Ray;function ap(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=100*(1+1e-10);function i(e){var t=~~(e.x*r),n=~~(e.y*r),i=~~(e.z*r);return"".concat(t,",").concat(n,",").concat(i)}function a(e,t){return"".concat(i(e),"_").concat(i(t))}function o(e,t,n){n.direction.subVectors(t,e).normalize();var r=e.dot(n.direction);return n.origin.copy(e).addScaledVector(n.direction,-r),n}function s(e){return a(e.origin,e.direction)}for(var l=new Set,u=new Map,c={},f=[],d=0,h=t.length;d<h;d++){var p=t[d].vertices,v=p[0],m=p[1];if(l.add(a(v,m)),l.add(a(m,v)),n){var g=o(v,m,new Ray),y=s(g);if(!u.has(y)){o(m,v,g);var A=s(g),b={ray:g,distances:[]};u.set(y,b),u.set(A,b)}var x=u.get(y),_=x.ray.direction.dot(v),w=x.ray.direction.dot(m);if(_>w){var S=[w,_];_=S[0],w=S[1]}x.distances.push(_,w)}}for(var E=0,C=e.length;E<C;E++)for(var T=e[E],M=T.vertices,I=M.length,k=0;k<I;k++){var B=k,R=(k+1)%I,P=M[B],D=M[R],L=a(P,D);if(!l.has(L)){if(n){o(P,D,ip);var N=s(ip);if(u.has(N)){var F=u.get(N),O=F.ray,U=F.distances,z=O.direction.dot(P),G=O.direction.dot(D);if(z>G){var Q=[G,z];z=Q[0],G=Q[1]}for(var Z=!1,H=0,j=U.length;H<j;H+=2)if(z>=U[H]&&G<=U[H+1]){Z=!0;break}if(Z)continue}}var V={index:B,tri:T};c[L]=V}}for(;;){var W=null;for(var X in c){W=c[X];break}if(null===W)break;for(var Y=[W];Y.length>0;)for(var K=Y.pop().tri,J=K.vertices,q=K.normals,$=K.faceNormal,ee=J.length,te=0;te<ee;te++){var ne=te,re=(te+1)%ee,ie=J[ne],ae=J[re];delete c[a(ie,ae)];var oe=a(ae,ie),se=c[oe];if(se){var le=se.tri,ue=se.index,ce=le.normals,fe=ce.length,de=le.faceNormal;if(Math.abs(le.faceNormal.dot(K.faceNormal))<.25)continue;oe in c&&(Y.push(se),delete c[oe]);var he=(ue+1)%fe;q[ne]&&ce[he]&&q[ne]!==ce[he]&&(ce[he].norm.add(q[ne].norm),q[ne].norm=ce[he].norm);var pe=q[ne]||ce[he];null===pe&&(pe={norm:new Vector3},f.push(pe.norm)),null===q[ne]&&(q[ne]=pe,pe.norm.add($)),null===ce[he]&&(ce[he]=pe,pe.norm.add(de)),q[re]&&ce[ue]&&q[re]!==ce[ue]&&(ce[ue].norm.add(q[re].norm),q[re].norm=ce[ue].norm);var ve=q[re]||ce[ue];null===ve&&(ve={norm:new Vector3},f.push(ve.norm)),null===q[re]&&(q[re]=ve,ve.norm.add($)),null===ce[ue]&&(ce[ue]=ve,ve.norm.add(de))}}}for(var me=0,ge=f.length;me<ge;me++)f[me].normalize()}function op(e){return"Part"===e||"Unofficial_Part"===e}function sp(e){return/primitive/i.test(e)||"Subpart"===e}var lp=null,up=null;function cp(e,t,n,r){return(!r&&e===Jh||r&&e===qh)&&(e=t),n[e]||null}var fp=null;function dp(e,t){return e.colorCode===t.colorCode?0:e.colorCode<t.colorCode?-1:1}function hp(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.sort(dp),null===r&&(r=e.length);for(var i=new Float32Array(t*r*3),a=3===t?new Float32Array(t*r*3):null,o=[],s=new Array(6),l=new BufferGeometry,u=null,c=0,f=0,d=0,h=0,p=e.length;h<p;h++){var v=e[h],m=v.vertices;4===m.length&&(s[0]=m[0],s[1]=m[1],s[2]=m[2],s[3]=m[0],s[4]=m[2],s[5]=m[3],m=s);for(var g=0,y=m.length;g<y;g++){var A=m[g],b=d+3*g;i[b+0]=A.x,i[b+1]=A.y,i[b+2]=A.z}if(3===t){if(!v.faceNormal){var x=m[0],_=m[1],w=m[2];$h.subVectors(_,x),ep.subVectors(w,_),v.faceNormal=(new Vector3).crossVectors($h,ep).normalize()}var S=v.normals;4===S.length&&(s[0]=S[0],s[1]=S[1],s[2]=S[2],s[3]=S[0],s[4]=S[2],s[5]=S[3],S=s);for(var E=0,C=S.length;E<C;E++){var T=v.faceNormal;S[E]&&(T=S[E].norm);var M=d+3*E;a[M+0]=T.x,a[M+1]=T.y,a[M+2]=T.z}}if(u!==v.colorCode){null!==u&&l.addGroup(c,f,o.length-1);var I=v.material;null!==I?3===t?o.push(I):2===t&&(null!==I?n?o.push(I.userData.edgeMaterial.userData.conditionalEdgeMaterial):o.push(I.userData.edgeMaterial):o.push(null)):o.push(v.colorCode),u=v.colorCode,c=d/3,f=m.length}else f+=m.length;d+=3*m.length}f>0&&l.addGroup(c,1/0,o.length-1),l.setAttribute("position",new BufferAttribute(i,3)),null!==a&&l.setAttribute("normal",new BufferAttribute(a,3));var k=null;if(2===t?k=n?new np(l,1===o.length?o[0]:o):new LineSegments(l,1===o.length?o[0]:o):3===t&&(k=new Mesh(l,1===o.length?o[0]:o)),n){k.isConditionalLine=!0;for(var B=new Float32Array(3*e.length*2),R=new Float32Array(3*e.length*2),P=new Float32Array(3*e.length*2),D=0,L=e.length;D<L;D++){var N=e[D],F=N.vertices,O=N.controlPoints,U=O[0],z=O[1],G=F[0],Q=F[1],Z=3*D*2;B[Z+0]=U.x,B[Z+1]=U.y,B[Z+2]=U.z,B[Z+3]=U.x,B[Z+4]=U.y,B[Z+5]=U.z,R[Z+0]=z.x,R[Z+1]=z.y,R[Z+2]=z.z,R[Z+3]=z.x,R[Z+4]=z.y,R[Z+5]=z.z,P[Z+0]=Q.x-G.x,P[Z+1]=Q.y-G.y,P[Z+2]=Q.z-G.z,P[Z+3]=Q.x-G.x,P[Z+4]=Q.y-G.y,P[Z+5]=Q.z-G.z}l.setAttribute("control0",new BufferAttribute(B,3,!1)),l.setAttribute("control1",new BufferAttribute(R,3,!1)),l.setAttribute("direction",new BufferAttribute(P,3,!1))}return k}var pp=null,vp=null,mp=new WeakMap,gp=null;function yp(){var e,t;function n(e,n){var a,o,s,l,u,c=e.geometry(),f=e.attributes(),d=c.objectType;switch(d){case t.ObjectType.Curve:var h=i(c,100);o={},l={},(s={}).itemSize=3,s.type="Float32Array",s.array=[];for(var p=0;p<h.length;p++)s.array.push(h[p][0]),s.array.push(h[p][1]),s.array.push(h[p][2]);o.position=s,l.attributes=o,a={data:l};break;case t.ObjectType.Point:var v=c.location,m={};o={},l={},(s={}).itemSize=3,s.type="Float32Array",s.array=[v[0],v[1],v[2]];var g=f.drawColor(n);m.itemSize=3,m.type="Float32Array",m.array=[g.r/255,g.g/255,g.b/255],o.position=s,o.color=m,l.attributes=o,a={data:l};break;case t.ObjectType.PointSet:case t.ObjectType.Mesh:a=c.toThreejsJSON();break;case t.ObjectType.Brep:var y=c.faces();u=new t.Mesh;for(var A=0;A<y.count;A++){var b=y.get(A),x=b.getMesh(t.MeshType.Any);x&&(u.append(x),x.delete()),b.delete()}u.faces().count>0&&(u.compact(),a=u.toThreejsJSON(),y.delete()),u.delete();break;case t.ObjectType.Extrusion:(u=c.getMesh(t.MeshType.Any))&&(a=u.toThreejsJSON(),u.delete());break;case t.ObjectType.TextDot:case t.ObjectType.Light:a=r(c);break;case t.ObjectType.InstanceReference:(a=r(c)).xform=r(c.xform),a.xform.array=c.xform.toFloatArray(!0);break;case t.ObjectType.SubD:c.subdivide(3),(u=t.Mesh.createFromSubDControlNet(c))&&(a=u.toThreejsJSON(),u.delete());break;default:console.warn("THREE.3DMLoader: TODO: Implement ".concat(d.constructor.name))}if(a)return(o=r(f)).geometry=r(c),f.groupCount>0&&(o.groupIds=f.getGroupList()),f.userStringCount>0&&(o.userStrings=f.getUserStrings()),c.userStringCount>0&&(o.geometry.userStrings=c.getUserStrings()),o.drawColor=f.drawColor(n),{geometry:a,attributes:o,objectType:d=(d=d.constructor.name).substring(11,d.length)};console.warn("THREE.3DMLoader: ".concat(d.constructor.name," has no associated mesh geometry."))}function r(e){var t={};for(var n in e){var r=e[n];"function"!==typeof r&&("object"===typeof r&&null!==r&&r.hasOwnProperty("constructor")?t[n]={name:r.constructor.name,value:r.value}:t[n]=r)}return t}function i(e,n){var r=n,a=[],o=[];if(e instanceof t.LineCurve)return[e.pointAtStart,e.pointAtEnd];if(e instanceof t.PolylineCurve){r=e.pointCount;for(var s=0;s<r;s++)a.push(e.point(s));return a}if(e instanceof t.PolyCurve){for(var l=e.segmentCount,u=0;u<l;u++){var c=e.segmentCurve(u),f=i(c,r);a=a.concat(f),c.delete()}return a}if(e instanceof t.ArcCurve&&(r=(r=Math.floor(e.angleDegrees/5))<2?2:r),e instanceof t.NurbsCurve&&1===e.degree){for(var d=e.tryGetPolyline(),h=0;h<d.count;h++)a.push(d.get(h));return d.delete(),a}for(var p=e.domain,v=r-1,m=0;m<r;m++){var g=p[0]+m/v*(p[1]-p[0]);if(g!==p[0]&&g!==p[1]){var y=e.tangentAt(g),A=e.tangentAt(o.slice(-1)[0]),b=y[0]*y[0]+y[1]*y[1]+y[2]*y[2],x=A[0]*A[0]+A[1]*A[1]+A[2]*A[2],_=Math.sqrt(b*x),w=void 0;if(0===_)w=Math.PI/2;else{var S=(y.x*A.x+y.y*A.y+y.z*A.z)/_;w=Math.acos(Math.max(-1,Math.min(1,S)))}w<.1||o.push(g)}else o.push(g)}return a=o.map((function(t){return e.pointAt(t)})),a}onmessage=function(i){var a=i.data;switch(a.type){case"init":var o,s=a.libraryConfig.wasmBinary;e=new Promise((function(e){o={wasmBinary:s,onRuntimeInitialized:e},rhino3dm(o)})).then((function(){t=o}));break;case"decode":var l=a.buffer;e.then((function(){var e=function(e,t){for(var i=new Uint8Array(t),a=e.File3dm.fromByteArray(i),o=[],s=[],l=[],u=[],c=[],f=[],d=a.objects(),h=d.count,p=0;p<h;p++){var v=d.get(p),m=n(v,a);v.delete(),m&&o.push(m)}for(var g=0;g<a.instanceDefinitions().count();g++){var y=a.instanceDefinitions().get(g),A=r(y);A.objectIds=y.getObjectIds(),o.push({geometry:null,attributes:A,objectType:"InstanceDefinition"})}for(var b=[e.TextureType.Diffuse,e.TextureType.Bump,e.TextureType.Transparency,e.TextureType.Opacity,e.TextureType.Emap],x=[e.TextureType.PBR_BaseColor,e.TextureType.PBR_Subsurface,e.TextureType.PBR_SubsurfaceScattering,e.TextureType.PBR_SubsurfaceScatteringRadius,e.TextureType.PBR_Metallic,e.TextureType.PBR_Specular,e.TextureType.PBR_SpecularTint,e.TextureType.PBR_Roughness,e.TextureType.PBR_Anisotropic,e.TextureType.PBR_Anisotropic_Rotation,e.TextureType.PBR_Sheen,e.TextureType.PBR_SheenTint,e.TextureType.PBR_Clearcoat,e.TextureType.PBR_ClearcoatBump,e.TextureType.PBR_ClearcoatRoughness,e.TextureType.PBR_OpacityIor,e.TextureType.PBR_OpacityRoughness,e.TextureType.PBR_Emission,e.TextureType.PBR_AmbientOcclusion,e.TextureType.PBR_Displacement],_=0;_<a.materials().count();_++){for(var w=a.materials().get(_),S=w.physicallyBased(),E=r(w),C=[],T=0;T<b.length;T++){var M=w.getTexture(b[T]);if(M){var I=b[T].constructor.name,k={type:I=I.substring(12,I.length)},B=a.getEmbeddedFileAsBase64(M.fileName);B?k.image="data:image/png;base64,"+B:(console.warn("THREE.3DMLoader: Image for ".concat(I," texture not embedded in file.")),k.image=null),C.push(k),M.delete()}}if(E.textures=C,S.supported){console.log("pbr true");for(var R=0;R<x.length;R++){var P=w.getTexture(b[R]);if(P){var D=a.getEmbeddedFileAsBase64(P.fileName),L=b[R].constructor.name,N={type:L=L.substring(12,L.length),image:"data:image/png;base64,"+D};C.push(N),P.delete()}}var F=r(w.physicallyBased());E=Object.assign(F,E)}s.push(E),w.delete(),S.delete()}for(var O=0;O<a.layers().count();O++){var U=a.layers().get(O),z=r(U);l.push(z),U.delete()}for(var G=0;G<a.views().count();G++){var Q=a.views().get(G),Z=r(Q);u.push(Z),Q.delete()}for(var H=0;H<a.namedViews().count();H++){var j=a.namedViews().get(H),V=r(j);c.push(V),j.delete()}for(var W=0;W<a.groups().count();W++){var X=a.groups().get(W),Y=r(X);f.push(Y),X.delete()}var K=r(a.settings());return a.delete(),{objects:o,materials:s,layers:l,views:u,namedViews:c,groups:f,settings:K}}(t,l);self.postMessage({type:"decode",id:a.id,data:e})}))}}}var Ap=/^[og]\s*(.+)?/,bp=/^mtllib /,xp=/^usemtl /,_p=/^usemap /,wp=new A.Vector3,Sp=new A.Vector3,Ep=new A.Vector3,Cp=new A.Vector3,Tp=new A.Vector3;function Mp(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"===typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){var r=this.vertices,i=this.object.geometry.normals;wp.fromArray(r,e),Sp.fromArray(r,t),Ep.fromArray(r,n),Tp.subVectors(Ep,Sp),Cp.subVectors(wp,Sp),Tp.cross(Cp),Tp.normalize(),i.push(Tp.x,Tp.y,Tp.z),i.push(Tp.x,Tp.y,Tp.z),i.push(Tp.x,Tp.y,Tp.z)},addColor:function(e,t,n){var r=this.colors,i=this.object.geometry.colors;void 0!==r[e]&&i.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&i.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){var r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addDefaultUV:function(){var e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,i,a,o,s,l){var u=this.vertices.length,c=this.parseVertexIndex(e,u),f=this.parseVertexIndex(t,u),d=this.parseVertexIndex(n,u);if(this.addVertex(c,f,d),this.addColor(c,f,d),void 0!==o&&""!==o){var h=this.normals.length;c=this.parseNormalIndex(o,h),f=this.parseNormalIndex(s,h),d=this.parseNormalIndex(l,h),this.addNormal(c,f,d)}else this.addFaceNormal(c,f,d);if(void 0!==r&&""!==r){var p=this.uvs.length;c=this.parseUVIndex(r,p),f=this.parseUVIndex(i,p),d=this.parseUVIndex(a,p),this.addUV(c,f,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,r=e.length;n<r;n++){var i=this.parseVertexIndex(e[n],t);this.addVertexPoint(i),this.addColor(i)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,i=0,a=e.length;i<a;i++)this.addVertexLine(this.parseVertexIndex(e[i],n));for(var o=0,s=t.length;o<s;o++)this.addUVLine(this.parseUVIndex(t[o],r))}};return e.startObject("",!1),e}var Ip=null,kp=null,Bp=null,Rp=null,Pp=null;function Dp(e){var t=e.geometry,n=[];if(t&&void 0!==t.bones){for(var r=0,i=t.bones.length;r<i;r++){var a=t.bones[r],o=new Bone;n.push(o),o.name=a.name,o.position.fromArray(a.pos),o.quaternion.fromArray(a.rotq),void 0!==a.scl&&o.scale.fromArray(a.scl)}for(var s=0,l=t.bones.length;s<l;s++){var u=t.bones[s];-1!==u.parent&&null!==u.parent&&void 0!==n[u.parent]?n[u.parent].add(n[s]):e.add(n[s])}}return e.updateMatrixWorld(!0),n}var Lp=null,Np=null,Fp=null,Op=null,Up=null,zp=null,Gp=0,Qp=null,Zp=null,Hp=null,jp={"89d104cd-d012-426b-b5b3-bbaee63ac43c":"Bubbles","700f3aa8-9a7c-2384-8b8a-ea028905dd8c":"CelVinyl","0f0ff7b2-a677-45eb-a7d6-0cd7206f4816":"ChromaticWave","1161af82-50cf-47db-9706-0c3576d43c43":"CoarseBristles","79168f10-6961-464a-8be1-57ed364c5600":"CoarseBristlesSingleSided","1caa6d7d-f015-3f54-3a4b-8b5354d39f81":"Comet","c8313697-2563-47fc-832e-290f4c04b901":"DiamondHull","4391aaaa-df73-4396-9e33-31e4e4930b27":"Disco","d1d991f2-e7a0-4cf1-b328-f57e915e6260":"DotMarker","6a1cf9f9-032c-45ec-9b1d-a6680bee30f7":"Dots","0d3889f3-3ede-470c-8af4-f44813306126":"DoubleTaperedFlat","0d3889f3-3ede-470c-8af4-de4813306126":"DoubleTaperedMarker","d0262945-853c-4481-9cbd-88586bed93cb":"DuctTape","3ca16e2f-bdcd-4da2-8631-dcef342f40f1":"DuctTapeSingleSided","f6e85de3-6dcc-4e7f-87fd-cee8c3d25d51":"Electricity","02ffb866-7fb2-4d15-b761-1012cefb1360":"Embers","cb92b597-94ca-4255-b017-0e3f42f12f9e":"Fire","2d35bcf0-e4d8-452c-97b1-3311be063130":"Flat","55303bc4-c749-4a72-98d9-d23e68e76e18":"FlatDeprecated","280c0a7a-aad8-416c-a7d2-df63d129ca70":"FlatSingleSided","cf019139-d41c-4eb0-a1d0-5cf54b0a42f3":"Highlighter","6a1cf9f9-032c-45ec-9b6e-a6680bee32e9":"HyperGrid","dce872c2-7b49-4684-b59b-c45387949c5c":"Hypercolor","e8ef32b1-baa8-460a-9c2c-9cf8506794f5":"HypercolorSingleSided","2f212815-f4d3-c1a4-681a-feeaf9c6dc37":"Icing","f5c336cf-5108-4b40-ade9-c687504385ab":"Ink","c0012095-3ffd-4040-8ee1-fc180d346eaa":"InkSingleSided","4a76a27a-44d8-4bfe-9a8c-713749a499b0":"Leaves","ea19de07-d0c0-4484-9198-18489a3c1487":"LeavesSingleSided","2241cd32-8ba2-48a5-9ee7-2caef7e9ed62":"Light","4391aaaa-df81-4396-9e33-31e4e4930b27":"LightWire","d381e0f5-3def-4a0d-8853-31e9200bcbda":"Lofted","429ed64a-4e97-4466-84d3-145a861ef684":"Marker","79348357-432d-4746-8e29-0e25c112e3aa":"MatteHull","b2ffef01-eaaa-4ab5-aa64-95a2c4f5dbc6":"NeonPulse","f72ec0e7-a844-4e38-82e3-140c44772699":"OilPaint","c515dad7-4393-4681-81ad-162ef052241b":"OilPaintSingleSided","f1114e2e-eb8d-4fde-915a-6e653b54e9f5":"Paper","759f1ebd-20cd-4720-8d41-234e0da63716":"PaperSingleSided","e0abbc80-0f80-e854-4970-8924a0863dcc":"Petal","c33714d1-b2f9-412e-bd50-1884c9d46336":"Plasma","ad1ad437-76e2-450d-a23a-e17f8310b960":"Rainbow","faaa4d44-fcfb-4177-96be-753ac0421ba3":"ShinyHull","70d79cca-b159-4f35-990c-f02193947fe8":"Smoke","d902ed8b-d0d1-476c-a8de-878a79e3a34c":"Snow","accb32f5-4509-454f-93f8-1df3fd31df1b":"SoftHighlighter","cf7f0059-7aeb-53a4-2b67-c83d863a9ffa":"Spikes","8dc4a70c-d558-4efd-a5ed-d4e860f40dc3":"Splatter","7a1c8107-50c5-4b70-9a39-421576d6617e":"SplatterSingleSided","0eb4db27-3f82-408d-b5a1-19ebd7d5b711":"Stars","44bb800a-fbc3-4592-8426-94ecb05ddec3":"Streamers","0077f88c-d93a-42f3-b59b-b31c50cdb414":"Taffy","b468c1fb-f254-41ed-8ec9-57030bc5660c":"TaperedFlat","c8ccb53d-ae13-45ef-8afb-b730d81394eb":"TaperedFlatSingleSided","d90c6ad8-af0f-4b54-b422-e0f92abe1b3c":"TaperedMarker","1a26b8c0-8a07-4f8a-9fac-d2ef36e0cad0":"TaperedMarker_Flat","75b32cf0-fdd6-4d89-a64b-e2a00b247b0f":"ThickPaint","fdf0326a-c0d1-4fed-b101-9db0ff6d071f":"ThickPaintSingleSided","4391385a-df73-4396-9e33-31e4e4930b27":"Toon","a8fea537-da7c-4d4b-817f-24f074725d6d":"UnlitHull","d229d335-c334-495a-a801-660ac8a87360":"VelvetInk","10201aa3-ebc2-42d8-84b7-2e63f6eeb8ab":"Waveform","b67c0e81-ce6d-40a8-aeb0-ef036b081aa3":"WetPaint","dea67637-cd1a-27e4-c9b1-52f4bbcb84e5":"WetPaintSingleSided","5347acf0-a8e2-47b6-8346-30c70719d763":"WigglyGraphite","e814fef1-97fd-7194-4a2f-50c2bb918be2":"WigglyGraphiteSingleSided","4391385a-cf83-4396-9e33-31e4e4930b27":"Wire"},Vp={colors:{BloomColor:"\n\t\t\tvec3 BloomColor(vec3 color, float gain) {\n\t\t\t\t// Guarantee that there's at least a little bit of all 3 channels.\n\t\t\t\t// This makes fully-saturated strokes (which only have 2 non-zero\n\t\t\t\t// color channels) eventually clip to white rather than to a secondary.\n\t\t\t\tfloat cmin = length(color.rgb) * .05;\n\t\t\t\tcolor.rgb = max(color.rgb, vec3(cmin, cmin, cmin));\n\t\t\t\t// If we try to remove this pow() from .a, it brightens up\n\t\t\t\t// pressure-sensitive strokes; looks better as-is.\n\t\t\t\tcolor = pow(color, vec3(2.2));\n\t\t\t\tcolor.rgb *= 2. * exp(gain * 10.);\n\t\t\t\treturn color;\n\t\t\t}\n\t\t",LinearToSrgb:"\n\t\t\tvec3 LinearToSrgb(vec3 color) {\n\t\t\t\t// Approximation http://chilliant.blogspot.com/2012/08/srgb-approximations-for-hlsl.html\n\t\t\t\tvec3 linearColor = color.rgb;\n\t\t\t\tvec3 S1 = sqrt(linearColor);\n\t\t\t\tvec3 S2 = sqrt(S1);\n\t\t\t\tvec3 S3 = sqrt(S2);\n\t\t\t\tcolor.rgb = 0.662002687 * S1 + 0.684122060 * S2 - 0.323583601 * S3 - 0.0225411470 * linearColor;\n\t\t\t\treturn color;\n\t\t\t}\n\t\t",hsv:"\n\t\t\t// uniform sampler2D lookupTex;\n\t\t\tvec4 lookup(vec4 textureColor) {\n\t\t\t\treturn textureColor;\n\t\t\t}\n\n\t\t\tvec3 lookup(vec3 textureColor) {\n\t\t\t\treturn textureColor;\n\t\t\t}\n\n\t\t\tvec3 hsv2rgb( vec3 hsv ) {\n\t\t\t\tvec3 rgb = clamp( abs(mod(hsv.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n\t\t\t\treturn hsv.z * mix( vec3(1.0), rgb, hsv.y);\n\t\t\t}\n\n\t\t\tvec3 rgb2hsv( vec3 rgb ) {\n\t\t\t\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\t\t\t\tvec4 p = mix(vec4(rgb.bg, K.wz), vec4(rgb.gb, K.xy), step(rgb.b, rgb.g));\n\t\t\t\tvec4 q = mix(vec4(p.xyw, rgb.r), vec4(rgb.r, p.yzx), step(p.x, rgb.r));\n\n\t\t\t\tfloat d = q.x - min(q.w, q.y);\n\t\t\t\tfloat e = 1.0e-10;\n\n\t\t\t\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n\t\t\t}\n\t\t",SrgbToLinear:"\n\t\t\tvec3 SrgbToLinear(vec3 color) {\n\t\t\t\t// Approximation http://chilliant.blogspot.com/2012/08/srgb-approximations-for-hlsl.html\n\t\t\t\tvec3 sRGB = color.rgb;\n\t\t\t\tcolor.rgb = sRGB * (sRGB * (sRGB * 0.305306011 + 0.682171111) + 0.012522878);\n\t\t\t\treturn color;\n\t\t\t}\n\t\t"}},Wp=function(){return{Light:{uniforms:{mainTex:{value:(new TextureLoader).setPath("./textures/tiltbrush/").loader.load("Light.webp")},alphaTest:{value:.067},emission_gain:{value:.45},alpha:{value:1}},vertexShader:"\n\t\t\tprecision highp float;\n\t\t\tprecision highp int;\n\n\t\t\tattribute vec2 uv;\n\t\t\tattribute vec4 color;\n\t\t\tattribute vec3 position;\n\n\t\t\tuniform mat4 modelMatrix;\n\t\t\tuniform mat4 modelViewMatrix;\n\t\t\tuniform mat4 projectionMatrix;\n\t\t\tuniform mat4 viewMatrix;\n\t\t\tuniform mat3 normalMatrix;\n\t\t\tuniform vec3 cameraPosition;\n\n\t\t\tvarying vec2 vUv;\n\t\t\tvarying vec3 vColor;\n\n\t\t\t".concat(Vp.colors.LinearToSrgb,"\n\t\t\t").concat(Vp.colors.hsv,"\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\n\t\t\t\tvColor = lookup(color.rgb);\n\n\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t}\n\t\t"),fragmentShader:"\n\t\t\tprecision highp float;\n\t\t\tprecision highp int;\n\n\t\t\tuniform float emission_gain;\n\n\t\t\tuniform sampler2D mainTex;\n\t\t\tuniform float alphaTest;\n\n\t\t\tvarying vec2 vUv;\n\t\t\tvarying vec3 vColor;\n\n\t\t\t".concat(Vp.colors.BloomColor,"\n\t\t\t").concat(Vp.colors.SrgbToLinear,"\n\n\t\t\tvoid main(){\n\t\t\t\tvec4 col = texture2D(mainTex, vUv);\n\t\t\t\tvec3 color = vColor;\n\t\t\t\tcolor = BloomColor(color, emission_gain);\n\t\t\t\tcolor = color * col.rgb;\n\t\t\t\tcolor = color * col.a;\n\t\t\t\tcolor = SrgbToLinear(color);\n\t\t\t\tgl_FragColor = vec4(color, 1.0);\n\t\t\t}\n\t\t"),side:2,transparent:!0,depthFunc:2,depthWrite:!0,depthTest:!1,blending:5,blendDst:201,blendDstAlpha:201,blendEquation:100,blendEquationAlpha:100,blendSrc:201,blendSrcAlpha:201}}};function Xp(e){return"Light"===jp[e]?new RawShaderMaterial(Wp().Light):new MeshBasicMaterial({vertexColors:!0,side:DoubleSide})}var Yp=new WeakMap,Kp=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e)).decoderPath="",r.decoderConfig={},r.decoderBinary=null,r.decoderPending=null,r.workerLimit=4,r.workerPool=[],r.workerNextTaskID=1,r.workerSourceURL="",r.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},r.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},r}return(0,m.Z)(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,r){var i=this,a=new A.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){var n={attributeIDs:i.defaultAttributeIDs,attributeTypes:i.defaultAttributeTypes,useUniqueIDs:!1};i.decodeGeometry(e,n).then(t).catch(r)}),n,r)}},{key:"decodeDracoFile",value:function(e,t,n,r){var i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}},{key:"decodeGeometry",value:function(e,t){var n=this;for(var r in t.attributeTypes){var i=t.attributeTypes[r];void 0!==i.BYTES_PER_ELEMENT&&(t.attributeTypes[r]=i.name)}var a,o=JSON.stringify(t);if(Yp.has(e)){var s=Yp.get(e);if(s.key===o)return s.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var l=this.workerNextTaskID++,u=e.byteLength,c=this._getWorker(l,u).then((function(n){return a=n,new Promise((function(n,r){a._callbacks[l]={resolve:n,reject:r},a.postMessage({type:"decode",id:l,taskConfig:t,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return c.catch((function(){return!0})).then((function(){a&&l&&n._releaseTask(a,l)})),Yp.set(e,{key:o,promise:c}),c}},{key:"_createGeometry",value:function(e){var t=new A.BufferGeometry;e.index&&t.setIndex(new A.BufferAttribute(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],i=r.name,a=r.array,o=r.itemSize;t.setAttribute(i,new A.BufferAttribute(a,o))}return t}},{key:"_loadLibrary",value:function(e,t){var n=new A.FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,r){n.load(e,t,void 0,r)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var r=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var i=Jp.toString(),a=["/* draco decoder */",r,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var r=new Worker(n.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:n.decoderConfig}),r.onmessage=function(e){var t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(r)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var i=n.workerPool[n.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}(A.Loader);function Jp(){var e,t;function n(e,t,n,r,i,a){var o=a.num_components(),s=n.num_points()*o,l=s*i.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,a,u,l,c);var f=new i(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:r,array:f,itemSize:o}}onmessage=function(r){var i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var a=i.buffer,o=i.taskConfig;t.then((function(e){var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(a),a.byteLength);try{var l=function(e,t,r,i){var a,o,s=i.attributeIDs,l=i.attributeTypes,u=t.GetEncodedGeometryType(r);if(u===e.TRIANGULAR_MESH)a=new e.Mesh,o=t.DecodeBufferToMesh(r,a);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,o=t.DecodeBufferToPointCloud(r,a)}if(!o.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());var c={index:null,attributes:[]};for(var f in s){var d=self[l[f]],h=void 0,p=void 0;if(i.useUniqueIDs)p=s[f],h=t.GetAttributeByUniqueId(a,p);else{if(-1===(p=t.GetAttributeId(a,e[s[f]])))continue;h=t.GetAttribute(a,p)}c.attributes.push(n(e,t,a,f,d,h))}u===e.TRIANGULAR_MESH&&(c.index=function(e,t,n){var r=n.num_faces(),i=3*r,a=4*i,o=e._malloc(a);t.GetTrianglesUInt32Array(n,a,o);var s=new Uint32Array(e.HEAPF32.buffer,o,i).slice();return e._free(o),{array:s,itemSize:1}}(e,t,a));return e.destroy(a),c}(t,r,s,o),u=l.attributes.map((function(e){return e.array.buffer}));l.index&&u.push(l.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:l},u)}catch(c){console.error(c),self.postMessage({type:"error",id:i.id,error:c.message})}finally{t.destroy(s),t.destroy(r)}}))}}}var qp=null,$p=null,ev=null;function tv(){if(null===ev){var e=new ArrayBuffer(2),t=new Uint8Array(e),n=new Uint16Array(e);t[0]=170,t[1]=187,ev=43707===n[0]}return ev}var nv=[null,Float32Array,null,Int8Array,Int16Array,null,Int32Array,Uint8Array,Uint16Array,null,Uint32Array],rv={Uint16Array:"getUint16",Uint32Array:"getUint32",Int16Array:"getInt16",Int32Array:"getInt32",Float32Array:"getFloat32",Float64Array:"getFloat64"};function iv(e,t,n,r,i){var a,o=t.BYTES_PER_ELEMENT;if(i===tv()||1===o)a=new t(e,n,r);else{var s=new DataView(e,n,r*o),l=rv[t.name],u=!i;a=new t(r);for(var c=0;c<r;c++)a[c]=s[l](c*o,u)}return a}function av(e){var t=new Uint8Array(e),n=t[0],r=t[1],i=!!(r>>7&1),a=r>>6&1,o=1===(r>>5&1),s=31&r,l=0,u=0;if(o?(l=(t[2]<<16)+(t[3]<<8)+t[4],u=(t[5]<<16)+(t[6]<<8)+t[7]):(l=t[2]+(t[3]<<8)+(t[4]<<16),u=t[5]+(t[6]<<8)+(t[7]<<16)),0===n)throw new Error("PRWM decoder: Invalid format version: 0");if(1!==n)throw new Error("PRWM decoder: Unsupported format version: "+n);if(!i){if(0!==a)throw new Error("PRWM decoder: Indices type must be set to 0 for non-indexed geometries");if(0!==u)throw new Error("PRWM decoder: Number of indices must be set to 0 for non-indexed geometries")}for(var c=8,f={},d=0;d<s;d++){for(var h="";c<t.length;){var p=t[c];if(c++,0===p)break;h+=String.fromCharCode(p)}var v=(r=t[c])>>7&1,m=1+(r>>4&3),g=nv[15&r];c++;var y=iv(e,g,c=4*Math.ceil(c/4),m*l,o);c+=g.BYTES_PER_ELEMENT*m*l,f[h]={type:v,cardinality:m,values:y}}c=4*Math.ceil(c/4);var A=null;return i&&(A=iv(e,1===a?Uint32Array:Uint16Array,c,u,o)),{version:n,attributes:f,indices:A}}var ov=null,sv;function lv(){if(sv)return sv;(sv={}).toRGBA8=function(e){var t=e.width,n=e.height;if(null==e.tabs.acTL)return[sv.toRGBA8.decodeImage(e.data,t,n,e).buffer];var r=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var i=t*n*4,a=new Uint8Array(i),o=new Uint8Array(i),s=new Uint8Array(i),l=0;l<e.frames.length;l++){var u=e.frames[l],c=u.rect.x,f=u.rect.y,d=u.rect.width,h=u.rect.height,p=sv.toRGBA8.decodeImage(u.data,d,h,e);if(0!=l)for(var v=0;v<i;v++)s[v]=a[v];if(0==u.blend?sv._copyTile(p,d,h,a,t,n,c,f,0):1==u.blend&&sv._copyTile(p,d,h,a,t,n,c,f,1),r.push(a.buffer.slice(0)),1==u.dispose)sv._copyTile(o,d,h,a,t,n,c,f,0);else if(2==u.dispose)for(v=0;v<i;v++)a[v]=s[v]}return r},sv.toRGBA8.decodeImage=function(e,t,n,r){var i=t*n,a=sv.decode._getBPP(r),o=Math.ceil(t*a/8),s=new Uint8Array(4*i),l=new Uint32Array(s.buffer),u=r.ctype,c=r.depth,f=sv._bin.readUshort;if(6==u){var d=i<<2;if(8==c)for(var h=0;h<d;h+=4)s[h]=e[h],s[h+1]=e[h+1],s[h+2]=e[h+2],s[h+3]=e[h+3];if(16==c)for(h=0;h<d;h++)s[h]=e[h<<1]}else if(2==u){var p=r.tabs.tRNS;if(null==p){if(8==c)for(h=0;h<i;h++){var v=3*h;l[h]=255<<24|e[v+2]<<16|e[v+1]<<8|e[v]}if(16==c)for(h=0;h<i;h++){v=6*h;l[h]=255<<24|e[v+4]<<16|e[v+2]<<8|e[v]}}else{var m=p[0],g=p[1],y=p[2];if(8==c)for(h=0;h<i;h++){var A=h<<2;v=3*h;l[h]=255<<24|e[v+2]<<16|e[v+1]<<8|e[v],e[v]==m&&e[v+1]==g&&e[v+2]==y&&(s[A+3]=0)}if(16==c)for(h=0;h<i;h++){A=h<<2,v=6*h;l[h]=255<<24|e[v+4]<<16|e[v+2]<<8|e[v],f(e,v)==m&&f(e,v+2)==g&&f(e,v+4)==y&&(s[A+3]=0)}}}else if(3==u){var b=r.tabs.PLTE,x=r.tabs.tRNS,_=x?x.length:0;if(1==c)for(var w=0;w<n;w++){var S=w*o,E=w*t;for(h=0;h<t;h++){A=E+h<<2;var C=3*(T=e[S+(h>>3)]>>7-((7&h)<<0)&1);s[A]=b[C],s[A+1]=b[C+1],s[A+2]=b[C+2],s[A+3]=T<_?x[T]:255}}if(2==c)for(w=0;w<n;w++)for(S=w*o,E=w*t,h=0;h<t;h++){A=E+h<<2,C=3*(T=e[S+(h>>2)]>>6-((3&h)<<1)&3);s[A]=b[C],s[A+1]=b[C+1],s[A+2]=b[C+2],s[A+3]=T<_?x[T]:255}if(4==c)for(w=0;w<n;w++)for(S=w*o,E=w*t,h=0;h<t;h++){A=E+h<<2,C=3*(T=e[S+(h>>1)]>>4-((1&h)<<2)&15);s[A]=b[C],s[A+1]=b[C+1],s[A+2]=b[C+2],s[A+3]=T<_?x[T]:255}if(8==c)for(h=0;h<i;h++){var T;A=h<<2,C=3*(T=e[h]);s[A]=b[C],s[A+1]=b[C+1],s[A+2]=b[C+2],s[A+3]=T<_?x[T]:255}}else if(4==u){if(8==c)for(h=0;h<i;h++){A=h<<2;var M=e[I=h<<1];s[A]=M,s[A+1]=M,s[A+2]=M,s[A+3]=e[I+1]}if(16==c)for(h=0;h<i;h++){var I;A=h<<2,M=e[I=h<<2];s[A]=M,s[A+1]=M,s[A+2]=M,s[A+3]=e[I+2]}}else if(0==u)for(m=r.tabs.tRNS?r.tabs.tRNS:-1,w=0;w<n;w++){var k=w*o,B=w*t;if(1==c)for(var R=0;R<t;R++){var P=(M=255*(e[k+(R>>>3)]>>>7-(7&R)&1))==255*m?0:255;l[B+R]=P<<24|M<<16|M<<8|M}else if(2==c)for(R=0;R<t;R++){P=(M=85*(e[k+(R>>>2)]>>>6-((3&R)<<1)&3))==85*m?0:255;l[B+R]=P<<24|M<<16|M<<8|M}else if(4==c)for(R=0;R<t;R++){P=(M=17*(e[k+(R>>>1)]>>>4-((1&R)<<2)&15))==17*m?0:255;l[B+R]=P<<24|M<<16|M<<8|M}else if(8==c)for(R=0;R<t;R++){P=(M=e[k+R])==m?0:255;l[B+R]=P<<24|M<<16|M<<8|M}else if(16==c)for(R=0;R<t;R++){M=e[k+(R<<1)],P=f(e,k+(R<<1))==m?0:255;l[B+R]=P<<24|M<<16|M<<8|M}}return s},sv.decode=function(e){for(var t,n,r,i,a=new Uint8Array(e),o=8,s=sv._bin,l=s.readUshort,u=s.readUint,c={tabs:{},frames:[]},f=new Uint8Array(a.length),d=0,h=0,p=[137,80,78,71,13,10,26,10],v=0;v<8;v++)if(a[v]!=p[v])throw new Error("The input is not a PNG file!");for(;o<a.length;){var m=s.readUint(a,o);o+=4;var g=s.readASCII(a,o,4);if(o+=4,"IHDR"==g)sv.decode._IHDR(a,o,c);else if("CgBI"==g)c.tabs[g]=a.slice(o,o+4);else if("IDAT"==g){for(v=0;v<m;v++)f[d+v]=a[o+v];d+=m}else if("acTL"==g)c.tabs[g]={num_frames:u(a,o),num_plays:u(a,o+4)},t=new Uint8Array(a.length);else if("fcTL"==g){var y;if(0!=h)(y=c.frames[c.frames.length-1]).data=sv.decode._decompress(c,t.slice(0,h),y.rect.width,y.rect.height),h=0;var A={x:u(a,o+12),y:u(a,o+16),width:u(a,o+4),height:u(a,o+8)},b=l(a,o+22);b=l(a,o+20)/(0==b?100:b);var x={rect:A,delay:Math.round(1e3*b),dispose:a[o+24],blend:a[o+25]};c.frames.push(x)}else if("fdAT"==g){for(v=0;v<m-4;v++)t[h+v]=a[o+v+4];h+=m-4}else if("pHYs"==g)c.tabs[g]=[s.readUint(a,o),s.readUint(a,o+4),a[o+8]];else if("cHRM"==g){c.tabs[g]=[];for(v=0;v<8;v++)c.tabs[g].push(s.readUint(a,o+4*v))}else if("tEXt"==g||"zTXt"==g){null==c.tabs[g]&&(c.tabs[g]={});var _=s.nextZero(a,o);r=s.readASCII(a,o,_-o);var w=o+m-_-1;"tEXt"==g?n=s.readASCII(a,_+1,w):(i=sv.decode._inflate(a.slice(_+2,_+2+w)),n=s.readUTF8(i,0,i.length)),c.tabs[g][r]=n}else if("iTXt"==g){null==c.tabs[g]&&(c.tabs[g]={});_=0;var S=o;_=s.nextZero(a,S),r=s.readASCII(a,S,_-S);var E=a[S=_+1];S+=2,_=s.nextZero(a,S),s.readASCII(a,S,_-S),S=_+1,_=s.nextZero(a,S),s.readUTF8(a,S,_-S);w=m-((S=_+1)-o);0==E?n=s.readUTF8(a,S,w):(i=sv.decode._inflate(a.slice(S,S+w)),n=s.readUTF8(i,0,i.length)),c.tabs[g][r]=n}else if("PLTE"==g)c.tabs[g]=s.readBytes(a,o,m);else if("hIST"==g){var C=c.tabs.PLTE.length/3;c.tabs[g]=[];for(v=0;v<C;v++)c.tabs[g].push(l(a,o+2*v))}else if("tRNS"==g)3==c.ctype?c.tabs[g]=s.readBytes(a,o,m):0==c.ctype?c.tabs[g]=l(a,o):2==c.ctype&&(c.tabs[g]=[l(a,o),l(a,o+2),l(a,o+4)]);else if("gAMA"==g)c.tabs[g]=s.readUint(a,o)/1e5;else if("sRGB"==g)c.tabs[g]=a[o];else if("bKGD"==g)0==c.ctype||4==c.ctype?c.tabs[g]=[l(a,o)]:2==c.ctype||6==c.ctype?c.tabs[g]=[l(a,o),l(a,o+2),l(a,o+4)]:3==c.ctype&&(c.tabs[g]=a[o]);else if("IEND"==g)break;o+=m,s.readUint(a,o),o+=4}0!=h&&((y=c.frames[c.frames.length-1]).data=sv.decode._decompress(c,t.slice(0,h),y.rect.width,y.rect.height));return c.data=sv.decode._decompress(c,f,c.width,c.height),delete c.compress,delete c.interlace,delete c.filter,c},sv.decode._decompress=function(e,t,n,r){var i=sv.decode._getBPP(e),a=Math.ceil(n*i/8),o=new Uint8Array((a+1+e.interlace)*r);return t=e.tabs.CgBI?sv.inflateRaw(t,o):sv.decode._inflate(t,o),0==e.interlace?t=sv.decode._filterZero(t,e,0,n,r):1==e.interlace&&(t=sv.decode._readInterlace(t,e)),t},sv.decode._inflate=function(e,t){return sv.inflateRaw(new Uint8Array(e.buffer,2,e.length-6),t)},sv.inflateRaw=function(){var e={H:{}};return e.H.N=function(t,n){var r,i,a=Uint8Array,o=0,s=0,l=0,u=0,c=0,f=0,d=0,h=0,p=0;if(3==t[0]&&0==t[1])return n||new a(0);var v=e.H,m=v.b,g=v.e,y=v.R,A=v.n,b=v.A,x=v.Z,_=v.m,w=null==n;for(w&&(n=new a(t.length>>>2<<5));0==o;)if(o=m(t,p,1),s=m(t,p+1,2),p+=3,0!=s){if(w&&(n=e.H.W(n,h+(1<<17))),1==s&&(r=_.J,i=_.h,f=511,d=31),2==s){l=g(t,p,5)+257,u=g(t,p+5,5)+1,c=g(t,p+10,4)+4,p+=14;for(var S=1,E=0;E<38;E+=2)_.Q[E]=0,_.Q[E+1]=0;for(E=0;E<c;E++){var C=g(t,p+3*E,3);_.Q[1+(_.X[E]<<1)]=C,C>S&&(S=C)}p+=3*c,A(_.Q,S),b(_.Q,S,_.u),r=_.w,i=_.d,p=y(_.u,(1<<S)-1,l+u,t,p,_.v);var T=v.V(_.v,0,l,_.C);f=(1<<T)-1;var M=v.V(_.v,l,u,_.D);d=(1<<M)-1,A(_.C,T),b(_.C,T,r),A(_.D,M),b(_.D,M,i)}for(;;){var I=r[x(t,p)&f];p+=15&I;var k=I>>>4;if(k>>>8==0)n[h++]=k;else{if(256==k)break;var B=h+k-254;if(k>264){var R=_.q[k-257];B=h+(R>>>3)+g(t,p,7&R),p+=7&R}var P=i[x(t,p)&d];p+=15&P;var D=P>>>4,L=_.c[D],N=(L>>>4)+m(t,p,15&L);for(p+=15&L;h<B;)n[h]=n[h++-N],n[h]=n[h++-N],n[h]=n[h++-N],n[h]=n[h++-N];h=B}}}else{0!=(7&p)&&(p+=8-(7&p));var F=4+(p>>>3),O=t[F-4]|t[F-3]<<8;w&&(n=e.H.W(n,h+O)),n.set(new a(t.buffer,t.byteOffset+F,O),h),p=F+O<<3,h+=O}return n.length==h?n:n.slice(0,h)},e.H.W=function(e,t){var n=e.length;if(t<=n)return e;var r=new Uint8Array(n<<1);return r.set(e,0),r},e.H.R=function(t,n,r,i,a,o){for(var s=e.H.e,l=e.H.Z,u=0;u<r;){var c=t[l(i,a)&n];a+=15&c;var f=c>>>4;if(f<=15)o[u]=f,u++;else{var d=0,h=0;16==f?(h=3+s(i,a,2),a+=2,d=o[u-1]):17==f?(h=3+s(i,a,3),a+=3):18==f&&(h=11+s(i,a,7),a+=7);for(var p=u+h;u<p;)o[u]=d,u++}}return a},e.H.V=function(e,t,n,r){for(var i=0,a=0,o=r.length>>>1;a<n;){var s=e[a+t];r[a<<1]=0,r[1+(a<<1)]=s,s>i&&(i=s),a++}for(;a<o;)r[a<<1]=0,r[1+(a<<1)]=0,a++;return i},e.H.n=function(t,n){for(var r,i,a,o,s=e.H.m,l=t.length,u=s.j,c=0;c<=n;c++)u[c]=0;for(c=1;c<l;c+=2)u[t[c]]++;var f=s.K;for(r=0,u[0]=0,i=1;i<=n;i++)r=r+u[i-1]<<1,f[i]=r;for(a=0;a<l;a+=2)0!=(o=t[a+1])&&(t[a]=f[o],f[o]++)},e.H.A=function(t,n,r){for(var i=t.length,a=e.H.m.r,o=0;o<i;o+=2)if(0!=t[o+1])for(var s=o>>1,l=t[o+1],u=s<<4|l,c=n-l,f=t[o]<<c,d=f+(1<<c);f!=d;){r[a[f]>>>15-n]=u,f++}},e.H.l=function(t,n){for(var r=e.H.m.r,i=15-n,a=0;a<t.length;a+=2){var o=t[a]<<n-t[a+1];t[a]=r[o]>>>i}},e.H.M=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8},e.H.I=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},e.H.e=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},e.H.b=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},e.H.Z=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},e.H.i=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},e.H.m=function(){var e=Uint16Array,t=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new t(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new t(286),Y:new t(30),a:new t(19),t:new t(15e3),k:new e(65536),g:new e(32768)}}(),function(){for(var t=e.H.m,n=0;n<32768;n++){var r=n;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,t.r[n]=(r>>>16|r<<16)>>>17}function i(e,t,n){for(;0!=t--;)e.push(0,n)}for(n=0;n<32;n++)t.q[n]=t.S[n]<<3|t.T[n],t.c[n]=t.p[n]<<4|t.z[n];i(t._,144,8),i(t._,112,9),i(t._,24,7),i(t._,8,8),e.H.n(t._,9),e.H.A(t._,9,t.J),e.H.l(t._,9),i(t.$,32,5),e.H.n(t.$,5),e.H.A(t.$,5,t.h),e.H.l(t.$,5),i(t.Q,19,0),i(t.C,286,0),i(t.D,30,0),i(t.v,320,0)}(),e.H.N}(),sv.decode._readInterlace=function(e,t){for(var n=t.width,r=t.height,i=sv.decode._getBPP(t),a=i>>3,o=Math.ceil(n*i/8),s=new Uint8Array(r*o),l=0,u=[0,0,4,0,2,0,1],c=[0,4,0,2,0,1,0],f=[8,8,8,4,4,2,2],d=[8,8,4,4,2,2,1],h=0;h<7;){for(var p=f[h],v=d[h],m=0,g=0,y=u[h];y<r;)y+=p,g++;for(var A=c[h];A<n;)A+=v,m++;var b=Math.ceil(m*i/8);sv.decode._filterZero(e,t,l,m,g);for(var x,_=0,w=u[h];w<r;){for(var S=c[h],E=l+_*b<<3;S<n;){if(1==i&&(x=(x=e[E>>3])>>7-(7&E)&1,s[w*o+(S>>3)]|=x<<7-((7&S)<<0)),2==i&&(x=(x=e[E>>3])>>6-(7&E)&3,s[w*o+(S>>2)]|=x<<6-((3&S)<<1)),4==i&&(x=(x=e[E>>3])>>4-(7&E)&15,s[w*o+(S>>1)]|=x<<4-((1&S)<<2)),i>=8)for(var C=w*o+S*a,T=0;T<a;T++)s[C+T]=e[(E>>3)+T];E+=i,S+=v}_++,w+=p}m*g!=0&&(l+=g*(1+b)),h+=1}return s},sv.decode._getBPP=function(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth},sv.decode._filterZero=function(e,t,n,r,i){var a=sv.decode._getBPP(t),o=Math.ceil(r*a/8),s=sv.decode._paeth;a=Math.ceil(a/8);var l,u,c=e[n],f=0;if(c>1&&(e[n]=[0,0,1][c-2]),3==c)for(f=a;f<o;f++)e[f+1]=e[f+1]+(e[f+1-a]>>>1)&255;for(var d=0;d<i;d++)if(f=0,0==(c=e[(u=(l=n+d*o)+d+1)-1]))for(;f<o;f++)e[l+f]=e[u+f];else if(1==c){for(;f<a;f++)e[l+f]=e[u+f];for(;f<o;f++)e[l+f]=e[u+f]+e[l+f-a]}else if(2==c)for(;f<o;f++)e[l+f]=e[u+f]+e[l+f-o];else if(3==c){for(;f<a;f++)e[l+f]=e[u+f]+(e[l+f-o]>>>1);for(;f<o;f++)e[l+f]=e[u+f]+(e[l+f-o]+e[l+f-a]>>>1)}else{for(;f<a;f++)e[l+f]=e[u+f]+s(0,e[l+f-o],0);for(;f<o;f++)e[l+f]=e[u+f]+s(e[l+f-a],e[l+f-o],e[l+f-a-o])}return e},sv.decode._paeth=function(e,t,n){var r=e+t-n,i=r-e,a=r-t,o=r-n;return i*i<=a*a&&i*i<=o*o?e:a*a<=o*o?t:n},sv.decode._IHDR=function(e,t,n){var r=sv._bin;n.width=r.readUint(e,t),t+=4,n.height=r.readUint(e,t),t+=4,n.depth=e[t],t++,n.ctype=e[t],t++,n.compress=e[t],t++,n.filter=e[t],t++,n.interlace=e[t],t++},sv._bin={nextZero:function(e,t){for(;0!=e[t];)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},writeUshort:function(e,t,n){e[t]=n>>8&255,e[t+1]=255&n},readUint:function(e,t){return 16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3])},writeUint:function(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,n){for(var r,i="",a=0;a<n;a++)i+="%"+sv._bin.pad(e[t+a].toString(16));try{r=decodeURIComponent(i)}catch(o){return sv._bin.readASCII(e,t,n)}return r}},sv._copyTile=function(e,t,n,r,i,a,o,s,l){for(var u=Math.min(t,i),c=Math.min(n,a),f=0,d=0,h=0;h<c;h++)for(var p=0;p<u;p++)if(o>=0&&s>=0?(f=h*t+p<<2,d=(s+h)*i+o+p<<2):(f=(-s+h)*t-o+p<<2,d=h*i+p<<2),0==l)r[d]=e[f],r[d+1]=e[f+1],r[d+2]=e[f+2],r[d+3]=e[f+3];else if(1==l){var v=e[f+3]*(1/255),m=e[f]*v,g=e[f+1]*v,y=e[f+2]*v,A=r[d+3]*(1/255),b=r[d]*A,x=r[d+1]*A,_=r[d+2]*A,w=1-v,S=v+A*w,E=0==S?0:1/S;r[d+3]=255*S,r[d+0]=(m+b*w)*E,r[d+1]=(g+x*w)*E,r[d+2]=(y+_*w)*E}else if(2==l){v=e[f+3],m=e[f],g=e[f+1],y=e[f+2],A=r[d+3],b=r[d],x=r[d+1],_=r[d+2];v==A&&m==b&&g==x&&y==_?(r[d]=0,r[d+1]=0,r[d+2]=0,r[d+3]=0):(r[d]=m,r[d+1]=g,r[d+2]=y,r[d+3]=v)}else if(3==l){v=e[f+3],m=e[f],g=e[f+1],y=e[f+2],A=r[d+3],b=r[d],x=r[d+1],_=r[d+2];if(v==A&&m==b&&g==x&&y==_)continue;if(v<220&&A>20)return!1}return!0}}var uv=null,cv=null,fv=null,dv=null,hv=null,pv=null,vv=null,mv=null,gv=null,yv=null,Av;function bv(e){return e%2}function xv(e){return e.length+1+(bv(e.length+1)?1:0)}function _v(e,t,n){console.log((new TextDecoder).decode(new Uint8Array(e,t,n)))}var wv=null,Sv=null,Ev=null,Cv=null;function Tv(e,t){var n=e.indexOf(t);return-1===n?"./":e.substr(0,n)}var Mv=null,Iv=new A.Box3,kv=new A.Vector3,Bv=null,Rv=null,Pv=null,Dv=new A.Vector3,Lv=new A.Vector3,Nv=null,Fv=null,Ov=new A.Vector3,Uv=new A.Vector3,zv=new A.Vector4,Gv=new A.Vector4,Qv=new A.Vector4,Zv=new A.Vector3,Hv=new A.Matrix4,jv=new A.Line3,Vv=new A.Vector3,Wv=new A.Box3,Xv=new A.Sphere,Yv=new A.Vector4,Kv,Jv,qv,$v;function em(e,t,n){return Yv.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),Yv.multiplyScalar(1/Yv.w),Yv.x=$v/n.width,Yv.y=$v/n.height,Yv.applyMatrix4(e.projectionMatrixInverse),Yv.multiplyScalar(1/Yv.w),Math.abs(Math.max(Yv.x,Yv.y))}function tm(e,t){for(var n=0,r=Jv.count;n<r;n++){jv.start.fromBufferAttribute(Jv,n),jv.end.fromBufferAttribute(qv,n);var i=new Vector3,a=new Vector3;Kv.distanceSqToSegment(jv.start,jv.end,a,i),a.distanceTo(i)<.5*$v&&t.push({point:a,pointOnLine:i,distance:Kv.origin.distanceTo(a),object:e,face:null,faceIndex:n,uv:null,uv2:null})}}function nm(e,t,n){var r=t.projectionMatrix,i=e.material.resolution,a=e.matrixWorld,o=e.geometry,s=o.attributes.instanceStart,l=o.attributes.instanceEnd,u=-t.near;Kv.at(1,Qv),Qv.w=1,Qv.applyMatrix4(t.matrixWorldInverse),Qv.applyMatrix4(r),Qv.multiplyScalar(1/Qv.w),Qv.x*=i.x/2,Qv.y*=i.y/2,Qv.z=0,Zv.copy(Qv),Hv.multiplyMatrices(t.matrixWorldInverse,a);for(var c=0,f=s.count;c<f;c++){if(zv.fromBufferAttribute(s,c),Gv.fromBufferAttribute(l,c),zv.w=1,Gv.w=1,zv.applyMatrix4(Hv),Gv.applyMatrix4(Hv),!(zv.z>u&&Gv.z>u)){if(zv.z>u){var d=zv.z-Gv.z,h=(zv.z-u)/d;zv.lerp(Gv,h)}else if(Gv.z>u){var p=Gv.z-zv.z,v=(Gv.z-u)/p;Gv.lerp(zv,v)}zv.applyMatrix4(r),Gv.applyMatrix4(r),zv.multiplyScalar(1/zv.w),Gv.multiplyScalar(1/Gv.w),zv.x*=i.x/2,zv.y*=i.y/2,Gv.x*=i.x/2,Gv.y*=i.y/2,jv.start.copy(zv),jv.start.z=0,jv.end.copy(Gv),jv.end.z=0;var m=jv.closestPointToPointParameter(Zv,!0);jv.at(m,Vv);var g=MathUtils.lerp(zv.z,Gv.z,m),y=g>=-1&&g<=1,A=Zv.distanceTo(Vv)<.5*$v;if(y&&A){jv.start.fromBufferAttribute(s,c),jv.end.fromBufferAttribute(l,c),jv.start.applyMatrix4(a),jv.end.applyMatrix4(a);var b=new Vector3,x=new Vector3;Kv.distanceSqToSegment(jv.start,jv.end,x,b),n.push({point:x,pointOnLine:b,distance:Kv.origin.distanceTo(x),object:e,face:null,faceIndex:c,uv:null,uv2:null})}}}}var rm=null,im=null,am=null,om=new A.Vector3,sm=new A.Vector3,lm=null,um=null,cm=new A.Vector3,fm=new A.Vector3,dm=new A.Matrix3,hm=null,pm=null,vm=null,mm=null,gm=null,ym=null,Am=null,bm=null,xm=null,_m=null,wm=null,Sm=null,Em=null,Cm=null;function Tm(e,t,n){return n*(t-e)+e}var Mm=null,Im=null,km=null,Bm=null,Rm=null,Pm=new A.Matrix4,Dm=new A.Object3D,Lm=new A.Vector3,Nm=null,Fm=null,Om=null,Um,zm=function(){if(Um)return Um;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};var n,r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");var i=WebAssembly.instantiate(function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;++r){var i=e.charCodeAt(r);n[r]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}for(var a=0,o=0;o<e.length;++o)n[a++]=n[o]<60?t[n[o]]:64*(n[o]-60)+n[++o];return n.buffer.slice(0,a)}(r),{}).then((function(e){(n=e.instance).exports.__wasm_call_ctors()}));function a(e,t,r,i,a,o){var s=n.exports.sbrk,l=r+3&-4,u=s(l*i),c=s(a.length),f=new Uint8Array(n.exports.memory.buffer);f.set(a,c);var d=e(u,r,i,c,a.length);if(0===d&&o&&o(u,l,i),t.set(f.subarray(u,u+r*i)),s(u-s(0)),0!==d)throw new Error("Malformed buffer data: ".concat(d))}var o={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},s={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Um={ready:i,supported:!0,decodeVertexBuffer:function(e,t,r,i,s){a(n.exports.meshopt_decodeVertexBuffer,e,t,r,i,n.exports[o[s]])},decodeIndexBuffer:function(e,t,r,i){a(n.exports.meshopt_decodeIndexBuffer,e,t,r,i)},decodeIndexSequence:function(e,t,r,i){a(n.exports.meshopt_decodeIndexSequence,e,t,r,i)},decodeGltfBuffer:function(e,t,r,i,l,u){a(n.exports[s[l]],e,t,r,i,n.exports[o[u]])}}}},7760:function(e,t,n){"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:function(){return ve},AddEquation:function(){return O},AddOperation:function(){return ce},AdditiveAnimationBlendMode:function(){return Gt},AdditiveBlending:function(){return D},AlphaFormat:function(){return We},AlwaysDepth:function(){return te},AlwaysStencilFunc:function(){return mn},AmbientLight:function(){return cd},AmbientLightProbe:function(){return Cd},AnimationClip:function(){return Pf},AnimationLoader:function(){return Zf},AnimationMixer:function(){return rh},AnimationObjectGroup:function(){return eh},AnimationUtils:function(){return bf},ArcCurve:function(){return Nu},ArrayCamera:function(){return dl},ArrowHelper:function(){return Xh},Audio:function(){return Od},AudioAnalyser:function(){return Hd},AudioContext:function(){return wd},AudioListener:function(){return Fd},AudioLoader:function(){return Sd},AxesHelper:function(){return Yh},BackSide:function(){return k},BasicDepthPacking:function(){return Wt},BasicShadowMap:function(){return E},Bone:function(){return $l},BooleanKeyframeTrack:function(){return Cf},Box2:function(){return vh},Box3:function(){return Sr},Box3Helper:function(){return jh},BoxBufferGeometry:function(){return ip},BoxGeometry:function(){return wa},BoxHelper:function(){return Hh},BufferAttribute:function(){return Ui},BufferGeometry:function(){return ra},BufferGeometryLoader:function(){return gd},ByteType:function(){return Fe},Cache:function(){return Nf},Camera:function(){return Ma},CameraHelper:function(){return Uh},CanvasTexture:function(){return Pu},CapsuleBufferGeometry:function(){return ap},CapsuleGeometry:function(){return rc},CatmullRomCurve3:function(){return Qu},CineonToneMapping:function(){return pe},CircleBufferGeometry:function(){return op},CircleGeometry:function(){return ic},ClampToEdgeWrapping:function(){return Se},Clock:function(){return Bd},Color:function(){return sr},ColorKeyframeTrack:function(){return Tf},ColorManagement:function(){return $n},CompressedArrayTexture:function(){return Ru},CompressedTexture:function(){return Bu},CompressedTextureLoader:function(){return Hf},ConeBufferGeometry:function(){return sp},ConeGeometry:function(){return oc},CubeCamera:function(){return Ba},CubeReflectionMapping:function(){return ye},CubeRefractionMapping:function(){return Ae},CubeTexture:function(){return Ra},CubeTextureLoader:function(){return Vf},CubeUVReflectionMapping:function(){return _e},CubicBezierCurve:function(){return Vu},CubicBezierCurve3:function(){return Wu},CubicInterpolant:function(){return _f},CullFaceBack:function(){return _},CullFaceFront:function(){return w},CullFaceFrontBack:function(){return S},CullFaceNone:function(){return x},Curve:function(){return Du},CurvePath:function(){return ec},CustomBlending:function(){return F},CustomToneMapping:function(){return me},CylinderBufferGeometry:function(){return lp},CylinderGeometry:function(){return ac},Cylindrical:function(){return hh},Data3DTexture:function(){return gr},DataArrayTexture:function(){return vr},DataTexture:function(){return eu},DataTexture2DArray:function(){return np},DataTexture3D:function(){return rp},DataTextureLoader:function(){return Wf},DataUtils:function(){return $h},DecrementStencilOp:function(){return an},DecrementWrapStencilOp:function(){return sn},DefaultLoadingManager:function(){return Of},DepthFormat:function(){return qe},DepthStencilFormat:function(){return $e},DepthTexture:function(){return ml},DirectionalLight:function(){return ud},DirectionalLightHelper:function(){return Nh},DiscreteInterpolant:function(){return Sf},DodecahedronBufferGeometry:function(){return up},DodecahedronGeometry:function(){return lc},DoubleSide:function(){return B},DstAlphaFactor:function(){return Y},DstColorFactor:function(){return J},DynamicCopyUsage:function(){return Sn},DynamicDrawUsage:function(){return yn},DynamicReadUsage:function(){return xn},EdgesGeometry:function(){return hc},EllipseCurve:function(){return Lu},EqualDepth:function(){return ie},EqualStencilFunc:function(){return fn},EquirectangularReflectionMapping:function(){return be},EquirectangularRefractionMapping:function(){return xe},Euler:function(){return si},EventDispatcher:function(){return In},ExtrudeBufferGeometry:function(){return cp},ExtrudeGeometry:function(){return Zc},FileLoader:function(){return Qf},Float16BufferAttribute:function(){return Wi},Float32BufferAttribute:function(){return Xi},Float64BufferAttribute:function(){return Yi},FloatType:function(){return Qe},Fog:function(){return Sl},FogExp2:function(){return wl},FramebufferTexture:function(){return ku},FrontSide:function(){return I},Frustum:function(){return za},GLBufferAttribute:function(){return lh},GLSL1:function(){return Cn},GLSL3:function(){return Tn},GreaterDepth:function(){return oe},GreaterEqualDepth:function(){return ae},GreaterEqualStencilFunc:function(){return vn},GreaterStencilFunc:function(){return hn},GridHelper:function(){return Bh},Group:function(){return hl},HalfFloatType:function(){return Ze},HemisphereLight:function(){return Kf},HemisphereLightHelper:function(){return kh},HemisphereLightProbe:function(){return Ed},IcosahedronBufferGeometry:function(){return fp},IcosahedronGeometry:function(){return jc},ImageBitmapLoader:function(){return _d},ImageLoader:function(){return jf},ImageUtils:function(){return lr},ImmediateRenderObject:function(){return ep},IncrementStencilOp:function(){return rn},IncrementWrapStencilOp:function(){return on},InstancedBufferAttribute:function(){return iu},InstancedBufferGeometry:function(){return md},InstancedInterleavedBuffer:function(){return sh},InstancedMesh:function(){return cu},Int16BufferAttribute:function(){return Zi},Int32BufferAttribute:function(){return ji},Int8BufferAttribute:function(){return zi},IntType:function(){return ze},InterleavedBuffer:function(){return Cl},InterleavedBufferAttribute:function(){return Ml},Interpolant:function(){return xf},InterpolateDiscrete:function(){return Dt},InterpolateLinear:function(){return Lt},InterpolateSmooth:function(){return Nt},InvertStencilOp:function(){return ln},KeepStencilOp:function(){return tn},KeyframeTrack:function(){return Ef},LOD:function(){return Vl},LatheBufferGeometry:function(){return dp},LatheGeometry:function(){return nc},Layers:function(){return li},LessDepth:function(){return ne},LessEqualDepth:function(){return re},LessEqualStencilFunc:function(){return dn},LessStencilFunc:function(){return cn},Light:function(){return Yf},LightProbe:function(){return hd},Line:function(){return gu},Line3:function(){return yh},LineBasicMaterial:function(){return fu},LineCurve:function(){return Xu},LineCurve3:function(){return Yu},LineDashedMaterial:function(){return hf},LineLoop:function(){return xu},LineSegments:function(){return bu},LinearEncoding:function(){return jt},LinearFilter:function(){return Be},LinearInterpolant:function(){return wf},LinearMipMapLinearFilter:function(){return Le},LinearMipMapNearestFilter:function(){return Pe},LinearMipmapLinearFilter:function(){return De},LinearMipmapNearestFilter:function(){return Re},LinearSRGBColorSpace:function(){return $t},LinearToneMapping:function(){return de},Loader:function(){return Uf},LoaderUtils:function(){return vd},LoadingManager:function(){return Ff},LoopOnce:function(){return Bt},LoopPingPong:function(){return Pt},LoopRepeat:function(){return Rt},LuminanceAlphaFormat:function(){return Je},LuminanceFormat:function(){return Ke},MOUSE:function(){return A},Material:function(){return Li},MaterialLoader:function(){return pd},MathUtils:function(){return Zn},Matrix3:function(){return jn},Matrix4:function(){return Jr},MaxEquation:function(){return Q},Mesh:function(){return xa},MeshBasicMaterial:function(){return Ni},MeshDepthMaterial:function(){return il},MeshDistanceMaterial:function(){return al},MeshLambertMaterial:function(){return ff},MeshMatcapMaterial:function(){return df},MeshNormalMaterial:function(){return cf},MeshPhongMaterial:function(){return lf},MeshPhysicalMaterial:function(){return sf},MeshStandardMaterial:function(){return of},MeshToonMaterial:function(){return uf},MinEquation:function(){return G},MirroredRepeatWrapping:function(){return Ee},MixOperation:function(){return ue},MultiplyBlending:function(){return N},MultiplyOperation:function(){return le},NearestFilter:function(){return Ce},NearestMipMapLinearFilter:function(){return ke},NearestMipMapNearestFilter:function(){return Me},NearestMipmapLinearFilter:function(){return Ie},NearestMipmapNearestFilter:function(){return Te},NeverDepth:function(){return ee},NeverStencilFunc:function(){return un},NoBlending:function(){return R},NoColorSpace:function(){return Jt},NoToneMapping:function(){return fe},NormalAnimationBlendMode:function(){return zt},NormalBlending:function(){return P},NotEqualDepth:function(){return se},NotEqualStencilFunc:function(){return pn},NumberKeyframeTrack:function(){return Mf},Object3D:function(){return _i},ObjectLoader:function(){return yd},ObjectSpaceNormalMap:function(){return Kt},OctahedronBufferGeometry:function(){return hp},OctahedronGeometry:function(){return Vc},OneFactor:function(){return H},OneMinusDstAlphaFactor:function(){return K},OneMinusDstColorFactor:function(){return q},OneMinusSrcAlphaFactor:function(){return X},OneMinusSrcColorFactor:function(){return V},OrthographicCamera:function(){return $a},PCFShadowMap:function(){return C},PCFSoftShadowMap:function(){return T},PMREMGenerator:function(){return lo},Path:function(){return tc},PerspectiveCamera:function(){return Ia},Plane:function(){return Fa},PlaneBufferGeometry:function(){return pp},PlaneGeometry:function(){return Za},PlaneHelper:function(){return Vh},PointLight:function(){return sd},PointLightHelper:function(){return Ch},Points:function(){return Tu},PointsMaterial:function(){return _u},PolarGridHelper:function(){return Rh},PolyhedronBufferGeometry:function(){return vp},PolyhedronGeometry:function(){return sc},PositionalAudio:function(){return Zd},PropertyBinding:function(){return $d},PropertyMixer:function(){return jd},QuadraticBezierCurve:function(){return Ku},QuadraticBezierCurve3:function(){return Ju},Quaternion:function(){return br},QuaternionKeyframeTrack:function(){return kf},QuaternionLinearInterpolant:function(){return If},REVISION:function(){return y},RGBADepthPacking:function(){return Xt},RGBAFormat:function(){return Ye},RGBAIntegerFormat:function(){return it},RGBA_ASTC_10x10_Format:function(){return Tt},RGBA_ASTC_10x5_Format:function(){return St},RGBA_ASTC_10x6_Format:function(){return Et},RGBA_ASTC_10x8_Format:function(){return Ct},RGBA_ASTC_12x10_Format:function(){return Mt},RGBA_ASTC_12x12_Format:function(){return It},RGBA_ASTC_4x4_Format:function(){return mt},RGBA_ASTC_5x4_Format:function(){return gt},RGBA_ASTC_5x5_Format:function(){return yt},RGBA_ASTC_6x5_Format:function(){return At},RGBA_ASTC_6x6_Format:function(){return bt},RGBA_ASTC_8x5_Format:function(){return xt},RGBA_ASTC_8x6_Format:function(){return _t},RGBA_ASTC_8x8_Format:function(){return wt},RGBA_BPTC_Format:function(){return kt},RGBA_ETC2_EAC_Format:function(){return vt},RGBA_PVRTC_2BPPV1_Format:function(){return dt},RGBA_PVRTC_4BPPV1_Format:function(){return ft},RGBA_S3TC_DXT1_Format:function(){return ot},RGBA_S3TC_DXT3_Format:function(){return st},RGBA_S3TC_DXT5_Format:function(){return lt},RGBFormat:function(){return Xe},RGB_ETC1_Format:function(){return ht},RGB_ETC2_Format:function(){return pt},RGB_PVRTC_2BPPV1_Format:function(){return ct},RGB_PVRTC_4BPPV1_Format:function(){return ut},RGB_S3TC_DXT1_Format:function(){return at},RGFormat:function(){return nt},RGIntegerFormat:function(){return rt},RawShaderMaterial:function(){return af},Ray:function(){return Kr},Raycaster:function(){return uh},RectAreaLight:function(){return fd},RedFormat:function(){return et},RedIntegerFormat:function(){return tt},ReinhardToneMapping:function(){return he},RepeatWrapping:function(){return we},ReplaceStencilOp:function(){return nn},ReverseSubtractEquation:function(){return z},RingBufferGeometry:function(){return mp},RingGeometry:function(){return Wc},SRGBColorSpace:function(){return qt},Scene:function(){return El},ShaderChunk:function(){return Ha},ShaderLib:function(){return Va},ShaderMaterial:function(){return Ta},ShadowMaterial:function(){return rf},Shape:function(){return pc},ShapeBufferGeometry:function(){return gp},ShapeGeometry:function(){return Xc},ShapePath:function(){return Kh},ShapeUtils:function(){return zc},ShortType:function(){return Oe},Skeleton:function(){return ru},SkeletonHelper:function(){return Sh},SkinnedMesh:function(){return ql},Source:function(){return ur},Sphere:function(){return Qr},SphereBufferGeometry:function(){return yp},SphereGeometry:function(){return Yc},Spherical:function(){return dh},SphericalHarmonics3:function(){return dd},SplineCurve:function(){return qu},SpotLight:function(){return nd},SpotLightHelper:function(){return bh},Sprite:function(){return Ql},SpriteMaterial:function(){return Il},SrcAlphaFactor:function(){return W},SrcAlphaSaturateFactor:function(){return $},SrcColorFactor:function(){return j},StaticCopyUsage:function(){return wn},StaticDrawUsage:function(){return gn},StaticReadUsage:function(){return bn},StereoCamera:function(){return kd},StreamCopyUsage:function(){return En},StreamDrawUsage:function(){return An},StreamReadUsage:function(){return _n},StringKeyframeTrack:function(){return Bf},SubtractEquation:function(){return U},SubtractiveBlending:function(){return L},TOUCH:function(){return b},TangentSpaceNormalMap:function(){return Yt},TetrahedronBufferGeometry:function(){return Ap},TetrahedronGeometry:function(){return Kc},Texture:function(){return dr},TextureLoader:function(){return Xf},TorusBufferGeometry:function(){return bp},TorusGeometry:function(){return Jc},TorusKnotBufferGeometry:function(){return xp},TorusKnotGeometry:function(){return qc},Triangle:function(){return Pi},TriangleFanDrawMode:function(){return Ht},TriangleStripDrawMode:function(){return Zt},TrianglesDrawMode:function(){return Qt},TubeBufferGeometry:function(){return _p},TubeGeometry:function(){return $c},UVMapping:function(){return ge},Uint16BufferAttribute:function(){return Hi},Uint32BufferAttribute:function(){return Vi},Uint8BufferAttribute:function(){return Gi},Uint8ClampedBufferAttribute:function(){return Qi},Uniform:function(){return ih},UniformsGroup:function(){return oh},UniformsLib:function(){return ja},UniformsUtils:function(){return Ca},UnsignedByteType:function(){return Ne},UnsignedInt248Type:function(){return Ve},UnsignedIntType:function(){return Ge},UnsignedShort4444Type:function(){return He},UnsignedShort5551Type:function(){return je},UnsignedShortType:function(){return Ue},VSMShadowMap:function(){return M},Vector2:function(){return Hn},Vector3:function(){return xr},Vector4:function(){return hr},VectorKeyframeTrack:function(){return Rf},VideoTexture:function(){return Iu},WebGL1Renderer:function(){return xl},WebGL3DRenderTarget:function(){return yr},WebGLArrayRenderTarget:function(){return mr},WebGLCubeRenderTarget:function(){return Pa},WebGLMultipleRenderTargets:function(){return Ar},WebGLMultisampleRenderTarget:function(){return tp},WebGLRenderTarget:function(){return pr},WebGLRenderer:function(){return bl},WebGLUtils:function(){return fl},WireframeGeometry:function(){return ef},WrapAroundEnding:function(){return Ut},ZeroCurvatureEnding:function(){return Ft},ZeroFactor:function(){return Z},ZeroSlopeEnding:function(){return Ot},ZeroStencilOp:function(){return en},_SRGBAFormat:function(){return Mn},sRGBEncoding:function(){return Vt}});var r,i=n(8664),a=n(3433),o=n(5861),s=n(7762),l=n(9439),u=n(8301),c=n(1120),f=n(7326),d=n(136),h=n(9388),p=n(4942),v=n(4165),m=n(5671),g=n(3144),y="146",A={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},b={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},x=0,_=1,w=2,S=3,E=0,C=1,T=2,M=3,I=0,k=1,B=2,R=0,P=1,D=2,L=3,N=4,F=5,O=100,U=101,z=102,G=103,Q=104,Z=200,H=201,j=202,V=203,W=204,X=205,Y=206,K=207,J=208,q=209,$=210,ee=0,te=1,ne=2,re=3,ie=4,ae=5,oe=6,se=7,le=0,ue=1,ce=2,fe=0,de=1,he=2,pe=3,ve=4,me=5,ge=300,ye=301,Ae=302,be=303,xe=304,_e=306,we=1e3,Se=1001,Ee=1002,Ce=1003,Te=1004,Me=1004,Ie=1005,ke=1005,Be=1006,Re=1007,Pe=1007,De=1008,Le=1008,Ne=1009,Fe=1010,Oe=1011,Ue=1012,ze=1013,Ge=1014,Qe=1015,Ze=1016,He=1017,je=1018,Ve=1020,We=1021,Xe=1022,Ye=1023,Ke=1024,Je=1025,qe=1026,$e=1027,et=1028,tt=1029,nt=1030,rt=1031,it=1033,at=33776,ot=33777,st=33778,lt=33779,ut=35840,ct=35841,ft=35842,dt=35843,ht=36196,pt=37492,vt=37496,mt=37808,gt=37809,yt=37810,At=37811,bt=37812,xt=37813,_t=37814,wt=37815,St=37816,Et=37817,Ct=37818,Tt=37819,Mt=37820,It=37821,kt=36492,Bt=2200,Rt=2201,Pt=2202,Dt=2300,Lt=2301,Nt=2302,Ft=2400,Ot=2401,Ut=2402,zt=2500,Gt=2501,Qt=0,Zt=1,Ht=2,jt=3e3,Vt=3001,Wt=3200,Xt=3201,Yt=0,Kt=1,Jt="",qt="srgb",$t="srgb-linear",en=0,tn=7680,nn=7681,rn=7682,an=7683,on=34055,sn=34056,ln=5386,un=512,cn=513,fn=514,dn=515,hn=516,pn=517,vn=518,mn=519,gn=35044,yn=35048,An=35040,bn=35045,xn=35049,_n=35041,wn=35046,Sn=35050,En=35042,Cn="100",Tn="300 es",Mn=1035,In=function(){function e(){(0,m.Z)(this,e)}return(0,g.Z)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),kn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Bn=1234567,Rn=Math.PI/180,Pn=180/Math.PI;function Dn(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(kn[255&e]+kn[e>>8&255]+kn[e>>16&255]+kn[e>>24&255]+"-"+kn[255&t]+kn[t>>8&255]+"-"+kn[t>>16&15|64]+kn[t>>24&255]+"-"+kn[63&n|128]+kn[n>>8&255]+"-"+kn[n>>16&255]+kn[n>>24&255]+kn[255&r]+kn[r>>8&255]+kn[r>>16&255]+kn[r>>24&255]).toLowerCase()}function Ln(e,t,n){return Math.max(t,Math.min(n,e))}function Nn(e,t){return(e%t+t)%t}function Fn(e,t,n){return(1-n)*e+n*t}function On(e){return 0===(e&e-1)&&0!==e}function Un(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function zn(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Gn(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Qn(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var Zn=Object.freeze({__proto__:null,DEG2RAD:Rn,RAD2DEG:Pn,generateUUID:Dn,clamp:Ln,euclideanModulo:Nn,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Fn,damp:function(e,t,n,r){return Fn(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Nn(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Bn=e);var t=Bn+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Rn},radToDeg:function(e){return e*Pn},isPowerOfTwo:On,ceilPowerOfTwo:Un,floorPowerOfTwo:zn,setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((t+r)/2),c=o((t+r)/2),f=a((t-r)/2),d=o((t-r)/2),h=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,l*f,l*d,s*u);break;case"YZY":e.set(l*d,s*c,l*f,s*u);break;case"ZXZ":e.set(l*f,l*d,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*h,s*u);break;case"YXY":e.set(l*h,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*h,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:Qn,denormalize:Gn}),Hn=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.Z)(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return(0,g.Z)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:(0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),jn=function(){function e(){(0,m.Z)(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return(0,g.Z)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],f=n[2],d=n[5],h=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],A=r[7],b=r[2],x=r[5],_=r[8];return i[0]=a*p+o*g+s*b,i[3]=a*v+o*y+s*x,i[6]=a*m+o*A+s*_,i[1]=l*p+u*g+c*b,i[4]=l*v+u*y+c*x,i[7]=l*m+u*A+c*_,i[2]=f*p+d*g+h*b,i[5]=f*v+d*y+h*x,i[8]=f*m+d*A+h*_,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*i*u+n*o*s+r*i*l-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,f=o*s-u*i,d=l*i-a*s,h=t*c+n*f+r*d;if(0===h)return this.set(0,0,0,0,0,0,0,0,0);var p=1/h;return e[0]=c*p,e[1]=(r*l-u*n)*p,e[2]=(o*n-r*a)*p,e[3]=f*p,e[4]=(u*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=d*p,e[7]=(n*s-l*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],l=r[4],u=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*l,r[6]=t*o+n*u,r[1]=-n*i+t*s,r[4]=-n*a+t*l,r[7]=-n*o+t*u,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function Vn(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var Wn={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Xn(e,t){return new Wn[e](t)}function Yn(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Kn(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Jn(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var qn=(r={},(0,p.Z)(r,qt,(0,p.Z)({},$t,Kn)),(0,p.Z)(r,$t,(0,p.Z)({},qt,Jn)),r),$n={legacyMode:!0,get workingColorSpace(){return $t},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(qn[t]&&void 0!==qn[t][n]){var r=qn[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},er={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},tr={r:0,g:0,b:0},nr={h:0,s:0,l:0},rr={h:0,s:0,l:0};function ir(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function ar(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var or,sr=function(e){function t(e,n,r){return(0,m.Z)(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}return(0,g.Z)(t,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qt;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,$n.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$t;return this.r=e,this.g=t,this.b=n,$n.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$t;if(e=Nn(e,1),t=Ln(t,0,1),n=Ln(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,a=2*n-i;this.r=ir(a,i,e+1/3),this.g=ir(a,i,e),this.b=ir(a,i,e-1/3)}return $n.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qt;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var i,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,$n.toWorkingColorSpace(this,n),r(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,$n.toWorkingColorSpace(this,n),r(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var s=parseFloat(i[1])/360,l=parseFloat(i[2])/100,u=parseFloat(i[3])/100;return r(i[4]),this.setHSL(s,l,u,n)}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=t[1],f=c.length;if(3===f)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,$n.toWorkingColorSpace(this,n),this;if(6===f)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,$n.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qt,n=er[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=Kn(e.r),this.g=Kn(e.g),this.b=Kn(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Jn(e.r),this.g=Jn(e.g),this.b=Jn(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt;return $n.fromWorkingColorSpace(ar(this,tr),e),Ln(255*tr.r,0,255)<<16^Ln(255*tr.g,0,255)<<8^Ln(255*tr.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;$n.fromWorkingColorSpace(ar(this,tr),t);var n,r,i=tr.r,a=tr.g,o=tr.b,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(l+s)/2;if(l===s)n=0,r=0;else{var c=s-l;switch(r=u<=.5?c/(s+l):c/(2-s-l),s){case i:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-i)/c+2;break;case o:n=(i-a)/c+4}n/=6}return e.h=n,e.s=r,e.l=u,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;return $n.fromWorkingColorSpace(ar(this,tr),t),e.r=tr.r,e.g=tr.g,e.b=tr.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt;return $n.fromWorkingColorSpace(ar(this,tr),e),e!==qt?"color(".concat(e," ").concat(tr.r," ").concat(tr.g," ").concat(tr.b,")"):"rgb(".concat(255*tr.r|0,",").concat(255*tr.g|0,",").concat(255*tr.b|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(nr),nr.h+=e,nr.s+=t,nr.l+=n,this.setHSL(nr.h,nr.s,nr.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(nr),e.getHSL(rr);var n=Fn(nr.h,rr.h,t),r=Fn(nr.s,rr.s,t),i=Fn(nr.l,rr.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:e,value:(0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);sr.NAMES=er;var lr=function(){function e(){(0,m.Z)(this,e)}return(0,g.Z)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===or&&(or=Yn("canvas")),or.width=e.width,or.height=e.height;var n=or.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=or}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=Yn("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,a=0;a<i.length;a++)i[a]=255*Kn(i[a]/255);return n.putImageData(r,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*Kn(o[s]/255)):o[s]=Kn(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),ur=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,m.Z)(this,e),this.isSource=!0,this.uuid=Dn(),this.data=t,this.version=0}return(0,g.Z)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(cr(r[a].image)):i.push(cr(r[a]))}else i=cr(r);n.url=i}return t||(e.images[this.uuid]=n),n}}]),e}();function cr(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?lr.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var fr=0,dr=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Be,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:De,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ye,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Ne,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:jt;return(0,m.Z)(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty((0,f.Z)(e),"id",{value:fr++}),e.uuid=Dn(),e.name="",e.source=new ur(r),e.mipmaps=[],e.mapping=i,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=l,e.anisotropy=d,e.format=u,e.internalFormat=null,e.type=c,e.offset=new Hn(0,0),e.repeat=new Hn(1,1),e.center=new Hn(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new jn,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=h,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return(0,g.Z)(n,[{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==ge)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case we:e.x=e.x-Math.floor(e.x);break;case Se:e.x=e.x<0?0:1;break;case Ee:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case we:e.y=e.y-Math.floor(e.y);break;case Se:e.y=e.y<0?0:1;break;case Ee:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(In);dr.DEFAULT_IMAGE=null,dr.DEFAULT_MAPPING=ge;var hr=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,m.Z)(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}return(0,g.Z)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],f=s[1],d=s[5],h=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(u-f)<a&&Math.abs(c-p)<a&&Math.abs(h-v)<a){if(Math.abs(u+f)<o&&Math.abs(c+p)<o&&Math.abs(h+v)<o&&Math.abs(l+d+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,y=(d+1)/2,A=(m+1)/2,b=(u+f)/4,x=(c+p)/4,_=(h+v)/4;return g>y&&g>A?g<a?(n=0,r=.707106781,i=.707106781):(r=b/(n=Math.sqrt(g)),i=x/n):y>A?y<a?(n=.707106781,r=0,i=.707106781):(n=b/(r=Math.sqrt(y)),i=_/r):A<a?(n=.707106781,r=.707106781,i=0):(n=x/(i=Math.sqrt(A)),r=_/i),this.set(n,r,i,t),this}var w=Math.sqrt((v-h)*(v-h)+(c-p)*(c-p)+(f-u)*(f-u));return Math.abs(w)<.001&&(w=1),this.x=(v-h)/w,this.y=(c-p)/w,this.z=(f-u)/w,this.w=Math.acos((l+d+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:(0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),pr=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,m.Z)(this,n),(e=t.call(this)).isWebGLRenderTarget=!0,e.width=r,e.height=i,e.depth=1,e.scissor=new hr(0,0,r,i),e.scissorTest=!1,e.viewport=new hr(0,0,r,i);var o={width:r,height:i,depth:1};return e.texture=new dr(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),e.texture.isRenderTargetTexture=!0,e.texture.flipY=!1,e.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,e.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,e.texture.minFilter=void 0!==a.minFilter?a.minFilter:Be,e.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,e.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,e.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,e.samples=void 0!==a.samples?a.samples:0,e}return(0,g.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new ur(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(In),vr=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,m.Z)(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=Ce,e.minFilter=Ce,e.wrapR=Se,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,g.Z)(n)}(dr),mr=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,m.Z)(this,n),(e=t.call(this,r,i)).isWebGLArrayRenderTarget=!0,e.depth=a,e.texture=new vr(null,r,i,a),e.texture.isRenderTargetTexture=!0,e}return(0,g.Z)(n)}(pr),gr=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,m.Z)(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=Ce,e.minFilter=Ce,e.wrapR=Se,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,g.Z)(n)}(dr),yr=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,m.Z)(this,n),(e=t.call(this,r,i)).isWebGL3DRenderTarget=!0,e.depth=a,e.texture=new gr(null,r,i,a),e.texture.isRenderTargetTexture=!0,e}return(0,g.Z)(n)}(pr),Ar=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,m.Z)(this,n),(e=t.call(this,r,i,o)).isWebGLMultipleRenderTargets=!0;var s=e.texture;e.texture=[];for(var l=0;l<a;l++)e.texture[l]=s.clone(),e.texture[l].isRenderTargetTexture=!0;return e}return(0,g.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}]),n}(pr),br=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,m.Z)(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}return(0,g.Z)(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(r/2),c=o(i/2),f=s(n/2),d=s(r/2),h=s(i/2);switch(a){case"XYZ":this._x=f*u*c+l*d*h,this._y=l*d*c-f*u*h,this._z=l*u*h+f*d*c,this._w=l*u*c-f*d*h;break;case"YXZ":this._x=f*u*c+l*d*h,this._y=l*d*c-f*u*h,this._z=l*u*h-f*d*c,this._w=l*u*c+f*d*h;break;case"ZXY":this._x=f*u*c-l*d*h,this._y=l*d*c+f*u*h,this._z=l*u*h+f*d*c,this._w=l*u*c-f*d*h;break;case"ZYX":this._x=f*u*c-l*d*h,this._y=l*d*c+f*u*h,this._z=l*u*h-f*d*c,this._w=l*u*c+f*d*h;break;case"YZX":this._x=f*u*c+l*d*h,this._y=l*d*c+f*u*h,this._z=l*u*h-f*d*c,this._w=l*u*c-f*d*h;break;case"XZY":this._x=f*u*c-l*d*h,this._y=l*d*c-f*u*h,this._z=l*u*h+f*d*c,this._w=l*u*c+f*d*h;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],f=n+o+c;if(f>0){var d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(u-s)*d,this._y=(i-l)*d,this._z=(a-r)*d}else if(n>o&&n>c){var h=2*Math.sqrt(1+n-o-c);this._w=(u-s)/h,this._x=.25*h,this._y=(r+a)/h,this._z=(i+l)/h}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-l)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+u)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-r)/v,this._x=(i+l)/v,this._y=(s+u)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Ln(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+r*l-i*s,this._y=r*u+a*s+i*o-n*l,this._z=i*u+a*l+n*s-r*o,this._w=a*u-n*o-r*s-i*l,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),f=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=a*f+this._w*d,this._x=n*f+this._x*d,this._y=r*f+this._y*d,this._z=i*f+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:e,value:(0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],f=i[a+0],d=i[a+1],h=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===o)return e[t+0]=f,e[t+1]=d,e[t+2]=h,void(e[t+3]=p);if(c!==p||s!==f||l!==d||u!==h){var v=1-o,m=s*f+l*d+u*h+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var A=Math.sqrt(y),b=Math.atan2(A,m*g);v=Math.sin(v*b)/A,o=Math.sin(o*b)/A}var x=o*g;if(s=s*v+f*x,l=l*v+d*x,u=u*v+h*x,c=c*v+p*x,v===1-o){var _=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=_,l*=_,u*=_,c*=_}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[a],f=i[a+1],d=i[a+2],h=i[a+3];return e[t]=o*h+u*c+s*d-l*f,e[t+1]=s*h+u*f+l*c-o*d,e[t+2]=l*h+u*d+o*f-s*c,e[t+3]=u*h-o*c-s*f-l*d,e}}]),t}(Symbol.iterator),xr=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,m.Z)(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}return(0,g.Z)(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(wr.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(wr.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*r-o*n,u=s*n+o*t-i*r,c=s*r+i*n-a*t,f=-i*t-a*n-o*r;return this.x=l*s+f*-i+u*-o-c*-a,this.y=u*s+f*-a+c*-i-l*-o,this.z=c*s+f*-o+l*-a-u*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return _r.copy(this).projectOnVector(e),this.sub(_r)}},{key:"reflect",value:function(e){return this.sub(_r.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Ln(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:e,value:(0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator),_r=new xr,wr=new br,Sr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xr(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xr(-1/0,-1/0,-1/0);(0,m.Z)(this,e),this.isBox3=!0,this.min=t,this.max=n}return(0,g.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],f=e[s+2];u<t&&(t=u),c<n&&(n=c),f<r&&(r=f),u>i&&(i=u),c>a&&(a=c),f>o&&(o=f)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),f=e.getZ(s);u<t&&(t=u),c<n&&(n=c),f<r&&(r=f),u>i&&(i=u),c>a&&(a=c),f>o&&(o=f)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Cr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position)for(var r=n.attributes.position,i=0,a=r.count;i<a;i++)Cr.fromBufferAttribute(r,i).applyMatrix4(e.matrixWorld),this.expandByPoint(Cr);else null===n.boundingBox&&n.computeBoundingBox(),Tr.copy(n.boundingBox),Tr.applyMatrix4(e.matrixWorld),this.union(Tr);for(var o=e.children,s=0,l=o.length;s<l;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Cr),Cr.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Dr),Lr.subVectors(this.max,Dr),Mr.subVectors(e.a,Dr),Ir.subVectors(e.b,Dr),kr.subVectors(e.c,Dr),Br.subVectors(Ir,Mr),Rr.subVectors(kr,Ir),Pr.subVectors(Mr,kr);var t=[0,-Br.z,Br.y,0,-Rr.z,Rr.y,0,-Pr.z,Pr.y,Br.z,0,-Br.x,Rr.z,0,-Rr.x,Pr.z,0,-Pr.x,-Br.y,Br.x,0,-Rr.y,Rr.x,0,-Pr.y,Pr.x,0];return!!Or(t,Mr,Ir,kr,Lr)&&(!!Or(t=[1,0,0,0,1,0,0,0,1],Mr,Ir,kr,Lr)&&(Nr.crossVectors(Br,Rr),Or(t=[Nr.x,Nr.y,Nr.z],Mr,Ir,kr,Lr)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Cr.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Cr).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Er[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Er[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Er[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Er[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Er[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Er[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Er[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Er[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Er)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Er=[new xr,new xr,new xr,new xr,new xr,new xr,new xr,new xr],Cr=new xr,Tr=new Sr,Mr=new xr,Ir=new xr,kr=new xr,Br=new xr,Rr=new xr,Pr=new xr,Dr=new xr,Lr=new xr,Nr=new xr,Fr=new xr;function Or(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){Fr.fromArray(e,a);var s=i.x*Math.abs(Fr.x)+i.y*Math.abs(Fr.y)+i.z*Math.abs(Fr.z),l=t.dot(Fr),u=n.dot(Fr),c=r.dot(Fr);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}var Ur=new Sr,zr=new xr,Gr=new xr,Qr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,m.Z)(this,e),this.center=t,this.radius=n}return(0,g.Z)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Ur.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;zr.subVectors(e,this.center);var t=zr.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(zr,r/n),this.radius+=r}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Gr.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(zr.copy(e.center).add(Gr)),this.expandByPoint(zr.copy(e.center).sub(Gr))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Zr=new xr,Hr=new xr,jr=new xr,Vr=new xr,Wr=new xr,Xr=new xr,Yr=new xr,Kr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xr(0,0,-1);(0,m.Z)(this,e),this.origin=t,this.direction=n}return(0,g.Z)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,Zr)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=Zr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Zr.copy(this.direction).multiplyScalar(t).add(this.origin),Zr.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){Hr.copy(e).add(t).multiplyScalar(.5),jr.copy(t).sub(e).normalize(),Vr.copy(this.origin).sub(Hr);var i,a,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot(jr),c=Vr.dot(this.direction),f=-Vr.dot(jr),d=Vr.lengthSq(),h=Math.abs(1-u*u);if(h>0)if(a=u*c-f,s=l*h,(i=u*f-c)>=0)if(a>=-s)if(a<=s){var p=1/h;o=(i*=p)*(i+u*(a*=p)+2*c)+a*(u*i+a+2*f)+d}else a=l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*f)+d;else a=-l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*f)+d;else a<=-s?o=-(i=Math.max(0,-(-u*l+c)))*i+(a=i>0?-l:Math.min(Math.max(-l,-f),l))*(a+2*f)+d:a<=s?(i=0,o=(a=Math.min(Math.max(-l,-f),l))*(a+2*f)+d):o=-(i=Math.max(0,-(u*l+c)))*i+(a=i>0?l:Math.min(Math.max(-l,-f),l))*(a+2*f)+d;else a=u>0?-l:l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*f)+d;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(jr).multiplyScalar(a).add(Hr),o}},{key:"intersectSphere",value:function(e,t){Zr.subVectors(e.center,this.origin);var n=Zr.dot(this.direction),r=Zr.dot(Zr)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,f=this.origin;return l>=0?(n=(e.min.x-f.x)*l,r=(e.max.x-f.x)*l):(n=(e.max.x-f.x)*l,r=(e.min.x-f.x)*l),u>=0?(i=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(i=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(o=(e.min.z-f.z)*c,s=(e.max.z-f.z)*c):(o=(e.max.z-f.z)*c,s=(e.min.z-f.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,Zr)}},{key:"intersectTriangle",value:function(e,t,n,r,i){Wr.subVectors(t,e),Xr.subVectors(n,e),Yr.crossVectors(Wr,Xr);var a,o=this.direction.dot(Yr);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Vr.subVectors(this.origin,e);var s=a*this.direction.dot(Xr.crossVectors(Vr,Xr));if(s<0)return null;var l=a*this.direction.dot(Wr.cross(Vr));if(l<0)return null;if(s+l>o)return null;var u=-a*Vr.dot(Yr);return u<0?null:this.at(u/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Jr=function(){function e(){(0,m.Z)(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return(0,g.Z)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,l,u,c,f,d,h,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=l,m[6]=u,m[10]=c,m[14]=f,m[3]=d,m[7]=h,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/qr.setFromMatrixColumn(e,0).length(),i=1/qr.setFromMatrixColumn(e,1).length(),a=1/qr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var f=a*u,d=a*c,h=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=d+h*l,t[5]=f-p*l,t[9]=-o*s,t[2]=p-f*l,t[6]=h+d*l,t[10]=a*s}else if("YXZ"===e.order){var v=s*u,m=s*c,g=l*u,y=l*c;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var A=s*u,b=s*c,x=l*u,_=l*c;t[0]=A-_*o,t[4]=-a*c,t[8]=x+b*o,t[1]=b+x*o,t[5]=a*u,t[9]=_-A*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var w=a*u,S=a*c,E=o*u,C=o*c;t[0]=s*u,t[4]=E*l-S,t[8]=w*l+C,t[1]=s*c,t[5]=C*l+w,t[9]=S*l-E,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var T=a*s,M=a*l,I=o*s,k=o*l;t[0]=s*u,t[4]=k-T*c,t[8]=I*c+M,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=M*c+I,t[10]=T-k*c}else if("XZY"===e.order){var B=a*s,R=a*l,P=o*s,D=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=B*c+D,t[5]=a*u,t[9]=R*c-P,t[2]=P*c-R,t[6]=o*u,t[10]=D*c+B}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(ei,e,ti)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return ii.subVectors(e,t),0===ii.lengthSq()&&(ii.z=1),ii.normalize(),ni.crossVectors(n,ii),0===ni.lengthSq()&&(1===Math.abs(n.z)?ii.x+=1e-4:ii.z+=1e-4,ii.normalize(),ni.crossVectors(n,ii)),ni.normalize(),ri.crossVectors(ii,ni),r[0]=ni.x,r[4]=ri.x,r[8]=ii.x,r[1]=ni.y,r[5]=ri.y,r[9]=ii.y,r[2]=ni.z,r[6]=ri.z,r[10]=ii.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],f=n[9],d=n[13],h=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],A=n[11],b=n[15],x=r[0],_=r[4],w=r[8],S=r[12],E=r[1],C=r[5],T=r[9],M=r[13],I=r[2],k=r[6],B=r[10],R=r[14],P=r[3],D=r[7],L=r[11],N=r[15];return i[0]=a*x+o*E+s*I+l*P,i[4]=a*_+o*C+s*k+l*D,i[8]=a*w+o*T+s*B+l*L,i[12]=a*S+o*M+s*R+l*N,i[1]=u*x+c*E+f*I+d*P,i[5]=u*_+c*C+f*k+d*D,i[9]=u*w+c*T+f*B+d*L,i[13]=u*S+c*M+f*R+d*N,i[2]=h*x+p*E+v*I+m*P,i[6]=h*_+p*C+v*k+m*D,i[10]=h*w+p*T+v*B+m*L,i[14]=h*S+p*M+v*R+m*N,i[3]=g*x+y*E+A*I+b*P,i[7]=g*_+y*C+A*k+b*D,i[11]=g*w+y*T+A*B+b*L,i[15]=g*S+y*M+A*R+b*N,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],f=e[10],d=e[14];return e[3]*(+i*s*c-r*l*c-i*o*f+n*l*f+r*o*d-n*s*d)+e[7]*(+t*s*d-t*l*f+i*a*f-r*a*d+r*l*u-i*s*u)+e[11]*(+t*l*c-t*o*d-i*a*c+n*a*d+i*o*u-n*l*u)+e[15]*(-r*o*u-t*s*c+t*o*f+r*a*c-n*a*f+n*s*u)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],h=e[12],p=e[13],v=e[14],m=e[15],g=c*v*l-p*f*l+p*s*d-o*v*d-c*s*m+o*f*m,y=h*f*l-u*v*l-h*s*d+a*v*d+u*s*m-a*f*m,A=u*p*l-h*c*l+h*o*d-a*p*d-u*o*m+a*c*m,b=h*c*s-u*p*s-h*o*f+a*p*f+u*o*v-a*c*v,x=t*g+n*y+r*A+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var _=1/x;return e[0]=g*_,e[1]=(p*f*i-c*v*i-p*r*d+n*v*d+c*r*m-n*f*m)*_,e[2]=(o*v*i-p*s*i+p*r*l-n*v*l-o*r*m+n*s*m)*_,e[3]=(c*s*i-o*f*i-c*r*l+n*f*l+o*r*d-n*s*d)*_,e[4]=y*_,e[5]=(u*v*i-h*f*i+h*r*d-t*v*d-u*r*m+t*f*m)*_,e[6]=(h*s*i-a*v*i-h*r*l+t*v*l+a*r*m-t*s*m)*_,e[7]=(a*f*i-u*s*i+u*r*l-t*f*l-a*r*d+t*s*d)*_,e[8]=A*_,e[9]=(h*c*i-u*p*i-h*n*d+t*p*d+u*n*m-t*c*m)*_,e[10]=(a*p*i-h*o*i+h*n*l-t*p*l-a*n*m+t*o*m)*_,e[11]=(u*o*i-a*c*i-u*n*l+t*c*l+a*n*d-t*o*d)*_,e[12]=b*_,e[13]=(u*p*r-h*c*r+h*n*f-t*p*f-u*n*v+t*c*v)*_,e[14]=(h*o*r-a*p*r-h*n*s+t*p*s+a*n*v-t*o*v)*_,e[15]=(a*c*r-u*o*r+u*n*s-t*c*s-a*n*f+t*o*f)*_,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+n,u*s-r*a,0,l*s-r*o,u*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,u=a+a,c=o+o,f=i*l,d=i*u,h=i*c,p=a*u,v=a*c,m=o*c,g=s*l,y=s*u,A=s*c,b=n.x,x=n.y,_=n.z;return r[0]=(1-(p+m))*b,r[1]=(d+A)*b,r[2]=(h-y)*b,r[3]=0,r[4]=(d-A)*x,r[5]=(1-(f+m))*x,r[6]=(v+g)*x,r[7]=0,r[8]=(h+y)*_,r[9]=(v-g)*_,r[10]=(1-(f+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=qr.set(r[0],r[1],r[2]).length(),a=qr.set(r[4],r[5],r[6]).length(),o=qr.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],$r.copy(this);var s=1/i,l=1/a,u=1/o;return $r.elements[0]*=s,$r.elements[1]*=s,$r.elements[2]*=s,$r.elements[4]*=l,$r.elements[5]*=l,$r.elements[6]*=l,$r.elements[8]*=u,$r.elements[9]*=u,$r.elements[10]*=u,t.setFromRotationMatrix($r),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){var o=this.elements,s=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),f=-(a+i)/(a-i),d=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),l=1/(n-r),u=1/(a-i),c=(t+e)*s,f=(n+r)*l,d=(a+i)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),qr=new xr,$r=new Jr,ei=new xr(0,0,0),ti=new xr(1,1,1),ni=new xr,ri=new xr,ii=new xr,ai=new Jr,oi=new br,si=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;(0,m.Z)(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}return(0,g.Z)(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],u=r[9],c=r[2],f=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Ln(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(f,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ln(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(Ln(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Ln(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Ln(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Ln(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return ai.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ai,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return oi.setFromEuler(this),this.setFromQuaternion(oi,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:e,value:(0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}]),t}(Symbol.iterator);si.DefaultOrder="XYZ",si.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var li=function(){function e(){(0,m.Z)(this,e),this.mask=1}return(0,g.Z)(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),ui=0,ci=new xr,fi=new br,di=new Jr,hi=new xr,pi=new xr,vi=new xr,mi=new br,gi=new xr(1,0,0),yi=new xr(0,1,0),Ai=new xr(0,0,1),bi={type:"added"},xi={type:"removed"},_i=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;(0,m.Z)(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty((0,f.Z)(e),"id",{value:ui++}),e.uuid=Dn(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new xr,i=new si,a=new br,o=new xr(1,1,1);return i._onChange((function(){a.setFromEuler(i,!1)})),a._onChange((function(){i.setFromQuaternion(a,void 0,!1)})),Object.defineProperties((0,f.Z)(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Jr},normalMatrix:{value:new jn}}),e.matrix=new Jr,e.matrixWorld=new Jr,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,e.layers=new li,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,g.Z)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return fi.setFromAxisAngle(e,t),this.quaternion.multiply(fi),this}},{key:"rotateOnWorldAxis",value:function(e,t){return fi.setFromAxisAngle(e,t),this.quaternion.premultiply(fi),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(gi,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(yi,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Ai,e)}},{key:"translateOnAxis",value:function(e,t){return ci.copy(e).applyQuaternion(this.quaternion),this.position.add(ci.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(gi,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(yi,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Ai,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(di.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?hi.copy(e):hi.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),pi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?di.lookAt(pi,hi,this.up):di.lookAt(hi,pi,this.up),this.quaternion.setFromRotationMatrix(di),r&&(di.extractRotation(r.matrixWorld),fi.setFromRotationMatrix(di),this.quaternion.premultiply(fi.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(bi)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(xi)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(xi)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),di.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),di.multiply(e.parent.matrixWorld)),e.applyMatrix4(di),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pi,e,vi),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pi,mi,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++){var i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++){var o=r[i];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];i(e.shapes,u)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],f=0,d=this.material.length;f<d;f++)c.push(i(e.materials,this.material[f]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var h=0;h<this.children.length;h++)r.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(e.animations,v))}}if(t){var m=S(e.geometries),g=S(e.materials),y=S(e.textures),A=S(e.images),b=S(e.shapes),x=S(e.skeletons),_=S(e.animations),w=S(e.nodes);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),A.length>0&&(n.images=A),b.length>0&&(n.shapes=b),x.length>0&&(n.skeletons=x),_.length>0&&(n.animations=_),w.length>0&&(n.nodes=w)}return n.object=r,n;function S(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(In);_i.DefaultUp=new xr(0,1,0),_i.DefaultMatrixAutoUpdate=!0,_i.DefaultMatrixWorldAutoUpdate=!0;var wi=new xr,Si=new xr,Ei=new xr,Ci=new xr,Ti=new xr,Mi=new xr,Ii=new xr,ki=new xr,Bi=new xr,Ri=new xr,Pi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xr,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new xr;(0,m.Z)(this,e),this.a=t,this.b=n,this.c=r}return(0,g.Z)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return wi.subVectors(this.c,this.b),Si.subVectors(this.a,this.b),.5*wi.cross(Si).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return e.getUV(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;Ti.subVectors(a,i),Mi.subVectors(o,i),ki.subVectors(e,i);var s=Ti.dot(ki),l=Mi.dot(ki);if(s<=0&&l<=0)return t.copy(i);Bi.subVectors(e,a);var u=Ti.dot(Bi),c=Mi.dot(Bi);if(u>=0&&c<=u)return t.copy(a);var f=s*c-u*l;if(f<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(i).addScaledVector(Ti,n);Ri.subVectors(e,o);var d=Ti.dot(Ri),h=Mi.dot(Ri);if(h>=0&&d<=h)return t.copy(o);var p=d*l-s*h;if(p<=0&&l>=0&&h<=0)return r=l/(l-h),t.copy(i).addScaledVector(Mi,r);var v=u*h-d*c;if(v<=0&&c-u>=0&&d-h>=0)return Ii.subVectors(o,a),r=(c-u)/(c-u+(d-h)),t.copy(a).addScaledVector(Ii,r);var m=1/(v+p+f);return n=p*m,r=f*m,t.copy(i).addScaledVector(Ti,n).addScaledVector(Mi,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),wi.subVectors(e,t),r.cross(wi);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){wi.subVectors(r,t),Si.subVectors(n,t),Ei.subVectors(e,t);var a=wi.dot(wi),o=wi.dot(Si),s=wi.dot(Ei),l=Si.dot(Si),u=Si.dot(Ei),c=a*l-o*o;if(0===c)return i.set(-2,-1,-1);var f=1/c,d=(l*s-o*u)*f,h=(a*u-o*s)*f;return i.set(1-d-h,h,d)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,Ci),Ci.x>=0&&Ci.y>=0&&Ci.x+Ci.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,Ci),s.set(0,0),s.addScaledVector(i,Ci.x),s.addScaledVector(a,Ci.y),s.addScaledVector(o,Ci.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return wi.subVectors(n,t),Si.subVectors(e,t),wi.cross(Si).dot(r)<0}}]),e}(),Di=0,Li=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty((0,f.Z)(e),"id",{value:Di++}),e.uuid=Dn(),e.name="",e.type="Material",e.blending=P,e.side=I,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=W,e.blendDst=X,e.blendEquation=O,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=re,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=mn,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=tn,e.stencilZFail=tn,e.stencilZPass=tn,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return(0,g.Z)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==P&&(n.blending=this.blending),this.side!==I&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(In),Ni=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isMeshBasicMaterial=!0,r.type="MeshBasicMaterial",r.color=new sr(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=le,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Li),Fi=new xr,Oi=new Hn,Ui=function(){function e(t,n,r){if((0,m.Z)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=gn,this.updateRange={offset:0,count:-1},this.version=0}return(0,g.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)Oi.fromBufferAttribute(this,t),Oi.applyMatrix3(e),this.setXY(t,Oi.x,Oi.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)Fi.fromBufferAttribute(this,r),Fi.applyMatrix3(e),this.setXYZ(r,Fi.x,Fi.y,Fi.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)Fi.fromBufferAttribute(this,t),Fi.applyMatrix4(e),this.setXYZ(t,Fi.x,Fi.y,Fi.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Fi.fromBufferAttribute(this,t),Fi.applyNormalMatrix(e),this.setXYZ(t,Fi.x,Fi.y,Fi.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Fi.fromBufferAttribute(this,t),Fi.transformDirection(e),this.setXYZ(t,Fi.x,Fi.y,Fi.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=Gn(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=Qn(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=Gn(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=Qn(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=Gn(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=Qn(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=Gn(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=Qn(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=Qn(t,this.array),n=Qn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Qn(t,this.array),n=Qn(n,this.array),r=Qn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Qn(t,this.array),n=Qn(n,this.array),r=Qn(r,this.array),i=Qn(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==gn&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),e}(),zi=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){return(0,m.Z)(this,n),t.call(this,new Int8Array(e),r,i)}return(0,g.Z)(n)}(Ui),Gi=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){return(0,m.Z)(this,n),t.call(this,new Uint8Array(e),r,i)}return(0,g.Z)(n)}(Ui),Qi=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){return(0,m.Z)(this,n),t.call(this,new Uint8ClampedArray(e),r,i)}return(0,g.Z)(n)}(Ui),Zi=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){return(0,m.Z)(this,n),t.call(this,new Int16Array(e),r,i)}return(0,g.Z)(n)}(Ui),Hi=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){return(0,m.Z)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,g.Z)(n)}(Ui),ji=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){return(0,m.Z)(this,n),t.call(this,new Int32Array(e),r,i)}return(0,g.Z)(n)}(Ui),Vi=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){return(0,m.Z)(this,n),t.call(this,new Uint32Array(e),r,i)}return(0,g.Z)(n)}(Ui),Wi=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a;return(0,m.Z)(this,n),(a=t.call(this,new Uint16Array(e),r,i)).isFloat16BufferAttribute=!0,a}return(0,g.Z)(n)}(Ui),Xi=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){return(0,m.Z)(this,n),t.call(this,new Float32Array(e),r,i)}return(0,g.Z)(n)}(Ui),Yi=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){return(0,m.Z)(this,n),t.call(this,new Float64Array(e),r,i)}return(0,g.Z)(n)}(Ui),Ki=0,Ji=new Jr,qi=new _i,$i=new xr,ea=new Sr,ta=new Sr,na=new xr,ra=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty((0,f.Z)(e),"id",{value:Ki++}),e.uuid=Dn(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,g.Z)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(Vn(e)?Vi:Hi)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new jn).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return Ji.makeRotationFromQuaternion(e),this.applyMatrix4(Ji),this}},{key:"rotateX",value:function(e){return Ji.makeRotationX(e),this.applyMatrix4(Ji),this}},{key:"rotateY",value:function(e){return Ji.makeRotationY(e),this.applyMatrix4(Ji),this}},{key:"rotateZ",value:function(e){return Ji.makeRotationZ(e),this.applyMatrix4(Ji),this}},{key:"translate",value:function(e,t,n){return Ji.makeTranslation(e,t,n),this.applyMatrix4(Ji),this}},{key:"scale",value:function(e,t,n){return Ji.makeScale(e,t,n),this.applyMatrix4(Ji),this}},{key:"lookAt",value:function(e){return qi.lookAt(e),qi.updateMatrix(),this.applyMatrix4(qi.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter($i).negate(),this.translate($i.x,$i.y,$i.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Xi(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Sr);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new xr(-1/0,-1/0,-1/0),new xr(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];ea.setFromBufferAttribute(i),this.morphTargetsRelative?(na.addVectors(this.boundingBox.min,ea.min),this.boundingBox.expandByPoint(na),na.addVectors(this.boundingBox.max,ea.max),this.boundingBox.expandByPoint(na)):(this.boundingBox.expandByPoint(ea.min),this.boundingBox.expandByPoint(ea.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Qr);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new xr,1/0);if(e){var n=this.boundingSphere.center;if(ea.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];ta.setFromBufferAttribute(a),this.morphTargetsRelative?(na.addVectors(ea.min,ta.min),ea.expandByPoint(na),na.addVectors(ea.max,ta.max),ea.expandByPoint(na)):(ea.expandByPoint(ta.min),ea.expandByPoint(ta.max))}ea.getCenter(n);for(var o=0,s=0,l=e.count;s<l;s++)na.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(na));if(t)for(var u=0,c=t.length;u<c;u++)for(var f=t[u],d=this.morphTargetsRelative,h=0,p=f.count;h<p;h++)na.fromBufferAttribute(f,h),d&&($i.fromBufferAttribute(e,h),na.add($i)),o=Math.max(o,n.distanceToSquared(na));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ui(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,l=[],u=[],c=0;c<o;c++)l[c]=new xr,u[c]=new xr;var f=new xr,d=new xr,h=new xr,p=new Hn,v=new Hn,m=new Hn,g=new xr,y=new xr,A=this.groups;0===A.length&&(A=[{start:0,count:n.length}]);for(var b=0,x=A.length;b<x;++b)for(var _=A[b],w=_.start,S=w,E=w+_.count;S<E;S+=3)N(n[S+0],n[S+1],n[S+2]);for(var C=new xr,T=new xr,M=new xr,I=new xr,k=0,B=A.length;k<B;++k)for(var R=A[k],P=R.start,D=P,L=P+R.count;D<L;D+=3)F(n[D+0]),F(n[D+1]),F(n[D+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function N(e,t,n){f.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(f),h.sub(f),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-v.y).multiplyScalar(i),y.copy(h).multiplyScalar(v.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(y),u[t].add(y),u[n].add(y))}function F(e){M.fromArray(i,3*e),I.copy(M);var t=l[e];C.copy(t),C.sub(M.multiplyScalar(M.dot(t))).normalize(),T.crossVectors(I,t);var n=T.dot(u[e])<0?-1:1;s[4*e]=C.x,s[4*e+1]=C.y,s[4*e+2]=C.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new Ui(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new xr,o=new xr,s=new xr,l=new xr,u=new xr,c=new xr,f=new xr,d=new xr;if(e)for(var h=0,p=e.count;h<p;h+=3){var v=e.getX(h+0),m=e.getX(h+1),g=e.getX(h+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),f.subVectors(s,o),d.subVectors(a,o),f.cross(d),l.fromBufferAttribute(n,v),u.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),l.add(f),u.add(f),c.add(f),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,A=t.count;y<A;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),f.subVectors(s,o),d.subVectors(a,o),f.cross(d),n.setXYZ(y+0,f.x,f.y,f.z),n.setXYZ(y+1,f.x,f.y,f.z),n.setXYZ(y+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)na.fromBufferAttribute(e,t),na.normalize(),e.setXYZ(t,na.x,na.y,na.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,l=0,u=t.length;l<u;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new Ui(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var l in s){for(var u=[],c=s[l],f=0,d=c.length;f<d;f++){var h=e(c[f],r);u.push(h)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},l=!1;for(var u in this.morphAttributes){for(var c=this.morphAttributes[u],f=[],d=0,h=c.length;d<h;d++){var p=c[d];f.push(p.toJSON(e.data))}f.length>0&&(s[u]=f,l=!0)}l&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var l=[],u=o[s],c=0,f=u.length;c<f;c++)l.push(u[c].clone(t));this.morphAttributes[s]=l}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,h=0,p=d.length;h<p;h++){var v=d[h];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(In),ia=new Jr,aa=new Kr,oa=new Qr,sa=new xr,la=new xr,ua=new xr,ca=new xr,fa=new xr,da=new xr,ha=new xr,pa=new xr,va=new xr,ma=new Hn,ga=new Hn,ya=new Hn,Aa=new xr,ba=new xr,xa=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ra,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ni;return(0,m.Z)(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,g.Z)(n,[{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r&&(null===n.boundingSphere&&n.computeBoundingSphere(),oa.copy(n.boundingSphere),oa.applyMatrix4(i),!1!==e.ray.intersectsSphere(oa)&&(ia.copy(i).invert(),aa.copy(e.ray).applyMatrix4(ia),null===n.boundingBox||!1!==aa.intersectsBox(n.boundingBox)))){var a,o=n.index,s=n.attributes.position,l=n.morphAttributes.position,u=n.morphTargetsRelative,c=n.attributes.uv,f=n.attributes.uv2,d=n.groups,h=n.drawRange;if(null!==o)if(Array.isArray(r))for(var p=0,v=d.length;p<v;p++)for(var m=d[p],g=r[m.materialIndex],y=Math.max(m.start,h.start),A=Math.min(o.count,Math.min(m.start+m.count,h.start+h.count));y<A;y+=3){var b=o.getX(y),x=o.getX(y+1),_=o.getX(y+2);(a=_a(this,g,e,aa,s,l,u,c,f,b,x,_))&&(a.faceIndex=Math.floor(y/3),a.face.materialIndex=m.materialIndex,t.push(a))}else for(var w=Math.max(0,h.start),S=Math.min(o.count,h.start+h.count);w<S;w+=3){var E=o.getX(w),C=o.getX(w+1),T=o.getX(w+2);(a=_a(this,r,e,aa,s,l,u,c,f,E,C,T))&&(a.faceIndex=Math.floor(w/3),t.push(a))}else if(void 0!==s)if(Array.isArray(r))for(var M=0,I=d.length;M<I;M++)for(var k=d[M],B=r[k.materialIndex],R=Math.max(k.start,h.start),P=Math.min(s.count,Math.min(k.start+k.count,h.start+h.count));R<P;R+=3){(a=_a(this,B,e,aa,s,l,u,c,f,R,R+1,R+2))&&(a.faceIndex=Math.floor(R/3),a.face.materialIndex=k.materialIndex,t.push(a))}else for(var D=Math.max(0,h.start),L=Math.min(s.count,h.start+h.count);D<L;D+=3){(a=_a(this,r,e,aa,s,l,u,c,f,D,D+1,D+2))&&(a.faceIndex=Math.floor(D/3),t.push(a))}}}}]),n}(_i);function _a(e,t,n,r,i,a,o,s,l,u,c,f){sa.fromBufferAttribute(i,u),la.fromBufferAttribute(i,c),ua.fromBufferAttribute(i,f);var d=e.morphTargetInfluences;if(a&&d){ha.set(0,0,0),pa.set(0,0,0),va.set(0,0,0);for(var h=0,p=a.length;h<p;h++){var v=d[h],m=a[h];0!==v&&(ca.fromBufferAttribute(m,u),fa.fromBufferAttribute(m,c),da.fromBufferAttribute(m,f),o?(ha.addScaledVector(ca,v),pa.addScaledVector(fa,v),va.addScaledVector(da,v)):(ha.addScaledVector(ca.sub(sa),v),pa.addScaledVector(fa.sub(la),v),va.addScaledVector(da.sub(ua),v)))}sa.add(ha),la.add(pa),ua.add(va)}e.isSkinnedMesh&&(e.boneTransform(u,sa),e.boneTransform(c,la),e.boneTransform(f,ua));var g=function(e,t,n,r,i,a,o,s){if(null===(t.side===k?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side!==B,s)))return null;ba.copy(s),ba.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(ba);return l<n.near||l>n.far?null:{distance:l,point:ba.clone(),object:e}}(e,t,n,r,sa,la,ua,Aa);if(g){s&&(ma.fromBufferAttribute(s,u),ga.fromBufferAttribute(s,c),ya.fromBufferAttribute(s,f),g.uv=Pi.getUV(Aa,sa,la,ua,ma,ga,ya,new Hn)),l&&(ma.fromBufferAttribute(l,u),ga.fromBufferAttribute(l,c),ya.fromBufferAttribute(l,f),g.uv2=Pi.getUV(Aa,sa,la,ua,ma,ga,ya,new Hn));var y={a:u,b:c,c:f,normal:new xr,materialIndex:0};Pi.getNormal(sa,la,ua,y.normal),g.face=y}return g}var wa=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,m.Z)(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:l};var u=(0,f.Z)(e);o=Math.floor(o),s=Math.floor(s),l=Math.floor(l);var c=[],d=[],h=[],p=[],v=0,g=0;function y(e,t,n,r,i,a,o,s,l,f,m){for(var y=a/l,A=o/f,b=a/2,x=o/2,_=s/2,w=l+1,S=f+1,E=0,C=0,T=new xr,M=0;M<S;M++)for(var I=M*A-x,k=0;k<w;k++){var B=k*y-b;T[e]=B*r,T[t]=I*i,T[n]=_,d.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=s>0?1:-1,h.push(T.x,T.y,T.z),p.push(k/l),p.push(1-M/f),E+=1}for(var R=0;R<f;R++)for(var P=0;P<l;P++){var D=v+P+w*R,L=v+P+w*(R+1),N=v+(P+1)+w*(R+1),F=v+(P+1)+w*R;c.push(D,L,F),c.push(L,N,F),C+=6}u.addGroup(g,C,m),g+=C,v+=E}return y("z","y","x",-1,-1,a,i,r,l,s,0),y("z","y","x",1,-1,a,i,-r,l,s,1),y("x","z","y",1,1,r,a,i,o,l,2),y("x","z","y",1,-1,r,a,-i,o,l,3),y("x","y","z",1,-1,r,i,a,o,s,4),y("x","y","z",-1,-1,r,i,-a,o,s,5),e.setIndex(c),e.setAttribute("position",new Xi(d,3)),e.setAttribute("normal",new Xi(h,3)),e.setAttribute("uv",new Xi(p,2)),e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(ra);function Sa(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function Ea(e){for(var t={},n=0;n<e.length;n++){var r=Sa(e[n]);for(var i in r)t[i]=r[i]}return t}var Ca={clone:Sa,merge:Ea},Ta=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isShaderMaterial=!0,r.type="ShaderMaterial",r.defines={},r.uniforms={},r.uniformsGroups=[],r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Sa(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(Li),Ma=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new Jr,e.projectionMatrix=new Jr,e.projectionMatrixInverse=new Jr,e}return(0,g.Z)(n,[{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){(0,u.Z)((0,c.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){(0,u.Z)((0,c.Z)(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(_i),Ia=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,m.Z)(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,g.Z)(n,[{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Pn*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Rn*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Pn*Math.atan(Math.tan(.5*Rn*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Rn*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Ma),ka=90,Ba=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a;(0,m.Z)(this,n),(a=t.call(this)).type="CubeCamera",a.renderTarget=i;var o=new Ia(ka,1,e,r);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new xr(1,0,0)),a.add(o);var s=new Ia(ka,1,e,r);s.layers=a.layers,s.up.set(0,-1,0),s.lookAt(new xr(-1,0,0)),a.add(s);var l=new Ia(ka,1,e,r);l.layers=a.layers,l.up.set(0,0,1),l.lookAt(new xr(0,1,0)),a.add(l);var u=new Ia(ka,1,e,r);u.layers=a.layers,u.up.set(0,0,-1),u.lookAt(new xr(0,-1,0)),a.add(u);var c=new Ia(ka,1,e,r);c.layers=a.layers,c.up.set(0,-1,0),c.lookAt(new xr(0,0,1)),a.add(c);var f=new Ia(ka,1,e,r);return f.layers=a.layers,f.up.set(0,-1,0),f.lookAt(new xr(0,0,-1)),a.add(f),a}return(0,g.Z)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=(0,l.Z)(this.children,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],f=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=fe,e.xr.enabled=!1;var p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(f),e.toneMapping=d,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}]),n}(_i),Ra=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s,l,u,c,f){var d;return(0,m.Z)(this,n),e=void 0!==e?e:[],r=void 0!==r?r:ye,(d=t.call(this,e,r,i,a,o,s,l,u,c,f)).isCubeTexture=!0,d.flipY=!1,d}return(0,g.Z)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(dr),Pa=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,m.Z)(this,n),(e=t.call(this,r,r,i)).isWebGLCubeRenderTarget=!0;var a={width:r,height:r,depth:1},o=[a,a,a,a,a,a];return e.texture=new Ra(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,e.texture.minFilter=void 0!==i.minFilter?i.minFilter:Be,e}return(0,g.Z)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new wa(5,5,5),o=new Ta({name:"CubemapFromEquirect",uniforms:Sa(n),vertexShader:r,fragmentShader:i,side:k,blending:R});o.uniforms.tEquirect.value=t;var s=new xa(a,o),l=t.minFilter;return t.minFilter===De&&(t.minFilter=Be),new Ba(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(pr),Da=new xr,La=new xr,Na=new jn,Fa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xr(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.Z)(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return(0,g.Z)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=Da.subVectors(n,t).cross(La.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(Da),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Na.getNormalMatrix(e),r=this.coplanarPoint(Da).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Oa=new Qr,Ua=new xr,za=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fa,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fa,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Fa,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Fa,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Fa,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Fa;(0,m.Z)(this,e),this.planes=[t,n,r,i,a,o]}return(0,g.Z)(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],f=n[8],d=n[9],h=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,c-s,p-f,y-v).normalize(),t[1].setComponents(o+r,c+s,p+f,y+v).normalize(),t[2].setComponents(o+i,c+l,p+d,y+m).normalize(),t[3].setComponents(o-i,c-l,p-d,y-m).normalize(),t[4].setComponents(o-a,c-u,p-h,y-g).normalize(),t[5].setComponents(o+a,c+u,p+h,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Oa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Oa)}},{key:"intersectsSprite",value:function(e){return Oa.center.set(0,0,0),Oa.radius=.7071067811865476,Oa.applyMatrix4(e.matrixWorld),this.intersectsSphere(Oa)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Ua.x=r.normal.x>0?e.max.x:e.min.x,Ua.y=r.normal.y>0?e.max.y:e.min.y,Ua.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Ua)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function Ga(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Qa(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var i,a=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(r,s),e.bufferData(r,a,o),t.onUploadCallback(),a instanceof Float32Array)i=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");i=5131}else i=5123;else if(a instanceof Int16Array)i=5122;else if(a instanceof Uint32Array)i=5125;else if(a instanceof Int32Array)i=5124;else if(a instanceof Int8Array)i=5120;else if(a instanceof Uint8Array)i=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);i=5121}return{buffer:s,type:i,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,i),o.version=t.version)}}}}var Za=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,m.Z)(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,l=i/2,u=Math.floor(a),c=Math.floor(o),f=u+1,d=c+1,h=r/u,p=i/c,v=[],g=[],y=[],A=[],b=0;b<d;b++)for(var x=b*p-l,_=0;_<f;_++){var w=_*h-s;g.push(w,-x,0),y.push(0,0,1),A.push(_/u),A.push(1-b/c)}for(var S=0;S<c;S++)for(var E=0;E<u;E++){var C=E+f*S,T=E+f*(S+1),M=E+1+f*(S+1),I=E+1+f*S;v.push(C,T,I),v.push(T,M,I)}return e.setIndex(v),e.setAttribute("position",new Xi(g,3)),e.setAttribute("normal",new Xi(y,3)),e.setAttribute("uv",new Xi(A,2)),e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(ra),Ha={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ja={common:{diffuse:{value:new sr(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new jn},uv2Transform:{value:new jn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Hn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new sr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new sr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new jn}},sprite:{diffuse:{value:new sr(16777215)},opacity:{value:1},center:{value:new Hn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new jn}}},Va={basic:{uniforms:Ea([ja.common,ja.specularmap,ja.envmap,ja.aomap,ja.lightmap,ja.fog]),vertexShader:Ha.meshbasic_vert,fragmentShader:Ha.meshbasic_frag},lambert:{uniforms:Ea([ja.common,ja.specularmap,ja.envmap,ja.aomap,ja.lightmap,ja.emissivemap,ja.bumpmap,ja.normalmap,ja.displacementmap,ja.fog,ja.lights,{emissive:{value:new sr(0)}}]),vertexShader:Ha.meshlambert_vert,fragmentShader:Ha.meshlambert_frag},phong:{uniforms:Ea([ja.common,ja.specularmap,ja.envmap,ja.aomap,ja.lightmap,ja.emissivemap,ja.bumpmap,ja.normalmap,ja.displacementmap,ja.fog,ja.lights,{emissive:{value:new sr(0)},specular:{value:new sr(1118481)},shininess:{value:30}}]),vertexShader:Ha.meshphong_vert,fragmentShader:Ha.meshphong_frag},standard:{uniforms:Ea([ja.common,ja.envmap,ja.aomap,ja.lightmap,ja.emissivemap,ja.bumpmap,ja.normalmap,ja.displacementmap,ja.roughnessmap,ja.metalnessmap,ja.fog,ja.lights,{emissive:{value:new sr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ha.meshphysical_vert,fragmentShader:Ha.meshphysical_frag},toon:{uniforms:Ea([ja.common,ja.aomap,ja.lightmap,ja.emissivemap,ja.bumpmap,ja.normalmap,ja.displacementmap,ja.gradientmap,ja.fog,ja.lights,{emissive:{value:new sr(0)}}]),vertexShader:Ha.meshtoon_vert,fragmentShader:Ha.meshtoon_frag},matcap:{uniforms:Ea([ja.common,ja.bumpmap,ja.normalmap,ja.displacementmap,ja.fog,{matcap:{value:null}}]),vertexShader:Ha.meshmatcap_vert,fragmentShader:Ha.meshmatcap_frag},points:{uniforms:Ea([ja.points,ja.fog]),vertexShader:Ha.points_vert,fragmentShader:Ha.points_frag},dashed:{uniforms:Ea([ja.common,ja.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ha.linedashed_vert,fragmentShader:Ha.linedashed_frag},depth:{uniforms:Ea([ja.common,ja.displacementmap]),vertexShader:Ha.depth_vert,fragmentShader:Ha.depth_frag},normal:{uniforms:Ea([ja.common,ja.bumpmap,ja.normalmap,ja.displacementmap,{opacity:{value:1}}]),vertexShader:Ha.meshnormal_vert,fragmentShader:Ha.meshnormal_frag},sprite:{uniforms:Ea([ja.sprite,ja.fog]),vertexShader:Ha.sprite_vert,fragmentShader:Ha.sprite_frag},background:{uniforms:{uvTransform:{value:new jn},t2D:{value:null}},vertexShader:Ha.background_vert,fragmentShader:Ha.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:Ha.backgroundCube_vert,fragmentShader:Ha.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ha.cube_vert,fragmentShader:Ha.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ha.equirect_vert,fragmentShader:Ha.equirect_frag},distanceRGBA:{uniforms:Ea([ja.common,ja.displacementmap,{referencePosition:{value:new xr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ha.distanceRGBA_vert,fragmentShader:Ha.distanceRGBA_frag},shadow:{uniforms:Ea([ja.lights,ja.fog,{color:{value:new sr(0)},opacity:{value:1}}]),vertexShader:Ha.shadow_vert,fragmentShader:Ha.shadow_frag}};function Wa(e,t,n,r,i,a,o){var s,l,u=new sr(0),c=!0===a?0:1,f=null,d=0,h=null;function p(e,t){r.buffers.color.setClear(e.r,e.g,e.b,t,o)}return{getClearColor:function(){return u},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;u.set(e),p(u,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){p(u,c=e)},render:function(r,a){var o=!1,v=!0===a.isScene?a.background:null;v&&v.isTexture&&(v=(a.backgroundBlurriness>0?n:t).get(v));var m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(v=null),null===v?p(u,c):v&&v.isColor&&(p(v,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===_e)?(void 0===l&&((l=new xa(new wa(1,1,1),new Ta({name:"BackgroundCubeMaterial",uniforms:Sa(Va.backgroundCube.uniforms),vertexShader:Va.backgroundCube.vertexShader,fragmentShader:Va.backgroundCube.fragmentShader,side:k,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=v,l.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=a.backgroundBlurriness,f===v&&d===v.version&&h===e.toneMapping||(l.material.needsUpdate=!0,f=v,d=v.version,h=e.toneMapping),l.layers.enableAll(),r.unshift(l,l.geometry,l.material,0,0,null)):v&&v.isTexture&&(void 0===s&&((s=new xa(new Za(2,2),new Ta({name:"BackgroundMaterial",uniforms:Sa(Va.background.uniforms),vertexShader:Va.background.vertexShader,fragmentShader:Va.background.fragmentShader,side:I,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),s.material.uniforms.uvTransform.value.copy(v.matrix),f===v&&d===v.version&&h===e.toneMapping||(s.material.needsUpdate=!0,f=v,d=v.version,h=e.toneMapping),s.layers.enableAll(),r.unshift(s,s.geometry,s.material,0,0,null))}}}function Xa(e,t,n,r){var i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},l=h(null),u=l,c=!1;function f(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function h(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){for(var e=u.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function v(e){m(e,0)}function m(n,i){var a=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors;(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){for(var t=u.newAttributes,n=u.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function A(){b(),c=!0,u!==l&&f((u=l).object)}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,A,b){var x=!1;if(o){var _=function(t,n,i){var o=!0===i.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);var u=l[n.id];void 0===u&&(u={},l[n.id]=u);var c=u[o];void 0===c&&(c=h(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),u[o]=c);return c}(A,d,l);u!==_&&f((u=_).object),x=function(e,t,n,r){var i=u.attributes,a=t.attributes,o=0,s=n.getAttributes();for(var l in s){if(s[l].location>=0){var c=i[l],f=a[l];if(void 0===f&&("instanceMatrix"===l&&e.instanceMatrix&&(f=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(f=e.instanceColor)),void 0===c)return!0;if(c.attribute!==f)return!0;if(f&&c.data!==f.data)return!0;o++}}return u.attributesNum!==o||u.index!==r}(i,A,d,b),x&&function(e,t,n,r){var i={},a=t.attributes,o=0,s=n.getAttributes();for(var l in s){if(s[l].location>=0){var c=a[l];void 0===c&&("instanceMatrix"===l&&e.instanceMatrix&&(c=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(c=e.instanceColor));var f={};f.attribute=c,c&&c.data&&(f.data=c.data),i[l]=f,o++}}u.attributes=i,u.attributesNum=o,u.index=r}(i,A,d,b)}else{var w=!0===l.wireframe;u.geometry===A.id&&u.program===d.id&&u.wireframe===w||(u.geometry=A.id,u.program=d.id,u.wireframe=w,x=!0)}null!==b&&n.update(b,34963),(x||c)&&(c=!1,function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();var l=s.attributes,u=o.getAttributes(),c=a.defaultAttributeValues;for(var f in u){var d=u[f];if(d.location>=0){var h=l[f];if(void 0===h&&("instanceMatrix"===f&&i.instanceMatrix&&(h=i.instanceMatrix),"instanceColor"===f&&i.instanceColor&&(h=i.instanceColor)),void 0!==h){var A=h.normalized,b=h.itemSize,x=n.get(h);if(void 0===x)continue;var _=x.buffer,w=x.type,S=x.bytesPerElement;if(h.isInterleavedBufferAttribute){var E=h.data,C=E.stride,T=h.offset;if(E.isInstancedInterleavedBuffer){for(var M=0;M<d.locationSize;M++)m(d.location+M,E.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=E.meshPerAttribute*E.count)}else for(var I=0;I<d.locationSize;I++)v(d.location+I);e.bindBuffer(34962,_);for(var k=0;k<d.locationSize;k++)y(d.location+k,b/d.locationSize,w,A,C*S,(T+b/d.locationSize*k)*S)}else{if(h.isInstancedBufferAttribute){for(var B=0;B<d.locationSize;B++)m(d.location+B,h.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=h.meshPerAttribute*h.count)}else for(var R=0;R<d.locationSize;R++)v(d.location+R);e.bindBuffer(34962,_);for(var P=0;P<d.locationSize;P++)y(d.location+P,b/d.locationSize,w,A,b*S,b/d.locationSize*P*S)}}else if(void 0!==c){var D=c[f];if(void 0!==D)switch(D.length){case 2:e.vertexAttrib2fv(d.location,D);break;case 3:e.vertexAttrib3fv(d.location,D);break;case 4:e.vertexAttrib4fv(d.location,D);break;default:e.vertexAttrib1fv(d.location,D)}}}}g()}(i,l,d,A),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:A,resetDefaultState:b,dispose:function(){for(var e in A(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)d(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)d(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)d(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:p,enableAttribute:v,disableUnusedAttributes:g}}function Ya(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var l,u;if(a)l=e,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](i,r,o,s),n.update(o,i,s)}}}function Ka(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=a||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),f=e.getParameter(35660),d=e.getParameter(3379),h=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=f>0,A=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:A,floatVertexTextures:y&&A,maxSamples:a?e.getParameter(36183):0}}function Ja(e){var t=this,n=null,r=0,i=!1,a=!1,o=new Fa,s=new jn,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){var a=null!==e?e.length:0,u=null;if(0!==a){if(u=l.value,!0!==i||null===u){var c=r+4*a,f=n.matrixWorldInverse;s.getNormalMatrix(f),(null===u||u.length<c)&&(u=new Float32Array(c));for(var d=0,h=r;d!==a;++d,h+=4)o.copy(e[d]).applyMatrix4(f,s),o.normal.toArray(u,h),u[h+3]=o.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var o=0!==e.length||t||0!==r||i;return i=t,n=c(e,a,0),r=e.length,o},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,u()},this.setState=function(t,o,s){var f=t.clippingPlanes,d=t.clipIntersection,h=t.clipShadows,p=e.get(t);if(!i||null===f||0===f.length||a&&!h)a?c(null):u();else{var v=a?0:r,m=4*v,g=p.clippingState||null;l.value=g,g=c(f,o,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=v}}}function qa(e){var t=new WeakMap;function n(e,t){return t===be?e.mapping=ye:t===xe&&(e.mapping=Ae),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(a===be||a===xe){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=new Pa(o.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}Va.physical={uniforms:Ea([Va.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Hn(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new sr(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Hn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new sr(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new sr(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ha.meshphysical_vert,fragmentShader:Ha.meshphysical_frag};var $a=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,m.Z)(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=s,e.far=l,e.updateProjectionMatrix(),e}return(0,g.Z)(n,[{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=l*this.view.offsetX)+l*this.view.width,s=(o-=u*this.view.offsetY)-u*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Ma),eo=[.125,.215,.35,.446,.526,.582],to=20,no=new $a,ro=new sr,io=null,ao=(1+Math.sqrt(5))/2,oo=1/ao,so=[new xr(1,1,1),new xr(-1,1,1),new xr(1,1,-1),new xr(-1,1,-1),new xr(0,ao,oo),new xr(0,ao,-oo),new xr(oo,0,ao),new xr(-oo,0,ao),new xr(ao,oo,0),new xr(-ao,oo,0)],lo=function(){function e(t){(0,m.Z)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return(0,g.Z)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;io=this._renderer.getRenderTarget(),this._setSize(256);var i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=ho(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=fo(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(io),e.scissorTest=!1,co(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===ye||e.mapping===Ae?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),io=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Be,minFilter:Be,generateMipmaps:!1,type:Ze,format:Ye,encoding:jt,depthBuffer:!1},r=uo(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=uo(e,t,n);var i=this._lodMax,a=function(e){for(var t=[],n=[],r=[],i=e,a=e-4+1+eo.length,o=0;o<a;o++){var s=Math.pow(2,i);n.push(s);var l=1/s;o>e-4?l=eo[o-e+4-1]:0===o&&(l=0),r.push(l);for(var u=1/(s-2),c=-u,f=1+u,d=[c,c,f,c,f,f,c,c,f,f,c,f],h=6,p=6,v=3,m=2,g=1,y=new Float32Array(v*p*h),A=new Float32Array(m*p*h),b=new Float32Array(g*p*h),x=0;x<h;x++){var _=x%3*2/3-1,w=x>2?0:-1,S=[_,w,0,_+2/3,w,0,_+2/3,w+1,0,_,w,0,_+2/3,w+1,0,_,w+1,0];y.set(S,v*p*x),A.set(d,m*p*x);var E=[x,x,x,x,x,x];b.set(E,g*p*x)}var C=new ra;C.setAttribute("position",new Ui(y,v)),C.setAttribute("uv",new Ui(A,m)),C.setAttribute("faceIndex",new Ui(b,g)),t.push(C),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(i);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var r=new Float32Array(to),i=new xr(0,1,0),a=new Ta({name:"SphericalGaussianBlur",defines:{n:to,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:R,depthTest:!1,depthWrite:!1});return a}(i,e,t)}return r}},{key:"_compileMaterial",value:function(e){var t=new xa(this._lodPlanes[0],e);this._renderer.compile(t,no)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new Ia(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(ro),s.toneMapping=fe,s.autoClear=!1;var c=new Ni({name:"PMREM.Background",side:k,depthWrite:!1,depthTest:!1}),f=new xa(new wa,c),d=!1,h=e.background;h?h.isColor&&(c.color.copy(h),e.background=null,d=!0):(c.color.copy(ro),d=!0);for(var p=0;p<6;p++){var v=p%3;0===v?(i.up.set(0,a[p],0),i.lookAt(o[p],0,0)):1===v?(i.up.set(0,0,a[p]),i.lookAt(0,o[p],0)):(i.up.set(0,a[p],0),i.lookAt(0,0,o[p]));var m=this._cubeSize;co(r,v*m,p>2?m:0,m,m),s.setRenderTarget(r),d&&s.render(f,i),s.render(e,i)}f.geometry.dispose(),f.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=h}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===ye||e.mapping===Ae;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=ho()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=fo());var i=r?this._cubemapMaterial:this._equirectMaterial,a=new xa(this._lodPlanes[0],i);i.uniforms.envMap.value=e;var o=this._cubeSize;co(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,no)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<this._lodPlanes.length;r++){var i=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=so[(r-1)%so.length];this._blur(e,r-1,r,i,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var u=new xa(this._lodPlanes[r],l),c=l.uniforms,f=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*f):2*Math.PI/39,h=i/d,p=isFinite(i)?1+Math.floor(3*h):to;p>to&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(to));for(var v=[],m=0,g=0;g<to;++g){var y=g/h,A=Math.exp(-y*y/2);v.push(A),0===g?m+=A:g<p&&(m+=2*A)}for(var b=0;b<v.length;b++)v[b]=v[b]/m;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=v,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);var x=this._lodMax;c.dTheta.value=d,c.mipInt.value=x-n;var _=this._sizeLods[r];co(t,3*_*(r>x-4?r-x+4:0),4*(this._cubeSize-_),3*_,2*_),s.setRenderTarget(t),s.render(u,no)}}]),e}();function uo(e,t,n){var r=new pr(e,t,n);return r.texture.mapping=_e,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function co(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function fo(){return new Ta({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:R,depthTest:!1,depthWrite:!1})}function ho(){return new Ta({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:R,depthTest:!1,depthWrite:!1})}function po(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping,o=a===be||a===xe,s=a===ye||a===Ae;if(o||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;var l=t.get(i);return null===n&&(n=new lo(e)),l=o?n.fromEquirectangular(i,l):n.fromCubemap(i,l),t.set(i,l),l.texture}if(t.has(i))return t.get(i).texture;var u=i.image;if(o&&u&&u.height>0||s&&u&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(u)){null===n&&(n=new lo(e));var c=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,c),i.addEventListener("dispose",r),c.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function vo(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function mo(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);s.removeEventListener("dispose",o),delete i[s.id];var u=a.get(s);u&&(t.remove(u),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],f=s[l+1],d=s[l+2];n.push(c,f,f,d,d,c)}}else{var h=i.array;o=i.version;for(var p=0,v=h.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var A=new(Vn(n)?Vi:Hi)(n,1);A.version=o;var b=a.get(e);b&&t.remove(b),a.set(e,A)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,l=o.length;s<l;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function go(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,l,u){if(0!==u){var c,f;if(s)c=e,f="drawElementsInstanced";else if(f="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[f](i,l,a,r*o,u),n.update(l,i,u)}}}function yo(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Ao(e,t){return e[0]-t[0]}function bo(e,t){return Math.abs(t[1])-Math.abs(e[1])}function xo(e,t,n){for(var r={},i=new Float32Array(8),a=new WeakMap,o=new hr,s=[],l=0;l<8;l++)s[l]=[l,0];return{update:function(l,u,c,f){var d=l.morphTargetInfluences;if(!0===t.isWebGL2){var h=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==h?h.length:0,v=a.get(u);if(void 0===v||v.count!==p){void 0!==v&&v.texture.dispose();var m=void 0!==u.morphAttributes.position,g=void 0!==u.morphAttributes.normal,y=void 0!==u.morphAttributes.color,A=u.morphAttributes.position||[],b=u.morphAttributes.normal||[],x=u.morphAttributes.color||[],_=0;!0===m&&(_=1),!0===g&&(_=2),!0===y&&(_=3);var w=u.attributes.position.count*_,S=1;w>t.maxTextureSize&&(S=Math.ceil(w/t.maxTextureSize),w=t.maxTextureSize);var E=new Float32Array(w*S*4*p),C=new vr(E,w,S,p);C.type=Qe,C.needsUpdate=!0;for(var T=4*_,M=0;M<p;M++)for(var I=A[M],k=b[M],B=x[M],R=w*S*4*M,P=0;P<I.count;P++){var D=P*T;!0===m&&(o.fromBufferAttribute(I,P),E[R+D+0]=o.x,E[R+D+1]=o.y,E[R+D+2]=o.z,E[R+D+3]=0),!0===g&&(o.fromBufferAttribute(k,P),E[R+D+4]=o.x,E[R+D+5]=o.y,E[R+D+6]=o.z,E[R+D+7]=0),!0===y&&(o.fromBufferAttribute(B,P),E[R+D+8]=o.x,E[R+D+9]=o.y,E[R+D+10]=o.z,E[R+D+11]=4===B.itemSize?o.w:1)}v={count:p,texture:C,size:new Hn(w,S)},a.set(u,v),u.addEventListener("dispose",(function e(){C.dispose(),a.delete(u),u.removeEventListener("dispose",e)}))}for(var L=0,N=0;N<d.length;N++)L+=d[N];var F=u.morphTargetsRelative?1:1-L;f.getUniforms().setValue(e,"morphTargetBaseInfluence",F),f.getUniforms().setValue(e,"morphTargetInfluences",d),f.getUniforms().setValue(e,"morphTargetsTexture",v.texture,n),f.getUniforms().setValue(e,"morphTargetsTextureSize",v.size)}else{var O=void 0===d?0:d.length,U=r[u.id];if(void 0===U||U.length!==O){U=[];for(var z=0;z<O;z++)U[z]=[z,0];r[u.id]=U}for(var G=0;G<O;G++){var Q=U[G];Q[0]=G,Q[1]=d[G]}U.sort(bo);for(var Z=0;Z<8;Z++)Z<O&&U[Z][1]?(s[Z][0]=U[Z][0],s[Z][1]=U[Z][1]):(s[Z][0]=Number.MAX_SAFE_INTEGER,s[Z][1]=0);s.sort(Ao);for(var H=u.morphAttributes.position,j=u.morphAttributes.normal,V=0,W=0;W<8;W++){var X=s[W],Y=X[0],K=X[1];Y!==Number.MAX_SAFE_INTEGER&&K?(H&&u.getAttribute("morphTarget"+W)!==H[Y]&&u.setAttribute("morphTarget"+W,H[Y]),j&&u.getAttribute("morphNormal"+W)!==j[Y]&&u.setAttribute("morphNormal"+W,j[Y]),i[W]=K,V+=K):(H&&!0===u.hasAttribute("morphTarget"+W)&&u.deleteAttribute("morphTarget"+W),j&&!0===u.hasAttribute("morphNormal"+W)&&u.deleteAttribute("morphNormal"+W),i[W]=0)}var J=u.morphTargetsRelative?1:1-V;f.getUniforms().setValue(e,"morphTargetBaseInfluence",J),f.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function _o(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==o&&(t.update(l),i.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}var wo=new dr,So=new vr,Eo=new gr,Co=new Ra,To=[],Mo=[],Io=new Float32Array(16),ko=new Float32Array(9),Bo=new Float32Array(4);function Ro(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=To[i];if(void 0===a&&(a=new Float32Array(i),To[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Po(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Do(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Lo(e,t){var n=Mo[t];void 0===n&&(n=new Int32Array(t),Mo[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function No(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Fo(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Po(n,t))return;e.uniform2fv(this.addr,t),Do(n,t)}}function Oo(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Po(n,t))return;e.uniform3fv(this.addr,t),Do(n,t)}}function Uo(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Po(n,t))return;e.uniform4fv(this.addr,t),Do(n,t)}}function zo(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Po(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Do(n,t)}else{if(Po(n,r))return;Bo.set(r),e.uniformMatrix2fv(this.addr,!1,Bo),Do(n,r)}}function Go(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Po(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Do(n,t)}else{if(Po(n,r))return;ko.set(r),e.uniformMatrix3fv(this.addr,!1,ko),Do(n,r)}}function Qo(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Po(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Do(n,t)}else{if(Po(n,r))return;Io.set(r),e.uniformMatrix4fv(this.addr,!1,Io),Do(n,r)}}function Zo(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Ho(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Po(n,t))return;e.uniform2iv(this.addr,t),Do(n,t)}}function jo(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Po(n,t))return;e.uniform3iv(this.addr,t),Do(n,t)}}function Vo(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Po(n,t))return;e.uniform4iv(this.addr,t),Do(n,t)}}function Wo(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Xo(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Po(n,t))return;e.uniform2uiv(this.addr,t),Do(n,t)}}function Yo(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Po(n,t))return;e.uniform3uiv(this.addr,t),Do(n,t)}}function Ko(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Po(n,t))return;e.uniform4uiv(this.addr,t),Do(n,t)}}function Jo(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||wo,i)}function qo(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Eo,i)}function $o(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Co,i)}function es(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||So,i)}function ts(e,t){e.uniform1fv(this.addr,t)}function ns(e,t){var n=Ro(t,this.size,2);e.uniform2fv(this.addr,n)}function rs(e,t){var n=Ro(t,this.size,3);e.uniform3fv(this.addr,n)}function is(e,t){var n=Ro(t,this.size,4);e.uniform4fv(this.addr,n)}function as(e,t){var n=Ro(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function os(e,t){var n=Ro(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ss(e,t){var n=Ro(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function ls(e,t){e.uniform1iv(this.addr,t)}function us(e,t){e.uniform2iv(this.addr,t)}function cs(e,t){e.uniform3iv(this.addr,t)}function fs(e,t){e.uniform4iv(this.addr,t)}function ds(e,t){e.uniform1uiv(this.addr,t)}function hs(e,t){e.uniform2uiv(this.addr,t)}function ps(e,t){e.uniform3uiv(this.addr,t)}function vs(e,t){e.uniform4uiv(this.addr,t)}function ms(e,t,n){var r=this.cache,i=t.length,a=Lo(n,i);Po(r,a)||(e.uniform1iv(this.addr,a),Do(r,a));for(var o=0;o!==i;++o)n.setTexture2D(t[o]||wo,a[o])}function gs(e,t,n){var r=this.cache,i=t.length,a=Lo(n,i);Po(r,a)||(e.uniform1iv(this.addr,a),Do(r,a));for(var o=0;o!==i;++o)n.setTexture3D(t[o]||Eo,a[o])}function ys(e,t,n){var r=this.cache,i=t.length,a=Lo(n,i);Po(r,a)||(e.uniform1iv(this.addr,a),Do(r,a));for(var o=0;o!==i;++o)n.setTextureCube(t[o]||Co,a[o])}function As(e,t,n){var r=this.cache,i=t.length,a=Lo(n,i);Po(r,a)||(e.uniform1iv(this.addr,a),Do(r,a));for(var o=0;o!==i;++o)n.setTexture2DArray(t[o]||So,a[o])}var bs=(0,g.Z)((function e(t,n,r){(0,m.Z)(this,e),this.id=t,this.addr=r,this.cache=[],this.setValue=function(e){switch(e){case 5126:return No;case 35664:return Fo;case 35665:return Oo;case 35666:return Uo;case 35674:return zo;case 35675:return Go;case 35676:return Qo;case 5124:case 35670:return Zo;case 35667:case 35671:return Ho;case 35668:case 35672:return jo;case 35669:case 35673:return Vo;case 5125:return Wo;case 36294:return Xo;case 36295:return Yo;case 36296:return Ko;case 35678:case 36198:case 36298:case 36306:case 35682:return Jo;case 35679:case 36299:case 36307:return qo;case 35680:case 36300:case 36308:case 36293:return $o;case 36289:case 36303:case 36311:case 36292:return es}}(n.type)})),xs=(0,g.Z)((function e(t,n,r){(0,m.Z)(this,e),this.id=t,this.addr=r,this.cache=[],this.size=n.size,this.setValue=function(e){switch(e){case 5126:return ts;case 35664:return ns;case 35665:return rs;case 35666:return is;case 35674:return as;case 35675:return os;case 35676:return ss;case 5124:case 35670:return ls;case 35667:case 35671:return us;case 35668:case 35672:return cs;case 35669:case 35673:return fs;case 5125:return ds;case 36294:return hs;case 36295:return ps;case 36296:return vs;case 35678:case 36198:case 36298:case 36306:case 35682:return ms;case 35679:case 36299:case 36307:return gs;case 35680:case 36300:case 36308:case 36293:return ys;case 36289:case 36303:case 36311:case 36292:return As}}(n.type)})),_s=function(){function e(t){(0,m.Z)(this,e),this.id=t,this.seq=[],this.map={}}return(0,g.Z)(e,[{key:"setValue",value:function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}}}]),e}(),ws=/(\w+)(\])?(\[|\.)?/g;function Ss(e,t){e.seq.push(t),e.map[t.id]=t}function Es(e,t,n){var r=e.name,i=r.length;for(ws.lastIndex=0;;){var a=ws.exec(r),o=ws.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===i){Ss(n,void 0===u?new bs(s,e,t):new xs(s,e,t));break}var c=n.map[s];void 0===c&&Ss(n,c=new _s(s)),n=c}}var Cs=function(){function e(t,n){(0,m.Z)(this,e),this.seq=[],this.map={};for(var r=t.getProgramParameter(n,35718),i=0;i<r;++i){var a=t.getActiveUniform(n,i);Es(a,t.getUniformLocation(n,a.name),this)}}return(0,g.Z)(e,[{key:"setValue",value:function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)}},{key:"setOptional",value:function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)}}],[{key:"upload",value:function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n}}]),e}();function Ts(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var Ms=0;function Is(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";var a=/ERROR: 0:(\d+)/.exec(i);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){for(var n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length),o=i;o<a;o++){var s=o+1;r.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return r.join("\n")}(e.getShaderSource(t),o)}return i}function ks(e,t){var n=function(e){switch(e){case jt:return["Linear","( value )"];case Vt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Bs(e,t){var n;switch(t){case de:n="Linear";break;case he:n="Reinhard";break;case pe:n="OptimizedCineon";break;case ve:n="ACESFilmic";break;case me:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Rs(e){return""!==e}function Ps(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Ds(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Ls=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ns(e){return e.replace(Ls,Fs)}function Fs(e,t){var n=Ha[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ns(n)}var Os=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Us(e){return e.replace(Os,zs)}function zs(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Gs(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Qs(e,t,n,r){var i,a,o=e.getContext(),s=n.defines,l=n.vertexShader,u=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===C?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===T?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===M&&(t="SHADOWMAP_TYPE_VSM"),t}(n),f=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ye:case Ae:t="ENVMAP_TYPE_CUBE";break;case _e:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Ae&&(t="ENVMAP_MODE_REFRACTION");return t}(n),h=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case le:t="ENVMAP_BLENDING_MULTIPLY";break;case ue:t="ENVMAP_BLENDING_MIX";break;case ce:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Rs).join("\n")}(n),m=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[m].filter(Rs).join("\n")).length>0&&(i+="\n"),(a=[v,m].filter(Rs).join("\n")).length>0&&(a+="\n")):(i=[Gs(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Rs).join("\n"),a=[v,Gs(n),"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==fe?"#define TONE_MAPPING":"",n.toneMapping!==fe?Ha.tonemapping_pars_fragment:"",n.toneMapping!==fe?Bs("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ha.encodings_pars_fragment,ks("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Rs).join("\n")),l=Ds(l=Ps(l=Ns(l),n),n),u=Ds(u=Ps(u=Ns(u),n),n),l=Us(l),u=Us(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===Tn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Tn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var A,b,x=y+a+u,_=Ts(o,35633,y+i+l),w=Ts(o,35632,x);if(o.attachShader(g,_),o.attachShader(g,w),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var S=o.getProgramInfoLog(g).trim(),E=o.getShaderInfoLog(_).trim(),I=o.getShaderInfoLog(w).trim(),k=!0,B=!0;if(!1===o.getProgramParameter(g,35714)){k=!1;var R=Is(o,_,"vertex"),P=Is(o,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+S+"\n"+R+"\n"+P)}else""!==S?console.warn("THREE.WebGLProgram: Program Info Log:",S):""!==E&&""!==I||(B=!1);B&&(this.diagnostics={runnable:k,programLog:S,vertexShader:{log:E,prefix:i},fragmentShader:{log:I,prefix:a}})}return o.deleteShader(_),o.deleteShader(w),this.getUniforms=function(){return void 0===A&&(A=new Cs(o,g)),A},this.getAttributes=function(){return void 0===b&&(b=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,g)),b},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Ms++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=_,this.fragmentShader=w,this}var Zs=0,Hs=function(){function e(){(0,m.Z)(this,e),this.shaderCache=new Map,this.materialCache=new Map}return(0,g.Z)(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}},{key:"remove",value:function(e){var t,n=this.materialCache.get(e),r=(0,s.Z)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code)}}catch(a){r.e(a)}finally{r.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new js(e),t.set(e,n)),n}}]),e}(),js=(0,g.Z)((function e(t){(0,m.Z)(this,e),this.id=Zs++,this.code=t,this.usedTimes=0}));function Vs(e,t,n,r,i,a,o){var s=new li,l=new Hs,u=[],c=i.isWebGL2,f=i.logarithmicDepthBuffer,d=i.vertexTextures,h=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,s,u,v,m){var g=v.fog,y=m.geometry,A=a.isMeshStandardMaterial?v.environment:null,b=(a.isMeshStandardMaterial?n:t).get(a.envMap||A),x=b&&b.mapping===_e?b.image.height:null,_=p[a.type];null!==a.precision&&(h=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",h,"instead.");var w,S,E,C,T=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,M=void 0!==T?T.length:0,I=0;if(void 0!==y.morphAttributes.position&&(I=1),void 0!==y.morphAttributes.normal&&(I=2),void 0!==y.morphAttributes.color&&(I=3),_){var R=Va[_];w=R.vertexShader,S=R.fragmentShader}else w=a.vertexShader,S=a.fragmentShader,l.update(a),E=l.getVertexShaderID(a),C=l.getFragmentShaderID(a);var D=e.getRenderTarget(),L=a.alphaTest>0,N=a.clearcoat>0,F=a.iridescence>0;return{isWebGL2:c,shaderID:_,shaderName:a.type,vertexShader:w,fragmentShader:S,defines:a.defines,customVertexShaderID:E,customFragmentShaderID:C,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:h,instancing:!0===m.isInstancedMesh,instancingColor:!0===m.isInstancedMesh&&null!==m.instanceColor,supportsVertexTextures:d,outputEncoding:null===D?e.outputEncoding:!0===D.isXRRenderTarget?D.texture.encoding:jt,map:!!a.map,matcap:!!a.matcap,envMap:!!b,envMapMode:b&&b.mapping,envMapCubeUVHeight:x,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===Kt,tangentSpaceNormalMap:a.normalMapType===Yt,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===Vt,clearcoat:N,clearcoatMap:N&&!!a.clearcoatMap,clearcoatRoughnessMap:N&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:N&&!!a.clearcoatNormalMap,iridescence:F,iridescenceMap:F&&!!a.iridescenceMap,iridescenceThicknessMap:F&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&a.blending===P,alphaMap:!!a.alphaMap,alphaTest:L,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.iridescenceMap||!!a.iridescenceThicknessMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||!!a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap)&&!!a.displacementMap,fog:!!g,useFog:!0===a.fog,fogExp2:g&&g.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===m.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:M,morphTextureStride:I,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:fe,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===B,flipSided:a.side===k,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0);t.supportsVertexTextures&&s.enable(1);t.instancing&&s.enable(2);t.instancingColor&&s.enable(3);t.map&&s.enable(4);t.matcap&&s.enable(5);t.envMap&&s.enable(6);t.lightMap&&s.enable(7);t.aoMap&&s.enable(8);t.emissiveMap&&s.enable(9);t.bumpMap&&s.enable(10);t.normalMap&&s.enable(11);t.objectSpaceNormalMap&&s.enable(12);t.tangentSpaceNormalMap&&s.enable(13);t.clearcoat&&s.enable(14);t.clearcoatMap&&s.enable(15);t.clearcoatRoughnessMap&&s.enable(16);t.clearcoatNormalMap&&s.enable(17);t.iridescence&&s.enable(18);t.iridescenceMap&&s.enable(19);t.iridescenceThicknessMap&&s.enable(20);t.displacementMap&&s.enable(21);t.specularMap&&s.enable(22);t.roughnessMap&&s.enable(23);t.metalnessMap&&s.enable(24);t.gradientMap&&s.enable(25);t.alphaMap&&s.enable(26);t.alphaTest&&s.enable(27);t.vertexColors&&s.enable(28);t.vertexAlphas&&s.enable(29);t.vertexUvs&&s.enable(30);t.vertexTangents&&s.enable(31);t.uvsVertexOnly&&s.enable(32);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.skinning&&s.enable(4);t.morphTargets&&s.enable(5);t.morphNormals&&s.enable(6);t.morphColors&&s.enable(7);t.premultipliedAlpha&&s.enable(8);t.shadowMapEnabled&&s.enable(9);t.physicallyCorrectLights&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.specularIntensityMap&&s.enable(15);t.specularColorMap&&s.enable(16);t.transmission&&s.enable(17);t.transmissionMap&&s.enable(18);t.thicknessMap&&s.enable(19);t.sheen&&s.enable(20);t.sheenColorMap&&s.enable(21);t.sheenRoughnessMap&&s.enable(22);t.decodeVideoTexture&&s.enable(23);t.opaque&&s.enable(24);e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var r=Va[n];t=Ca.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,o=u.length;i<o;i++){var s=u[i];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new Qs(e,n,t,a),u.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function Ws(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Xs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ys(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ks(){var e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,o,s){var l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,l,u){var c=a(e,t,o,s,l,u);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)},unshift:function(e,t,o,s,l,u){var c=a(e,t,o,s,l,u);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(var n=t,r=e.length;n<r;n++){var i=e[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Xs),r.length>1&&r.sort(t||Ys),i.length>1&&i.sort(t||Ys)}}}function Js(){var e=new WeakMap;return{get:function(t,n){var r,i=e.get(t);return void 0===i?(r=new Ks,e.set(t,[r])):n>=i.length?(r=new Ks,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function qs(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new xr,color:new sr};break;case"SpotLight":n={position:new xr,direction:new xr,color:new sr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new xr,color:new sr,distance:0,decay:0};break;case"HemisphereLight":n={direction:new xr,skyColor:new sr,groundColor:new sr};break;case"RectAreaLight":n={color:new sr,position:new xr,halfWidth:new xr,halfHeight:new xr}}return e[t.id]=n,n}}}var $s=0;function el(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function tl(e,t){for(var n=new qs,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Hn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Hn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},a=0;a<9;a++)i.probe.push(new xr);var o=new xr,s=new Jr,l=new Jr;return{setup:function(a,o){for(var s=0,l=0,u=0,c=0;c<9;c++)i.probe[c].set(0,0,0);var f=0,d=0,h=0,p=0,v=0,m=0,g=0,y=0,A=0,b=0;a.sort(el);for(var x=!0!==o?Math.PI:1,_=0,w=a.length;_<w;_++){var S=a[_],E=S.color,C=S.intensity,T=S.distance,M=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)s+=E.r*C*x,l+=E.g*C*x,u+=E.b*C*x;else if(S.isLightProbe)for(var I=0;I<9;I++)i.probe[I].addScaledVector(S.sh.coefficients[I],C);else if(S.isDirectionalLight){var k=n.get(S);if(k.color.copy(S.color).multiplyScalar(S.intensity*x),S.castShadow){var B=S.shadow,R=r.get(S);R.shadowBias=B.bias,R.shadowNormalBias=B.normalBias,R.shadowRadius=B.radius,R.shadowMapSize=B.mapSize,i.directionalShadow[f]=R,i.directionalShadowMap[f]=M,i.directionalShadowMatrix[f]=S.shadow.matrix,m++}i.directional[f]=k,f++}else if(S.isSpotLight){var P=n.get(S);P.position.setFromMatrixPosition(S.matrixWorld),P.color.copy(E).multiplyScalar(C*x),P.distance=T,P.coneCos=Math.cos(S.angle),P.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),P.decay=S.decay,i.spot[h]=P;var D=S.shadow;if(S.map&&(i.spotLightMap[A]=S.map,A++,D.updateMatrices(S),S.castShadow&&b++),i.spotLightMatrix[h]=D.matrix,S.castShadow){var L=r.get(S);L.shadowBias=D.bias,L.shadowNormalBias=D.normalBias,L.shadowRadius=D.radius,L.shadowMapSize=D.mapSize,i.spotShadow[h]=L,i.spotShadowMap[h]=M,y++}h++}else if(S.isRectAreaLight){var N=n.get(S);N.color.copy(E).multiplyScalar(C),N.halfWidth.set(.5*S.width,0,0),N.halfHeight.set(0,.5*S.height,0),i.rectArea[p]=N,p++}else if(S.isPointLight){var F=n.get(S);if(F.color.copy(S.color).multiplyScalar(S.intensity*x),F.distance=S.distance,F.decay=S.decay,S.castShadow){var O=S.shadow,U=r.get(S);U.shadowBias=O.bias,U.shadowNormalBias=O.normalBias,U.shadowRadius=O.radius,U.shadowMapSize=O.mapSize,U.shadowCameraNear=O.camera.near,U.shadowCameraFar=O.camera.far,i.pointShadow[d]=U,i.pointShadowMap[d]=M,i.pointShadowMatrix[d]=S.shadow.matrix,g++}i.point[d]=F,d++}else if(S.isHemisphereLight){var z=n.get(S);z.skyColor.copy(S.color).multiplyScalar(C*x),z.groundColor.copy(S.groundColor).multiplyScalar(C*x),i.hemi[v]=z,v++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=ja.LTC_FLOAT_1,i.rectAreaLTC2=ja.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=ja.LTC_HALF_1,i.rectAreaLTC2=ja.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=u;var G=i.hash;G.directionalLength===f&&G.pointLength===d&&G.spotLength===h&&G.rectAreaLength===p&&G.hemiLength===v&&G.numDirectionalShadows===m&&G.numPointShadows===g&&G.numSpotShadows===y&&G.numSpotMaps===A||(i.directional.length=f,i.spot.length=h,i.rectArea.length=p,i.point.length=d,i.hemi.length=v,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=y+A-b,i.spotLightMap.length=A,i.numSpotLightShadowsWithMaps=b,G.directionalLength=f,G.pointLength=d,G.spotLength=h,G.rectAreaLength=p,G.hemiLength=v,G.numDirectionalShadows=m,G.numPointShadows=g,G.numSpotShadows=y,G.numSpotMaps=A,i.version=$s++)},setupView:function(e,t){for(var n=0,r=0,a=0,u=0,c=0,f=t.matrixWorldInverse,d=0,h=e.length;d<h;d++){var p=e[d];if(p.isDirectionalLight){var v=i.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(f),n++}else if(p.isSpotLight){var m=i.spot[a];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(f),m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(f),a++}else if(p.isRectAreaLight){var g=i.rectArea[u];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(f),l.identity(),s.copy(p.matrixWorld),s.premultiply(f),l.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(l),g.halfHeight.applyMatrix4(l),u++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(f),r++}else if(p.isHemisphereLight){var A=i.hemi[c];A.direction.setFromMatrixPosition(p.matrixWorld),A.direction.transformDirection(f),c++}}},state:i}}function nl(e,t){var n=new tl(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function rl(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=n.get(r);return void 0===o?(i=new nl(e,t),n.set(r,[i])):a>=o.length?(i=new nl(e,t),o.push(i)):i=o[a],i},dispose:function(){n=new WeakMap}}}var il=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isMeshDepthMaterial=!0,r.type="MeshDepthMaterial",r.depthPacking=Wt,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Li),al=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isMeshDistanceMaterial=!0,r.type="MeshDistanceMaterial",r.referencePosition=new xr,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Li),ol="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",sl="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function ll(e,t,n){var r=new za,i=new Hn,a=new Hn,o=new hr,s=new il({depthPacking:Xt}),l=new al,u={},c=n.maxTextureSize,f={0:k,1:I,2:B},d=new Ta({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Hn},radius:{value:4}},vertexShader:ol,fragmentShader:sl}),h=d.clone();h.defines.HORIZONTAL_PASS=1;var p=new ra;p.setAttribute("position",new Ui(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new xa(p,d),m=this;function g(n,r){var a=t.update(v);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,h.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,h.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new pr(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,d,v,null),h.uniforms.shadow_pass.value=n.mapPass.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,h,v,null)}function y(t,n,r,i,a,o){var c=null,d=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(c=void 0!==d?d:!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){var h=c.uuid,p=n.uuid,v=u[h];void 0===v&&(v={},u[h]=v);var m=v[p];void 0===m&&(m=c.clone(),v[p]=m),c=m}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=o===M?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:f[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=i,c.farDistance=a),c}function A(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===M)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,f=0,d=c.length;f<d;f++){var h=c[f],p=u[h.materialIndex];if(p&&p.visible){var v=y(n,p,o,a.near,a.far,s);e.renderBufferDirect(a,null,l,v,n,h)}}else if(u.visible){var m=y(n,u,o,a.near,a.far,s);e.renderBufferDirect(a,null,l,m,n,null)}}for(var g=n.children,b=0,x=g.length;b<x;b++)A(g[b],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=C,this.render=function(t,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var l=e.getRenderTarget(),u=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),d=e.state;d.setBlending(R),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var h=0,p=t.length;h<p;h++){var v=t[h],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var b=y.getFrameExtents();if(i.multiply(b),a.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/b.x),i.x=a.x*b.x,y.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/b.y),i.y=a.y*b.y,y.mapSize.y=a.y)),null===y.map){var x=this.type!==M?{minFilter:Ce,magFilter:Ce}:{};y.map=new pr(i.x,i.y,x),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var _=y.getViewportCount(),w=0;w<_;w++){var S=y.getViewport(w);o.set(a.x*S.x,a.y*S.y,a.x*S.z,a.y*S.w),d.viewport(o),y.updateMatrices(v,w),r=y.getFrustum(),A(n,s,y.camera,v,this.type)}!0!==y.isPointLightShadow&&this.type===M&&g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(l,u,f)}}}function ul(e,t,n){var r,i,a=n.isWebGL2;var o=new function(){var t=!1,n=new hr,r=null,i=new hr(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?Se(2929):Ee(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case ee:e.depthFunc(512);break;case te:e.depthFunc(519);break;case ne:e.depthFunc(513);break;case re:e.depthFunc(515);break;case ie:e.depthFunc(514);break;case ae:e.depthFunc(518);break;case oe:e.depthFunc(516);break;case se:e.depthFunc(517);break;default:e.depthFunc(515)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},l=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?Se(2960):Ee(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null}}},u=new WeakMap,c=new WeakMap,f={},d={},h=new WeakMap,v=[],m=null,g=!1,y=null,A=null,b=null,S=null,E=null,C=null,T=null,M=!1,I=null,le=null,ue=null,ce=null,fe=null,de=e.getParameter(35661),he=!1,pe=0,ve=e.getParameter(7938);-1!==ve.indexOf("WebGL")?(pe=parseFloat(/^WebGL (\d)/.exec(ve)[1]),he=pe>=1):-1!==ve.indexOf("OpenGL ES")&&(pe=parseFloat(/^OpenGL ES (\d)/.exec(ve)[1]),he=pe>=2);var me=null,ge={},ye=e.getParameter(3088),Ae=e.getParameter(2978),be=(new hr).fromArray(ye),xe=(new hr).fromArray(Ae);function _e(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var we={};function Se(t){!0!==f[t]&&(e.enable(t),f[t]=!0)}function Ee(t){!1!==f[t]&&(e.disable(t),f[t]=!1)}we[3553]=_e(3553,3553,1),we[34067]=_e(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),Se(2929),s.setFunc(re),ke(!1),Be(_),Se(2884),Ie(R);var Ce=(r={},(0,p.Z)(r,O,32774),(0,p.Z)(r,U,32778),(0,p.Z)(r,z,32779),r);if(a)Ce[G]=32775,Ce[Q]=32776;else{var Te=t.get("EXT_blend_minmax");null!==Te&&(Ce[G]=Te.MIN_EXT,Ce[Q]=Te.MAX_EXT)}var Me=(i={},(0,p.Z)(i,Z,0),(0,p.Z)(i,H,1),(0,p.Z)(i,j,768),(0,p.Z)(i,W,770),(0,p.Z)(i,$,776),(0,p.Z)(i,J,774),(0,p.Z)(i,Y,772),(0,p.Z)(i,V,769),(0,p.Z)(i,X,771),(0,p.Z)(i,q,775),(0,p.Z)(i,K,773),i);function Ie(t,n,r,i,a,o,s,l){if(t!==R){if(!1===g&&(Se(3042),g=!0),t===F)a=a||n,o=o||r,s=s||i,n===A&&a===E||(e.blendEquationSeparate(Ce[n],Ce[a]),A=n,E=a),r===b&&i===S&&o===C&&s===T||(e.blendFuncSeparate(Me[r],Me[i],Me[o],Me[s]),b=r,S=i,C=o,T=s),y=t,M=null;else if(t!==y||l!==M){if(A===O&&E===O||(e.blendEquation(32774),A=O,E=O),l)switch(t){case P:e.blendFuncSeparate(1,771,1,771);break;case D:e.blendFunc(1,1);break;case L:e.blendFuncSeparate(0,769,0,1);break;case N:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case P:e.blendFuncSeparate(770,771,1,771);break;case D:e.blendFunc(770,1);break;case L:e.blendFuncSeparate(0,769,0,1);break;case N:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}b=null,S=null,C=null,T=null,y=t,M=l}}else!0===g&&(Ee(3042),g=!1)}function ke(t){I!==t&&(t?e.frontFace(2304):e.frontFace(2305),I=t)}function Be(t){t!==x?(Se(2884),t!==le&&(t===_?e.cullFace(1029):t===w?e.cullFace(1028):e.cullFace(1032))):Ee(2884),le=t}function Re(t,n,r){t?(Se(32823),ce===n&&fe===r||(e.polygonOffset(n,r),ce=n,fe=r)):Ee(32823)}return{buffers:{color:o,depth:s,stencil:l},enable:Se,disable:Ee,bindFramebuffer:function(t,n){return d[t]!==n&&(e.bindFramebuffer(t,n),d[t]=n,a&&(36009===t&&(d[36160]=n),36160===t&&(d[36009]=n)),!0)},drawBuffers:function(r,i){var a=v,o=!1;if(r)if(void 0===(a=h.get(i))&&(a=[],h.set(i,a)),r.isWebGLMultipleRenderTargets){var s=r.texture;if(a.length!==s.length||36064!==a[0]){for(var l=0,u=s.length;l<u;l++)a[l]=36064+l;a.length=s.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return m!==t&&(e.useProgram(t),m=t,!0)},setBlending:Ie,setMaterial:function(e,t){e.side===B?Ee(2884):Se(2884);var n=e.side===k;t&&(n=!n),ke(n),e.blending===P&&!1===e.transparent?Ie(R):Ie(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var r=e.stencilWrite;l.setTest(r),r&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Re(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?Se(32926):Ee(32926)},setFlipSided:ke,setCullFace:Be,setLineWidth:function(t){t!==ue&&(he&&e.lineWidth(t),ue=t)},setPolygonOffset:Re,setScissorTest:function(e){e?Se(3089):Ee(3089)},activeTexture:function(t){void 0===t&&(t=33984+de-1),me!==t&&(e.activeTexture(t),me=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===me?33984+de-1:me);var i=ge[r];void 0===i&&(i={type:void 0,texture:void 0},ge[r]=i),i.type===t&&i.texture===n||(me!==r&&(e.activeTexture(r),me=r),e.bindTexture(t,n||we[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=ge[me];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){var r=c.get(n);void 0===r&&(r=new WeakMap,c.set(n,r));var i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){var r=c.get(n).get(t);u.get(t)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),u.set(t,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===be.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),be.copy(t))},viewport:function(t){!1===xe.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),xe.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),f={},me=null,ge={},d={},h=new WeakMap,v=[],m=null,g=!1,y=null,A=null,b=null,S=null,E=null,C=null,T=null,M=!1,I=null,le=null,ue=null,ce=null,fe=null,be.set(0,0,e.canvas.width,e.canvas.height),xe.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),l.reset()}}}function cl(e,t,n,r,i,a,o){var s,l,u,c=i.isWebGL2,f=i.maxTextures,d=i.maxCubemapSize,h=i.maxTextureSize,v=i.maxSamples,m=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,g=/OculusBrowser/g.test("undefined"===typeof navigator?"":navigator.userAgent),y=new WeakMap,A=new WeakMap,b=!1;try{b="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(j){}function x(e,t){return b?new OffscreenCanvas(e,t):Yn("canvas")}function _(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?zn:Math.floor,o=a(i*e.width),s=a(i*e.height);void 0===u&&(u=x(o,s));var l=n?x(o,s):u;return l.width=o,l.height=s,l.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function w(e){return On(e.width)&&On(e.height)}function S(e,t){return e.generateMipmaps&&t&&e.minFilter!==Ce&&e.minFilter!==Be}function E(t){e.generateMipmap(t)}function C(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),33319===r&&(5126===i&&(s=33328),5131===i&&(s=33327),5121===i&&(s=33323)),6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=a===Vt&&!1===o?35907:32856),32819===i&&(s=32854),32820===i&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function T(e,t,n){return!0===S(e,n)||e.isFramebufferTexture&&e.minFilter!==Ce&&e.minFilter!==Be?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function M(e){return e===Ce||e===Te||e===Ie?9728:9729}function I(e){var t=e.target;t.removeEventListener("dispose",I),function(e){var t=r.get(e);if(void 0===t.__webglInit)return;var n=e.source,i=A.get(n);if(i){var a=i[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&B(e),0===Object.keys(i).length&&A.delete(n)}r.remove(e)}(t),t.isVideoTexture&&y.delete(t)}function k(t){var n=t.target;n.removeEventListener("dispose",k),function(t){var n=t.texture,i=r.get(t),a=r.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(var l=0;l<i.__webglColorRenderbuffer.length;l++)i.__webglColorRenderbuffer[l]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[l]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var u=0,c=n.length;u<c;u++){var f=r.get(n[u]);f.__webglTexture&&(e.deleteTexture(f.__webglTexture),o.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(t)}(n)}function B(t){var n=r.get(t);e.deleteTexture(n.__webglTexture);var i=t.source;delete A.get(i)[n.__cacheKey],o.memory.textures--}var R=0;function P(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;y.get(e)!==t&&(y.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){var a=e.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void O(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,i.__webglTexture,33984+t)}var D=(s={},(0,p.Z)(s,we,10497),(0,p.Z)(s,Se,33071),(0,p.Z)(s,Ee,33648),s),L=(l={},(0,p.Z)(l,Ce,9728),(0,p.Z)(l,Te,9984),(0,p.Z)(l,Ie,9986),(0,p.Z)(l,Be,9729),(0,p.Z)(l,Re,9985),(0,p.Z)(l,De,9987),l);function N(n,a,o){if(o?(e.texParameteri(n,10242,D[a.wrapS]),e.texParameteri(n,10243,D[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,D[a.wrapR]),e.texParameteri(n,10240,L[a.magFilter]),e.texParameteri(n,10241,L[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Se&&a.wrapT===Se||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,M(a.magFilter)),e.texParameteri(n,10241,M(a.minFilter)),a.minFilter!==Ce&&a.minFilter!==Be&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.type===Qe&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&a.type===Ze&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function F(t,n){var r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",I));var i=n.source,a=A.get(i);void 0===a&&(a={},A.set(i,a));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;var l=a[t.__cacheKey];void 0!==l&&(a[t.__cacheKey].usedTimes--,0===l.usedTimes&&B(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function O(t,i,o){var s=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(s=35866),i.isData3DTexture&&(s=32879);var l=F(t,i),u=i.source;n.bindTexture(s,t.__webglTexture,33984+o);var f=r.get(u);if(u.version!==f.__version||!0===l){n.activeTexture(33984+o),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);var d,p=function(e){return!c&&(e.wrapS!==Se||e.wrapT!==Se||e.minFilter!==Ce&&e.minFilter!==Be)}(i)&&!1===w(i.image),v=_(i.image,p,!1,h),m=w(v=H(i,v))||c,g=a.convert(i.format,i.encoding),y=a.convert(i.type),A=C(i.internalFormat,g,y,i.encoding,i.isVideoTexture);N(s,i,m);var b=i.mipmaps,x=c&&!0!==i.isVideoTexture,M=void 0===f.__version||!0===l,I=T(i,v,m);if(i.isDepthTexture)A=6402,c?A=i.type===Qe?36012:i.type===Ge?33190:i.type===Ve?35056:33189:i.type===Qe&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===qe&&6402===A&&i.type!==Ue&&i.type!==Ge&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Ge,y=a.convert(i.type)),i.format===$e&&6402===A&&(A=34041,i.type!==Ve&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Ve,y=a.convert(i.type))),M&&(x?n.texStorage2D(3553,1,A,v.width,v.height):n.texImage2D(3553,0,A,v.width,v.height,0,g,y,null));else if(i.isDataTexture)if(b.length>0&&m){x&&M&&n.texStorage2D(3553,I,A,b[0].width,b[0].height);for(var k=0,B=b.length;k<B;k++)d=b[k],x?n.texSubImage2D(3553,k,0,0,d.width,d.height,g,y,d.data):n.texImage2D(3553,k,A,d.width,d.height,0,g,y,d.data);i.generateMipmaps=!1}else x?(M&&n.texStorage2D(3553,I,A,v.width,v.height),n.texSubImage2D(3553,0,0,0,v.width,v.height,g,y,v.data)):n.texImage2D(3553,0,A,v.width,v.height,0,g,y,v.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){x&&M&&n.texStorage3D(35866,I,A,b[0].width,b[0].height,v.depth);for(var R=0,P=b.length;R<P;R++)d=b[R],i.format!==Ye?null!==g?x?n.compressedTexSubImage3D(35866,R,0,0,0,d.width,d.height,v.depth,g,d.data,0,0):n.compressedTexImage3D(35866,R,A,d.width,d.height,v.depth,0,d.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):x?n.texSubImage3D(35866,R,0,0,0,d.width,d.height,v.depth,g,y,d.data):n.texImage3D(35866,R,A,d.width,d.height,v.depth,0,g,y,d.data)}else{x&&M&&n.texStorage2D(3553,I,A,b[0].width,b[0].height);for(var D=0,L=b.length;D<L;D++)d=b[D],i.format!==Ye?null!==g?x?n.compressedTexSubImage2D(3553,D,0,0,d.width,d.height,g,d.data):n.compressedTexImage2D(3553,D,A,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):x?n.texSubImage2D(3553,D,0,0,d.width,d.height,g,y,d.data):n.texImage2D(3553,D,A,d.width,d.height,0,g,y,d.data)}else if(i.isDataArrayTexture)x?(M&&n.texStorage3D(35866,I,A,v.width,v.height,v.depth),n.texSubImage3D(35866,0,0,0,0,v.width,v.height,v.depth,g,y,v.data)):n.texImage3D(35866,0,A,v.width,v.height,v.depth,0,g,y,v.data);else if(i.isData3DTexture)x?(M&&n.texStorage3D(32879,I,A,v.width,v.height,v.depth),n.texSubImage3D(32879,0,0,0,0,v.width,v.height,v.depth,g,y,v.data)):n.texImage3D(32879,0,A,v.width,v.height,v.depth,0,g,y,v.data);else if(i.isFramebufferTexture){if(M)if(x)n.texStorage2D(3553,I,A,v.width,v.height);else for(var O=v.width,U=v.height,z=0;z<I;z++)n.texImage2D(3553,z,A,O,U,0,g,y,null),O>>=1,U>>=1}else if(b.length>0&&m){x&&M&&n.texStorage2D(3553,I,A,b[0].width,b[0].height);for(var G=0,Q=b.length;G<Q;G++)d=b[G],x?n.texSubImage2D(3553,G,0,0,g,y,d):n.texImage2D(3553,G,A,g,y,d);i.generateMipmaps=!1}else x?(M&&n.texStorage2D(3553,I,A,v.width,v.height),n.texSubImage2D(3553,0,0,0,g,y,v)):n.texImage2D(3553,0,A,g,y,v);S(i,m)&&E(s),f.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function U(t,i,o,s,l){var u=a.convert(o.format,o.encoding),c=a.convert(o.type),f=C(o.internalFormat,u,c,o.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,f,i.width,i.height,i.depth,0,u,c,null):n.texImage2D(l,0,f,i.width,i.height,0,u,c,null)),n.bindFramebuffer(36160,t),Z(i)?m.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(o).__webglTexture,0,Q(i)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,s,l,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function z(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r||Z(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===Qe?i=36012:o.type===Ge&&(i=33190));var s=Q(n);Z(n)?m.renderbufferStorageMultisampleEXT(36161,s,i,n.width,n.height):e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var l=Q(n);r&&!1===Z(n)?e.renderbufferStorageMultisample(36161,l,35056,n.width,n.height):Z(n)?m.renderbufferStorageMultisampleEXT(36161,l,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var u=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],c=0;c<u.length;c++){var f=u[c],d=a.convert(f.format,f.encoding),h=a.convert(f.type),p=C(f.internalFormat,d,h,f.encoding),v=Q(n);r&&!1===Z(n)?e.renderbufferStorageMultisample(36161,v,p,n.width,n.height):Z(n)?m.renderbufferStorageMultisampleEXT(36161,v,p,n.width,n.height):e.renderbufferStorage(36161,p,n.width,n.height)}e.bindRenderbuffer(36161,null)}function G(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),P(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture,o=Q(i);if(i.depthTexture.format===qe)Z(i)?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,o):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==$e)throw new Error("Unknown depthTexture format");Z(i)?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,o):e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),z(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),z(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function Q(e){return Math.min(v,e.samples)}function Z(e){var n=r.get(e);return c&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(e,n){var r=e.encoding,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Mn||r!==jt&&(r===Vt?!1===c?!0===t.has("EXT_sRGB")&&i===Ye?(e.format=Mn,e.minFilter=Be,e.generateMipmaps=!1):n=lr.sRGBToLinear(n):i===Ye&&a===Ne||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){var e=R;return e>=f&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+f),R+=1,e},this.resetTextureUnits=function(){R=0},this.setTexture2D=P,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?O(i,e,t):n.bindTexture(35866,i.__webglTexture,33984+t)},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?O(i,e,t):n.bindTexture(32879,i.__webglTexture,33984+t)},this.setTextureCube=function(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,i,o){if(6!==i.image.length)return;var s=F(t,i),l=i.source;n.bindTexture(34067,t.__webglTexture,33984+o);var u=r.get(l);if(l.version!==u.__version||!0===s){n.activeTexture(33984+o),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);for(var f=i.isCompressedTexture||i.image[0].isCompressedTexture,h=i.image[0]&&i.image[0].isDataTexture,p=[],v=0;v<6;v++)p[v]=f||h?h?i.image[v].image:i.image[v]:_(i.image[v],!1,!0,d),p[v]=H(i,p[v]);var m,g=p[0],y=w(g)||c,A=a.convert(i.format,i.encoding),b=a.convert(i.type),x=C(i.internalFormat,A,b,i.encoding),M=c&&!0!==i.isVideoTexture,I=void 0===u.__version||!0===s,k=T(i,g,y);if(N(34067,i,y),f){M&&I&&n.texStorage2D(34067,k,x,g.width,g.height);for(var B=0;B<6;B++){m=p[B].mipmaps;for(var R=0;R<m.length;R++){var P=m[R];i.format!==Ye?null!==A?M?n.compressedTexSubImage2D(34069+B,R,0,0,P.width,P.height,A,P.data):n.compressedTexImage2D(34069+B,R,x,P.width,P.height,0,P.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):M?n.texSubImage2D(34069+B,R,0,0,P.width,P.height,A,b,P.data):n.texImage2D(34069+B,R,x,P.width,P.height,0,A,b,P.data)}}}else{m=i.mipmaps,M&&I&&(m.length>0&&k++,n.texStorage2D(34067,k,x,p[0].width,p[0].height));for(var D=0;D<6;D++)if(h){M?n.texSubImage2D(34069+D,0,0,0,p[D].width,p[D].height,A,b,p[D].data):n.texImage2D(34069+D,0,x,p[D].width,p[D].height,0,A,b,p[D].data);for(var L=0;L<m.length;L++){var O=m[L].image[D].image;M?n.texSubImage2D(34069+D,L+1,0,0,O.width,O.height,A,b,O.data):n.texImage2D(34069+D,L+1,x,O.width,O.height,0,A,b,O.data)}}else{M?n.texSubImage2D(34069+D,0,0,0,A,b,p[D]):n.texImage2D(34069+D,0,x,A,b,p[D]);for(var U=0;U<m.length;U++){var z=m[U];M?n.texSubImage2D(34069+D,U+1,0,0,A,b,z.image[D]):n.texImage2D(34069+D,U+1,x,A,b,z.image[D])}}}S(i,y)&&E(34067),u.__version=l.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(o,t,i):n.bindTexture(34067,o.__webglTexture,33984+i)},this.rebindTextures=function(e,t,n){var i=r.get(e);void 0!==t&&U(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&G(e)},this.setupRenderTarget=function(t){var s=t.texture,l=r.get(t),u=r.get(s);t.addEventListener("dispose",k),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=s.version,o.memory.textures++);var f=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,h=w(t)||c;if(f){l.__webglFramebuffer=[];for(var p=0;p<6;p++)l.__webglFramebuffer[p]=e.createFramebuffer()}else{if(l.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers)for(var v=t.texture,m=0,g=v.length;m<g;m++){var y=r.get(v[m]);void 0===y.__webglTexture&&(y.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&t.samples>0&&!1===Z(t)){var A=d?s:[s];l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer);for(var b=0;b<A.length;b++){var x=A[b];l.__webglColorRenderbuffer[b]=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer[b]);var _=a.convert(x.format,x.encoding),T=a.convert(x.type),M=C(x.internalFormat,_,T,x.encoding,!0===t.isXRRenderTarget),I=Q(t);e.renderbufferStorageMultisample(36161,I,M,t.width,t.height),e.framebufferRenderbuffer(36160,36064+b,36161,l.__webglColorRenderbuffer[b])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),z(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(f){n.bindTexture(34067,u.__webglTexture),N(34067,s,h);for(var B=0;B<6;B++)U(l.__webglFramebuffer[B],t,s,36064,34069+B);S(s,h)&&E(34067),n.unbindTexture()}else if(d){for(var R=t.texture,P=0,D=R.length;P<D;P++){var L=R[P],F=r.get(L);n.bindTexture(3553,F.__webglTexture),N(3553,L,h),U(l.__webglFramebuffer,t,L,36064+P,3553),S(L,h)&&E(3553)}n.unbindTexture()}else{var O=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(c?O=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(O,u.__webglTexture),N(O,s,h),U(l.__webglFramebuffer,t,s,36064,O),S(s,h)&&E(O),n.unbindTexture()}t.depthBuffer&&G(t)},this.updateRenderTargetMipmap=function(e){for(var t=w(e)||c,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=i.length;a<o;a++){var s=i[a];if(S(s,t)){var l=e.isWebGLCubeRenderTarget?34067:3553,u=r.get(s).__webglTexture;n.bindTexture(l,u),E(l),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(c&&t.samples>0&&!1===Z(t)){var i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,s=16384,l=[],u=t.stencilBuffer?33306:36096,f=r.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(var h=0;h<i.length;h++)n.bindFramebuffer(36160,f.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+h,36161,null),n.bindFramebuffer(36160,f.__webglFramebuffer),e.framebufferTexture2D(36009,36064+h,3553,null,0);n.bindFramebuffer(36008,f.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,f.__webglFramebuffer);for(var p=0;p<i.length;p++){l.push(36064+p),t.depthBuffer&&l.push(u);var v=void 0!==f.__ignoreDepthValues&&f.__ignoreDepthValues;if(!1===v&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,f.__webglColorRenderbuffer[p]),!0===v&&(e.invalidateFramebuffer(36008,[u]),e.invalidateFramebuffer(36009,[u])),d){var m=r.get(i[p]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,m,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728),g&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(var y=0;y<i.length;y++){n.bindFramebuffer(36160,f.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+y,36161,f.__webglColorRenderbuffer[y]);var A=r.get(i[y]).__webglTexture;n.bindFramebuffer(36160,f.__webglFramebuffer),e.framebufferTexture2D(36009,36064+y,3553,A,0)}n.bindFramebuffer(36009,f.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=G,this.setupFrameBufferTexture=U,this.useMultisampledRTT=Z}function fl(e,t,n){var r=n.isWebGL2;return{convert:function(n){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===Ne)return 5121;if(n===He)return 32819;if(n===je)return 32820;if(n===Fe)return 5120;if(n===Oe)return 5122;if(n===Ue)return 5123;if(n===ze)return 5124;if(n===Ge)return 5125;if(n===Qe)return 5126;if(n===Ze)return r?5131:null!==(i=t.get("OES_texture_half_float"))?i.HALF_FLOAT_OES:null;if(n===We)return 6406;if(n===Ye)return 6408;if(n===Ke)return 6409;if(n===Je)return 6410;if(n===qe)return 6402;if(n===$e)return 34041;if(n===et)return 6403;if(n===Xe)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===Mn)return null!==(i=t.get("EXT_sRGB"))?i.SRGB_ALPHA_EXT:null;if(n===tt)return 36244;if(n===nt)return 33319;if(n===rt)return 33320;if(n===it)return 36249;if(n===at||n===ot||n===st||n===lt)if(a===Vt){if(null===(i=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===at)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===ot)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===st)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===lt)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(i=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===at)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ot)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===st)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===lt)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===ut||n===ct||n===ft||n===dt){if(null===(i=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===ut)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===ct)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ft)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===dt)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ht)return null!==(i=t.get("WEBGL_compressed_texture_etc1"))?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===pt||n===vt){if(null===(i=t.get("WEBGL_compressed_texture_etc")))return null;if(n===pt)return a===Vt?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===vt)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===mt||n===gt||n===yt||n===At||n===bt||n===xt||n===_t||n===wt||n===St||n===Et||n===Ct||n===Tt||n===Mt||n===It){if(null===(i=t.get("WEBGL_compressed_texture_astc")))return null;if(n===mt)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===gt)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===yt)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===At)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===bt)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===xt)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===_t)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===wt)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===St)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Et)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Ct)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Tt)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Mt)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===It)return a===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===kt){if(null===(i=t.get("EXT_texture_compression_bptc")))return null;if(n===kt)return a===Vt?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===Ve?r?34042:null!==(i=t.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}var dl=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,m.Z)(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=r,e}return(0,g.Z)(n)}(Ia),hl=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return(0,g.Z)(n)}(_i),pl={type:"move"},vl=function(){function e(){(0,m.Z)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,g.Z)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new hl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new hl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new xr,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new xr),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new hl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new xr,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new xr),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,l=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(u&&e.hand){a=!0;var c,f=(0,s.Z)(e.hand.values());try{for(f.s();!(c=f.n()).done;){var d=c.value,h=t.getJointPose(d,n);if(void 0===u.joints[d.jointName]){var p=new hl;p.matrixAutoUpdate=!1,p.visible=!1,u.joints[d.jointName]=p,u.add(p)}var v=u.joints[d.jointName];null!==h&&(v.matrix.fromArray(h.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=h.radius),v.visible=null!==h}}catch(A){f.e(A)}finally{f.f()}var m=u.joints["index-finger-tip"],g=u.joints["thumb-tip"],y=m.position.distanceTo(g.position);u.inputState.pinching&&y>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&y<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1);null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(pl)))}return null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==i),null!==u&&(u.visible=null!==a),this}}]),e}(),ml=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s,l,u,c,f){var d;if((0,m.Z)(this,n),(f=void 0!==f?f:qe)!==qe&&f!==$e)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&f===qe&&(i=Ge),void 0===i&&f===$e&&(i=Ve),(d=t.call(this,null,a,o,s,l,u,f,i,c)).isDepthTexture=!0,d.image={width:e,height:r},d.magFilter=void 0!==l?l:Ce,d.minFilter=void 0!==u?u:Ce,d.flipY=!1,d.generateMipmaps=!1,d}return(0,g.Z)(n)}(dr),gl=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;(0,m.Z)(this,n),i=t.call(this);var a=(0,f.Z)(i),s=null,l=1,u=null,c="local-floor",d=null,h=null,p=null,g=null,y=null,A=null,b=r.getContextAttributes(),x=null,_=null,w=[],S=[],E=new Ia;E.layers.enable(1),E.viewport=new hr;var C=new Ia;C.layers.enable(2),C.viewport=new hr;var T=[E,C],M=new dl;M.layers.enable(1),M.layers.enable(2);var I=null,k=null;function B(e){var t=S.indexOf(e.inputSource);if(-1!==t){var n=w[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function R(){s.removeEventListener("select",B),s.removeEventListener("selectstart",B),s.removeEventListener("selectend",B),s.removeEventListener("squeeze",B),s.removeEventListener("squeezestart",B),s.removeEventListener("squeezeend",B),s.removeEventListener("end",R),s.removeEventListener("inputsourceschange",P);for(var t=0;t<w.length;t++){var n=S[t];null!==n&&(S[t]=null,w[t].disconnect(n))}I=null,k=null,e.setRenderTarget(x),y=null,g=null,p=null,s=null,_=null,O.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function P(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],r=S.indexOf(n);r>=0&&(S[r]=null,w[r].dispatchEvent({type:"disconnected",data:n}))}for(var i=0;i<e.added.length;i++){var a=e.added[i],o=S.indexOf(a);if(-1===o){for(var s=0;s<w.length;s++){if(s>=S.length){S.push(a),o=s;break}if(null===S[s]){S[s]=a,o=s;break}}if(-1===o)break}var l=w[o];l&&l.dispatchEvent({type:"connected",data:a})}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=w[e];return void 0===t&&(t=new vl,w[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=w[e];return void 0===t&&(t=new vl,w[e]=t),t.getGripSpace()},i.getHand=function(e){var t=w[e];return void 0===t&&(t=new vl,w[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){l=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){c=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return d||u},i.setReferenceSpace=function(e){d=e},i.getBaseLayer=function(){return null!==g?g:y},i.getBinding=function(){return p},i.getFrame=function(){return A},i.getSession=function(){return s},i.setSession=function(){var t=(0,o.Z)((0,v.Z)().mark((function t(n){var i,o,f,h,m;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(s=n)){t.next=25;break}if(x=e.getRenderTarget(),s.addEventListener("select",B),s.addEventListener("selectstart",B),s.addEventListener("selectend",B),s.addEventListener("squeeze",B),s.addEventListener("squeezestart",B),s.addEventListener("squeezeend",B),s.addEventListener("end",R),s.addEventListener("inputsourceschange",P),!0===b.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return void 0===s.renderState.layers||!1===e.capabilities.isWebGL2?(i={antialias:void 0!==s.renderState.layers||b.antialias,alpha:b.alpha,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:l},y=new XRWebGLLayer(s,r,i),s.updateRenderState({baseLayer:y}),_=new pr(y.framebufferWidth,y.framebufferHeight,{format:Ye,type:Ne,encoding:e.outputEncoding,stencilBuffer:b.stencil})):(o=null,f=null,h=null,b.depth&&(h=b.stencil?35056:33190,o=b.stencil?$e:qe,f=b.stencil?Ve:Ge),m={colorFormat:32856,depthFormat:h,scaleFactor:l},p=new XRWebGLBinding(s,r),g=p.createProjectionLayer(m),s.updateRenderState({layers:[g]}),_=new pr(g.textureWidth,g.textureHeight,{format:Ye,type:Ne,depthTexture:new ml(g.textureWidth,g.textureHeight,f,void 0,void 0,void 0,void 0,void 0,void 0,o),stencilBuffer:b.stencil,encoding:e.outputEncoding,samples:b.antialias?4:0}),e.properties.get(_).__ignoreDepthValues=g.ignoreDepthValues),_.isXRRenderTarget=!0,this.setFoveation(1),d=null,t.next=20,s.requestReferenceSpace(c);case 20:u=t.sent,O.setContext(s),O.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var D=new xr,L=new xr;function N(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==s){M.near=C.near=E.near=e.near,M.far=C.far=E.far=e.far,I===M.near&&k===M.far||(s.updateRenderState({depthNear:M.near,depthFar:M.far}),I=M.near,k=M.far);var t=e.parent,n=M.cameras;N(M,t);for(var r=0;r<n.length;r++)N(n[r],t);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),e.matrix.copy(M.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);for(var i=e.children,a=0,o=i.length;a<o;a++)i[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){D.setFromMatrixPosition(t.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);var r=D.distanceTo(L),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],f=(a[8]+1)/a[0],d=o*c,h=o*f,p=r/(-c+f),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p,y=d-v,A=h+(r-v),b=l*s/g*m,x=u*s/g*m;e.projectionMatrix.makePerspective(y,A,b,x,m,g)}(M,E,C):M.projectionMatrix.copy(E.projectionMatrix)}},i.getCamera=function(){return M},i.getFoveation=function(){return null!==g?g.fixedFoveation:null!==y?y.fixedFoveation:void 0},i.setFoveation=function(e){null!==g&&(g.fixedFoveation=e),null!==y&&void 0!==y.fixedFoveation&&(y.fixedFoveation=e)};var F=null;var O=new Ga;return O.setAnimationLoop((function(t,n){if(h=n.getViewerPose(d||u),A=n,null!==h){var r=h.views;null!==y&&(e.setRenderTargetFramebuffer(_,y.framebuffer),e.setRenderTarget(_));var i=!1;r.length!==M.cameras.length&&(M.cameras.length=0,i=!0);for(var a=0;a<r.length;a++){var o=r[a],s=null;if(null!==y)s=y.getViewport(o);else{var l=p.getViewSubImage(g,o);s=l.viewport,0===a&&(e.setRenderTargetTextures(_,l.colorTexture,g.ignoreDepthValues?void 0:l.depthStencilTexture),e.setRenderTarget(_))}var c=T[a];void 0===c&&((c=new Ia).layers.enable(a),c.viewport=new hr,T[a]=c),c.matrix.fromArray(o.transform.matrix),c.projectionMatrix.fromArray(o.projectionMatrix),c.viewport.set(s.x,s.y,s.width,s.height),0===a&&M.matrix.copy(c.matrix),!0===i&&M.cameras.push(c)}}for(var f=0;f<w.length;f++){var v=S[f],m=w[f];null!==v&&void 0!==m&&m.update(v,n,d||u)}F&&F(t,n),A=null})),i.setAnimationLoop=function(e){F=e},i.dispose=function(){},i}return(0,g.Z)(n)}(In);function yl(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===k&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===k&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);var i,a,o=t.get(r).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;var s=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*s}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?i=r.map:r.specularMap?i=r.specularMap:r.displacementMap?i=r.displacementMap:r.normalMap?i=r.normalMap:r.bumpMap?i=r.bumpMap:r.roughnessMap?i=r.roughnessMap:r.metalnessMap?i=r.metalnessMap:r.alphaMap?i=r.alphaMap:r.emissiveMap?i=r.emissiveMap:r.clearcoatMap?i=r.clearcoatMap:r.clearcoatNormalMap?i=r.clearcoatNormalMap:r.clearcoatRoughnessMap?i=r.clearcoatRoughnessMap:r.iridescenceMap?i=r.iridescenceMap:r.iridescenceThicknessMap?i=r.iridescenceThicknessMap:r.specularIntensityMap?i=r.specularIntensityMap:r.specularColorMap?i=r.specularColorMap:r.transmissionMap?i=r.transmissionMap:r.thicknessMap?i=r.thicknessMap:r.sheenColorMap?i=r.sheenColorMap:r.sheenRoughnessMap&&(i=r.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),n.uvTransform.value.copy(i.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);var r=t.get(n).envMap;r&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===k&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Al(e,t,n,r){var i={},a={},o=[],s=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){var r=e.value;if(void 0===n[t])return n[t]="number"===typeof r?r:r.clone(),!0;if("number"===typeof r){if(n[t]!==r)return n[t]=r,!0}else{var i=n[t];if(!1===i.equals(r))return i.copy(r),!0}return!1}function u(e){var t=e.value,n={boundary:0,storage:0};return"number"===typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function c(t){var n=t.target;n.removeEventListener("dispose",c);var r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){var n=t.program;r.uniformBlockBinding(e,n)},update:function(n,f){var d=i[n.id];void 0===d&&(!function(e){for(var t=e.uniforms,n=0,r=16,i=0,a=0,o=t.length;a<o;a++){var s=t[a],l=u(s);if(s.__data=new Float32Array(l.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,a>0)0!==(i=n%r)&&r-i-l.boundary<0&&(n+=r-i,s.__offset=n);n+=l.storage}(i=n%r)>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),d=function(t){var n=function(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(35345,r),e.bufferData(35345,i,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",c));var h=f.program;r.updateUBOMapping(n,h);var p=t.render.frame;a[n.id]!==p&&(!function(t){var n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(35345,n);for(var o=0,s=r.length;o<s;o++){var u=r[o];if(!0===l(u,o,a)){var c=u.value,f=u.__offset;"number"===typeof c?(u.__data[0]=c,e.bufferSubData(35345,f,u.__data)):(u.value.isMatrix3?(u.__data[0]=u.value.elements[0],u.__data[1]=u.value.elements[1],u.__data[2]=u.value.elements[2],u.__data[3]=u.value.elements[0],u.__data[4]=u.value.elements[3],u.__data[5]=u.value.elements[4],u.__data[6]=u.value.elements[5],u.__data[7]=u.value.elements[0],u.__data[8]=u.value.elements[6],u.__data[9]=u.value.elements[7],u.__data[10]=u.value.elements[8],u.__data[11]=u.value.elements[0]):c.toArray(u.__data),e.bufferSubData(35345,f,u.__data))}}e.bindBuffer(35345,null)}(n),a[n.id]=p)},dispose:function(){for(var t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}function bl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var t,n=void 0!==e.canvas?e.canvas:function(){var e=Yn("canvas");return e.style.display="block",e}(),r=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==r?r.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;var f=null,d=null,h=[],p=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=jt,this.physicallyCorrectLights=!1,this.toneMapping=fe,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});var v=this,m=!1,g=0,A=0,b=null,x=-1,_=null,w=new hr,S=new hr,E=null,C=n.width,T=n.height,M=1,R=null,P=null,D=new hr(0,0,C,T),L=new hr(0,0,C,T),N=!1,F=new za,O=!1,U=!1,z=null,G=new Jr,Q=new Hn,Z=new xr,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===b?M:1}var V,W,X,Y,K,J,q,$,ee,te,ne,re,ie,ae,oe,se,le,ue,ce,de,he,pe,ve,me,ge=r;function ye(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=n.getContext(i,t);if(null!==a)return a}return null}try{var Ae={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r".concat(y)),n.addEventListener("webglcontextlost",we,!1),n.addEventListener("webglcontextrestored",Se,!1),n.addEventListener("webglcontextcreationerror",Ee,!1),null===ge){var be=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&be.shift(),null===(ge=ye(be,Ae)))throw ye(be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ge.getShaderPrecisionFormat&&(ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ue){throw console.error("THREE.WebGLRenderer: "+Ue.message),Ue}function xe(){V=new vo(ge),W=new Ka(ge,V,e),V.init(W),pe=new fl(ge,V,W),X=new ul(ge,V,W),Y=new yo,K=new Ws,J=new cl(ge,V,X,K,W,pe,Y),q=new qa(v),$=new po(v),ee=new Qa(ge,W),ve=new Xa(ge,V,ee,W),te=new mo(ge,ee,Y,ve),ne=new _o(ge,te,ee,Y),ce=new xo(ge,W,J),se=new Ja(K),re=new Vs(v,q,$,V,W,ve,se),ie=new yl(v,K),ae=new Js,oe=new rl(V,W),ue=new Wa(v,q,$,X,ne,t,s),le=new ll(v,ne,W),me=new Al(ge,Y,W,X),de=new Ya(ge,V,Y,W),he=new go(ge,V,Y,W),Y.programs=re.programs,v.capabilities=W,v.extensions=V,v.properties=K,v.renderLists=ae,v.shadowMap=le,v.state=X,v.info=Y}xe();var _e=new gl(v,ge);function we(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=Y.autoReset,t=le.enabled,n=le.autoUpdate,r=le.needsUpdate,i=le.type;xe(),Y.autoReset=e,le.enabled=t,le.autoUpdate=n,le.needsUpdate=r,le.type=i}function Ee(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ce(e){var t=e.target;t.removeEventListener("dispose",Ce),function(e){(function(e){var t=K.get(e).programs;void 0!==t&&(t.forEach((function(e){re.releaseProgram(e)})),e.isShaderMaterial&&re.releaseShaderCache(e))})(e),K.remove(e)}(t)}this.xr=_e,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){var e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(e){void 0!==e&&(M=e,this.setSize(C,T,!1))},this.getSize=function(e){return e.set(C,T)},this.setSize=function(e,t,r){_e.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(C=e,T=t,n.width=Math.floor(e*M),n.height=Math.floor(t*M),!1!==r&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(C*M,T*M).floor()},this.setDrawingBufferSize=function(e,t,r){C=e,T=t,M=r,n.width=Math.floor(e*r),n.height=Math.floor(t*r),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(D)},this.setViewport=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),X.viewport(w.copy(D).multiplyScalar(M).floor())},this.getScissor=function(e){return e.copy(L)},this.setScissor=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),X.scissor(S.copy(L).multiplyScalar(M).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(e){X.setScissorTest(N=e)},this.setOpaqueSort=function(e){R=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(){var e=0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e|=16384),(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e|=256),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(e|=1024),ge.clear(e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",we,!1),n.removeEventListener("webglcontextrestored",Se,!1),n.removeEventListener("webglcontextcreationerror",Ee,!1),ae.dispose(),oe.dispose(),K.dispose(),q.dispose(),$.dispose(),ne.dispose(),ve.dispose(),me.dispose(),re.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",Me),_e.removeEventListener("sessionend",Ie),z&&(z.dispose(),z=null),ke.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=H);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=H);J.resetTextureUnits();var a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===b?v.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:jt,l=(r.isMeshStandardMaterial?$:q).get(r.envMap||o),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,f=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,m=r.toneMapped?v.toneMapping:fe,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==g?g.length:0,A=K.get(r),w=d.state.lights;if(!0===O&&(!0===U||e!==_)){var S=e===_&&r.id===x;se.setState(r,e,S)}var E=!1;r.version===A.__version?A.needsLights&&A.lightsStateVersion!==w.state.version||A.outputEncoding!==s||i.isInstancedMesh&&!1===A.instancing?E=!0:i.isInstancedMesh||!0!==A.instancing?i.isSkinnedMesh&&!1===A.skinning?E=!0:i.isSkinnedMesh||!0!==A.skinning?A.envMap!==l||!0===r.fog&&A.fog!==a?E=!0:void 0===A.numClippingPlanes||A.numClippingPlanes===se.numPlanes&&A.numIntersection===se.numIntersection?(A.vertexAlphas!==u||A.vertexTangents!==c||A.morphTargets!==f||A.morphNormals!==h||A.morphColors!==p||A.toneMapping!==m||!0===W.isWebGL2&&A.morphTargetsCount!==y)&&(E=!0):E=!0:E=!0:E=!0:(E=!0,A.__version=r.version);var C=A.currentProgram;!0===E&&(C=Fe(r,t,i));var I=!1,k=!1,B=!1,R=C.getUniforms(),P=A.uniforms;X.useProgram(C.program)&&(I=!0,k=!0,B=!0);r.id!==x&&(x=r.id,k=!0);if(I||_!==e){if(R.setValue(ge,"projectionMatrix",e.projectionMatrix),W.logarithmicDepthBuffer&&R.setValue(ge,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,k=!0,B=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var D=R.map.cameraPosition;void 0!==D&&D.setValue(ge,Z.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&R.setValue(ge,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&R.setValue(ge,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){R.setOptional(ge,i,"bindMatrix"),R.setOptional(ge,i,"bindMatrixInverse");var L=i.skeleton;L&&(W.floatVertexTextures?(null===L.boneTexture&&L.computeBoneTexture(),R.setValue(ge,"boneTexture",L.boneTexture,J),R.setValue(ge,"boneTextureSize",L.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var N=n.morphAttributes;(void 0!==N.position||void 0!==N.normal||void 0!==N.color&&!0===W.isWebGL2)&&ce.update(i,n,r,C);(k||A.receiveShadow!==i.receiveShadow)&&(A.receiveShadow=i.receiveShadow,R.setValue(ge,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(P.envMap.value=l,P.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);k&&(R.setValue(ge,"toneMappingExposure",v.toneMappingExposure),A.needsLights&&(G=B,(F=P).ambientLightColor.needsUpdate=G,F.lightProbe.needsUpdate=G,F.directionalLights.needsUpdate=G,F.directionalLightShadows.needsUpdate=G,F.pointLights.needsUpdate=G,F.pointLightShadows.needsUpdate=G,F.spotLights.needsUpdate=G,F.spotLightShadows.needsUpdate=G,F.rectAreaLights.needsUpdate=G,F.hemisphereLights.needsUpdate=G),a&&!0===r.fog&&ie.refreshFogUniforms(P,a),ie.refreshMaterialUniforms(P,r,M,T,z),Cs.upload(ge,A.uniformsList,P,J));var F,G;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Cs.upload(ge,A.uniformsList,P,J),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&R.setValue(ge,"center",i.center);if(R.setValue(ge,"modelViewMatrix",i.modelViewMatrix),R.setValue(ge,"normalMatrix",i.normalMatrix),R.setValue(ge,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial)for(var Q=r.uniformsGroups,j=0,V=Q.length;j<V;j++)if(W.isWebGL2){var Y=Q[j];me.update(Y,C),me.bind(Y,C)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return C}(e,t,n,r,i);X.setMaterial(r,o);var l=n.index,u=n.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;var c,f=1;!0===r.wireframe&&(l=te.getWireframeAttribute(n),f=2),ve.setup(i,r,s,n,l);var h=de;null!==l&&(c=ee.get(l),(h=he).setIndex(c));var p=null!==l?l.count:u.count,m=n.drawRange.start*f,g=n.drawRange.count*f,y=null!==a?a.start*f:0,A=null!==a?a.count*f:1/0,w=Math.max(m,y),S=Math.min(p,m+g,y+A)-1,E=Math.max(0,S-w+1);if(0!==E){if(i.isMesh)!0===r.wireframe?(X.setLineWidth(r.wireframeLinewidth*j()),h.setMode(1)):h.setMode(4);else if(i.isLine){var C=r.linewidth;void 0===C&&(C=1),X.setLineWidth(C*j()),i.isLineSegments?h.setMode(1):i.isLineLoop?h.setMode(2):h.setMode(3)}else i.isPoints?h.setMode(0):i.isSprite&&h.setMode(4);if(i.isInstancedMesh)h.renderInstances(w,E,i.count);else if(n.isInstancedBufferGeometry){var I=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(w,E,I)}else h.render(w,E)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===B?(e.side=k,e.needsUpdate=!0,Fe(e,t,n),e.side=I,e.needsUpdate=!0,Fe(e,t,n),e.side=B):Fe(e,t,n)}(d=oe.get(e)).init(),p.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(v.physicallyCorrectLights),e.traverse((function(t){var r=t.material;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++){n(r[i],e,t)}else n(r,e,t)})),p.pop(),d=null};var Te=null;function Me(){ke.stop()}function Ie(){ke.start()}var ke=new Ga;function Be(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){r&&Z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);var i=ne.update(e),a=e.material;a.visible&&f.push(e,i,a,n,Z.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Y.render.frame&&(e.skeleton.update(),e.skeleton.frame=Y.render.frame),!e.frustumCulled||F.intersectsObject(e))){r&&Z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);var o=ne.update(e),s=e.material;if(Array.isArray(s))for(var l=o.groups,u=0,c=l.length;u<c;u++){var h=l[u],p=s[h.materialIndex];p&&p.visible&&f.push(e,o,p,n,Z.z,h)}else s.visible&&f.push(e,o,s,n,Z.z,null)}for(var v=e.children,m=0,g=v.length;m<g;m++)Be(v[m],t,n,r)}}function Re(e,t,n,r){var i=e.opaque,a=e.transmissive,s=e.transparent;d.setupLightsView(n),a.length>0&&function(e,t,n){var r=W.isWebGL2;null===z&&(z=new pr(1,1,{generateMipmaps:!0,type:V.has("EXT_color_buffer_half_float")?Ze:Ne,minFilter:De,samples:r&&!0===o?4:0}));v.getDrawingBufferSize(Q),r?z.setSize(Q.x,Q.y):z.setSize(zn(Q.x),zn(Q.y));var i=v.getRenderTarget();v.setRenderTarget(z),v.clear();var a=v.toneMapping;v.toneMapping=fe,Pe(e,t,n),v.toneMapping=a,J.updateMultisampleRenderTarget(z),J.updateRenderTargetMipmap(z),v.setRenderTarget(i)}(i,t,n),r&&X.viewport(w.copy(r)),i.length>0&&Pe(i,t,n),a.length>0&&Pe(a,t,n),s.length>0&&Pe(s,t,n),X.buffers.depth.setTest(!0),X.buffers.depth.setMask(!0),X.buffers.color.setMask(!0),X.setPolygonOffset(!1)}function Pe(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,l=o.geometry,u=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&Le(s,t,n,l,u,c)}}function Le(e,t,n,r,i,a){e.onBeforeRender(v,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(v,t,n,r,e,a),!0===i.transparent&&i.side===B?(i.side=k,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=I,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=B):v.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(v,t,n,r,i,a)}function Fe(e,t,n){!0!==t.isScene&&(t=H);var r=K.get(e),i=d.state.lights,a=d.state.shadowsArray,o=i.state.version,s=re.getParameters(e,i.state,a,t,n),l=re.getProgramCacheKey(s),u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?$:q).get(e.envMap||r.environment),void 0===u&&(e.addEventListener("dispose",Ce),u=new Map,r.programs=u);var c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Oe(e,s),c}else s.uniforms=re.getUniforms(e),e.onBuild(n,s,v),e.onBeforeCompile(s,v),c=re.acquireProgram(s,l),u.set(l,c),r.uniforms=s.uniforms;var f=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(f.clippingPlanes=se.uniform),Oe(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(f.ambientLightColor.value=i.state.ambient,f.lightProbe.value=i.state.probe,f.directionalLights.value=i.state.directional,f.directionalLightShadows.value=i.state.directionalShadow,f.spotLights.value=i.state.spot,f.spotLightShadows.value=i.state.spotShadow,f.rectAreaLights.value=i.state.rectArea,f.ltc_1.value=i.state.rectAreaLTC1,f.ltc_2.value=i.state.rectAreaLTC2,f.pointLights.value=i.state.point,f.pointLightShadows.value=i.state.pointShadow,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotLightMatrix.value=i.state.spotLightMatrix,f.spotLightMap.value=i.state.spotLightMap,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix);var h=c.getUniforms(),p=Cs.seqWithValue(h.seq,f);return r.currentProgram=c,r.uniformsList=p,c}function Oe(e,t){var n=K.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}ke.setAnimationLoop((function(e){Te&&Te(e)})),"undefined"!==typeof self&&ke.setContext(self),this.setAnimationLoop=function(e){Te=e,_e.setAnimationLoop(e),null===e?ke.stop():ke.start()},_e.addEventListener("sessionstart",Me),_e.addEventListener("sessionend",Ie),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===_e.enabled&&!0===_e.isPresenting&&(!0===_e.cameraAutoUpdate&&_e.updateCamera(t),t=_e.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,b),(d=oe.get(e,p.length)).init(),p.push(d),G.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix(G),U=this.localClippingEnabled,O=se.init(this.clippingPlanes,U,t),(f=ae.get(e,h.length)).init(),h.push(f),Be(e,t,0,v.sortObjects),f.finish(),!0===v.sortObjects&&f.sort(R,P),!0===O&&se.beginShadows();var n=d.state.shadowsArray;if(le.render(n,e,t),!0===O&&se.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(f,e),d.setupLights(v.physicallyCorrectLights),t.isArrayCamera)for(var r=t.cameras,i=0,a=r.length;i<a;i++){var o=r[i];Re(f,e,o,o.viewport)}else Re(f,e,t);null!==b&&(J.updateMultisampleRenderTarget(b),J.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(v,e,t),ve.resetDefaultState(),x=-1,_=null,p.pop(),d=p.length>0?p[p.length-1]:null,h.pop(),f=h.length>0?h[h.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,n){K.get(e.texture).__webglTexture=t,K.get(e.depthTexture).__webglTexture=n;var r=K.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===V.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=K.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,g=t,A=n;var r=!0,i=null,a=!1,o=!1;if(e){var s=K.get(e);void 0!==s.__useDefaultFramebuffer?(X.bindFramebuffer(36160,null),r=!1):void 0===s.__webglFramebuffer?J.setupRenderTarget(e):s.__hasExternalTextures&&J.rebindTextures(e,K.get(e.texture).__webglTexture,K.get(e.depthTexture).__webglTexture);var l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);var u=K.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=u[t],a=!0):i=W.isWebGL2&&e.samples>0&&!1===J.useMultisampledRTT(e)?K.get(e).__webglMultisampledFramebuffer:u,w.copy(e.viewport),S.copy(e.scissor),E=e.scissorTest}else w.copy(D).multiplyScalar(M).floor(),S.copy(L).multiplyScalar(M).floor(),E=N;if(X.bindFramebuffer(36160,i)&&W.drawBuffers&&r&&X.drawBuffers(e,i),X.viewport(w),X.scissor(S),X.setScissorTest(E),a){var c=K.get(e.texture);ge.framebufferTexture2D(36160,36064,34069+t,c.__webglTexture,n)}else if(o){var f=K.get(e.texture),d=t||0;ge.framebufferTextureLayer(36160,36064,f.__webglTexture,n||0,d)}x=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=K.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){X.bindFramebuffer(36160,s);try{var l=e.texture,u=l.format,c=l.type;if(u!==Ye&&pe.convert(u)!==ge.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var f=c===Ze&&(V.has("EXT_color_buffer_half_float")||W.isWebGL2&&V.has("EXT_color_buffer_float"));if(c!==Ne&&pe.convert(c)!==ge.getParameter(35738)&&(c!==Qe||!(W.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float")))&&!f)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ge.readPixels(t,n,r,i,pe.convert(u),pe.convert(c),a)}finally{var d=null!==b?K.get(b).__webglFramebuffer:null;X.bindFramebuffer(36160,d)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);J.setTexture2D(t,0),ge.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,a),X.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=pe.convert(n.format),s=pe.convert(n.type);J.setTexture2D(n,0),ge.pixelStorei(37440,n.flipY),ge.pixelStorei(37441,n.premultiplyAlpha),ge.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ge.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?ge.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ge.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&ge.generateMipmap(3553),X.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,u=pe.convert(r.format),c=pe.convert(r.type);if(r.isData3DTexture)J.setTexture3D(r,0),a=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");J.setTexture2DArray(r,0),a=35866}ge.pixelStorei(37440,r.flipY),ge.pixelStorei(37441,r.premultiplyAlpha),ge.pixelStorei(3317,r.unpackAlignment);var f=ge.getParameter(3314),d=ge.getParameter(32878),h=ge.getParameter(3316),p=ge.getParameter(3315),m=ge.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ge.pixelStorei(3314,g.width),ge.pixelStorei(32878,g.height),ge.pixelStorei(3316,e.min.x),ge.pixelStorei(3315,e.min.y),ge.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?ge.texSubImage3D(a,i,t.x,t.y,t.z,o,s,l,u,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ge.compressedTexSubImage3D(a,i,t.x,t.y,t.z,o,s,l,u,g.data)):ge.texSubImage3D(a,i,t.x,t.y,t.z,o,s,l,u,c,g),ge.pixelStorei(3314,f),ge.pixelStorei(32878,d),ge.pixelStorei(3316,h),ge.pixelStorei(3315,p),ge.pixelStorei(32877,m),0===i&&r.generateMipmaps&&ge.generateMipmap(a),X.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?J.setTextureCube(e,0):e.isData3DTexture?J.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?J.setTexture2DArray(e,0):J.setTexture2D(e,0),X.unbindTexture()},this.resetState=function(){g=0,A=0,b=null,X.reset(),ve.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var xl=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,m.Z)(this,n),t.apply(this,arguments)}return(0,g.Z)(n)}(bl);xl.prototype.isWebGL1Renderer=!0;var _l,wl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;(0,m.Z)(this,e),this.isFogExp2=!0,this.name="",this.color=new sr(t),this.density=n}return(0,g.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}(),Sl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,m.Z)(this,e),this.isFog=!0,this.name="",this.color=new sr(t),this.near=n,this.far=r}return(0,g.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}(),El=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:(0,f.Z)(e)})),e}return(0,g.Z)(n,[{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),t}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}]),n}(_i),Cl=function(){function e(t,n){(0,m.Z)(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=gn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Dn()}return(0,g.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),Tl=new xr,Ml=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,m.Z)(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===i}return(0,g.Z)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Tl.fromBufferAttribute(this,t),Tl.applyMatrix4(e),this.setXYZ(t,Tl.x,Tl.y,Tl.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Tl.fromBufferAttribute(this,t),Tl.applyNormalMatrix(e),this.setXYZ(t,Tl.x,Tl.y,Tl.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Tl.fromBufferAttribute(this,t),Tl.transformDirection(e),this.setXYZ(t,Tl.x,Tl.y,Tl.z);return this}},{key:"setX",value:function(e,t){return this.normalized&&(t=Qn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=Qn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=Qn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=Qn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Gn(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Gn(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Gn(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Gn(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Qn(t,this.array),n=Qn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Qn(t,this.array),n=Qn(n,this.array),r=Qn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Qn(t,this.array),n=Qn(n,this.array),r=Qn(r,this.array),i=Qn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new Ui(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}(),Il=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isSpriteMaterial=!0,r.type="SpriteMaterial",r.color=new sr(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.fog=!0,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Li),kl=new xr,Bl=new xr,Rl=new xr,Pl=new Hn,Dl=new Hn,Ll=new Jr,Nl=new xr,Fl=new xr,Ol=new xr,Ul=new Hn,zl=new Hn,Gl=new Hn,Ql=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;if((0,m.Z)(this,n),(r=t.call(this)).isSprite=!0,r.type="Sprite",void 0===_l){_l=new ra;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new Cl(i,5);_l.setIndex([0,1,2,0,2,3]),_l.setAttribute("position",new Ml(a,3,0,!1)),_l.setAttribute("uv",new Ml(a,2,3,!1))}return r.geometry=_l,r.material=void 0!==e?e:new Il,r.center=new Hn(.5,.5),r}return(0,g.Z)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Bl.setFromMatrixScale(this.matrixWorld),Ll.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Rl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Bl.multiplyScalar(-Rl.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;Zl(Nl.set(-.5,-.5,0),Rl,a,Bl,n,r),Zl(Fl.set(.5,-.5,0),Rl,a,Bl,n,r),Zl(Ol.set(.5,.5,0),Rl,a,Bl,n,r),Ul.set(0,0),zl.set(1,0),Gl.set(1,1);var o=e.ray.intersectTriangle(Nl,Fl,Ol,!1,kl);if(null!==o||(Zl(Fl.set(-.5,.5,0),Rl,a,Bl,n,r),zl.set(0,1),null!==(o=e.ray.intersectTriangle(Nl,Ol,Fl,!1,kl)))){var s=e.ray.origin.distanceTo(kl);s<e.near||s>e.far||t.push({distance:s,point:kl.clone(),uv:Pi.getUV(kl,Nl,Fl,Ol,Ul,zl,Gl,new Hn),face:null,object:this})}}},{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(_i);function Zl(e,t,n,r,i,a){Pl.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Dl.x=a*Pl.x-i*Pl.y,Dl.y=i*Pl.x+a*Pl.y):Dl.copy(Pl),e.copy(t),e.x+=Dl.x,e.y+=Dl.y,e.applyMatrix4(Ll)}var Hl=new xr,jl=new xr,Vl=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this))._currentLevel=0,e.type="LOD",Object.defineProperties((0,f.Z)(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return(0,g.Z)(n,[{key:"copy",value:function(e){(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,r=0,i=t.length;r<i;r++){var a=t[r];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);var n,r=this.levels;for(n=0;n<r.length&&!(t<r[n].distance);n++);return r.splice(n,0,{distance:t,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){Hl.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Hl);this.getObjectForDistance(n).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){Hl.setFromMatrixPosition(e.matrixWorld),jl.setFromMatrixPosition(this.matrixWorld);var n,r,i=Hl.distanceTo(jl)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r&&i>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,i=0,a=r.length;i<a;i++){var o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}]),n}(_i),Wl=new xr,Xl=new hr,Yl=new hr,Kl=new xr,Jl=new Jr,ql=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;return(0,m.Z)(this,n),(i=t.call(this,e,r)).isSkinnedMesh=!0,i.type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new Jr,i.bindMatrixInverse=new Jr,i}return(0,g.Z)(n,[{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new hr,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){(0,u.Z)((0,c.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;Xl.fromBufferAttribute(r.attributes.skinIndex,e),Yl.fromBufferAttribute(r.attributes.skinWeight,e),Wl.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=Yl.getComponent(i);if(0!==a){var o=Xl.getComponent(i);Jl.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Kl.copy(Wl).applyMatrix4(Jl),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(xa),$l=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this)).isBone=!0,e.type="Bone",e}return(0,g.Z)(n)}(_i),eu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Ce,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ce,h=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return(0,m.Z)(this,n),(e=t.call(this,null,l,u,c,f,d,o,s,h,p)).isDataTexture=!0,e.image={data:r,width:i,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return(0,g.Z)(n)}(dr),tu=new Jr,nu=new Jr,ru=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,m.Z)(this,e),this.uuid=Dn(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return(0,g.Z)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Jr)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new Jr;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:nu;tu.multiplyMatrices(o,t[i]),tu.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=Un(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new eu(t,e,e,Ye,Qe);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],a=t[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new $l),this.bones.push(a),this.boneInverses.push((new Jr).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var a=t[r];e.bones.push(a.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),iu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,m.Z)(this,n),(a=t.call(this,e,r,i)).isInstancedBufferAttribute=!0,a.meshPerAttribute=o,a}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(Ui),au=new Jr,ou=new Jr,su=[],lu=new Jr,uu=new xa,cu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a;(0,m.Z)(this,n),(a=t.call(this,e,r)).isInstancedMesh=!0,a.instanceMatrix=new iu(new Float32Array(16*i),16),a.instanceColor=null,a.count=i,a.frustumCulled=!1;for(var o=0;o<i;o++)a.setMatrixAt(o,lu);return a}return(0,g.Z)(n,[{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(uu.geometry=this.geometry,uu.material=this.material,void 0!==uu.material)for(var i=0;i<r;i++){this.getMatrixAt(i,au),ou.multiplyMatrices(n,au),uu.matrixWorld=ou,uu.raycast(e,su);for(var a=0,o=su.length;a<o;a++){var s=su[a];s.instanceId=i,s.object=this,t.push(s)}su.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new iu(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(xa),fu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isLineBasicMaterial=!0,r.type="LineBasicMaterial",r.color=new sr(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.fog=!0,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(Li),du=new xr,hu=new xr,pu=new Jr,vu=new Kr,mu=new Qr,gu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ra,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fu;return(0,m.Z)(this,n),(e=t.call(this)).isLine=!0,e.type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,g.Z)(n,[{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)du.fromBufferAttribute(t,r-1),hu.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=du.distanceTo(hu);e.setAttribute("lineDistance",new Xi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),mu.copy(n.boundingSphere),mu.applyMatrix4(r),mu.radius+=i,!1!==e.ray.intersectsSphere(mu)){pu.copy(r).invert(),vu.copy(e.ray).applyMatrix4(pu);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new xr,u=new xr,c=new xr,f=new xr,d=this.isLineSegments?2:1,h=n.index,p=n.attributes.position;if(null!==h)for(var v=Math.max(0,a.start),m=Math.min(h.count,a.start+a.count)-1;v<m;v+=d){var g=h.getX(v),y=h.getX(v+1);if(l.fromBufferAttribute(p,g),u.fromBufferAttribute(p,y),!(vu.distanceSqToSegment(l,u,f,c)>s)){f.applyMatrix4(this.matrixWorld);var A=e.ray.origin.distanceTo(f);A<e.near||A>e.far||t.push({distance:A,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var b=Math.max(0,a.start),x=Math.min(p.count,a.start+a.count)-1;b<x;b+=d){if(l.fromBufferAttribute(p,b),u.fromBufferAttribute(p,b+1),!(vu.distanceSqToSegment(l,u,f,c)>s)){f.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(f);_<e.near||_>e.far||t.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}]),n}(_i),yu=new xr,Au=new xr,bu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;return(0,m.Z)(this,n),(i=t.call(this,e,r)).isLineSegments=!0,i.type="LineSegments",i}return(0,g.Z)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)yu.fromBufferAttribute(t,r),Au.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+yu.distanceTo(Au);e.setAttribute("lineDistance",new Xi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(gu),xu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;return(0,m.Z)(this,n),(i=t.call(this,e,r)).isLineLoop=!0,i.type="LineLoop",i}return(0,g.Z)(n)}(gu),_u=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isPointsMaterial=!0,r.type="PointsMaterial",r.color=new sr(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.fog=!0,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Li),wu=new Jr,Su=new Kr,Eu=new Qr,Cu=new xr,Tu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ra,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _u;return(0,m.Z)(this,n),(e=t.call(this)).isPoints=!0,e.type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,g.Z)(n,[{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Eu.copy(n.boundingSphere),Eu.applyMatrix4(r),Eu.radius+=i,!1!==e.ray.intersectsSphere(Eu)){wu.copy(r).invert(),Su.copy(e.ray).applyMatrix4(wu);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,u=n.attributes.position;if(null!==l)for(var c=Math.max(0,a.start),f=Math.min(l.count,a.start+a.count);c<f;c++){var d=l.getX(c);Cu.fromBufferAttribute(u,d),Mu(Cu,d,s,r,e,t,this)}else for(var h=Math.max(0,a.start),p=Math.min(u.count,a.start+a.count);h<p;h++)Cu.fromBufferAttribute(u,h),Mu(Cu,h,s,r,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}]),n}(_i);function Mu(e,t,n,r,i,a,o){var s=Su.distanceSqToPoint(e);if(s<n){var l=new xr;Su.closestPointToPoint(e,l),l.applyMatrix4(r);var u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:o})}}var Iu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s,l,u,c){var d;(0,m.Z)(this,n),(d=t.call(this,e,r,i,a,o,s,l,u,c)).isVideoTexture=!0,d.minFilter=void 0!==s?s:Be,d.magFilter=void 0!==o?o:Be,d.generateMipmaps=!1;var h=(0,f.Z)(d);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){h.needsUpdate=!0,e.requestVideoFrameCallback(t)})),d}return(0,g.Z)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(dr),ku=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a;return(0,m.Z)(this,n),(a=t.call(this,{width:e,height:r})).isFramebufferTexture=!0,a.format=i,a.magFilter=Ce,a.minFilter=Ce,a.generateMipmaps=!1,a.needsUpdate=!0,a}return(0,g.Z)(n)}(dr),Bu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s,l,u,c,f,d,h){var p;return(0,m.Z)(this,n),(p=t.call(this,null,s,l,u,c,f,a,o,d,h)).isCompressedTexture=!0,p.image={width:r,height:i},p.mipmaps=e,p.flipY=!1,p.generateMipmaps=!1,p}return(0,g.Z)(n)}(dr),Ru=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s){var l;return(0,m.Z)(this,n),(l=t.call(this,e,r,i,o,s)).isCompressedArrayTexture=!0,l.image.depth=a,l.wrapR=Se,l}return(0,g.Z)(n)}(Bu),Pu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s,l,u,c){var f;return(0,m.Z)(this,n),(f=t.call(this,e,r,i,a,o,s,l,u,c)).isCanvasTexture=!0,f.needsUpdate=!0,f}return(0,g.Z)(n)}(dr),Du=function(){function e(){(0,m.Z)(this,e),this.type="Curve",this.arcLengthDivisions=200}return(0,g.Z)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=r[i=Math.floor(s+(l-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(r[i=l]===n)return i/(a-1);var u=r[i];return(i+(n-u)/(r[i+1]-u))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new Hn:new xr);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new xr,r=[],i=[],a=[],o=new xr,s=new Jr,l=0;l<=e;l++){var u=l/e;r[l]=this.getTangentAt(u,new xr)}i[0]=new xr,a[0]=new xr;var c=Number.MAX_VALUE,f=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);f<=c&&(c=f,n.set(1,0,0)),d<=c&&(c=d,n.set(0,1,0)),h<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var v=Math.acos(Ln(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(o,v))}a[p].crossVectors(r[p],i[p])}if(!0===t){var m=Math.acos(Ln(i[0].dot(i[e]),-1,1));m/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(m=-m);for(var g=1;g<=e;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],m*g)),a[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),Lu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return(0,m.Z)(this,n),(e=t.call(this)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=r,e.aY=i,e.xRadius=a,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=l,e.aClockwise=u,e.aRotation=c,e}return(0,g.Z)(n,[{key:"getPoint",value:function(e,t){for(var n=t||new Hn,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),f=s-this.aX,d=l-this.aY;s=f*u-d*c+this.aX,l=f*c+d*u+this.aY}return n.set(s,l)}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(Du),Nu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s){var l;return(0,m.Z)(this,n),(l=t.call(this,e,r,i,i,a,o,s)).isArcCurve=!0,l.type="ArcCurve",l}return(0,g.Z)(n)}(Lu);function Fu(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,u=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,l*=o,u*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}var Ou=new xr,Uu=new Fu,zu=new Fu,Gu=new Fu,Qu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return(0,m.Z)(this,n),(e=t.call(this)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=r,e.closed=i,e.curveType=a,e.tension=o,e}return(0,g.Z)(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xr,i=this.points,a=i.length,o=(a-(this.closed?0:1))*e,s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:0===l&&s===a-1&&(s=a-2,l=1),this.closed||s>0?t=i[(s-1)%a]:(Ou.subVectors(i[0],i[1]).add(i[0]),t=Ou);var u=i[s%a],c=i[(s+1)%a];if(this.closed||s+2<a?n=i[(s+2)%a]:(Ou.subVectors(i[a-1],i[a-2]).add(i[a-1]),n=Ou),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(u),f),h=Math.pow(u.distanceToSquared(c),f),p=Math.pow(c.distanceToSquared(n),f);h<1e-4&&(h=1),d<1e-4&&(d=h),p<1e-4&&(p=h),Uu.initNonuniformCatmullRom(t.x,u.x,c.x,n.x,d,h,p),zu.initNonuniformCatmullRom(t.y,u.y,c.y,n.y,d,h,p),Gu.initNonuniformCatmullRom(t.z,u.z,c.z,n.z,d,h,p)}else"catmullrom"===this.curveType&&(Uu.initCatmullRom(t.x,u.x,c.x,n.x,this.tension),zu.initCatmullRom(t.y,u.y,c.y,n.y,this.tension),Gu.initCatmullRom(t.z,u.z,c.z,n.z,this.tension));return r.set(Uu.calc(l),zu.calc(l),Gu.calc(l)),r}},{key:"copy",value:function(e){(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){(0,u.Z)((0,c.Z)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new xr).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(Du);function Zu(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function Hu(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function ju(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}var Vu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Hn,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Hn,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Hn,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Hn;return(0,m.Z)(this,n),(e=t.call(this)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return(0,g.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Hn,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(ju(e,n.x,r.x,i.x,a.x),ju(e,n.y,r.y,i.y,a.y)),t}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Du),Wu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xr,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new xr,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new xr;return(0,m.Z)(this,n),(e=t.call(this)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return(0,g.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xr,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(ju(e,n.x,r.x,i.x,a.x),ju(e,n.y,r.y,i.y,a.y),ju(e,n.z,r.z,i.z,a.z)),t}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Du),Xu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Hn,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Hn;return(0,m.Z)(this,n),(e=t.call(this)).isLineCurve=!0,e.type="LineCurve",e.v1=r,e.v2=i,e}return(0,g.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Hn;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new Hn;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Du),Yu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xr,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xr;return(0,m.Z)(this,n),(e=t.call(this)).isLineCurve3=!0,e.type="LineCurve3",e.v1=r,e.v2=i,e}return(0,g.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xr;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Du),Ku=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Hn,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Hn,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Hn;return(0,m.Z)(this,n),(e=t.call(this)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=r,e.v1=i,e.v2=a,e}return(0,g.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Hn,n=this.v0,r=this.v1,i=this.v2;return t.set(Hu(e,n.x,r.x,i.x),Hu(e,n.y,r.y,i.y)),t}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Du),Ju=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xr,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new xr;return(0,m.Z)(this,n),(e=t.call(this)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e}return(0,g.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xr,n=this.v0,r=this.v1,i=this.v2;return t.set(Hu(e,n.x,r.x,i.x),Hu(e,n.y,r.y,i.y),Hu(e,n.z,r.z,i.z)),t}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Du),qu=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,m.Z)(this,n),(e=t.call(this)).isSplineCurve=!0,e.type="SplineCurve",e.points=r,e}return(0,g.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Hn,n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,o=n[0===i?i:i-1],s=n[i],l=n[i>n.length-2?n.length-1:i+1],u=n[i>n.length-3?n.length-1:i+2];return t.set(Zu(a,o.x,s.x,l.x,u.x),Zu(a,o.y,s.y,l.y,u.y)),t}},{key:"copy",value:function(e){(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){(0,u.Z)((0,c.Z)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new Hn).fromArray(i))}return this}}]),n}(Du),$u=Object.freeze({__proto__:null,ArcCurve:Nu,CatmullRomCurve3:Qu,CubicBezierCurve:Vu,CubicBezierCurve3:Wu,EllipseCurve:Lu,LineCurve:Xu,LineCurve3:Yu,QuadraticBezierCurve:Ku,QuadraticBezierCurve3:Ju,SplineCurve:qu}),ec=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return(0,g.Z)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Xu(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var a=r[i]-n,o=this.curves[i],s=o.getLength(),l=0===s?0:1-a/s;return o.getPointAt(l,t)}i++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){(0,u.Z)((0,c.Z)(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new $u[i.type]).fromJSON(i))}return this}}]),n}(Du),tc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).type="Path",r.currentPoint=new Hn,e&&r.setFromPoints(e),r}return(0,g.Z)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new Xu(this.currentPoint.clone(),new Hn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new Ku(this.currentPoint.clone(),new Hn(e,t),new Hn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){var o=new Vu(this.currentPoint.clone(),new Hn(e,t),new Hn(n,r),new Hn(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new qu(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}},{key:"absarc",value:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}},{key:"ellipse",value:function(e,t,n,r,i,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,a,o,s),this}},{key:"absellipse",value:function(e,t,n,r,i,a,o,s){var l=new Lu(e,t,n,r,i,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(ec),nc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Hn(0,-.5),new Hn(.5,0),new Hn(0,.5)],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,m.Z)(this,n),(e=t.call(this)).type="LatheGeometry",e.parameters={points:r,segments:i,phiStart:a,phiLength:o},i=Math.floor(i),o=Ln(o,0,2*Math.PI);for(var s=[],l=[],u=[],c=[],f=[],d=1/i,h=new xr,p=new Hn,v=new xr,g=new xr,y=new xr,A=0,b=0,x=0;x<=r.length-1;x++)switch(x){case 0:A=r[x+1].x-r[x].x,b=r[x+1].y-r[x].y,v.x=1*b,v.y=-A,v.z=0*b,y.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case r.length-1:c.push(y.x,y.y,y.z);break;default:A=r[x+1].x-r[x].x,b=r[x+1].y-r[x].y,v.x=1*b,v.y=-A,v.z=0*b,g.copy(v),v.x+=y.x,v.y+=y.y,v.z+=y.z,v.normalize(),c.push(v.x,v.y,v.z),y.copy(g)}for(var _=0;_<=i;_++)for(var w=a+_*d*o,S=Math.sin(w),E=Math.cos(w),C=0;C<=r.length-1;C++){h.x=r[C].x*S,h.y=r[C].y,h.z=r[C].x*E,l.push(h.x,h.y,h.z),p.x=_/i,p.y=C/(r.length-1),u.push(p.x,p.y);var T=c[3*C+0]*S,M=c[3*C+1],I=c[3*C+0]*E;f.push(T,M,I)}for(var k=0;k<i;k++)for(var B=0;B<r.length-1;B++){var R=B+k*r.length,P=R,D=R+r.length,L=R+r.length+1,N=R+1;s.push(P,D,N),s.push(L,N,D)}return e.setIndex(s),e.setAttribute("position",new Xi(l,3)),e.setAttribute("uv",new Xi(u,2)),e.setAttribute("normal",new Xi(f,3)),e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(ra),rc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;(0,m.Z)(this,n);var s=new tc;return s.absarc(0,-i/2,r,1.5*Math.PI,0),s.absarc(0,i/2,r,0,.5*Math.PI),(e=t.call(this,s.getPoints(a),o)).type="CapsuleGeometry",e.parameters={radius:r,height:i,capSegments:a,radialSegments:o},e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}}]),n}(nc),ic=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,m.Z)(this,n),(e=t.call(this)).type="CircleGeometry",e.parameters={radius:r,segments:i,thetaStart:a,thetaLength:o},i=Math.max(3,i);var s=[],l=[],u=[],c=[],f=new xr,d=new Hn;l.push(0,0,0),u.push(0,0,1),c.push(.5,.5);for(var h=0,p=3;h<=i;h++,p+=3){var v=a+h/i*o;f.x=r*Math.cos(v),f.y=r*Math.sin(v),l.push(f.x,f.y,f.z),u.push(0,0,1),d.x=(l[p]/r+1)/2,d.y=(l[p+1]/r+1)/2,c.push(d.x,d.y)}for(var g=1;g<=i;g++)s.push(g,g+1,0);return e.setIndex(s),e.setAttribute("position",new Xi(l,3)),e.setAttribute("normal",new Xi(u,3)),e.setAttribute("uv",new Xi(c,2)),e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(ra),ac=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;(0,m.Z)(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:i,height:a,radialSegments:o,heightSegments:s,openEnded:l,thetaStart:u,thetaLength:c};var d=(0,f.Z)(e);o=Math.floor(o),s=Math.floor(s);var h=[],p=[],v=[],g=[],y=0,A=[],b=a/2,x=0;function _(e){for(var t=y,n=new Hn,a=new xr,s=0,l=!0===e?r:i,f=!0===e?1:-1,m=1;m<=o;m++)p.push(0,b*f,0),v.push(0,f,0),g.push(.5,.5),y++;for(var A=y,_=0;_<=o;_++){var w=_/o*c+u,S=Math.cos(w),E=Math.sin(w);a.x=l*E,a.y=b*f,a.z=l*S,p.push(a.x,a.y,a.z),v.push(0,f,0),n.x=.5*S+.5,n.y=.5*E*f+.5,g.push(n.x,n.y),y++}for(var C=0;C<o;C++){var T=t+C,M=A+C;!0===e?h.push(M,M+1,T):h.push(M+1,M,T),s+=3}d.addGroup(x,s,!0===e?1:2),x+=s}return function(){for(var e=new xr,t=new xr,n=0,l=(i-r)/a,f=0;f<=s;f++){for(var m=[],_=f/s,w=_*(i-r)+r,S=0;S<=o;S++){var E=S/o,C=E*c+u,T=Math.sin(C),M=Math.cos(C);t.x=w*T,t.y=-_*a+b,t.z=w*M,p.push(t.x,t.y,t.z),e.set(T,l,M).normalize(),v.push(e.x,e.y,e.z),g.push(E,1-_),m.push(y++)}A.push(m)}for(var I=0;I<o;I++)for(var k=0;k<s;k++){var B=A[k][I],R=A[k+1][I],P=A[k+1][I+1],D=A[k][I+1];h.push(B,R,D),h.push(R,P,D),n+=6}d.addGroup(x,n,0),x+=n}(),!1===l&&(r>0&&_(!0),i>0&&_(!1)),e.setIndex(h),e.setAttribute("position",new Xi(p,3)),e.setAttribute("normal",new Xi(v,3)),e.setAttribute("uv",new Xi(g,2)),e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(ra),oc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return(0,m.Z)(this,n),(e=t.call(this,0,r,i,a,o,s,l,u)).type="ConeGeometry",e.parameters={radius:r,height:i,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:u},e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(ac),sc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,m.Z)(this,n),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:r,indices:i,radius:a,detail:o};var s=[],l=[];function u(e,t,n,r){for(var i=r+1,a=[],o=0;o<=i;o++){a[o]=[];for(var s=e.clone().lerp(n,o/i),l=t.clone().lerp(n,o/i),u=i-o,f=0;f<=u;f++)a[o][f]=0===f&&o===i?s:s.clone().lerp(l,f/u)}for(var d=0;d<i;d++)for(var h=0;h<2*(i-d)-1;h++){var p=Math.floor(h/2);h%2===0?(c(a[d][p+1]),c(a[d+1][p]),c(a[d][p])):(c(a[d][p+1]),c(a[d+1][p+1]),c(a[d+1][p]))}}function c(e){s.push(e.x,e.y,e.z)}function f(e,t){var n=3*e;t.x=r[n+0],t.y=r[n+1],t.z=r[n+2]}function d(e,t,n,r){r<0&&1===e.x&&(l[t]=e.x-1),0===n.x&&0===n.z&&(l[t]=r/2/Math.PI+.5)}function h(e){return Math.atan2(e.z,-e.x)}return function(e){for(var t=new xr,n=new xr,r=new xr,a=0;a<i.length;a+=3)f(i[a+0],t),f(i[a+1],n),f(i[a+2],r),u(t,n,r,e)}(o),function(e){for(var t=new xr,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}(a),function(){for(var e=new xr,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=h(e)/2/Math.PI+.5,r=(i=e,Math.atan2(-i.y,Math.sqrt(i.x*i.x+i.z*i.z))/Math.PI+.5);l.push(n,1-r)}var i;(function(){for(var e=new xr,t=new xr,n=new xr,r=new xr,i=new Hn,a=new Hn,o=new Hn,u=0,c=0;u<s.length;u+=9,c+=6){e.set(s[u+0],s[u+1],s[u+2]),t.set(s[u+3],s[u+4],s[u+5]),n.set(s[u+6],s[u+7],s[u+8]),i.set(l[c+0],l[c+1]),a.set(l[c+2],l[c+3]),o.set(l[c+4],l[c+5]),r.copy(e).add(t).add(n).divideScalar(3);var f=h(r);d(i,c+0,e,f),d(a,c+2,t,f),d(o,c+4,n,f)}})(),function(){for(var e=0;e<l.length;e+=6){var t=l[e+0],n=l[e+2],r=l[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(l[e+0]+=1),n<.2&&(l[e+2]+=1),r<.2&&(l[e+4]+=1))}}()}(),e.setAttribute("position",new Xi(s,3)),e.setAttribute("normal",new Xi(s.slice(),3)),e.setAttribute("uv",new Xi(l,2)),0===o?e.computeVertexNormals():e.normalizeNormals(),e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(ra),lc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.Z)(this,n);var a=(1+Math.sqrt(5))/2,o=1/a,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o];return(e=t.call(this,s,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],r,i)).type="DodecahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(sc),uc=new xr,cc=new xr,fc=new xr,dc=new Pi,hc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if((0,m.Z)(this,n),(e=t.call(this)).type="EdgesGeometry",e.parameters={geometry:r,thresholdAngle:i},null!==r){for(var a=Math.pow(10,4),o=Math.cos(Rn*i),s=r.getIndex(),l=r.getAttribute("position"),u=s?s.count:l.count,c=[0,0,0],f=["a","b","c"],d=new Array(3),h={},p=[],v=0;v<u;v+=3){s?(c[0]=s.getX(v),c[1]=s.getX(v+1),c[2]=s.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);var g=dc.a,y=dc.b,A=dc.c;if(g.fromBufferAttribute(l,c[0]),y.fromBufferAttribute(l,c[1]),A.fromBufferAttribute(l,c[2]),dc.getNormal(fc),d[0]="".concat(Math.round(g.x*a),",").concat(Math.round(g.y*a),",").concat(Math.round(g.z*a)),d[1]="".concat(Math.round(y.x*a),",").concat(Math.round(y.y*a),",").concat(Math.round(y.z*a)),d[2]="".concat(Math.round(A.x*a),",").concat(Math.round(A.y*a),",").concat(Math.round(A.z*a)),d[0]!==d[1]&&d[1]!==d[2]&&d[2]!==d[0])for(var b=0;b<3;b++){var x=(b+1)%3,_=d[b],w=d[x],S=dc[f[b]],E=dc[f[x]],C="".concat(_,"_").concat(w),T="".concat(w,"_").concat(_);T in h&&h[T]?(fc.dot(h[T].normal)<=o&&(p.push(S.x,S.y,S.z),p.push(E.x,E.y,E.z)),h[T]=null):C in h||(h[C]={index0:c[b],index1:c[x],normal:fc.clone()})}}for(var M in h)if(h[M]){var I=h[M],k=I.index0,B=I.index1;uc.fromBufferAttribute(l,k),cc.fromBufferAttribute(l,B),p.push(uc.x,uc.y,uc.z),p.push(cc.x,cc.y,cc.z)}e.setAttribute("position",new Xi(p,3))}return e}return(0,g.Z)(n)}(ra),pc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this,e)).uuid=Dn(),r.type="Shape",r.holes=[],r}return(0,g.Z)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){(0,u.Z)((0,c.Z)(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new tc).fromJSON(i))}return this}}]),n}(tc),vc=function(e,t){var n,r,i,a,o,s,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,f=c?t[0]*u:e.length,d=mc(e,0,f,u,!0),h=[];if(!d||d.next===d.prev)return h;if(c&&(d=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=mc(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Tc(o));for(s.sort(wc),i=0;i<s.length;i++)n=Sc(s[i],n);return n}(e,t,d,u)),e.length>80*u){n=i=e[0],r=a=e[1];for(var p=u;p<f;p+=u)(o=e[p])<n&&(n=o),(s=e[p+1])<r&&(r=s),o>i&&(i=o),s>a&&(a=s);l=0!==(l=Math.max(i-n,a-r))?32767/l:0}return yc(d,h,u,n,r,l,0),h};function mc(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=Fc(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=Fc(a,e[a],e[a+1],o);return o&&Bc(o,o.next)&&(Oc(o),o=o.next),o}function gc(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Bc(r,r.next)&&0!==kc(r.prev,r,r.next))r=r.next;else{if(Oc(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function yc(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=Cc(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1)}(i)}(e,r,i,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?bc(e,r,i,a):Ac(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Oc(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?yc(e=xc(gc(e),t,n),t,n,r,i,a,2):2===o&&_c(e,t,n,r,i,a):yc(gc(e),t,n,r,i,a,1);break}}}function Ac(e){var t=e.prev,n=e,r=e.next;if(kc(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,l=n.y,u=r.y,c=i<a?i<o?i:o:a<o?a:o,f=s<l?s<u?s:u:l<u?l:u,d=i>a?i>o?i:o:a>o?a:o,h=s>l?s>u?s:u:l>u?l:u,p=r.next;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=f&&p.y<=h&&Mc(i,s,a,l,o,u,p.x,p.y)&&kc(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function bc(e,t,n,r){var i=e.prev,a=e,o=e.next;if(kc(i,a,o)>=0)return!1;for(var s=i.x,l=a.x,u=o.x,c=i.y,f=a.y,d=o.y,h=s<l?s<u?s:u:l<u?l:u,p=c<f?c<d?c:d:f<d?f:d,v=s>l?s>u?s:u:l>u?l:u,m=c>f?c>d?c:d:f>d?f:d,g=Cc(h,p,t,n,r),y=Cc(v,m,t,n,r),A=e.prevZ,b=e.nextZ;A&&A.z>=g&&b&&b.z<=y;){if(A.x>=h&&A.x<=v&&A.y>=p&&A.y<=m&&A!==i&&A!==o&&Mc(s,c,l,f,u,d,A.x,A.y)&&kc(A.prev,A,A.next)>=0)return!1;if(A=A.prevZ,b.x>=h&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==o&&Mc(s,c,l,f,u,d,b.x,b.y)&&kc(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;A&&A.z>=g;){if(A.x>=h&&A.x<=v&&A.y>=p&&A.y<=m&&A!==i&&A!==o&&Mc(s,c,l,f,u,d,A.x,A.y)&&kc(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;b&&b.z<=y;){if(b.x>=h&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==o&&Mc(s,c,l,f,u,d,b.x,b.y)&&kc(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function xc(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Bc(i,a)&&Rc(i,r,r.next,a)&&Lc(i,a)&&Lc(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),Oc(r),Oc(r.next),r=e=a),r=r.next}while(r!==e);return gc(r)}function _c(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Ic(o,s)){var l=Nc(o,s);return o=gc(o,o.next),l=gc(l,l.next),yc(o,t,n,r,i,a,0),void yc(l,t,n,r,i,a,0)}s=s.next}o=o.next}while(o!==e)}function wc(e,t){return e.x-t.x}function Sc(e,t){var n=function(e,t){var n,r=t,i=-1/0,a=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>i&&(i=s,n=r.x<r.next.x?r:r.next,s===a))return n}r=r.next}while(r!==t);if(!n)return null;var l,u=n,c=n.x,f=n.y,d=1/0;r=n;do{a>=r.x&&r.x>=c&&a!==r.x&&Mc(o<f?a:i,o,c,f,o<f?i:a,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(a-r.x),Lc(r,e)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&Ec(n,r)))&&(n=r,d=l)),r=r.next}while(r!==u);return n}(e,t);if(!n)return t;var r=Nc(n,e);return gc(r,r.next),gc(n,n.next)}function Ec(e,t){return kc(e.prev,e,t.prev)<0&&kc(t.next,e,e.next)<0}function Cc(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Tc(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Mc(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function Ic(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Rc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Lc(e,t)&&Lc(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(kc(e.prev,e,t.prev)||kc(e,t.prev,t))||Bc(e,t)&&kc(e.prev,e,e.next)>0&&kc(t.prev,t,t.next)>0)}function kc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Bc(e,t){return e.x===t.x&&e.y===t.y}function Rc(e,t,n,r){var i=Dc(kc(e,t,n)),a=Dc(kc(e,t,r)),o=Dc(kc(n,r,e)),s=Dc(kc(n,r,t));return i!==a&&o!==s||(!(0!==i||!Pc(e,n,t))||(!(0!==a||!Pc(e,r,t))||(!(0!==o||!Pc(n,e,r))||!(0!==s||!Pc(n,t,r)))))}function Pc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Dc(e){return e>0?1:e<0?-1:0}function Lc(e,t){return kc(e.prev,e,e.next)<0?kc(e,t,e.next)>=0&&kc(e,e.prev,t)>=0:kc(e,t,e.prev)<0||kc(e,e.next,t)<0}function Nc(e,t){var n=new Uc(e.i,e.x,e.y),r=new Uc(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Fc(e,t,n,r){var i=new Uc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Oc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Uc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}var zc=function(){function e(){(0,m.Z)(this,e)}return(0,g.Z)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];Gc(e),Qc(n,e);var a=e.length;t.forEach(Gc);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,Qc(n,t[o]);for(var s=vc(n,r),l=0;l<s.length;l+=3)i.push(s.slice(l,l+3));return i}}]),e}();function Gc(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Qc(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var Zc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pc([new Hn(.5,.5),new Hn(-.5,.5),new Hn(-.5,-.5),new Hn(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,m.Z)(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:i},r=Array.isArray(r)?r:[r];for(var a=(0,f.Z)(e),o=[],s=[],l=0,u=r.length;l<u;l++){c(r[l])}function c(e){var t,n,r,l,u,c=[],f=void 0!==i.curveSegments?i.curveSegments:12,d=void 0!==i.steps?i.steps:1,h=void 0!==i.depth?i.depth:1,p=void 0===i.bevelEnabled||i.bevelEnabled,v=void 0!==i.bevelThickness?i.bevelThickness:.2,m=void 0!==i.bevelSize?i.bevelSize:v-.1,g=void 0!==i.bevelOffset?i.bevelOffset:0,y=void 0!==i.bevelSegments?i.bevelSegments:3,A=i.extrudePath,b=void 0!==i.UVGenerator?i.UVGenerator:Hc,x=!1;A&&(t=A.getSpacedPoints(d),x=!0,p=!1,n=A.computeFrenetFrames(d,!1),r=new xr,l=new xr,u=new xr),p||(y=0,v=0,m=0,g=0);var _=e.extractPoints(f),w=_.shape,S=_.holes;if(!zc.isClockWise(w)){w=w.reverse();for(var E=0,C=S.length;E<C;E++){var T=S[E];zc.isClockWise(T)&&(S[E]=T.reverse())}}for(var M=zc.triangulateShape(w,S),I=w,k=0,B=S.length;k<B;k++){var R=S[k];w=w.concat(R)}function P(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var D=w.length,L=M.length;function N(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=o*o+s*s,f=o*u-s*l;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(c),h=Math.sqrt(l*l+u*u),p=t.x-s/d,v=t.y+o/d,m=((n.x-u/h-p)*u-(n.y+l/h-v)*l)/(o*u-s*l),g=(r=p+o*m-e.x)*r+(i=v+s*m-e.y)*i;if(g<=2)return new Hn(r,i);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?l>Number.EPSILON&&(y=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new Hn(r/a,i/a)}for(var F=[],O=0,U=I.length,z=U-1,G=O+1;O<U;O++,z++,G++)z===U&&(z=0),G===U&&(G=0),F[O]=N(I[O],I[z],I[G]);for(var Q,Z=[],H=F.concat(),j=0,V=S.length;j<V;j++){var W=S[j];Q=[];for(var X=0,Y=W.length,K=Y-1,J=X+1;X<Y;X++,K++,J++)K===Y&&(K=0),J===Y&&(J=0),Q[X]=N(W[X],W[K],W[J]);Z.push(Q),H=H.concat(Q)}for(var q=0;q<y;q++){for(var $=q/y,ee=v*Math.cos($*Math.PI/2),te=m*Math.sin($*Math.PI/2)+g,ne=0,re=I.length;ne<re;ne++){var ie=P(I[ne],F[ne],te);Be(ie.x,ie.y,-ee)}for(var ae=0,oe=S.length;ae<oe;ae++){var se=S[ae];Q=Z[ae];for(var le=0,ue=se.length;le<ue;le++){var ce=P(se[le],Q[le],te);Be(ce.x,ce.y,-ee)}}}for(var fe=m+g,de=0;de<D;de++){var he=p?P(w[de],H[de],fe):w[de];x?(l.copy(n.normals[0]).multiplyScalar(he.x),r.copy(n.binormals[0]).multiplyScalar(he.y),u.copy(t[0]).add(l).add(r),Be(u.x,u.y,u.z)):Be(he.x,he.y,0)}for(var pe=1;pe<=d;pe++)for(var ve=0;ve<D;ve++){var me=p?P(w[ve],H[ve],fe):w[ve];x?(l.copy(n.normals[pe]).multiplyScalar(me.x),r.copy(n.binormals[pe]).multiplyScalar(me.y),u.copy(t[pe]).add(l).add(r),Be(u.x,u.y,u.z)):Be(me.x,me.y,h/d*pe)}for(var ge=y-1;ge>=0;ge--){for(var ye=ge/y,Ae=v*Math.cos(ye*Math.PI/2),be=m*Math.sin(ye*Math.PI/2)+g,xe=0,_e=I.length;xe<_e;xe++){var we=P(I[xe],F[xe],be);Be(we.x,we.y,h+Ae)}for(var Se=0,Ee=S.length;Se<Ee;Se++){var Ce=S[Se];Q=Z[Se];for(var Te=0,Me=Ce.length;Te<Me;Te++){var Ie=P(Ce[Te],Q[Te],be);x?Be(Ie.x,Ie.y+t[d-1].y,t[d-1].x+Ae):Be(Ie.x,Ie.y,h+Ae)}}}function ke(e,t){for(var n=e.length;--n>=0;){var r=n,i=n-1;i<0&&(i=e.length-1);for(var a=0,o=d+2*y;a<o;a++){var s=D*a,l=D*(a+1);Pe(t+r+s,t+i+s,t+i+l,t+r+l)}}}function Be(e,t,n){c.push(e),c.push(t),c.push(n)}function Re(e,t,n){De(e),De(t),De(n);var r=o.length/3,i=b.generateTopUV(a,o,r-3,r-2,r-1);Le(i[0]),Le(i[1]),Le(i[2])}function Pe(e,t,n,r){De(e),De(t),De(r),De(t),De(n),De(r);var i=o.length/3,s=b.generateSideWallUV(a,o,i-6,i-3,i-2,i-1);Le(s[0]),Le(s[1]),Le(s[3]),Le(s[1]),Le(s[2]),Le(s[3])}function De(e){o.push(c[3*e+0]),o.push(c[3*e+1]),o.push(c[3*e+2])}function Le(e){s.push(e.x),s.push(e.y)}!function(){var e=o.length/3;if(p){for(var t=0,n=D*t,r=0;r<L;r++){var i=M[r];Re(i[2]+n,i[1]+n,i[0]+n)}n=D*(t=d+2*y);for(var s=0;s<L;s++){var l=M[s];Re(l[0]+n,l[1]+n,l[2]+n)}}else{for(var u=0;u<L;u++){var c=M[u];Re(c[2],c[1],c[0])}for(var f=0;f<L;f++){var h=M[f];Re(h[0]+D*d,h[1]+D*d,h[2]+D*d)}}a.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;ke(I,t),t+=I.length;for(var n=0,r=S.length;n<r;n++){var i=S[n];ke(i,t),t+=i.length}a.addGroup(e,o.length/3-e,1)}()}return e.setAttribute("position",new Xi(o,3)),e.setAttribute("uv",new Xi(s,2)),e.computeVertexNormals(),e}return(0,g.Z)(n,[{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=t[e.shapes[i]];r.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new $u[s.type]).fromJSON(s)),new n(r,e.options)}}]),n}(ra),Hc={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new Hn(a,o),new Hn(s,l),new Hn(u,c)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],f=t[3*r+2],d=t[3*i],h=t[3*i+1],p=t[3*i+2],v=t[3*a],m=t[3*a+1],g=t[3*a+2];return Math.abs(s-c)<Math.abs(o-u)?[new Hn(o,1-l),new Hn(u,1-f),new Hn(d,1-p),new Hn(v,1-g)]:[new Hn(s,1-l),new Hn(c,1-f),new Hn(h,1-p),new Hn(m,1-g)]}};var jc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.Z)(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1];return(e=t.call(this,o,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],r,i)).type="IcosahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(sc),Vc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.Z)(this,n);return(e=t.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],r,i)).type="OctahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(sc),Wc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;(0,m.Z)(this,n),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:r,outerRadius:i,thetaSegments:a,phiSegments:o,thetaStart:s,thetaLength:l},a=Math.max(3,a);for(var u=[],c=[],f=[],d=[],h=r,p=(i-r)/(o=Math.max(1,o)),v=new xr,g=new Hn,y=0;y<=o;y++){for(var A=0;A<=a;A++){var b=s+A/a*l;v.x=h*Math.cos(b),v.y=h*Math.sin(b),c.push(v.x,v.y,v.z),f.push(0,0,1),g.x=(v.x/i+1)/2,g.y=(v.y/i+1)/2,d.push(g.x,g.y)}h+=p}for(var x=0;x<o;x++)for(var _=x*(a+1),w=0;w<a;w++){var S=w+_,E=S,C=S+a+1,T=S+a+2,M=S+1;u.push(E,C,M),u.push(C,T,M)}return e.setIndex(u),e.setAttribute("position",new Xi(c,3)),e.setAttribute("normal",new Xi(f,3)),e.setAttribute("uv",new Xi(d,2)),e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(ra),Xc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pc([new Hn(0,.5),new Hn(-.5,-.5),new Hn(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;(0,m.Z)(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:i};var a=[],o=[],s=[],l=[],u=0,c=0;if(!1===Array.isArray(r))d(r);else for(var f=0;f<r.length;f++)d(r[f]),e.addGroup(u,c,f),u+=c,c=0;function d(e){var t=o.length/3,n=e.extractPoints(i),r=n.shape,u=n.holes;!1===zc.isClockWise(r)&&(r=r.reverse());for(var f=0,d=u.length;f<d;f++){var h=u[f];!0===zc.isClockWise(h)&&(u[f]=h.reverse())}for(var p=zc.triangulateShape(r,u),v=0,m=u.length;v<m;v++){var g=u[v];r=r.concat(g)}for(var y=0,A=r.length;y<A;y++){var b=r[y];o.push(b.x,b.y,0),s.push(0,0,1),l.push(b.x,b.y)}for(var x=0,_=p.length;x<_;x++){var w=p[x],S=w[0]+t,E=w[1]+t,C=w[2]+t;a.push(S,E,C),c+=3}}return e.setIndex(a),e.setAttribute("position",new Xi(o,3)),e.setAttribute("normal",new Xi(s,3)),e.setAttribute("uv",new Xi(l,2)),e}return(0,g.Z)(n,[{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=t[e.shapes[i]];r.push(o)}return new n(r,e.curveSegments)}}]),n}(ra);var Yc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;(0,m.Z)(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:r,widthSegments:i,heightSegments:a,phiStart:o,phiLength:s,thetaStart:l,thetaLength:u},i=Math.max(3,Math.floor(i)),a=Math.max(2,Math.floor(a));for(var c=Math.min(l+u,Math.PI),f=0,d=[],h=new xr,p=new xr,v=[],g=[],y=[],A=[],b=0;b<=a;b++){var x=[],_=b/a,w=0;0==b&&0==l?w=.5/i:b==a&&c==Math.PI&&(w=-.5/i);for(var S=0;S<=i;S++){var E=S/i;h.x=-r*Math.cos(o+E*s)*Math.sin(l+_*u),h.y=r*Math.cos(l+_*u),h.z=r*Math.sin(o+E*s)*Math.sin(l+_*u),g.push(h.x,h.y,h.z),p.copy(h).normalize(),y.push(p.x,p.y,p.z),A.push(E+w,1-_),x.push(f++)}d.push(x)}for(var C=0;C<a;C++)for(var T=0;T<i;T++){var M=d[C][T+1],I=d[C][T],k=d[C+1][T],B=d[C+1][T+1];(0!==C||l>0)&&v.push(M,I,B),(C!==a-1||c<Math.PI)&&v.push(I,k,B)}return e.setIndex(v),e.setAttribute("position",new Xi(g,3)),e.setAttribute("normal",new Xi(y,3)),e.setAttribute("uv",new Xi(A,2)),e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(ra),Kc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,m.Z)(this,n);return(e=t.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],r,i)).type="TetrahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(sc),Jc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;(0,m.Z)(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:r,tube:i,radialSegments:a,tubularSegments:o,arc:s},a=Math.floor(a),o=Math.floor(o);for(var l=[],u=[],c=[],f=[],d=new xr,h=new xr,p=new xr,v=0;v<=a;v++)for(var g=0;g<=o;g++){var y=g/o*s,A=v/a*Math.PI*2;h.x=(r+i*Math.cos(A))*Math.cos(y),h.y=(r+i*Math.cos(A))*Math.sin(y),h.z=i*Math.sin(A),u.push(h.x,h.y,h.z),d.x=r*Math.cos(y),d.y=r*Math.sin(y),p.subVectors(h,d).normalize(),c.push(p.x,p.y,p.z),f.push(g/o),f.push(v/a)}for(var b=1;b<=a;b++)for(var x=1;x<=o;x++){var _=(o+1)*b+x-1,w=(o+1)*(b-1)+x-1,S=(o+1)*(b-1)+x,E=(o+1)*b+x;l.push(_,w,E),l.push(w,S,E)}return e.setIndex(l),e.setAttribute("position",new Xi(u,3)),e.setAttribute("normal",new Xi(c,3)),e.setAttribute("uv",new Xi(f,2)),e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(ra),qc=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;(0,m.Z)(this,n),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:r,tube:i,tubularSegments:a,radialSegments:o,p:s,q:l},a=Math.floor(a),o=Math.floor(o);for(var u=[],c=[],f=[],d=[],h=new xr,p=new xr,v=new xr,g=new xr,y=new xr,A=new xr,b=new xr,x=0;x<=a;++x){var _=x/a*s*Math.PI*2;P(_,s,l,r,v),P(_+.01,s,l,r,g),A.subVectors(g,v),b.addVectors(g,v),y.crossVectors(A,b),b.crossVectors(y,A),y.normalize(),b.normalize();for(var w=0;w<=o;++w){var S=w/o*Math.PI*2,E=-i*Math.cos(S),C=i*Math.sin(S);h.x=v.x+(E*b.x+C*y.x),h.y=v.y+(E*b.y+C*y.y),h.z=v.z+(E*b.z+C*y.z),c.push(h.x,h.y,h.z),p.subVectors(h,v).normalize(),f.push(p.x,p.y,p.z),d.push(x/a),d.push(w/o)}}for(var T=1;T<=a;T++)for(var M=1;M<=o;M++){var I=(o+1)*(T-1)+(M-1),k=(o+1)*T+(M-1),B=(o+1)*T+M,R=(o+1)*(T-1)+M;u.push(I,k,R),u.push(k,B,R)}function P(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(s)*.5}return e.setIndex(u),e.setAttribute("position",new Xi(c,3)),e.setAttribute("normal",new Xi(f,3)),e.setAttribute("uv",new Xi(d,2)),e}return(0,g.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(ra),$c=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ju(new xr(-1,-1,0),new xr(-1,1,0),new xr(1,1,0)),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,m.Z)(this,n),(e=t.call(this)).type="TubeGeometry",e.parameters={path:r,tubularSegments:i,radius:a,radialSegments:o,closed:s};var l=r.computeFrenetFrames(i,s);e.tangents=l.tangents,e.normals=l.normals,e.binormals=l.binormals;var u=new xr,c=new xr,f=new Hn,d=new xr,h=[],p=[],v=[],g=[];function y(e){d=r.getPointAt(e/i,d);for(var t=l.normals[e],n=l.binormals[e],s=0;s<=o;s++){var f=s/o*Math.PI*2,v=Math.sin(f),m=-Math.cos(f);c.x=m*t.x+v*n.x,c.y=m*t.y+v*n.y,c.z=m*t.z+v*n.z,c.normalize(),p.push(c.x,c.y,c.z),u.x=d.x+a*c.x,u.y=d.y+a*c.y,u.z=d.z+a*c.z,h.push(u.x,u.y,u.z)}}return function(){for(var e=0;e<i;e++)y(e);y(!1===s?i:0),function(){for(var e=0;e<=i;e++)for(var t=0;t<=o;t++)f.x=e/i,f.y=t/o,v.push(f.x,f.y)}(),function(){for(var e=1;e<=i;e++)for(var t=1;t<=o;t++){var n=(o+1)*(e-1)+(t-1),r=(o+1)*e+(t-1),a=(o+1)*e+t,s=(o+1)*(e-1)+t;g.push(n,r,s),g.push(r,a,s)}}()}(),e.setIndex(g),e.setAttribute("position",new Xi(h,3)),e.setAttribute("normal",new Xi(p,3)),e.setAttribute("uv",new Xi(v,2)),e}return(0,g.Z)(n,[{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new $u[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(ra),ef=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,m.Z)(this,n),(e=t.call(this)).type="WireframeGeometry",e.parameters={geometry:r},null!==r){var i=[],a=new Set,o=new xr,s=new xr;if(null!==r.index){var l=r.attributes.position,u=r.index,c=r.groups;0===c.length&&(c=[{start:0,count:u.count,materialIndex:0}]);for(var f=0,d=c.length;f<d;++f)for(var h=c[f],p=h.start,v=p,g=p+h.count;v<g;v+=3)for(var y=0;y<3;y++){var A=u.getX(v+y),b=u.getX(v+(y+1)%3);o.fromBufferAttribute(l,A),s.fromBufferAttribute(l,b),!0===tf(o,s,a)&&(i.push(o.x,o.y,o.z),i.push(s.x,s.y,s.z))}}else for(var x=r.attributes.position,_=0,w=x.count/3;_<w;_++)for(var S=0;S<3;S++){var E=3*_+S,C=3*_+(S+1)%3;o.fromBufferAttribute(x,E),s.fromBufferAttribute(x,C),!0===tf(o,s,a)&&(i.push(o.x,o.y,o.z),i.push(s.x,s.y,s.z))}e.setAttribute("position",new Xi(i,3))}return e}return(0,g.Z)(n)}(ra);function tf(e,t,n){var r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var nf=Object.freeze({__proto__:null,BoxGeometry:wa,CapsuleGeometry:rc,CircleGeometry:ic,ConeGeometry:oc,CylinderGeometry:ac,DodecahedronGeometry:lc,EdgesGeometry:hc,ExtrudeGeometry:Zc,IcosahedronGeometry:jc,LatheGeometry:nc,OctahedronGeometry:Vc,PlaneGeometry:Za,PolyhedronGeometry:sc,RingGeometry:Wc,ShapeGeometry:Xc,SphereGeometry:Yc,TetrahedronGeometry:Kc,TorusGeometry:Jc,TorusKnotGeometry:qc,TubeGeometry:$c,WireframeGeometry:ef}),rf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isShadowMaterial=!0,r.type="ShadowMaterial",r.color=new sr(0),r.transparent=!0,r.fog=!0,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}]),n}(Li),af=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this,e)).isRawShaderMaterial=!0,r.type="RawShaderMaterial",r}return(0,g.Z)(n)}(Ta),of=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isMeshStandardMaterial=!0,r.defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new sr(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new sr(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Yt,r.normalScale=new Hn(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Li),sf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isMeshPhysicalMaterial=!0,r.defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new Hn(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty((0,f.Z)(r),"reflectivity",{get:function(){return Ln(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.iridescenceMap=null,r.iridescenceIOR=1.3,r.iridescenceThicknessRange=[100,400],r.iridescenceThicknessMap=null,r.sheenColor=new sr(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=1/0,r.attenuationColor=new sr(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new sr(1,1,1),r.specularColorMap=null,r._sheen=0,r._clearcoat=0,r._iridescence=0,r._transmission=0,r.setValues(e),r}return(0,g.Z)(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=(0,a.Z)(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(of),lf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isMeshPhongMaterial=!0,r.type="MeshPhongMaterial",r.color=new sr(16777215),r.specular=new sr(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new sr(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Yt,r.normalScale=new Hn(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=le,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Li),uf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isMeshToonMaterial=!0,r.defines={TOON:""},r.type="MeshToonMaterial",r.color=new sr(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new sr(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Yt,r.normalScale=new Hn(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Li),cf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isMeshNormalMaterial=!0,r.type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Yt,r.normalScale=new Hn(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.flatShading=!1,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(Li),ff=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isMeshLambertMaterial=!0,r.type="MeshLambertMaterial",r.color=new sr(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new sr(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Yt,r.normalScale=new Hn(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=le,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Li),df=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isMeshMatcapMaterial=!0,r.defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new sr(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Yt,r.normalScale=new Hn(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.fog=!0,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Li),hf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).isLineDashedMaterial=!0,r.type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(fu);function pf(e,t,n){return mf(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function vf(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function mf(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gf(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n}function yf(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,l=0;l!==t;++l)i[o++]=e[s+l];return i}function Af(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}}var bf=Object.freeze({__proto__:null,arraySlice:pf,convertArray:vf,isTypedArray:mf,getKeyframeOrder:gf,sortedArray:yf,flattenJSON:Af,subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],u=l.getValueSize(),c=[],f=[],d=0;d<l.times.length;++d){var h=l.times[d]*i;if(!(h<n||h>=r)){c.push(l.times[d]);for(var p=0;p<u;++p)f.push(l.values[d*u+p])}}0!==c.length&&(l.times=vf(c,l.times.constructor),l.values=vf(f,l.values.constructor),o.push(l))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=t/r,o=function(){var t=n.tracks[s],r=t.ValueTypeName;if("bool"===r||"string"===r)return 0;var i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)return 0;var o=0,l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);var u=0,c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);var f,d=t.times.length-1;if(a<=t.times[0]){var h=o,p=l-o;f=pf(t.values,h,p)}else if(a>=t.times[d]){var v=d*l+o,m=v+l-o;f=pf(t.values,v,m)}else{var g=t.createInterpolant(),y=o,A=l-o;g.evaluate(a),f=pf(g.resultBuffer,y,A)}"quaternion"===r&&(new br).fromArray(f).normalize().conjugate().toArray(f);for(var b=i.times.length,x=0;x<b;++x){var _=x*c+u;if("quaternion"===r)br.multiplyQuaternionsFlat(i.values,_,f,0,i.values,_);else for(var w=c-2*u,S=0;S<w;++S)i.values[_+S]-=f[S]}},s=0;s<i;++s)o();return e.blendMode=Gt,e}}),xf=function(){function e(t,n,r,i){(0,m.Z)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return(0,g.Z)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var l=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var u=n+a>>>1;e<t[u]?a=u:n=u+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),_f=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){var o;return(0,m.Z)(this,n),(o=t.call(this,e,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:Ft,endingEnd:Ft},o}return(0,g.Z)(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case Ot:i=e,o=2*t-n;break;case Ut:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ot:a=e,s=2*n-t;break;case Ut:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=a*u}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,f=this._weightPrev,d=this._weightNext,h=(n-t)/(r-t),p=h*h,v=p*h,m=-f*v+2*f*p-f*h,g=(1+f)*v+(-1.5-2*f)*p+(-.5+f)*h+1,y=(-1-d)*v+(1.5+d)*p+.5*h,A=d*v-d*p,b=0;b!==o;++b)i[b]=m*a[u+b]+g*a[l+b]+y*a[s+b]+A*a[c+b];return i}}]),n}(xf),wf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,m.Z)(this,n),t.call(this,e,r,i,a)}return(0,g.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(r-t),c=1-u,f=0;f!==o;++f)i[f]=a[l+f]*c+a[s+f]*u;return i}}]),n}(xf),Sf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,m.Z)(this,n),t.call(this,e,r,i,a)}return(0,g.Z)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(xf),Ef=function(){function e(t,n,r,i){if((0,m.Z)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=vf(n,this.TimeBufferType),this.values=vf(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return(0,g.Z)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new Sf(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new wf(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new _f(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Dt:t=this.InterpolantFactoryMethodDiscrete;break;case Lt:t=this.InterpolantFactoryMethodLinear;break;case Nt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Dt;case this.InterpolantFactoryMethodLinear:return Lt;case this.InterpolantFactoryMethodSmooth:return Nt}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=pf(n,i,a),this.values=pf(this.values,i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&mf(r))for(var l=0,u=r.length;l!==u;++l){var c=r[l];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=pf(this.times),t=pf(this.values),n=this.getValueSize(),r=this.getInterpolation()===Nt,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==e[0]))if(r)s=!0;else for(var u=o*n,c=u-n,f=u+n,d=0;d!==n;++d){var h=t[u+d];if(h!==t[c+d]||h!==t[f+d]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,A=0;A!==n;++A)t[y+A]=t[g+A];++a}return a!==e.length?(this.times=pf(e,0,a),this.values=pf(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=pf(this.times,0),t=pf(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:vf(e.times,Array),values:vf(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();Ef.prototype.TimeBufferType=Float32Array,Ef.prototype.ValueBufferType=Float32Array,Ef.prototype.DefaultInterpolation=Lt;var Cf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,m.Z)(this,n),t.apply(this,arguments)}return(0,g.Z)(n)}(Ef);Cf.prototype.ValueTypeName="bool",Cf.prototype.ValueBufferType=Array,Cf.prototype.DefaultInterpolation=Dt,Cf.prototype.InterpolantFactoryMethodLinear=void 0,Cf.prototype.InterpolantFactoryMethodSmooth=void 0;var Tf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,m.Z)(this,n),t.apply(this,arguments)}return(0,g.Z)(n)}(Ef);Tf.prototype.ValueTypeName="color";var Mf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,m.Z)(this,n),t.apply(this,arguments)}return(0,g.Z)(n)}(Ef);Mf.prototype.ValueTypeName="number";var If=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,m.Z)(this,n),t.call(this,e,r,i,a)}return(0,g.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),l=e*o,u=l+o;l!==u;l+=4)br.slerpFlat(i,0,a,l-o,a,l,s);return i}}]),n}(xf),kf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,m.Z)(this,n),t.apply(this,arguments)}return(0,g.Z)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new If(this.times,this.values,this.getValueSize(),e)}}]),n}(Ef);kf.prototype.ValueTypeName="quaternion",kf.prototype.DefaultInterpolation=Lt,kf.prototype.InterpolantFactoryMethodSmooth=void 0;var Bf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,m.Z)(this,n),t.apply(this,arguments)}return(0,g.Z)(n)}(Ef);Bf.prototype.ValueTypeName="string",Bf.prototype.ValueBufferType=Array,Bf.prototype.DefaultInterpolation=Dt,Bf.prototype.InterpolantFactoryMethodLinear=void 0,Bf.prototype.InterpolantFactoryMethodSmooth=void 0;var Rf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,m.Z)(this,n),t.apply(this,arguments)}return(0,g.Z)(n)}(Ef);Rf.prototype.ValueTypeName="vector";var Pf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zt;(0,m.Z)(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Dn(),this.duration<0&&this.resetDuration()}return(0,g.Z)(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Df(n[i]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(Ef.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],l=[];s.push((o+i-1)%i,o,(o+1)%i),l.push(0,1,0);var u=gf(s);s=yf(s,1,u),l=yf(l,1,u),r||0!==s[0]||(s.push(i),l.push(l[0])),a.push(new Mf(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(i);if(l&&l.length>1){var u=l[1],c=r[u];c||(r[u]=c=[]),c.push(s)}}var f=[];for(var d in r)f.push(this.CreateFromMorphTargetSequence(d,r[d],t,n));return f}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];Af(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){var f={},d=void 0;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(var h=0;h<c[d].morphTargets.length;h++)f[c[d].morphTargets[h]]=-1;for(var p in f){for(var v=[],m=[],g=0;g!==c[d].morphTargets.length;++g){var y=c[d];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new Mf(".morphTargetInfluence["+p+"]",v,m))}s=f.length*a}else{var A=".bones["+t[u].name+"]";n(Rf,A+".position",c,"pos",r),n(kf,A+".quaternion",c,"rot",r),n(Rf,A+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}}]),e}();function Df(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Mf;case"vector":case"vector2":case"vector3":case"vector4":return Rf;case"color":return Tf;case"quaternion":return kf;case"bool":case"boolean":return Cf;case"string":return Bf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];Af(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var Lf,Nf={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Ff=(0,g.Z)((function e(t,n,r){(0,m.Z)(this,e);var i=this,a=!1,o=0,s=0,l=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return l?l(e):e},this.setURLModifier=function(e){return l=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){var t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=u.length;t<n;t+=2){var r=u[t],i=u[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),Of=new Ff,Uf=function(){function e(t){(0,m.Z)(this,e),this.manager=void 0!==t?t:Of,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,g.Z)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),zf={},Gf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;return(0,m.Z)(this,n),(i=t.call(this,e)).response=r,i}return(0,g.Z)(n)}((0,i.Z)(Error)),Qf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,m.Z)(this,n),t.call(this,e)}return(0,g.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=Nf.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===zf[e]){zf[e]=[],zf[e].push({onLoad:t,onProgress:n,onError:r});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=zf[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a,s=0,l=new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var i=r.done,l=r.value;if(i)e.close();else{s+=l.byteLength;for(var u=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a}),c=0,f=n.length;c<f;c++){var d=n[c];d.onProgress&&d.onProgress(u)}e.enqueue(l),t()}}))}()}});return new Response(l)}throw new Gf('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(l){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((function(e){return r.decode(e)}))}})).then((function(t){Nf.add(e,t);var n=zf[e];delete zf[e];for(var r=0,i=n.length;r<i;r++){var a=n[r];a.onLoad&&a.onLoad(t)}})).catch((function(t){var n=zf[e];if(void 0===n)throw i.manager.itemError(e),t;delete zf[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e)})).finally((function(){i.manager.itemEnd(e)})),this.manager.itemStart(e)}else zf[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(Uf),Zf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,m.Z)(this,n),t.call(this,e)}return(0,g.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new Qf(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=Pf.parse(e[n]);t.push(r)}return t}}]),n}(Uf),Hf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,m.Z)(this,n),t.call(this,e)}return(0,g.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=[],o=new Bu,s=new Qf(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);var l=0;function u(u){s.load(e[u],(function(e){var n=i.parse(e,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=Be),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(var c=0,f=e.length;c<f;++c)u(c);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap){for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Be),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}]),n}(Uf),jf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,m.Z)(this,n),t.call(this,e)}return(0,g.Z)(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Nf.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=Yn("img");function s(){u(),Nf.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){u(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}]),n}(Uf),Vf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,m.Z)(this,n),t.call(this,e)}return(0,g.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new Ra,a=new jf(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,6===++o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var l=0;l<e.length;++l)s(l);return i}}]),n}(Uf),Wf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,m.Z)(this,n),t.call(this,e)}return(0,g.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new eu,o=new Qf(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){var n=i.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Se,a.wrapT=void 0!==n.wrapT?n.wrapT:Se,a.magFilter=void 0!==n.magFilter?n.magFilter:Be,a.minFilter=void 0!==n.minFilter?n.minFilter:Be,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=De),1===n.mipmapCount&&(a.minFilter=Be),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,r),a}}]),n}(Uf),Xf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,m.Z)(this,n),t.call(this,e)}return(0,g.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new dr,a=new jf(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(Uf),Yf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,m.Z)(this,n),(r=t.call(this)).isLight=!0,r.type="Light",r.color=new sr(e),r.intensity=i,r}return(0,g.Z)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(_i),Kf=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a;return(0,m.Z)(this,n),(a=t.call(this,e,i)).isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy(_i.DefaultUp),a.updateMatrix(),a.groundColor=new sr(r),a}return(0,g.Z)(n,[{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(Yf),Jf=new Jr,qf=new xr,$f=new xr,ed=function(){function e(t){(0,m.Z)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Hn(512,512),this.map=null,this.mapPass=null,this.matrix=new Jr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new za,this._frameExtents=new Hn(1,1),this._viewportCount=1,this._viewports=[new hr(0,0,1,1)]}return(0,g.Z)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;qf.setFromMatrixPosition(e.matrixWorld),t.position.copy(qf),$f.setFromMatrixPosition(e.target.matrixWorld),t.lookAt($f),t.updateMatrixWorld(),Jf.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Jf),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Jf)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),td=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this,new Ia(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return(0,g.Z)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*Pn*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;r===t.fov&&i===t.aspect&&a===t.far||(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),(0,u.Z)((0,c.Z)(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(ed),nd=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,m.Z)(this,n),(i=t.call(this,e,r)).isSpotLight=!0,i.type="SpotLight",i.position.copy(_i.DefaultUp),i.updateMatrix(),i.target=new _i,i.distance=a,i.angle=o,i.penumbra=s,i.decay=l,i.map=null,i.shadow=new td,i}return(0,g.Z)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Yf),rd=new Jr,id=new xr,ad=new xr,od=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this,new Ia(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new Hn(4,2),e._viewportCount=6,e._viewports=[new hr(2,1,1,1),new hr(0,1,1,1),new hr(3,1,1,1),new hr(1,1,1,1),new hr(3,0,1,1),new hr(1,0,1,1)],e._cubeDirections=[new xr(1,0,0),new xr(-1,0,0),new xr(0,0,1),new xr(0,0,-1),new xr(0,1,0),new xr(0,-1,0)],e._cubeUps=[new xr(0,1,0),new xr(0,1,0),new xr(0,1,0),new xr(0,1,0),new xr(0,0,1),new xr(0,0,-1)],e}return(0,g.Z)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),id.setFromMatrixPosition(e.matrixWorld),n.position.copy(id),ad.copy(n.position),ad.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ad),n.updateMatrixWorld(),r.makeTranslation(-id.x,-id.y,-id.z),rd.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rd)}}]),n}(ed),sd=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,m.Z)(this,n),(i=t.call(this,e,r)).isPointLight=!0,i.type="PointLight",i.distance=a,i.decay=o,i.shadow=new od,i}return(0,g.Z)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(Yf),ld=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this,new $a(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return(0,g.Z)(n)}(ed),ud=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;return(0,m.Z)(this,n),(i=t.call(this,e,r)).isDirectionalLight=!0,i.type="DirectionalLight",i.position.copy(_i.DefaultUp),i.updateMatrix(),i.target=new _i,i.shadow=new ld,i}return(0,g.Z)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Yf),cd=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;return(0,m.Z)(this,n),(i=t.call(this,e,r)).isAmbientLight=!0,i.type="AmbientLight",i}return(0,g.Z)(n)}(Yf),fd=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(0,m.Z)(this,n),(i=t.call(this,e,r)).isRectAreaLight=!0,i.type="RectAreaLight",i.width=a,i.height=o,i}return(0,g.Z)(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(Yf),dd=function(){function e(){(0,m.Z)(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new xr)}return(0,g.Z)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}(),hd=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,m.Z)(this,n),(e=t.call(this,void 0,i)).isLightProbe=!0,e.sh=r,e}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(Yf),pd=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this,e)).textures={},r}return(0,g.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new Qf(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t=this.textures;function r(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=n.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new sr).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var a in e.uniforms){var o=e.uniforms[a];switch(i.uniforms[a]={},o.type){case"t":i.uniforms[a].value=r(o.value);break;case"c":i.uniforms[a].value=(new sr).setHex(o.value);break;case"v2":i.uniforms[a].value=(new Hn).fromArray(o.value);break;case"v3":i.uniforms[a].value=(new xr).fromArray(o.value);break;case"v4":i.uniforms[a].value=(new hr).fromArray(o.value);break;case"m3":i.uniforms[a].value=(new jn).fromArray(o.value);break;case"m4":i.uniforms[a].value=(new Jr).fromArray(o.value);break;default:i.uniforms[a].value=o.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(var s in e.extensions)i.extensions[s]=e.extensions[s];if(void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=r(e.map)),void 0!==e.matcap&&(i.matcap=r(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=r(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=r(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var l=e.normalScale;!1===Array.isArray(l)&&(l=[l,l]),i.normalScale=(new Hn).fromArray(l)}return void 0!==e.displacementMap&&(i.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=r(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=r(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=r(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=r(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=r(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=r(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Hn).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=r(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=r(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=r(e.thicknessMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=r(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}},{key:"setTextures",value:function(e){return this.textures=e,this}}],[{key:"createMaterialFromType",value:function(e){return new{ShadowMaterial:rf,SpriteMaterial:Il,RawShaderMaterial:af,ShaderMaterial:Ta,PointsMaterial:_u,MeshPhysicalMaterial:sf,MeshStandardMaterial:of,MeshPhongMaterial:lf,MeshToonMaterial:uf,MeshNormalMaterial:cf,MeshLambertMaterial:ff,MeshDepthMaterial:il,MeshDistanceMaterial:al,MeshBasicMaterial:Ni,MeshMatcapMaterial:df,LineDashedMaterial:hf,LineBasicMaterial:fu,Material:Li}[e]}}]),n}(Uf),vd=function(){function e(){(0,m.Z)(this,e)}return(0,g.Z)(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),md=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(ra),gd=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,m.Z)(this,n),t.call(this,e)}return(0,g.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new Qf(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t={},n={};function r(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers,i=r[t],a=new Uint32Array(i).buffer;return n[t]=a,a}(e,i.buffer),o=Xn(i.type,a),s=new Cl(o,i.stride);return s.uuid=i.uuid,t[r]=s,s}var i=e.isInstancedBufferGeometry?new md:new ra,a=e.data.index;if(void 0!==a){var o=Xn(a.type,a.array);i.setIndex(new Ui(o,1))}var s=e.data.attributes;for(var l in s){var u=s[l],c=void 0;if(u.isInterleavedBufferAttribute){var f=r(e.data,u.data);c=new Ml(f,u.itemSize,u.offset,u.normalized)}else{var d=Xn(u.type,u.array);c=new(u.isInstancedBufferAttribute?iu:Ui)(d,u.itemSize,u.normalized)}void 0!==u.name&&(c.name=u.name),void 0!==u.usage&&c.setUsage(u.usage),void 0!==u.updateRange&&(c.updateRange.offset=u.updateRange.offset,c.updateRange.count=u.updateRange.count),i.setAttribute(l,c)}var h=e.data.morphAttributes;if(h)for(var p in h){for(var v=h[p],m=[],g=0,y=v.length;g<y;g++){var A=v[g],b=void 0;if(A.isInterleavedBufferAttribute){var x=r(e.data,A.data);b=new Ml(x,A.itemSize,A.offset,A.normalized)}else{var _=Xn(A.type,A.array);b=new Ui(_,A.itemSize,A.normalized)}void 0!==A.name&&(b.name=A.name),m.push(b)}i.morphAttributes[p]=m}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var w=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==w)for(var S=0,E=w.length;S!==E;++S){var C=w[S];i.addGroup(C.start,C.count,C.materialIndex)}var T=e.data.boundingSphere;if(void 0!==T){var M=new xr;void 0!==T.center&&M.fromArray(T.center),i.boundingSphere=new Qr(M,T.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}]),n}(Uf),yd=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,m.Z)(this,n),t.call(this,e)}return(0,g.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=""===this.path?vd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new Qf(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}},{key:"loadAsync",value:function(){var e=(0,o.Z)((0,v.Z)().mark((function e(t,n){var r,i,a,o,s,l;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,i=""===this.path?vd.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||i,(a=new Qf(this.manager)).setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),e.next=9,a.loadAsync(t,n);case 9:if(o=e.sent,s=JSON.parse(o),void 0!==(l=s.metadata)&&void 0!==l.type&&"geometry"!==l.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,r.parseAsync(s);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,s,o,n),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),void 0!==t){var c=!1;for(var f in a)if(a[f].data instanceof HTMLImageElement){c=!0;break}!1===c&&t(l)}return l}},{key:"parseAsync",value:function(){var e=(0,o.Z)((0,v.Z)().mark((function e(t){var n,r,i,a,o,s,l,u;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),e.next=5,this.parseImagesAsync(t.images);case 5:return a=e.sent,o=this.parseTextures(t.textures,a),s=this.parseMaterials(t.materials,o),l=this.parseObject(t.object,i,s,o,n),u=this.parseSkeletons(t.skeletons,l),this.bindSkeletons(l,u),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new pc).fromJSON(e[n]);t[i.uuid]=i}return t}},{key:"parseSkeletons",value:function(e,t){var n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=(new ru).fromJSON(e[i],r);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var r=new gd,i=0,a=e.length;i<a;i++){var o=void 0,s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;default:s.type in nf?o=nf[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n}},{key:"parseMaterials",value:function(e,t){var n={},r={};if(void 0!==e){var i=new pd;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n],i=Pf.parse(r);t[i.uuid]=i}return t}},{key:"parseImages",value:function(e,t){var n,r=this,i={};function a(e){if("string"===typeof e){var t=e;return function(e){return r.manager.itemStart(e),n.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:r.resourcePath+t)}return e.data?{data:Xn(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var o=new Ff(t);(n=new jf(o)).setCrossOrigin(this.crossOrigin);for(var s=0,l=e.length;s<l;s++){var u=e[s],c=u.url;if(Array.isArray(c)){for(var f=[],d=0,h=c.length;d<h;d++){var p=a(c[d]);null!==p&&(p instanceof HTMLImageElement?f.push(p):f.push(new eu(p.data,p.width,p.height)))}i[u.uuid]=new ur(f)}else{var v=a(u.url);i[u.uuid]=new ur(v)}}}return i}},{key:"parseImagesAsync",value:function(){var e=(0,o.Z)((0,v.Z)().mark((function e(t){var n,r,i,a,s,l,u,c,f,d,h,p,m,g,y;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(){return s=(0,o.Z)((0,v.Z)().mark((function e(t){var r,a;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r=t)?r:n.resourcePath+r,e.next=5,i.loadAsync(a);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:Xn(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)},a=function(e){return s.apply(this,arguments)},n=this,r={},!(void 0!==t&&t.length>0)){e.next=33;break}(i=new jf(this.manager)).setCrossOrigin(this.crossOrigin),l=0,u=t.length;case 8:if(!(l<u)){e.next=33;break}if(c=t[l],f=c.url,!Array.isArray(f)){e.next=26;break}d=[],h=0,p=f.length;case 14:if(!(h<p)){e.next=23;break}return m=f[h],e.next=18,a(m);case 18:null!==(g=e.sent)&&(g instanceof HTMLImageElement?d.push(g):d.push(new eu(g.data,g.width,g.height)));case 20:h++,e.next=14;break;case 23:r[c.uuid]=new ur(d),e.next=30;break;case 26:return e.next=28,a(c.url);case 28:y=e.sent,r[c.uuid]=new ur(y);case 30:l++,e.next=8;break;case 33:return e.abrupt("return",r);case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=t[o.image],l=s.data,u=void 0;Array.isArray(l)?(u=new Ra,6===l.length&&(u.needsUpdate=!0)):(u=l&&l.data?new eu:new dr,l&&(u.needsUpdate=!0)),u.source=s,u.uuid=o.uuid,void 0!==o.name&&(u.name=o.name),void 0!==o.mapping&&(u.mapping=n(o.mapping,Ad)),void 0!==o.offset&&u.offset.fromArray(o.offset),void 0!==o.repeat&&u.repeat.fromArray(o.repeat),void 0!==o.center&&u.center.fromArray(o.center),void 0!==o.rotation&&(u.rotation=o.rotation),void 0!==o.wrap&&(u.wrapS=n(o.wrap[0],bd),u.wrapT=n(o.wrap[1],bd)),void 0!==o.format&&(u.format=o.format),void 0!==o.type&&(u.type=o.type),void 0!==o.encoding&&(u.encoding=o.encoding),void 0!==o.minFilter&&(u.minFilter=n(o.minFilter,xd)),void 0!==o.magFilter&&(u.magFilter=n(o.magFilter,xd)),void 0!==o.anisotropy&&(u.anisotropy=o.anisotropy),void 0!==o.flipY&&(u.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(u.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(u.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(u.userData=o.userData),r[o.uuid]=u}return r}},{key:"parseObject",value:function(e,t,n,r,i){var a,o,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new El,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new sr(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new Sl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new wl(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":a=new Ia(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new $a(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new cd(e.color,e.intensity);break;case"DirectionalLight":a=new ud(e.color,e.intensity);break;case"PointLight":a=new sd(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new fd(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new nd(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Kf(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new hd).fromJSON(e);break;case"SkinnedMesh":o=l(e.geometry),s=u(e.material),a=new ql(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=l(e.geometry),s=u(e.material),a=new xa(o,s);break;case"InstancedMesh":o=l(e.geometry),s=u(e.material);var f=e.count,d=e.instanceMatrix,h=e.instanceColor;(a=new cu(o,s,f)).instanceMatrix=new iu(new Float32Array(d.array),16),void 0!==h&&(a.instanceColor=new iu(new Float32Array(h.array),h.itemSize));break;case"LOD":a=new Vl;break;case"Line":a=new gu(l(e.geometry),u(e.material));break;case"LineLoop":a=new xu(l(e.geometry),u(e.material));break;case"LineSegments":a=new bu(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new Tu(l(e.geometry),u(e.material));break;case"Sprite":a=new Ql(u(e.material));break;case"Group":a=new hl;break;case"Bone":a=new $l;break;default:a=new _i}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children)for(var p=e.children,v=0;v<p.length;v++)a.add(this.parseObject(p[v],t,n,r,i));if(void 0!==e.animations)for(var m=e.animations,g=0;g<m.length;g++){var y=m[g];a.animations.push(i[y])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);for(var A=e.levels,b=0;b<A.length;b++){var x=A[b],_=a.getObjectByProperty("uuid",x.object);void 0!==_&&a.addLevel(_,x.distance)}}return a}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}]),n}(Uf),Ad={UVMapping:ge,CubeReflectionMapping:ye,CubeRefractionMapping:Ae,EquirectangularReflectionMapping:be,EquirectangularRefractionMapping:xe,CubeUVReflectionMapping:_e},bd={RepeatWrapping:we,ClampToEdgeWrapping:Se,MirroredRepeatWrapping:Ee},xd={NearestFilter:Ce,NearestMipmapNearestFilter:Te,NearestMipmapLinearFilter:Ie,LinearFilter:Be,LinearMipmapNearestFilter:Re,LinearMipmapLinearFilter:De},_d=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this,e)).isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return(0,g.Z)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Nf.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Nf.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),n}(Uf),wd=function(){function e(){(0,m.Z)(this,e)}return(0,g.Z)(e,null,[{key:"getContext",value:function(){return void 0===Lf&&(Lf=new(window.AudioContext||window.webkitAudioContext)),Lf}},{key:"setContext",value:function(e){Lf=e}}]),e}(),Sd=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,m.Z)(this,n),t.call(this,e)}return(0,g.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new Qf(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0);wd.getContext().decodeAudioData(a,(function(e){t(e)}))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}}]),n}(Uf),Ed=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,m.Z)(this,n),(i=t.call(this,void 0,a)).isHemisphereLightProbe=!0;var o=(new sr).set(e),s=(new sr).set(r),l=new xr(o.r,o.g,o.b),u=new xr(s.r,s.g,s.b),c=Math.sqrt(Math.PI),f=c*Math.sqrt(.75);return i.sh.coefficients[0].copy(l).add(u).multiplyScalar(c),i.sh.coefficients[1].copy(l).sub(u).multiplyScalar(f),i}return(0,g.Z)(n)}(hd),Cd=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,m.Z)(this,n),(r=t.call(this,void 0,i)).isAmbientLightProbe=!0;var a=(new sr).set(e);return r.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return(0,g.Z)(n)}(hd),Td=new Jr,Md=new Jr,Id=new Jr,kd=function(){function e(){(0,m.Z)(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ia,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ia,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return(0,g.Z)(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Id.copy(e.projectionMatrix);var n,r,i=t.eyeSep/2,a=i*t.near/t.focus,o=t.near*Math.tan(Rn*t.fov*.5)/t.zoom;Md.elements[12]=-i,Td.elements[12]=i,n=-o*t.aspect+a,r=o*t.aspect+a,Id.elements[0]=2*t.near/(r-n),Id.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(Id),n=-o*t.aspect-a,r=o*t.aspect-a,Id.elements[0]=2*t.near/(r-n),Id.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(Id)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Md),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Td)}}]),e}(),Bd=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,m.Z)(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return(0,g.Z)(e,[{key:"start",value:function(){this.startTime=Rd(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=Rd();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function Rd(){return("undefined"===typeof performance?Date:performance).now()}var Pd=new xr,Dd=new br,Ld=new xr,Nd=new xr,Fd=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this)).type="AudioListener",e.context=wd.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new Bd,e}return(0,g.Z)(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){(0,u.Z)((0,c.Z)(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Pd,Dd,Ld),Nd.set(0,0,-1).applyQuaternion(Dd),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Pd.x,i),t.positionY.linearRampToValueAtTime(Pd.y,i),t.positionZ.linearRampToValueAtTime(Pd.z,i),t.forwardX.linearRampToValueAtTime(Nd.x,i),t.forwardY.linearRampToValueAtTime(Nd.y,i),t.forwardZ.linearRampToValueAtTime(Nd.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Pd.x,Pd.y,Pd.z),t.setOrientation(Nd.x,Nd.y,Nd.z,r.x,r.y,r.z)}}]),n}(_i),Od=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return(0,g.Z)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(_i),Ud=new xr,zd=new br,Gd=new xr,Qd=new xr,Zd=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this,e)).panner=r.context.createPanner(),r.panner.panningModel="HRTF",r.panner.connect(r.gain),r}return(0,g.Z)(n,[{key:"disconnect",value:function(){(0,u.Z)((0,c.Z)(n.prototype),"disconnect",this).call(this),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if((0,u.Z)((0,c.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Ud,zd,Gd),Qd.set(0,0,1).applyQuaternion(zd);var t=this.panner;if(t.positionX){var r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ud.x,r),t.positionY.linearRampToValueAtTime(Ud.y,r),t.positionZ.linearRampToValueAtTime(Ud.z,r),t.orientationX.linearRampToValueAtTime(Qd.x,r),t.orientationY.linearRampToValueAtTime(Qd.y,r),t.orientationZ.linearRampToValueAtTime(Qd.z,r)}else t.setPosition(Ud.x,Ud.y,Ud.z),t.setOrientation(Qd.x,Qd.y,Qd.z)}}}]),n}(Od),Hd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;(0,m.Z)(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return(0,g.Z)(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),jd=function(){function e(t,n,r){var i,a,o;switch((0,m.Z)(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,g.Z)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,r){br.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var a=this._workIndex*i;br.multiplyQuaternionsFlat(e,a,e,t,e,n),br.slerpFlat(e,t,e,t,e,a,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}}]),e}(),Vd="\\[\\]\\.:\\/",Wd=new RegExp("["+Vd+"]","g"),Xd="[^"+Vd+"]",Yd="[^"+Vd.replace("\\.","")+"]",Kd=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Xd)+/(WCOD+)?/.source.replace("WCOD",Yd)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xd)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xd)+"$"),Jd=["material","materials","bones","map"],qd=function(){function e(t,n,r){(0,m.Z)(this,e);var i=r||$d.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return(0,g.Z)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),$d=function(){function e(t,n,r){(0,m.Z)(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,g.Z)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var l=t[i];if(void 0!==l){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else void 0!==l.fromArray&&void 0!==l.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(c=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var f=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(Wd,"")}},{key:"parseTrackName",value:function(e){var t=Kd.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Jd.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();$d.Composite=qd,$d.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},$d.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},$d.prototype.GetterByBindingType=[$d.prototype._getValue_direct,$d.prototype._getValue_array,$d.prototype._getValue_arrayElement,$d.prototype._getValue_toArray],$d.prototype.SetterByBindingTypeAndVersioning=[[$d.prototype._setValue_direct,$d.prototype._setValue_direct_setNeedsUpdate,$d.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$d.prototype._setValue_array,$d.prototype._setValue_array_setNeedsUpdate,$d.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$d.prototype._setValue_arrayElement,$d.prototype._setValue_arrayElement_setNeedsUpdate,$d.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$d.prototype._setValue_fromArray,$d.prototype._setValue_fromArray_setNeedsUpdate,$d.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var eh=function(){function e(){(0,m.Z)(this,e),this.isAnimationObjectGroup=!0,this.uuid=Dn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return(0,g.Z)(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,l=this.nCachedObjects_,u=0,c=arguments.length;u!==c;++u){var f=arguments[u],d=f.uuid,h=t[d];if(void 0===h){h=s++,t[d]=h,e.push(f);for(var p=0,v=a;p!==v;++p)i[p].push(new $d(f,n[p],r[p]))}else if(h<l){o=e[h];var m=--l,g=e[m];t[g.uuid]=h,e[h]=g,t[d]=m,e[m]=f;for(var y=0,A=a;y!==A;++y){var b=i[y],x=b[m],_=b[h];b[h]=x,void 0===_&&(_=new $d(f,n[y],r[y])),b[m]=_}}else e[h]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=t[l];if(void 0!==u&&u>=i){var c=i++,f=e[c];t[f.uuid]=u,e[u]=f,t[l]=c,e[c]=s;for(var d=0,h=r;d!==h;++d){var p=n[d],v=p[c],m=p[u];p[u]=v,p[c]=m}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,u=t[l];if(void 0!==u)if(delete t[l],u<i){var c=--i,f=e[c],d=--a,h=e[d];t[f.uuid]=u,e[u]=f,t[h.uuid]=c,e[c]=h,e.pop();for(var p=0,v=r;p!==v;++p){var m=n[p],g=m[c],y=m[d];m[u]=g,m[c]=y,m.pop()}}else{var A=--a,b=e[A];A>0&&(t[b.uuid]=u),e[u]=b,e.pop();for(var x=0,_=r;x!==_;++x){var w=n[x];w[u]=w[A],w.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(var f=u,d=s.length;f!==d;++f){var h=s[f];c[f]=new $d(h,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}]),e}(),th=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,m.Z)(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var a=n.tracks,o=a.length,s=new Array(o),l={endingStart:Ft,endingEnd:Ft},u=0;u!==o;++u){var c=a[u].createInterpolant(null);s[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Rt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,g.Z)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;a<0||0===n?t=0:(this._startTime=null,t=n*a)}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var l=this._interpolants,u=this._propertyBindings;if(this.blendMode===Gt)for(var c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulateAdditive(s);else for(var d=0,h=l.length;d!==h;++d)l[d].evaluate(o),u[d].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=n===Pt;if(0===e)return-1===i?r:a&&1===(1&i)?t-r:r;if(n===Bt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1===(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Ot,r.endingEnd=Ot):(r.endingStart=e?this.zeroSlopeAtStart?Ot:Ft:Ut,r.endingEnd=t?this.zeroSlopeAtEnd?Ot:Ft:Ut)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}]),e}(),nh=new Float32Array(1),rh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,m.Z)(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return(0,g.Z)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==i;++c){var f=r[c],d=f.name,h=u[d];if(void 0!==h)++h.referenceCount,a[c]=h;else{if(void 0!==(h=a[c])){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,s,d));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(h=new jd($d.create(n,d,p),f.ValueTypeName,f.getValueSize())).referenceCount,this._addInactiveBinding(h,s,d),a[c]=h}o[c].resultBuffer=h.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new wf(new Float32Array(2),new Float32Array(2),1,nh)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"===typeof e?Pf.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==a?a.blendMode:zt),void 0!==s){var u=s.actionByRoot[i];if(void 0!==u&&u.blendMode===n)return u;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;var c=new th(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,i),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?Pf.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(r,e,i,a)}for(var s=this._bindings,l=this._nActiveBindings,u=0;u!==l;++u)s[u].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(In),ih=function(){function e(t){(0,m.Z)(this,e),this.value=t}return(0,g.Z)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),ah=0,oh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;return(0,m.Z)(this,n),(e=t.call(this)).isUniformsGroup=!0,Object.defineProperty((0,f.Z)(e),"id",{value:ah++}),e.name="",e.usage=gn,e.uniforms=[],e}return(0,g.Z)(n,[{key:"add",value:function(e){return this.uniforms.push(e),this}},{key:"remove",value:function(e){var t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}},{key:"copy",value:function(e){this.name=e.name,this.usage=e.usage;var t=e.uniforms;this.uniforms.length=0;for(var n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(In),sh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,m.Z)(this,n),(i=t.call(this,e,r)).isInstancedInterleavedBuffer=!0,i.meshPerAttribute=a,i}return(0,g.Z)(n,[{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=(0,u.Z)((0,c.Z)(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=(0,u.Z)((0,c.Z)(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(Cl),lh=function(){function e(t,n,r,i,a){(0,m.Z)(this,e),this.isGLBufferAttribute=!0,this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}return(0,g.Z)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}(),uh=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;(0,m.Z)(this,e),this.ray=new Kr(t,n),this.near=r,this.far=i,this.camera=null,this.layers=new li,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,g.Z)(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return fh(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(ch),t}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.length;r<i;r++)fh(e[r],this,n,t);return n.sort(ch),n}}]),e}();function ch(e,t){return e.distance-t.distance}function fh(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,a=0,o=i.length;a<o;a++)fh(i[a],t,n,!0)}var dh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,m.Z)(this,e),this.radius=t,this.phi=n,this.theta=r,this}return(0,g.Z)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ln(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),hh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,m.Z)(this,e),this.radius=t,this.theta=n,this.y=r,this}return(0,g.Z)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),ph=new Hn,vh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Hn(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Hn(-1/0,-1/0);(0,m.Z)(this,e),this.isBox2=!0,this.min=t,this.max=n}return(0,g.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=ph.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return ph.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),mh=new xr,gh=new xr,yh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xr;(0,m.Z)(this,e),this.start=t,this.end=n}return(0,g.Z)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){mh.subVectors(e,this.start),gh.subVectors(this.end,this.start);var n=gh.dot(gh),r=gh.dot(mh)/n;return t&&(r=Ln(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Ah=new xr,bh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i;(0,m.Z)(this,n),(i=t.call(this)).light=e,i.light.updateMatrixWorld(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.color=r;for(var a=new ra,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,l=1;s<32;s++,l++){var u=s/32*Math.PI*2,c=l/32*Math.PI*2;o.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}a.setAttribute("position",new Xi(o,3));var f=new fu({fog:!1,toneMapped:!1});return i.cone=new bu(a,f),i.add(i.cone),i.update(),i}return(0,g.Z)(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Ah.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ah),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(_i),xh=new xr,_h=new Jr,wh=new Jr,Sh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;(0,m.Z)(this,n);for(var i=Eh(e),a=new ra,o=[],s=[],l=new sr(0,0,1),u=new sr(0,1,0),c=0;c<i.length;c++){var f=i[c];f.parent&&f.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(l.r,l.g,l.b),s.push(u.r,u.g,u.b))}a.setAttribute("position",new Xi(o,3)),a.setAttribute("color",new Xi(s,3));var d=new fu({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,a,d)).isSkeletonHelper=!0,r.type="SkeletonHelper",r.root=e,r.bones=i,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return(0,g.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");wh.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var s=t[a];s.parent&&s.parent.isBone&&(_h.multiplyMatrices(wh,s.matrixWorld),xh.setFromMatrixPosition(_h),i.setXYZ(o,xh.x,xh.y,xh.z),_h.multiplyMatrices(wh,s.parent.matrixWorld),xh.setFromMatrixPosition(_h),i.setXYZ(o+1,xh.x,xh.y,xh.z),o+=2)}r.getAttribute("position").needsUpdate=!0,(0,u.Z)((0,c.Z)(n.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(bu);function Eh(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Eh(e.children[n]));return t}var Ch=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a;(0,m.Z)(this,n);var o=new Yc(r,4,2),s=new Ni({wireframe:!0,fog:!1,toneMapped:!1});return(a=t.call(this,o,s)).light=e,a.light.updateMatrixWorld(),a.color=i,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return(0,g.Z)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(xa),Th=new xr,Mh=new sr,Ih=new sr,kh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a;(0,m.Z)(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i;var o=new Vc(r);o.rotateY(.5*Math.PI),a.material=new Ni({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var s=o.getAttribute("position"),l=new Float32Array(3*s.count);return o.setAttribute("color",new Ui(l,3)),a.add(new xa(o,a.material)),a.update(),a}return(0,g.Z)(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Mh.copy(this.light.color),Ih.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?Mh:Ih;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(Th.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(_i),Bh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;(0,m.Z)(this,n),a=new sr(a),o=new sr(o);for(var s=i/2,l=r/i,u=r/2,c=[],f=[],d=0,h=0,p=-u;d<=i;d++,p+=l){c.push(-u,0,p,u,0,p),c.push(p,0,-u,p,0,u);var v=d===s?a:o;v.toArray(f,h),h+=3,v.toArray(f,h),h+=3,v.toArray(f,h),h+=3,v.toArray(f,h),h+=3}var g=new ra;g.setAttribute("position",new Xi(c,3)),g.setAttribute("color",new Xi(f,3));var y=new fu({vertexColors:!0,toneMapped:!1});return(e=t.call(this,g,y)).type="GridHelper",e}return(0,g.Z)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(bu),Rh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;(0,m.Z)(this,n),s=new sr(s),l=new sr(l);var u=[],c=[];if(i>1)for(var f=0;f<i;f++){var d=f/i*(2*Math.PI),h=Math.sin(d)*r,p=Math.cos(d)*r;u.push(0,0,0),u.push(h,0,p);var v=1&f?s:l;c.push(v.r,v.g,v.b),c.push(v.r,v.g,v.b)}for(var g=0;g<a;g++)for(var y=1&g?s:l,A=r-r/a*g,b=0;b<o;b++){var x=b/o*(2*Math.PI),_=Math.sin(x)*A,w=Math.cos(x)*A;u.push(_,0,w),c.push(y.r,y.g,y.b),x=(b+1)/o*(2*Math.PI),_=Math.sin(x)*A,w=Math.cos(x)*A,u.push(_,0,w),c.push(y.r,y.g,y.b)}var S=new ra;S.setAttribute("position",new Xi(u,3)),S.setAttribute("color",new Xi(c,3));var E=new fu({vertexColors:!0,toneMapped:!1});return(e=t.call(this,S,E)).type="PolarGridHelper",e}return(0,g.Z)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(bu),Ph=new xr,Dh=new xr,Lh=new xr,Nh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a;(0,m.Z)(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i,void 0===r&&(r=1);var o=new ra;o.setAttribute("position",new Xi([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));var s=new fu({fog:!1,toneMapped:!1});return a.lightPlane=new gu(o,s),a.add(a.lightPlane),(o=new ra).setAttribute("position",new Xi([0,0,0,0,0,1],3)),a.targetLine=new gu(o,s),a.add(a.targetLine),a.update(),a}return(0,g.Z)(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){Ph.setFromMatrixPosition(this.light.matrixWorld),Dh.setFromMatrixPosition(this.light.target.matrixWorld),Lh.subVectors(Dh,Ph),this.lightPlane.lookAt(Dh),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Dh),this.targetLine.scale.z=Lh.length()}}]),n}(_i),Fh=new xr,Oh=new Ma,Uh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;(0,m.Z)(this,n);var i=new ra,a=new fu({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],l={};function u(e,t){c(e),c(t)}function c(e){o.push(0,0,0),s.push(0,0,0),void 0===l[e]&&(l[e]=[]),l[e].push(o.length/3-1)}u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4"),i.setAttribute("position",new Xi(o,3)),i.setAttribute("color",new Xi(s,3)),(r=t.call(this,i,a)).type="CameraHelper",r.camera=e,r.camera.updateProjectionMatrix&&r.camera.updateProjectionMatrix(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.pointMap=l,r.update();var f=new sr(16755200),d=new sr(16711680),h=new sr(43775),p=new sr(16777215),v=new sr(3355443);return r.setColors(f,d,h,p,v),r}return(0,g.Z)(n,[{key:"setColors",value:function(e,t,n,r,i){var a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap;Oh.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),zh("c",t,e,Oh,0,0,-1),zh("t",t,e,Oh,0,0,1),zh("n1",t,e,Oh,-1,-1,-1),zh("n2",t,e,Oh,1,-1,-1),zh("n3",t,e,Oh,-1,1,-1),zh("n4",t,e,Oh,1,1,-1),zh("f1",t,e,Oh,-1,-1,1),zh("f2",t,e,Oh,1,-1,1),zh("f3",t,e,Oh,-1,1,1),zh("f4",t,e,Oh,1,1,1),zh("u1",t,e,Oh,.7,1.1,-1),zh("u2",t,e,Oh,-.7,1.1,-1),zh("u3",t,e,Oh,0,2,-1),zh("cf1",t,e,Oh,-1,0,1),zh("cf2",t,e,Oh,1,0,1),zh("cf3",t,e,Oh,0,-1,1),zh("cf4",t,e,Oh,0,1,1),zh("cn1",t,e,Oh,-1,0,-1),zh("cn2",t,e,Oh,1,0,-1),zh("cn3",t,e,Oh,0,-1,-1),zh("cn4",t,e,Oh,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(bu);function zh(e,t,n,r,i,a,o){Fh.set(i,a,o).unproject(r);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],Fh.x,Fh.y,Fh.z)}var Gh,Qh,Zh=new Sr,Hh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,m.Z)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),s=new ra;return s.setIndex(new Ui(a,1)),s.setAttribute("position",new Ui(o,3)),(r=t.call(this,s,new fu({color:i,toneMapped:!1}))).object=e,r.type="BoxHelper",r.matrixAutoUpdate=!1,r.update(),r}return(0,g.Z)(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Zh.setFromObject(this.object),!Zh.isEmpty()){var t=Zh.min,n=Zh.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,t){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t),this.object=e.object,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(bu),jh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,m.Z)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new ra;return o.setIndex(new Ui(a,1)),o.setAttribute("position",new Xi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),(r=t.call(this,o,new fu({color:i,toneMapped:!1}))).box=e,r.type="Box3Helper",r.geometry.computeBoundingSphere(),r}return(0,g.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),(0,u.Z)((0,c.Z)(n.prototype),"updateMatrixWorld",this).call(this,e))}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(bu),Vh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;(0,m.Z)(this,n);var o=a,s=new ra;s.setAttribute("position",new Xi([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),s.computeBoundingSphere(),(r=t.call(this,s,new fu({color:o,toneMapped:!1}))).type="PlaneHelper",r.plane=e,r.size=i;var l=new ra;return l.setAttribute("position",new Xi([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),l.computeBoundingSphere(),r.add(new xa(l,new Ni({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),r}return(0,g.Z)(n,[{key:"updateMatrixWorld",value:function(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),(0,u.Z)((0,c.Z)(n.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}]),n}(gu),Wh=new xr,Xh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xr(0,0,1),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xr(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;return(0,m.Z)(this,n),(e=t.call(this)).type="ArrowHelper",void 0===Gh&&((Gh=new ra).setAttribute("position",new Xi([0,0,0,0,1,0],3)),(Qh=new ac(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(i),e.line=new gu(Gh,new fu({color:o,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new xa(Qh,new Ni({color:o,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(r),e.setLength(a,s,l),e}return(0,g.Z)(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Wh.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Wh,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return(0,u.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}},{key:"dispose",value:function(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}]),n}(_i),Yh=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,m.Z)(this,n);var i=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r],a=new ra;a.setAttribute("position",new Xi(i,3)),a.setAttribute("color",new Xi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var o=new fu({vertexColors:!0,toneMapped:!1});return(e=t.call(this,a,o)).type="AxesHelper",e}return(0,g.Z)(n,[{key:"setColors",value:function(e,t,n){var r=new sr,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(bu),Kh=function(){function e(){(0,m.Z)(this,e),this.type="ShapePath",this.color=new sr,this.subPaths=[],this.currentPath=null}return(0,g.Z)(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new tc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e){function t(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=t[a],l=-l,s=t[i],u=-u),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=u*(e.x-o.x)-l*(e.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var n,r,i,a=zc.isClockWise,o=this.subPaths;if(0===o.length)return[];var s=[];if(1===o.length)return r=o[0],(i=new pc).curves=r.curves,s.push(i),s;var l=!a(o[0].getPoints());l=e?!l:l;var u,c,f=[],d=[],h=[],p=0;d[p]=void 0,h[p]=[];for(var v=0,m=o.length;v<m;v++)n=a(u=(r=o[v]).getPoints()),(n=e?!n:n)?(!l&&d[p]&&p++,d[p]={s:new pc,p:u},d[p].s.curves=r.curves,l&&p++,h[p]=[]):h[p].push({h:r,p:u[0]});if(!d[0])return function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new pc;a.curves=i.curves,t.push(a)}return t}(o);if(d.length>1){for(var g=!1,y=0,A=0,b=d.length;A<b;A++)f[A]=[];for(var x=0,_=d.length;x<_;x++)for(var w=h[x],S=0;S<w.length;S++){for(var E=w[S],C=!0,T=0;T<d.length;T++)t(E.p,d[T].p)&&(x!==T&&y++,C?(C=!1,f[T].push(E)):g=!0);C&&f[x].push(E)}y>0&&!1===g&&(h=f)}for(var M=0,I=d.length;M<I;M++){i=d[M].s,s.push(i);for(var k=0,B=(c=h[M]).length;k<B;k++)i.holes.push(c[k].h)}return s}}]),e}(),Jh=qh();function qh(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512),a=0;a<256;++a){var o=a-127;o<-27?(r[a]=0,r[256|a]=32768,i[a]=24,i[256|a]=24):o<-14?(r[a]=1024>>-o-14,r[256|a]=1024>>-o-14|32768,i[a]=-o-1,i[256|a]=-o-1):o<=15?(r[a]=o+15<<10,r[256|a]=o+15<<10|32768,i[a]=13,i[256|a]=13):o<128?(r[a]=31744,r[256|a]=64512,i[a]=24,i[256|a]=24):(r[a]=31744,r[256|a]=64512,i[a]=13,i[256|a]=13)}for(var s=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64),c=1;c<1024;++c){for(var f=c<<13,d=0;0===(8388608&f);)f<<=1,d-=8388608;f&=-8388609,d+=947912704,s[c]=f|d}for(var h=1024;h<2048;++h)s[h]=939524096+(h-1024<<13);for(var p=1;p<31;++p)l[p]=p<<23;l[31]=1199570944,l[32]=2147483648;for(var v=33;v<63;++v)l[v]=2147483648+(v-32<<23);l[63]=3347054592;for(var m=1;m<64;++m)32!==m&&(u[m]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:l,offsetTable:u}}var $h=Object.freeze({__proto__:null,toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Ln(e,-65504,65504),Jh.floatView[0]=e;var t=Jh.uint32View[0],n=t>>23&511;return Jh.baseTable[n]+((8388607&t)>>Jh.shiftTable[n])},fromHalfFloat:function(e){var t=e>>10;return Jh.uint32View[0]=Jh.mantissaTable[Jh.offsetTable[t]+(1023&e)]+Jh.exponentTable[t],Jh.floatView[0]}});function ep(){console.error("THREE.ImmediateRenderObject has been removed.")}var tp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i){var a;return(0,m.Z)(this,n),console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),(a=t.call(this,e,r,i)).samples=4,a}return(0,g.Z)(n)}(pr),np=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,m.Z)(this,n),console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),t.call(this,e,r,i,a)}return(0,g.Z)(n)}(vr),rp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,m.Z)(this,n),console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),t.call(this,e,r,i,a)}return(0,g.Z)(n)}(gr),ip=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s){return(0,m.Z)(this,n),console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),t.call(this,e,r,i,a,o,s)}return(0,g.Z)(n)}(wa),ap=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,m.Z)(this,n),console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),t.call(this,e,r,i,a)}return(0,g.Z)(n)}(rc),op=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,m.Z)(this,n),console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),t.call(this,e,r,i,a)}return(0,g.Z)(n)}(ic),sp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s,l){return(0,m.Z)(this,n),console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),t.call(this,e,r,i,a,o,s,l)}return(0,g.Z)(n)}(oc),lp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s,l,u){return(0,m.Z)(this,n),console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),t.call(this,e,r,i,a,o,s,l,u)}return(0,g.Z)(n)}(ac),up=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){return(0,m.Z)(this,n),console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),t.call(this,e,r)}return(0,g.Z)(n)}(lc),cp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){return(0,m.Z)(this,n),console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),t.call(this,e,r)}return(0,g.Z)(n)}(Zc),fp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){return(0,m.Z)(this,n),console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),t.call(this,e,r)}return(0,g.Z)(n)}(jc),dp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,m.Z)(this,n),console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),t.call(this,e,r,i,a)}return(0,g.Z)(n)}(nc),hp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){return(0,m.Z)(this,n),console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),t.call(this,e,r)}return(0,g.Z)(n)}(Vc),pp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,m.Z)(this,n),console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),t.call(this,e,r,i,a)}return(0,g.Z)(n)}(Za),vp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a){return(0,m.Z)(this,n),console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),t.call(this,e,r,i,a)}return(0,g.Z)(n)}(sc),mp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s){return(0,m.Z)(this,n),console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),t.call(this,e,r,i,a,o,s)}return(0,g.Z)(n)}(Wc),gp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){return(0,m.Z)(this,n),console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),t.call(this,e,r)}return(0,g.Z)(n)}(Xc),yp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s,l){return(0,m.Z)(this,n),console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),t.call(this,e,r,i,a,o,s,l)}return(0,g.Z)(n)}(Yc),Ap=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){return(0,m.Z)(this,n),console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),t.call(this,e,r)}return(0,g.Z)(n)}(Kc),bp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o){return(0,m.Z)(this,n),console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),t.call(this,e,r,i,a,o)}return(0,g.Z)(n)}(Jc),xp=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o,s){return(0,m.Z)(this,n),console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),t.call(this,e,r,i,a,o,s)}return(0,g.Z)(n)}(qc),_p=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,i,a,o){return(0,m.Z)(this,n),console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),t.call(this,e,r,i,a,o)}return(0,g.Z)(n)}($c);"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:y}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=y)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r](a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.nc=void 0;var r={};!function(){"use strict";var e=n(1250),t=n(2791),r=n.t(t,2),i=n(9439),a=n(3878),o=n(9199),s=n(181),l=n(5267);function u(e){return(0,a.Z)(e)||(0,o.Z)(e)||(0,s.Z)(e)||(0,l.Z)()}var c=n(1413),f=n(5671),d=n(3144),h=n(136),p=n(9388),v=n(7762),m=n(5647),g=n(3433);function y(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var A=n(7760),b=n(4585);function x(e){var t,n=new Set,r=function(e,r){var i="function"===typeof e?e(t):e;if(i!==t){var a=t;t=r?i:Object.assign({},t,i),n.forEach((function(e){return e(t,a)}))}},i=function(){return t},a={setState:r,getState:i,subscribe:function(e,r,a){return r||a?function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var o=r(t);function s(){var n=r(t);if(!a(o,n)){var i=o;e(o=n,i)}}return n.add(s),function(){return n.delete(s)}}(e,r,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(r,i,a),a}var _="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?t.useEffect:t.useLayoutEffect;function w(e){var n="function"===typeof e?x(e):e,r=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.getState,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,o=(0,t.useReducer)((function(e){return e+1}),0),s=(0,i.Z)(o,2)[1],l=n.getState(),u=(0,t.useRef)(l),c=(0,t.useRef)(r),f=(0,t.useRef)(a),d=(0,t.useRef)(!1),h=(0,t.useRef)();void 0===h.current&&(h.current=r(l));var p=!1;(u.current!==l||c.current!==r||f.current!==a||d.current)&&(e=r(l),p=!a(h.current,e)),_((function(){p&&(h.current=e),u.current=l,c.current=r,f.current=a,d.current=!1}));var v=(0,t.useRef)(l);_((function(){var e=function(){try{var e=n.getState(),t=c.current(e);f.current(h.current,t)||(u.current=e,h.current=t,s())}catch(r){d.current=!0,s()}},t=n.subscribe(e);return n.getState()!==v.current&&e(),t}),[]);var m=p?e:h.current;return(0,t.useDebugValue)(m),m};return Object.assign(r,n),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");var e=[r,n];return{next:function(){var t=e.length<=0;return{value:e.shift(),done:t}}}},r}var S=n(258),E=n.n(S),C=n(5296),T=[];function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e===t};if(e===t)return!0;if(!e||!t)return!1;var r=e.length;if(t.length!==r)return!1;for(var i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(var i=0,a=T;i<a.length;i++){var o=a[i];if(M(t,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!n)throw o.promise}}var s,l={keys:t,equal:r.equal,remove:function(){var e=T.indexOf(l);-1!==e&&T.splice(e,1)},promise:(s=e,"object"===typeof s&&"function"===typeof s.then?e:e.apply(void 0,(0,g.Z)(t))).then((function(e){l.response=e,r.lifespan&&r.lifespan>0&&(l.timeout=setTimeout(l.remove,r.lifespan))})).catch((function(e){return l.error=e}))};if(T.push(l),!n)throw l.promise}var k,B,R=function(e,t,n){return I(e,t,!1,n)},P=["args","attach"],D=["args","children"],L=["args","children"],N=["children","key","ref"],F=["children","key","ref"],O=["params"],U=["events","size"],z={},G=function(e){Object.assign(z,e)};var Q=function(e){return"colorSpace"in e||"outputColorSpace"in e},Z=function(){var e;return null!=(e=z.ColorManagement)?e:null},H=function(e){return e&&e.isOrthographicCamera},j="undefined"!==typeof window&&(null!=(k=window.document)&&k.createElement||"ReactNative"===(null==(B=window.navigator)?void 0:B.product))?t.useLayoutEffect:t.useEffect;function V(e){var n=t.useRef(e);return j((function(){n.current=e}),[e]),n}function W(e){var t=e.set;return j((function(){return t(new Promise((function(){return null}))),function(){return t(!1)}}),[t]),null}var X=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,f.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={error:!1},e}return(0,d.Z)(n,[{key:"componentDidCatch",value:function(e){this.props.set(e)}},{key:"render",value:function(){return this.state.error?null:this.props.children}}]),n}(t.Component);X.getDerivedStateFromError=function(){return{error:!0}};var Y="__default",K=new Map,J=function(e){return e&&!!e.memoized&&!!e.changes};function q(e){var t,n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}var $=function(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()},ee={obj:function(e){return e===Object(e)&&!ee.arr(e)&&"function"!==typeof e},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},boo:function(e){return"boolean"===typeof e},und:function(e){return void 0===e},arr:function(e){return Array.isArray(e)},equ:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.arrays,i=void 0===r?"shallow":r,a=n.objects,o=void 0===a?"reference":a,s=n.strict,l=void 0===s||s;if(typeof e!==typeof t||!!e!==!!t)return!1;if(ee.str(e)||ee.num(e))return e===t;var u=ee.obj(e);if(u&&"reference"===o)return e===t;var c,f=ee.arr(e);if(f&&"reference"===i)return e===t;if((f||u)&&e===t)return!0;for(c in e)if(!(c in t))return!1;if(u&&"shallow"===i&&"shallow"===o){for(c in l?t:e)if(!ee.equ(e[c],t[c],{strict:l,objects:"reference"}))return!1}else for(c in l?t:e)if(e[c]!==t[c])return!1;if(ee.und(c)){if(f&&0===e.length&&0===t.length)return!0;if(u&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function te(e){var t={nodes:{},materials:{}};return e&&e.traverse((function(e){e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function ne(e,t){return e.__r3f=(0,c.Z)({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t),e}function re(e,t){var n=e;if(t.includes("-")){var r=t.split("-"),i=r.pop();return n=r.reduce((function(e,t){return e[t]}),e),{target:n,key:i}}return{target:n,key:t}}var ie=/-\d+$/;function ae(e,t,n){if(ee.str(n)){if(ie.test(n)){var r=re(e,n.replace(ie,"")),i=r.target,a=r.key;Array.isArray(i[a])||(i[a]=[])}var o=re(e,n),s=o.target,l=o.key;t.__r3f.previousAttach=s[l],s[l]=t}else t.__r3f.previousAttach=n(e,t)}function oe(e,t,n){var r,i;if(ee.str(n)){var a=re(e,n),o=a.target,s=a.key,l=t.__r3f.previousAttach;void 0===l?delete o[s]:o[s]=l}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function se(e,t){t.children,t.key,t.ref;var n,r=y(t,N),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(a.children,a.key,a.ref,y(a,F)),s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=null!=(n=null==e?void 0:e.__r3f)?n:{},u=Object.entries(r),f=[];if(s)for(var d=Object.keys(o),h=0;h<d.length;h++)r.hasOwnProperty(d[h])||u.unshift([d[h],Y+"remove"]);u.forEach((function(t){var n,a=(0,i.Z)(t,2),s=a[0],l=a[1];if((null==(n=e.__r3f)||!n.primitive||"object"!==s)&&!ee.equ(l,o[s])){if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(s))return f.push([s,l,!0,[]]);var u=[];for(var c in s.includes("-")&&(u=s.split("-")),f.push([s,l,!1,u]),r){var d=r[c];c.startsWith("".concat(s,"-"))&&f.push([c,d,!1,c.split("-")])}}}));var p=(0,c.Z)({},r);return l.memoizedProps&&l.memoizedProps.args&&(p.args=l.memoizedProps.args),l.memoizedProps&&l.memoizedProps.attach&&(p.attach=l.memoizedProps.attach),{memoized:p,changes:f}}var le="undefined"!==typeof process&&!1;function ue(e,t){var n,r,a,o=null!=(n=e.__r3f)?n:{},s=o.root,l=null!=(r=null==s||null==s.getState?void 0:s.getState())?r:{},c=J(t)?t:se(e,t),f=c.memoized,d=c.changes,h=o.eventCount;e.__r3f&&(e.__r3f.memoizedProps=f);for(var p=0;p<d.length;p++){var v=(0,i.Z)(d[p],4),m=v[0],y=v[1],b=v[2],x=v[3];if(Q(e)){var _="srgb",w="srgb-linear";"encoding"===m?(m="colorSpace",y=3001===y?_:w):"outputEncoding"===m&&(m="outputColorSpace",y=3001===y?_:w)}var S=e,E=S[m];if(x.length&&(E=x.reduce((function(e,t){return e[t]}),e),!E||!E.set)){var C=u(x.reverse()),T=C[0];S=C.slice(1).reverse().reduce((function(e,t){return e[t]}),e),m=T}if(y===Y+"remove")if(S.constructor){var M=K.get(S.constructor);M||(M=new S.constructor,K.set(S.constructor,M)),y=M[m]}else y=0;if(b)y?o.handlers[m]=y:delete o.handlers[m],o.eventCount=Object.keys(o.handlers).length;else if(E&&E.set&&(E.copy||E instanceof A.Layers)){var I;if(Array.isArray(y))E.fromArray?E.fromArray(y):(I=E).set.apply(I,(0,g.Z)(y));else if(E.copy&&y&&y.constructor&&(le?E.constructor.name===y.constructor.name:E.constructor===y.constructor))E.copy(y);else if(void 0!==y){var k=E instanceof A.Color;!k&&E.setScalar?E.setScalar(y):E instanceof A.Layers&&y instanceof A.Layers?E.mask=y.mask:E.set(y),Z()||l.linear||!k||E.convertSRGBToLinear()}}else if(S[m]=y,S[m]instanceof A.Texture&&S[m].format===A.RGBAFormat&&S[m].type===A.UnsignedByteType){var B=S[m];Q(B)&&Q(l.gl)?B.colorSpace=l.gl.outputColorSpace:B.encoding=l.gl.outputEncoding}ce(e)}if(o.parent&&l.internal&&e.raycast&&h!==o.eventCount){var R=l.internal.interaction.indexOf(e);R>-1&&l.internal.interaction.splice(R,1),o.eventCount&&l.internal.interaction.push(e)}return!(1===d.length&&"onUpdate"===d[0][0])&&d.length&&null!=(a=e.__r3f)&&a.parent&&fe(e),e}function ce(e){var t,n,r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function fe(e){null==e.onUpdate||e.onUpdate(e)}function de(e,t){e.manual||(H(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function he(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function pe(e,t,n,r){var i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function ve(e){function t(e){return e.filter((function(e){return["Move","Over","Enter","Out","Leave"].some((function(t){var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}))}function n(t){var n,r=e.getState().internal,i=(0,v.Z)(r.hovered.values());try{var a=function(){var e=n.value;if(!t.length||!t.find((function(t){return t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId}))){var i=e.eventObject.__r3f,a=null==i?void 0:i.handlers;if(r.hovered.delete(he(e)),null!=i&&i.eventCount){var o=(0,c.Z)((0,c.Z)({},e),{},{intersections:t});null==a.onPointerOut||a.onPointerOut(o),null==a.onPointerLeave||a.onPointerLeave(o)}}};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return function(){return n([])};case"onLostPointerCapture":return function(t){var r=e.getState().internal;"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame((function(){r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))}))}}return function(a){var o=e.getState(),s=o.onPointerMissed,l=o.internal;l.lastEvent.current=a;var u="onPointerMove"===i,f="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,d=function(t,n){for(var r=e.getState(),i=new Set,a=[],o=n?n(r.internal.interaction):r.internal.interaction,s=0;s<o.length;s++){var l=$(o[s]);l&&(l.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);var u=o.flatMap((function(e){var n,r=$(e);return r&&r.events.enabled&&null!==r.raycaster.camera?(void 0===r.raycaster.camera&&(null==r.events.compute||r.events.compute(t,r,null==(n=r.previousRoot)?void 0:n.getState()),void 0===r.raycaster.camera&&(r.raycaster.camera=null)),r.raycaster.camera?r.raycaster.intersectObject(e,!0):[]):[]})).sort((function(e,t){var n=$(e.object),r=$(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance})).filter((function(e){var t=he(e);return!i.has(t)&&(i.add(t),!0)}));r.events.filter&&(u=r.events.filter(u,r));var f,d=(0,v.Z)(u);try{for(d.s();!(f=d.n()).done;)for(var h=f.value,p=h.object;p;){var m;null!=(m=p.__r3f)&&m.eventCount&&a.push((0,c.Z)((0,c.Z)({},h),{},{eventObject:p})),p=p.parent}}catch(b){d.e(b)}finally{d.f()}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId)){var g,y=(0,v.Z)(r.internal.capturedMap.get(t.pointerId).values());try{for(y.s();!(g=y.n()).done;){var A=g.value;i.has(he(A.intersection))||a.push(A.intersection)}}catch(b){y.e(b)}finally{y.f()}}return a}(a,u?t:void 0),h=f?function(t){var n=e.getState().internal,r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(l.initialClick=[a.offsetX,a.offsetY],l.initialHits=d.map((function(e){return e.eventObject}))),f&&!d.length&&h<=2&&(r(a,l.interaction),s&&s(a)),u&&n(d),function(t,r,i,a){var o=e.getState();if(t.length){var s,l={stopped:!1},u=(0,v.Z)(t);try{var f=function(){var e=s.value,u=$(e.object)||o,f=u.raycaster,d=u.pointer,h=u.camera,p=u.internal,v=new A.Vector3(d.x,d.y,0).unproject(h),m=function(t){var n,r;return null!=(n=null==(r=p.capturedMap.get(t))?void 0:r.has(e.eventObject))&&n},y=function(t){var n={intersection:e,target:r.target};p.capturedMap.has(t)?p.capturedMap.get(t).set(e.eventObject,n):p.capturedMap.set(t,new Map([[e.eventObject,n]])),r.target.setPointerCapture(t)},b=function(t){var n=p.capturedMap.get(t);n&&pe(p.capturedMap,e.eventObject,n,t)},x={};for(var _ in r){var w=r[_];"function"!==typeof w&&(x[_]=w)}var S=(0,c.Z)((0,c.Z)((0,c.Z)({},e),x),{},{pointer:d,intersections:t,stopped:l.stopped,delta:i,unprojectedPoint:v,ray:f.ray,camera:h,stopPropagation:function(){var i="pointerId"in r&&p.capturedMap.get(r.pointerId);if((!i||i.has(e.eventObject))&&(S.stopped=l.stopped=!0,p.hovered.size&&Array.from(p.hovered.values()).find((function(t){return t.eventObject===e.eventObject})))){var a=t.slice(0,t.indexOf(e));n([].concat((0,g.Z)(a),[e]))}},target:{hasPointerCapture:m,setPointerCapture:y,releasePointerCapture:b},currentTarget:{hasPointerCapture:m,setPointerCapture:y,releasePointerCapture:b},nativeEvent:r});if(a(S),!0===l.stopped)return 1};for(u.s();!(s=u.n()).done&&!f(););}catch(d){u.e(d)}finally{u.f()}}}(d,a,h,(function(e){var t=e.eventObject,n=t.__r3f,o=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(u){if(o.onPointerOver||o.onPointerEnter||o.onPointerOut||o.onPointerLeave){var s=he(e),c=l.hovered.get(s);c?c.stopped&&e.stopPropagation():(l.hovered.set(s,e),null==o.onPointerOver||o.onPointerOver(e),null==o.onPointerEnter||o.onPointerEnter(e))}null==o.onPointerMove||o.onPointerMove(e)}else{var d=o[i];d?f&&!l.initialHits.includes(t)||(r(a,l.interaction.filter((function(e){return!l.initialHits.includes(e)}))),d(e)):f&&l.initialHits.includes(t)&&r(a,l.interaction.filter((function(e){return!l.initialHits.includes(e)})))}}))}}}}var me,ge=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],ye=function(e){return!(null==e||!e.render)},Ae=t.createContext(null),be=function(e,n){var r=w((function(r,i){var a=new A.Vector3,o=new A.Vector3,s=new A.Vector3;function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i().size,r=n.width,l=n.height,u=n.top,c=n.left,f=r/l;t instanceof A.Vector3?s.copy(t):s.set.apply(s,(0,g.Z)(t));var d=e.getWorldPosition(a).distanceTo(s);if(H(e))return{width:r/e.zoom,height:l/e.zoom,top:u,left:c,factor:1,distance:d,aspect:f};var h=e.fov*Math.PI/180,p=2*Math.tan(h/2)*d,v=p*(r/l);return{width:v,height:p,top:u,left:c,factor:r/v,distance:d,aspect:f}}var u=void 0,f=function(e){return r((function(t){return{performance:(0,c.Z)((0,c.Z)({},t.performance),{},{current:e})}}))},d=new A.Vector2,h={set:r,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(i(),t)},advance:function(e,t){return n(e,t,i())},legacy:!1,linear:!1,flat:!1,controls:null,clock:new A.Clock,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:function(){var e=i();u&&clearTimeout(u),e.performance.current!==e.performance.min&&f(e.performance.min),u=setTimeout((function(){return f(i().performance.max)}),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:function(e){return r((function(t){return(0,c.Z)((0,c.Z)({},t),{},{events:(0,c.Z)((0,c.Z)({},t.events),e)})}))},setSize:function(e,t,n,a,s){var u=i().camera,f={width:e,height:t,top:a||0,left:s||0,updateStyle:n};r((function(e){return{size:f,viewport:(0,c.Z)((0,c.Z)({},e.viewport),l(u,o,f))}}))},setDpr:function(e){return r((function(t){var n=q(e);return{viewport:(0,c.Z)((0,c.Z)({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}))},setFrameloop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always",t=i().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),r((function(){return{frameloop:e}}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:t.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:function(e,t,n){var r=i().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:n}),r.subscribers=r.subscribers.sort((function(e,t){return e.priority-t.priority})),function(){var n=i().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((function(t){return t.ref!==e})))}}}};return h})),i=r.getState(),a=i.size,o=i.viewport.dpr,s=i.camera;return r.subscribe((function(){var e=r.getState(),t=e.camera,n=e.size,i=e.viewport,l=e.gl,u=e.set;if(n!==a||i.dpr!==o){var f;a=n,o=i.dpr,de(t,n),l.setPixelRatio(i.dpr);var d=null!=(f=n.updateStyle)?f:"undefined"!==typeof HTMLCanvasElement&&l.domElement instanceof HTMLCanvasElement;l.setSize(n.width,n.height,d)}t!==s&&(s=t,u((function(e){return{viewport:(0,c.Z)((0,c.Z)({},e.viewport),e.viewport.getCurrentViewport(t))}})))})),r.subscribe((function(t){return e(t)})),r};var xe,_e,we=new Set,Se=new Set,Ee=new Set;function Ce(e,t){if(e.size){var n,r=(0,v.Z)(e.values());try{for(r.s();!(n=r.n()).done;){(0,n.value.callback)(t)}}catch(i){r.e(i)}finally{r.f()}}}function Te(e,t){switch(e){case"before":return Ce(we,t);case"after":return Ce(Se,t);case"tail":return Ce(Ee,t)}}function Me(e,t,n){var r=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),xe=t.internal.subscribers,me=0;me<xe.length;me++)(_e=xe[me]).ref.current(_e.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function Ie(){var e=t.useContext(Ae);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1?arguments[1]:void 0;return Ie()(e,t)}function Be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ie(),r=n.getState().internal.subscribe,i=V(e);return j((function(){return r(i,t,n)}),[t,r,n]),null}var Re=new WeakMap;function Pe(e,t){return function(n){var r=Re.get(n);r||(r=new n,Re.set(n,r)),e&&e(r);for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return Promise.all(a.map((function(e){return new Promise((function(n,i){return r.load(e,(function(e){e.scene&&Object.assign(e,te(e.scene)),n(e)}),t,(function(t){return i(new Error("Could not load ".concat(e,": ").concat(null==t?void 0:t.message)))}))}))}))).finally((function(){return null==r.dispose?void 0:r.dispose()}))}}function De(e,t,n,r){var i=Array.isArray(t)?t:[t],a=R(Pe(n,r),[e].concat((0,g.Z)(i)),{equal:ee.equ});return Array.isArray(t)?a:a[0]}De.preload=function(e,t,n){var r=Array.isArray(t)?t:[t];return function(e,t,n){I(e,t,!0,n)}(Pe(n),[e].concat((0,g.Z)(r)))},De.clear=function(e,t){var n=Array.isArray(t)?t:[t];return function(e){if(void 0===e||0===e.length)T.splice(0,T.length);else{var t=T.find((function(t){return M(e,t.keys,t.equal)}));t&&t.remove()}}([e].concat((0,g.Z)(n)))};var Le=new Map,Ne=function(e){var t,n,r,i=!1;function a(o){n=requestAnimationFrame(a),i=!0,t=0,Te("before",o);var s,l=(0,v.Z)(e.values());try{for(l.s();!(s=l.n()).done;){var u,c=s.value;!(r=c.store.getState()).internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(u=r.gl.xr)&&u.isPresenting||(t+=Me(o,r))}}catch(f){l.e(f)}finally{l.f()}if(Te("after",o),0===t)return Te("tail",o),i=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function t(n){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!n)return e.forEach((function(e){return t(e.store.getState())}),o);null!=(r=n.gl.xr)&&r.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+o),i||(i=!0,requestAnimationFrame(a)))},advance:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n&&Te("before",t),r)Me(t,r,i);else{var a,o=(0,v.Z)(e.values());try{for(o.s();!(a=o.n()).done;){Me(t,a.value.store.getState())}}catch(s){o.e(s)}finally{o.f()}}n&&Te("after",t)}}}(Le),Fe=Ne.invalidate,Oe=Ne.advance,Ue=function(e,t){function n(e,t,n){var r,i=t.args,a=void 0===i?[]:i,o=t.attach,s=y(t,P),l="".concat(e[0].toUpperCase()).concat(e.slice(1));if("primitive"===e){if(void 0===s.object)throw new Error("R3F: Primitives without 'object' are invalid!");r=ne(s.object,{type:e,root:n,attach:o,primitive:!0})}else{var u=z[l];if(!u)throw new Error("R3F: ".concat(l," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(a))throw new Error("R3F: The args prop must be an array!");r=ne((0,m.Z)(u,(0,g.Z)(a)),{type:e,root:n,attach:o,memoizedProps:{args:a}})}return void 0===r.__r3f.attach&&(r instanceof A.BufferGeometry?r.__r3f.attach="geometry":r instanceof A.Material&&(r.__r3f.attach="material")),"inject"!==l&&ue(r,s),r}function r(e,t){var n,r,i=!1;t&&(null!=(n=t.__r3f)&&n.attach?ae(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),i=!0),i||null==(r=e.__r3f)||r.objects.push(t),t.__r3f||ne(t,{}),t.__r3f.parent=e,fe(t),ce(t))}function a(e,t,n){var r=!1;if(t){var i,a;if(null!=(i=t.__r3f)&&i.attach)ae(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});var o=e.children.filter((function(e){return e!==t})),s=o.indexOf(n);e.children=[].concat((0,g.Z)(o.slice(0,s)),[t],(0,g.Z)(o.slice(s))),r=!0}r||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||ne(t,{}),t.__r3f.parent=e,fe(t),ce(t)}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&(0,g.Z)(e).forEach((function(e){return s(t,e,n)}))}function s(e,t,n){if(t){var r,i,a;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((function(e){return e!==t}))),null!=(i=t.__r3f)&&i.attach)oe(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var s;e.remove(t),null!=(s=t.__r3f)&&s.root&&function(e,t){var n=e.getState().internal;n.interaction=n.interaction.filter((function(e){return e!==t})),n.initialHits=n.initialHits.filter((function(e){return e!==t})),n.hovered.forEach((function(e,r){e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach((function(e,r){pe(n.capturedMap,t,e,r)}))}(t.__r3f.root,t)}var l,u=null==(a=t.__r3f)?void 0:a.primitive,c=void 0===n?null!==t.dispose&&!u:n;if(!u)o(null==(l=t.__r3f)?void 0:l.objects,t,c),o(t.children,t,c);delete t.__r3f,c&&t.dispose&&"Scene"!==t.type&&(0,C.unstable_scheduleCallback)(C.unstable_IdlePriority,(function(){try{t.dispose()}catch(e){}})),ce(e)}}var l=function(){return console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.")},u=E()({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:a,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:function(e,t){if(t){var n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))}},removeChildFromContainer:function(e,t){t&&s(e.getState().scene,t)},insertInContainerBefore:function(e,t,n){if(t&&n){var r=e.getState().scene;r.__r3f&&a(r,t,n)}},getRootHostContext:function(){return null},getChildHostContext:function(e){return e},finalizeInitialChildren:function(e){var t,n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate:function(e,t,n,r){var i;if((null!=(i=null==e?void 0:e.__r3f)?i:{}).primitive&&r.object&&r.object!==e)return[!0];var a=r.args,o=void 0===a?[]:a,s=(r.children,y(r,D)),l=n.args,u=void 0===l?[]:l,c=(n.children,y(n,L));if(!Array.isArray(o))throw new Error("R3F: the args prop must be an array!");if(o.some((function(e,t){return e!==u[t]})))return[!0];var f=se(e,s,c,!0);return f.changes.length?[!1,f]:null},commitUpdate:function(e,t,a,o,l,u){var c=(0,i.Z)(t,2),f=c[0],d=c[1];f?function(e,t,i,a){var o,l=null==(o=e.__r3f)?void 0:o.parent;if(l){var u=n(t,i,e.__r3f.root);if(e.children){var c,f=(0,v.Z)(e.children);try{for(f.s();!(c=f.n()).done;){var d=c.value;d.__r3f&&r(u,d)}}catch(h){f.e(h)}finally{f.f()}e.children=e.children.filter((function(e){return!e.__r3f}))}e.__r3f.objects.forEach((function(e){return r(u,e)})),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||s(l,e),u.parent&&(u.__r3f.autoRemovedBeforeAppend=!0),r(l,u),u.raycast&&u.__r3f.eventCount&&u.__r3f.root.getState().internal.interaction.push(u),[a,a.alternate].forEach((function(e){null!==e&&(e.stateNode=u,e.ref&&("function"===typeof e.ref?e.ref(u):e.ref.current=u))}))}}(e,a,l,u):ue(e,d)},commitMount:function(e,t,n,r){var i,a=null!=(i=e.__r3f)?i:{};e.raycast&&a.handlers&&a.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:function(e){return e},prepareForCommit:function(){return null},preparePortalMount:function(e){return ne(e.getState().scene)},resetAfterCommit:function(){},shouldSetTextContent:function(){return!1},clearContainer:function(){return!1},hideInstance:function(e){var t,n=null!=(t=e.__r3f)?t:{},r=n.attach,i=n.parent;r&&i&&oe(i,e,r),e.isObject3D&&(e.visible=!1),ce(e)},unhideInstance:function(e,t){var n,r=null!=(n=e.__r3f)?n:{},i=r.attach,a=r.parent;i&&a&&ae(a,e,i),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),ce(e)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:function(){return t?t():b.DefaultEventPriority},beforeActiveInstanceBlur:function(){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},now:"undefined"!==typeof performance&&ee.fun(performance.now)?performance.now:ee.fun(Date.now)?Date.now:function(){return 0},scheduleTimeout:ee.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ee.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:u,applyProps:ue}}(0,(function(){var e,t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return b.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return b.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return b.ContinuousEventPriority;default:return b.DefaultEventPriority}})),ze=Ue.reconciler,Ge=Ue.applyProps,Qe={objects:"shallow",strict:!1},Ze=function(e,t){var n="function"===typeof e?e(t):e;return ye(n)?n:new A.WebGLRenderer((0,c.Z)({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function He(e){var n=Le.get(e),r=null==n?void 0:n.fiber,i=null==n?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");var a,o="function"===typeof reportError?reportError:console.error,s=i||be(Fe,Oe),l=r||ze.createContainer(s,b.ConcurrentRoot,null,!1,null,"",o,null);n||Le.set(e,{fiber:l,store:s});var u,f=!1;return{configure:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.gl,r=t.size,i=t.scene,o=t.events,l=t.onCreated,d=t.shadows,h=void 0!==d&&d,p=t.linear,v=void 0!==p&&p,m=t.flat,g=void 0!==m&&m,b=t.legacy,x=void 0!==b&&b,_=t.orthographic,w=void 0!==_&&_,S=t.frameloop,E=void 0===S?"always":S,C=t.dpr,T=void 0===C?[1,2]:C,M=t.performance,I=t.raycaster,k=t.camera,B=t.onPointerMissed,R=s.getState(),P=R.gl;R.gl||R.set({gl:P=Ze(n,e)});var D=R.raycaster;D||R.set({raycaster:D=new A.Raycaster});var L,N=I||{},F=N.params,U=y(N,O);if(ee.equ(U,D,Qe)||Ge(D,(0,c.Z)({},U)),ee.equ(F,D.params,Qe)||Ge(D,{params:(0,c.Z)((0,c.Z)({},D.params),F)}),!R.camera||R.camera===u&&!ee.equ(u,k,Qe)){u=k;var z=k instanceof A.Camera,G=z?k:w?new A.OrthographicCamera(0,0,0,0,.1,1e3):new A.PerspectiveCamera(75,0,.1,1e3);z||(G.position.z=5,k&&Ge(G,k),R.camera||null!=k&&k.rotation||G.lookAt(0,0,0)),R.set({camera:G})}R.scene||(i instanceof A.Scene?L=i:(L=new A.Scene,i&&Ge(L,i)),R.set({scene:ne(L)}));if(!R.xr){var Q,H=function(e,t){var n=s.getState();"never"!==n.frameloop&&Oe(e,!0,n,t)},j=function(){var e=s.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?H:null),e.gl.xr.isPresenting||Fe(e)},V={connect:function(){var e=s.getState().gl;e.xr.addEventListener("sessionstart",j),e.xr.addEventListener("sessionend",j)},disconnect:function(){var e=s.getState().gl;e.xr.removeEventListener("sessionstart",j),e.xr.removeEventListener("sessionend",j)}};"function"===typeof(null==(Q=P.xr)?void 0:Q.addEventListener)&&V.connect(),R.set({xr:V})}if(P.shadowMap){var W=P.shadowMap.enabled,X=P.shadowMap.type;if(P.shadowMap.enabled=!!h,ee.boo(h))P.shadowMap.type=A.PCFSoftShadowMap;else if(ee.str(h)){var Y,K={basic:A.BasicShadowMap,percentage:A.PCFShadowMap,soft:A.PCFSoftShadowMap,variance:A.VSMShadowMap};P.shadowMap.type=null!=(Y=K[h])?Y:A.PCFSoftShadowMap}else ee.obj(h)&&Object.assign(P.shadowMap,h);W===P.shadowMap.enabled&&X===P.shadowMap.type||(P.shadowMap.needsUpdate=!0)}var J=Z();J&&("enabled"in J?J.enabled=!x:"legacyMode"in J&&(J.legacyMode=x));Ge(P,{outputEncoding:v?3e3:3001,toneMapping:g?A.NoToneMapping:A.ACESFilmicToneMapping}),R.legacy!==x&&R.set((function(){return{legacy:x}})),R.linear!==v&&R.set((function(){return{linear:v}})),R.flat!==g&&R.set((function(){return{flat:g}})),!n||ee.fun(n)||ye(n)||ee.equ(n,P,Qe)||Ge(P,n),o&&!R.events.handlers&&R.set({events:o(s)});var $=function(e,t){if(t)return t;if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){var n=e.parentElement.getBoundingClientRect();return{width:n.width,height:n.height,top:n.top,left:n.left}}return"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0}}(e,r);return ee.equ($,R.size,Qe)||R.setSize($.width,$.height,$.updateStyle,$.top,$.left),T&&R.viewport.dpr!==q(T)&&R.setDpr(T),R.frameloop!==E&&R.setFrameloop(E),R.onPointerMissed||R.set({onPointerMissed:B}),M&&!ee.equ(M,R.performance,Qe)&&R.set((function(e){return{performance:(0,c.Z)((0,c.Z)({},e.performance),M)}})),a=l,f=!0,this},render:function(n){return f||this.configure(),ze.updateContainer(t.createElement(je,{store:s,children:n,onCreated:a,rootElement:e}),l,null,(function(){})),s},unmount:function(){Ve(e)}}}function je(e){var n=e.store,r=e.children,i=e.onCreated,a=e.rootElement;return j((function(){var e=n.getState();e.set((function(e){return{internal:(0,c.Z)((0,c.Z)({},e.internal),{},{active:!0})}})),i&&i(e),n.getState().events.connected||null==e.events.connect||e.events.connect(a)}),[]),t.createElement(Ae.Provider,{value:n},r)}function Ve(e,t){var n=Le.get(e),r=null==n?void 0:n.fiber;if(r){var i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),ze.updateContainer(null,r,null,(function(){i&&setTimeout((function(){try{var n,r,a,o;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(o=i.gl)&&o.xr&&i.xr.disconnect(),function(e){for(var t in e.dispose&&"Scene"!==e.type&&e.dispose(),e)null==t.dispose||t.dispose(),delete e[t]}(i),Le.delete(e),t&&t(e)}catch(s){}}),500)}))}}function We(e){var n=e.state,r=void 0===n?{}:n,a=e.children,o=e.container,s=r.events,l=r.size,u=y(r,U),f=Ie(),d=t.useState((function(){return new A.Raycaster})),h=(0,i.Z)(d,1)[0],p=t.useState((function(){return new A.Vector2})),v=(0,i.Z)(p,1)[0],m=t.useCallback((function(e,t){var n=(0,c.Z)({},e);Object.keys(e).forEach((function(r){(ge.includes(r)||e[r]!==t[r]&&t[r])&&delete n[r]}));var r=void 0;if(t&&l){var i=t.camera;r=e.viewport.getCurrentViewport(i,new A.Vector3,l),i!==e.camera&&de(i,l)}return(0,c.Z)((0,c.Z)({},n),{},{scene:o,raycaster:h,pointer:v,mouse:v,previousRoot:f,events:(0,c.Z)((0,c.Z)((0,c.Z)({},e.events),null==t?void 0:t.events),s),size:(0,c.Z)((0,c.Z)({},e.size),l),viewport:(0,c.Z)((0,c.Z)({},e.viewport),r)},u)}),[r]),g=t.useState((function(){var e=f.getState(),t=w((function(t,n){return(0,c.Z)((0,c.Z)((0,c.Z)({},e),{},{scene:o,raycaster:h,pointer:v,mouse:v,previousRoot:f,events:(0,c.Z)((0,c.Z)({},e.events),s),size:(0,c.Z)((0,c.Z)({},e.size),l)},u),{},{set:t,get:n,setEvents:function(e){return t((function(t){return(0,c.Z)((0,c.Z)({},t),{},{events:(0,c.Z)((0,c.Z)({},t.events),e)})}))}})}));return t})),b=(0,i.Z)(g,1)[0];return t.useEffect((function(){var e=f.subscribe((function(e){return b.setState((function(t){return m(e,t)}))}));return function(){e(),b.destroy()}}),[]),t.useEffect((function(){b.setState((function(e){return m(f.getState(),e)}))}),[m]),t.createElement(t.Fragment,null,ze.createPortal(t.createElement(Ae.Provider,{value:b},a),b,null))}ze.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:t.version});t.unstable_act;var Xe=n(4942);function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ye.apply(this,arguments)}var Ke=n(7494),Je=n.n(Ke);function qe(e){var n=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e,r=n.debounce,a=n.scroll,o=n.polyfill,s=n.offsetSize,l=o||("undefined"===typeof window?(0,d.Z)((function e(){(0,f.Z)(this,e)})):window.ResizeObserver);if(!l)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");var u=(0,t.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=(0,i.Z)(u,2),h=c[0],p=c[1],v=(0,t.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:h}),m=r?"number"===typeof r?r:r.scroll:null,g=r?"number"===typeof r?r:r.resize:null,y=(0,t.useRef)(!1);(0,t.useEffect)((function(){return y.current=!0,function(){y.current=!1}}));var A=(0,t.useMemo)((function(){var e=function(){if(v.current.element){var e=v.current.element.getBoundingClientRect(),t={left:e.left,top:e.top,width:e.width,height:e.height,bottom:e.bottom,right:e.right,x:e.x,y:e.y};v.current.element instanceof HTMLElement&&s&&(t.height=v.current.element.offsetHeight,t.width=v.current.element.offsetWidth),Object.freeze(t),y.current&&!tt(v.current.lastBounds,t)&&p(v.current.lastBounds=t)}};return[e,g?Je()(e,g):e,m?Je()(e,m):e]}),[p,s,m,g]),b=(0,i.Z)(A,3),x=b[0],_=b[1],w=b[2];function S(){v.current.scrollContainers&&(v.current.scrollContainers.forEach((function(e){return e.removeEventListener("scroll",w,!0)})),v.current.scrollContainers=null),v.current.resizeObserver&&(v.current.resizeObserver.disconnect(),v.current.resizeObserver=null)}function E(){v.current.element&&(v.current.resizeObserver=new l(w),v.current.resizeObserver.observe(v.current.element),a&&v.current.scrollContainers&&v.current.scrollContainers.forEach((function(e){return e.addEventListener("scroll",w,{capture:!0,passive:!0})})))}var C,T,M;return C=w,T=Boolean(a),(0,t.useEffect)((function(){if(T){var e=C;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),function(){window.removeEventListener("scroll",e,!0)}}}),[C,T]),M=_,(0,t.useEffect)((function(){var e=M;return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[M]),(0,t.useEffect)((function(){S(),E()}),[a,w,_]),(0,t.useEffect)((function(){return S}),[]),[function(e){e&&e!==v.current.element&&(S(),v.current.element=e,v.current.scrollContainers=$e(e),E())},h,x]}function $e(e){var t=[];if(!e||e===document.body)return t;var n=window.getComputedStyle(e);return[n.overflow,n.overflowX,n.overflowY].some((function(e){return"auto"===e||"scroll"===e}))&&t.push(e),[].concat(t,(0,g.Z)($e(e.parentElement)))}var et=["x","y","top","bottom","left","right","width","height"],tt=function(e,t){return et.every((function(n){return e[n]===t[n]}))},nt=Object.defineProperty,rt=Object.defineProperties,it=Object.getOwnPropertyDescriptors,at=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,lt=function(e,t,n){return t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ut=function(e,t){for(var n in t||(t={}))ot.call(t,n)&&lt(e,n,t[n]);if(at){var r,i=(0,v.Z)(at(t));try{for(i.s();!(r=i.n()).done;){n=r.value;st.call(t,n)&&lt(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e};function ct(e,t,n){if(e){if(!0===n(e))return e;for(var r=t?e.return:e.child;r;){var i=ct(r,t,n);if(i)return i;r=t?null:r.sibling}}}function ft(e){try{return Object.defineProperties(e,{_currentRenderer:{get:function(){return null},set:function(){}},_currentRenderer2:{get:function(){return null},set:function(){}}})}catch(t){return e}}var dt=ft(t.createContext(null)),ht=function(e){(0,h.Z)(r,e);var n=(0,p.Z)(r);function r(){return(0,f.Z)(this,r),n.apply(this,arguments)}return(0,d.Z)(r,[{key:"render",value:function(){return t.createElement(dt.Provider,{value:this._reactInternals},this.props.children)}}]),r}(t.Component),pt=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vt=pt.ReactCurrentOwner,mt=pt.ReactCurrentDispatcher;function gt(){var e=t.useContext(dt);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");var n=t.useId();return t.useMemo((function(){for(var t=0,r=[null==vt?void 0:vt.current,e,null==e?void 0:e.alternate];t<r.length;t++){var i=r[t];if(i){var a=ct(i,!1,(function(e){for(var t=e.memoizedState;t;){if(t.memoizedState===n)return!0;t=t.next}}));if(a)return a}}}),[e,n])}function yt(){var e=function(){var e,n,r=gt(),a=t.useState((function(){return new Map})),o=(0,i.Z)(a,1)[0];o.clear();for(var s=r;s;){var l=null==(e=s.type)?void 0:e._context;l&&l!==dt&&!o.has(l)&&o.set(l,null==(n=null==mt?void 0:mt.current)?void 0:n.readContext(ft(l))),s=s.return}return o}();return t.useMemo((function(){return Array.from(e.keys()).reduce((function(n,r){return function(i){return t.createElement(n,null,t.createElement(r.Provider,function(e,t){return rt(e,it(t))}(ut({},i),{value:e.get(r)})))}}),(function(e){return t.createElement(ht,ut({},e))}))}),[e])}var At=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"],bt={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function xt(e){var t=ve(e).handlePointer;return{priority:1,enabled:!0,compute:function(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(bt).reduce((function(e,n){return(0,c.Z)((0,c.Z)({},e),{},(0,Xe.Z)({},n,t(n)))}),{}),update:function(){var t,n=e.getState(),r=n.events,i=n.internal;null!=(t=i.lastEvent)&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:function(t){var n,r=e.getState(),a=r.set,o=r.events;null==o.disconnect||o.disconnect(),a((function(e){return{events:(0,c.Z)((0,c.Z)({},e.events),{},{connected:t})}})),Object.entries(null!=(n=o.handlers)?n:[]).forEach((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1],o=(0,i.Z)(bt[r],2),s=o[0],l=o[1];t.addEventListener(s,a,{passive:l})}))},disconnect:function(){var t,n=e.getState(),r=n.set,a=n.events;a.connected&&(Object.entries(null!=(t=a.handlers)?t:[]).forEach((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];if(a&&a.connected instanceof HTMLElement){var o=(0,i.Z)(bt[n],1)[0];a.connected.removeEventListener(o,r)}})),r((function(e){return{events:(0,c.Z)((0,c.Z)({},e.events),{},{connected:void 0})}})))}}}var _t=t.forwardRef((function(e,n){var r=e.children,a=e.fallback,o=e.resize,s=e.style,l=e.gl,u=e.events,f=void 0===u?xt:u,d=e.eventSource,h=e.eventPrefix,p=e.shadows,v=e.linear,m=e.flat,g=e.legacy,b=e.orthographic,x=e.frameloop,_=e.dpr,w=e.performance,S=e.raycaster,E=e.camera,C=e.scene,T=e.onPointerMissed,M=e.onCreated,I=y(e,At);t.useMemo((function(){return G(A)}),[]);var k=yt(),B=qe((0,c.Z)({scroll:!0,debounce:{scroll:50,resize:0}},o)),R=(0,i.Z)(B,2),P=R[0],D=R[1],L=t.useRef(null),N=t.useRef(null);t.useImperativeHandle(n,(function(){return L.current}));var F=V(T),O=t.useState(!1),U=(0,i.Z)(O,2),z=U[0],Q=U[1],Z=t.useState(!1),H=(0,i.Z)(Z,2),Y=H[0],K=H[1];if(z)throw z;if(Y)throw Y;var J=t.useRef(null);j((function(){var e=L.current;D.width>0&&D.height>0&&e&&(J.current||(J.current=He(e)),J.current.configure({gl:l,events:f,shadows:p,linear:v,flat:m,legacy:g,orthographic:b,frameloop:x,dpr:_,performance:w,raycaster:S,camera:E,scene:C,size:D,onPointerMissed:function(){return null==F.current?void 0:F.current.apply(F,arguments)},onCreated:function(e){var t;null==e.events.connect||e.events.connect(d?(t=d)&&t.hasOwnProperty("current")?d.current:d:N.current),h&&e.setEvents({compute:function(e,t){var n=e[h+"X"],r=e[h+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==M||M(e)}}),J.current.render(t.createElement(k,null,t.createElement(X,{set:K},t.createElement(t.Suspense,{fallback:t.createElement(W,{set:Q})},r)))))})),t.useEffect((function(){var e=L.current;if(e)return function(){return Ve(e)}}),[]);var q=d?"none":"auto";return t.createElement("div",Ye({ref:N,style:(0,c.Z)({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:q},s)},I),t.createElement("div",{ref:P,style:{width:"100%",height:"100%"}},t.createElement("canvas",{ref:L,style:{display:"block"}},a)))})),wt=t.forwardRef((function(e,n){return t.createElement(ht,null,t.createElement(_t,Ye({},e,{ref:n})))}));function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e,t){return Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Et(e,t)}function Ct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}new A.Vector2,new A.Vector2;function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Mt=function e(t,n,r){var i=this;Tt(this,e),St(this,"dot2",(function(e,t){return i.x*e+i.y*t})),St(this,"dot3",(function(e,t,n){return i.x*e+i.y*t+i.z*n})),this.x=t,this.y=n,this.z=r},It=[new Mt(1,1,0),new Mt(-1,1,0),new Mt(1,-1,0),new Mt(-1,-1,0),new Mt(1,0,1),new Mt(-1,0,1),new Mt(1,0,-1),new Mt(-1,0,-1),new Mt(0,1,1),new Mt(0,-1,1),new Mt(0,1,-1),new Mt(0,-1,-1)],kt=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Bt=new Array(512),Rt=new Array(512),Pt=function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;n=1&t?kt[t]^255&e:kt[t]^e>>8&255,Bt[t]=Bt[t+256]=n,Rt[t]=Rt[t+256]=It[n%12]}};Pt(0);Math.sqrt(3),Math.sqrt(3),Math.PI;function Dt(e){var t=function(e){if("number"===typeof e)e=Math.abs(e);else if("string"===typeof e){var t=e;e=0;for(var n=0;n<t.length;n++)e=(e+(n+1)*(t.charCodeAt(n)%96))%2147483647}return 0===e&&(e=311),e}(e);return function(){var e=48271*t%2147483647;return t=e,e/2147483647}}var Lt=function e(t){var n=this;Tt(this,e),St(this,"seed",0),St(this,"init",(function(e){n.seed=e,n.value=Dt(e)})),St(this,"value",Dt(this.seed)),this.init(t)};new Lt(Math.random());function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}function Ft(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}A.BufferGeometry;var Ot=t.createContext(null);function Ut(){return t.useContext(Ot)}var zt=n(3037),Gt={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Qt="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Zt=function(e){return Array.isArray(e)};function Ht(){var e,t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.files,o=void 0===a?["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"]:a,s=i.path,l=void 0===s?"":s,u=i.preset,c=void 0===u?void 0:u,f=i.encoding,d=void 0===f?void 0:f,h=i.extensions;if(c){if(!(c in Gt))throw new Error("Preset must be one of: "+Object.keys(Gt).join(", "));o=Gt[c],l=Qt}if(n=Zt(o),r=Zt(o)?"cube":o.startsWith("data:application/exr")?"exr":o.startsWith("data:application/hdr")?"hdr":null==(e=o.split(".").pop())||null==(e=e.split("?"))||null==(e=e.shift())?void 0:e.toLowerCase(),!(t=n?A.CubeTextureLoader:"hdr"===r?zt.xr3:"exr"===r?zt.I7w:null))throw new Error("useEnvironment: Unrecognized file extension: "+o);var p=De(t,n?[o]:o,(function(e){null==e.setPath||e.setPath(l),h&&h(e)})),v=n?p[0]:p;v.mapping=n?A.CubeReflectionMapping:A.EquirectangularReflectionMapping;return"colorSpace"in v?v.colorSpace=(null!==d&&void 0!==d?d:n)?"srgb":"srgb-linear":v.encoding=(null!==d&&void 0!==d?d:n)?3001:3e3,v}var jt=["background","scene","blur"],Vt=function(e){return(t=e).current&&t.current.isScene?e.current:e;var t};function Wt(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=Vt(t||n),o=a.background,s=a.environment,l=a.backgroundBlurriness||0;return"only"!==e&&(a.environment=r),e&&(a.background=r),e&&void 0!==a.backgroundBlurriness&&(a.backgroundBlurriness=i),function(){"only"!==e&&(a.environment=s),e&&(a.background=o),e&&void 0!==a.backgroundBlurriness&&(a.backgroundBlurriness=l)}}function Xt(e){var n=e.scene,r=e.background,i=void 0!==r&&r,a=e.blur,o=e.map,s=ke((function(e){return e.scene}));return t.useLayoutEffect((function(){if(o)return Wt(i,n,s,o,a)}),[s,n,o,i,a]),null}function Yt(e){var n=e.background,r=void 0!==n&&n,i=e.scene,a=e.blur,o=Ht(y(e,jt)),s=ke((function(e){return e.scene}));return t.useLayoutEffect((function(){return Wt(r,i,s,o,a)}),[o,r,i,s,a]),null}function Kt(e){var n=e.children,r=e.near,a=void 0===r?1:r,o=e.far,s=void 0===o?1e3:o,l=e.resolution,u=void 0===l?256:l,c=e.frames,f=void 0===c?1:c,d=e.map,h=e.background,p=void 0!==h&&h,v=e.blur,m=e.scene,g=e.files,y=e.path,b=e.preset,x=void 0===b?void 0:b,_=e.extensions,w=ke((function(e){return e.gl})),S=ke((function(e){return e.scene})),E=t.useRef(null),C=t.useState((function(){return new A.Scene})),T=(0,i.Z)(C,1)[0],M=t.useMemo((function(){var e=new A.WebGLCubeRenderTarget(u);return e.texture.type=A.HalfFloatType,e}),[u]);t.useLayoutEffect((function(){return 1===f&&E.current.update(w,T),Wt(p,m,S,M.texture,v)}),[n,T,M.texture,m,S,p,f,w]);var I=1;return Be((function(){(f===1/0||I<f)&&(E.current.update(w,T),I++)})),t.createElement(t.Fragment,null,function(e,n,r){return t.createElement(We,{key:n.uuid,children:e,container:n,state:r})}(t.createElement(t.Fragment,null,n,t.createElement("cubeCamera",{ref:E,args:[a,s,M]}),g||x?t.createElement(Yt,{background:!0,files:g,preset:x,path:y,extensions:_}):d?t.createElement(Xt,{background:!0,map:d,extensions:_}):null),T))}function Jt(e){var n,r,i,a,o=Ht(e),s=e.map||o;t.useMemo((function(){return G({GroundProjectedEnvImpl:zt.eei})}),[]);var l=t.useMemo((function(){return[s]}),[s]),u=null==(n=e.ground)?void 0:n.height,c=null==(r=e.ground)?void 0:r.radius,f=null!==(i=null==(a=e.ground)?void 0:a.scale)&&void 0!==i?i:1e3;return t.createElement(t.Fragment,null,t.createElement(Xt,Ye({},e,{map:s})),t.createElement("groundProjectedEnvImpl",{args:l,scale:f,height:u,radius:c}))}function qt(e){return e.ground?t.createElement(Jt,e):e.map?t.createElement(Xt,e):e.children?t.createElement(Kt,e):t.createElement(Yt,e)}var $t=n(7326);function en(e,t,n,r){var a=function(a){(0,h.Z)(s,a);var o=(0,p.Z)(s);function s(){var a,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.Z)(this,s);var u=Object.entries(e);return(a=o.call(this,{uniforms:u.reduce((function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1],o=A.UniformsUtils.clone((0,Xe.Z)({},r,{value:a}));return(0,c.Z)((0,c.Z)({},e),o)}),{}),vertexShader:t,fragmentShader:n})).key="",u.forEach((function(e){var t=(0,i.Z)(e,1)[0];return Object.defineProperty((0,$t.Z)(a),t,{get:function(){return a.uniforms[t].value},set:function(e){return a.uniforms[t].value=e}})})),Object.assign((0,$t.Z)(a),l),r&&r((0,$t.Z)(a)),a}return(0,d.Z)(s)}(A.ShaderMaterial);return a.key=A.MathUtils.generateUUID(),a}var tn=en({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }"),nn=["children","temporal","frames","limit","blend","scale","opacity","alphaTest","color","colorBlend","resolution","toneMapped"],rn=["castShadow","bias","mapSize","size","near","far","frames","position","radius","amount","intensity","ambient"];var an=t.createContext(null),on=en({color:new A.Color,blend:2,alphaTest:.75,opacity:0,map:null},"varying vec2 vUv;\n   void main() {\n     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);\n     vUv = uv;\n   }","varying vec2 vUv;\n   uniform sampler2D map;\n   uniform vec3 color;\n   uniform float opacity;\n   uniform float alphaTest;\n   uniform float blend;\n   void main() {\n     vec4 sampledDiffuseColor = texture2D(map, vUv);\n     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);\n     #include <tonemapping_fragment>\n     #include <".concat(parseInt(A.REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment",">\n   }")),sn=t.forwardRef((function(e,n){var r=e.children,a=e.temporal,o=e.frames,s=void 0===o?40:o,l=e.limit,u=void 0===l?1/0:l,c=e.blend,f=void 0===c?20:c,d=e.scale,h=void 0===d?10:d,p=e.opacity,v=void 0===p?1:p,m=e.alphaTest,g=void 0===m?.75:m,A=e.color,b=void 0===A?"black":A,x=e.colorBlend,_=void 0===x?2:x,w=e.resolution,S=void 0===w?1024:w,E=e.toneMapped,C=void 0===E||E,T=y(e,nn);G({SoftShadowMaterial:on});var M=ke((function(e){return e.gl})),I=ke((function(e){return e.scene})),k=ke((function(e){return e.camera})),B=ke((function(e){return e.invalidate})),R=t.useRef(null),P=t.useRef(null),D=t.useState((function(){return new un(M,I,S)})),L=(0,i.Z)(D,1)[0];t.useLayoutEffect((function(){L.configure(R.current)}),[]);var N=t.useMemo((function(){return{lights:new Map,temporal:!!a,frames:Math.max(2,s),blend:Math.max(2,s===1/0?f:s),count:0,getMesh:function(){return R.current},reset:function(){L.clear();var e=R.current.material;e.opacity=0,e.alphaTest=0,N.count=0},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=R.current.material;N.temporal?(t.opacity=Math.min(v,t.opacity+v/N.blend),t.alphaTest=Math.min(g,t.alphaTest+g/N.blend)):(t.opacity=v,t.alphaTest=g),P.current.visible=!0,L.prepare();for(var n=0;n<e;n++)N.lights.forEach((function(e){return e.update()})),L.update(k,N.blend);P.current.visible=!1,L.finish()}}}),[L,k,I,a,s,f,v,g]);return t.useLayoutEffect((function(){N.reset(),N.temporal||N.frames===1/0||N.update(N.blend)})),t.useImperativeHandle(n,(function(){return N}),[N]),Be((function(){(N.temporal||N.frames===1/0)&&N.count<N.frames&&N.count<u&&(B(),N.update(),N.count++)})),t.createElement("group",T,t.createElement("group",{traverse:function(){return null},ref:P},t.createElement(an.Provider,{value:N},r)),t.createElement("mesh",{receiveShadow:!0,ref:R,scale:h,rotation:[-Math.PI/2,0,0]},t.createElement("planeGeometry",null),t.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:C,color:b,blend:_,map:L.progressiveLightMap2.texture})))})),ln=t.forwardRef((function(e,n){var r=e.castShadow,i=void 0===r||r,a=e.bias,o=void 0===a?.001:a,s=e.mapSize,l=void 0===s?512:s,u=e.size,c=void 0===u?5:u,f=e.near,d=void 0===f?.5:f,h=e.far,p=void 0===h?500:h,v=(e.frames,e.position),b=void 0===v?[0,0,0]:v,x=e.radius,_=void 0===x?1:x,w=e.amount,S=void 0===w?8:w,E=e.intensity,C=void 0===E?parseInt(A.REVISION.replace(/\D+/g,""))>=155?Math.PI:1:E,T=e.ambient,M=void 0===T?.5:T,I=y(e,rn),k=t.useRef(null),B=(0,m.Z)(A.Vector3,(0,g.Z)(b)).length(),R=t.useContext(an),P=t.useCallback((function(){var e;if(k.current)for(var t=0;t<k.current.children.length;t++)if(e=k.current.children[t],Math.random()>M)e.position.set(b[0]+A.MathUtils.randFloatSpread(_),b[1]+A.MathUtils.randFloatSpread(_),b[2]+A.MathUtils.randFloatSpread(_));else{var n=Math.acos(2*Math.random()-1)-Math.PI/2,r=2*Math.PI*Math.random();e.position.set(Math.cos(n)*Math.cos(r)*B,Math.abs(Math.cos(n)*Math.sin(r)*B),Math.sin(n)*B)}}),[_,M,B].concat((0,g.Z)(b))),D=t.useMemo((function(){return{update:P}}),[P]);return t.useImperativeHandle(n,(function(){return D}),[D]),t.useLayoutEffect((function(){var e=k.current;return R&&R.lights.set(e.uuid,D),function(){R.lights.delete(e.uuid)}}),[R,D]),t.createElement("group",Ye({ref:k},I),Array.from({length:S},(function(e,n){return t.createElement("directionalLight",{key:n,castShadow:i,"shadow-bias":o,"shadow-mapSize":[l,l],intensity:C/S},t.createElement("orthographicCamera",{attach:"shadow-camera",args:[-c,c,c,-c,d,p]}))})))})),un=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024;(0,f.Z)(this,e),this.renderer=t,this.res=i,this.scene=n,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new A.Color,this.clearAlpha=0;var a={type:A.HalfFloatType,magFilter:A.NearestFilter,minFilter:A.NearestFilter};this.progressiveLightMap1=new A.WebGLRenderTarget(this.res,this.res,a),this.progressiveLightMap2=new A.WebGLRenderTarget(this.res,this.res,a),this.discardMat=new tn,this.targetMat=new A.MeshLambertMaterial({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=function(e){e.vertexShader="varying vec2 vUv;\n"+e.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";var t=e.fragmentShader.indexOf("void main() {");e.fragmentShader="varying vec2 vUv;\n"+e.fragmentShader.slice(0,t)+"uniform sampler2D previousShadowMap;\n\tuniform float averagingWindow;\n"+e.fragmentShader.slice(t-1,-1)+"\nvec3 texelOld = texture2D(previousShadowMap, vUv).rgb;\n        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);\n      }",e.uniforms.previousShadowMap=r.previousShadowMap,e.uniforms.averagingWindow=r.averagingWindow}}return(0,d.Z)(e,[{key:"clear",value:function(){var e=this;this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse((function(t){!function(e){return!!e.geometry}(t)?function(e){return e.isLight}(t)&&e.lights.push({object:t,intensity:t.intensity}):e.meshes.push({object:t,material:t.material})}))}},{key:"prepare",value:function(){var e=this;this.lights.forEach((function(e){return e.object.intensity=0})),this.meshes.forEach((function(t){return t.object.material=e.discardMat}))}},{key:"finish",value:function(){this.lights.forEach((function(e){return e.object.intensity=e.intensity})),this.meshes.forEach((function(e){return e.object.material=e.material}))}},{key:"configure",value:function(e){this.object=e}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(this.object){this.averagingWindow.value=t,this.object.material=this.targetMat;var n=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,i=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(n),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=i}}}]),e}(),cn=n(8415);function fn(e,t,n,r){return fn="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var i,a=(0,cn.Z)(e,t);if(a){if((i=Object.getOwnPropertyDescriptor(a,t)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,t)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,t,i)}else(0,Xe.Z)(r,t,n);return!0},fn(e,t,n,r)}function dn(e,t,n,r,i){if(!fn(e,t,n,r||e)&&i)throw new TypeError("failed to set property");return n}var hn=n(8301),pn=n(1120),vn="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",mn=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,f.Z)(this,n),t.call(this,{name:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new A.Uniform(null),luminanceBuffer1:new A.Uniform(null),minLuminance:new A.Uniform(.01),deltaTime:new A.Uniform(0),tau:new A.Uniform(1)},extensions:{shaderTextureLOD:!0},blending:A.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <packing>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\nuniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));\n#if __VERSION__ < 300\nfloat l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;\n#else\nfloat l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;\n#endif\nl0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}",vertexShader:vn})}return(0,d.Z)(n,[{key:"luminanceBuffer0",set:function(e){this.uniforms.luminanceBuffer0.value=e}},{key:"setLuminanceBuffer0",value:function(e){this.uniforms.luminanceBuffer0.value=e}},{key:"luminanceBuffer1",set:function(e){this.uniforms.luminanceBuffer1.value=e}},{key:"setLuminanceBuffer1",value:function(e){this.uniforms.luminanceBuffer1.value=e}},{key:"mipLevel1x1",set:function(e){this.defines.MIP_LEVEL_1X1=e.toFixed(1),this.needsUpdate=!0}},{key:"setMipLevel1x1",value:function(e){this.mipLevel1x1=e}},{key:"deltaTime",set:function(e){this.uniforms.deltaTime.value=e}},{key:"setDeltaTime",value:function(e){this.uniforms.deltaTime.value=e}},{key:"minLuminance",get:function(){return this.uniforms.minLuminance.value},set:function(e){this.uniforms.minLuminance.value=e}},{key:"getMinLuminance",value:function(){return this.uniforms.minLuminance.value}},{key:"setMinLuminance",value:function(e){this.uniforms.minLuminance.value=e}},{key:"adaptationRate",get:function(){return this.uniforms.tau.value},set:function(e){this.uniforms.tau.value=e}},{key:"getAdaptationRate",value:function(){return this.uniforms.tau.value}},{key:"setAdaptationRate",value:function(e){this.uniforms.tau.value=e}}]),n}(A.ShaderMaterial),gn=0,yn=1,An=2,bn=3,xn=4,_n=5,wn=6,Sn=7,En=8,Cn=9,Tn=10,Mn=11,In=12,kn=13,Bn=14,Rn=15,Pn=16,Dn=17,Ln=18,Nn=19,Fn=20,On=21,Un=22,zn=23,Gn=24,Qn=25,Zn=26,Hn=27,jn=28,Vn=29,Wn=30,Xn=31,Yn=32,Kn="srgb",Jn="srgb-linear",qn=0,$n=1,er=2,tr={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},nr=2,rr=3,ir=0,ar=1,or=2,sr=3,lr=4,ur=0,cr=1,fr=Number(A.REVISION.replace(/\D+/g,"")),dr=fr>=152,hr=new Map([[A.LinearEncoding,Jn],[A.sRGBEncoding,Kn]]),pr=new Map([[Jn,A.LinearEncoding],[Kn,A.sRGBEncoding]]);function vr(e){return null===e?null:dr?e.outputColorSpace:hr.get(e.outputEncoding)}function mr(e,t){null!==e&&(dr?e.colorSpace=t:e.encoding=pr.get(t))}function gr(e){return fr<154?e.replace("colorspace_fragment","encodings_fragment"):e}var yr=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Ar=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new A.Vector4;return(0,f.Z)(this,n),(e=t.call(this,{name:"KawaseBlurMaterial",uniforms:{inputBuffer:new A.Uniform(null),texelSize:new A.Uniform(new A.Vector4),scale:new A.Uniform(1),kernel:new A.Uniform(0)},blending:A.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"})).fragmentShader=gr(e.fragmentShader),e.setTexelSize(r.x,r.y),e.kernelSize=nr,e}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.inputBuffer=e}},{key:"kernelSequence",get:function(){return yr[this.kernelSize]}},{key:"scale",get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},{key:"getScale",value:function(){return this.uniforms.scale.value}},{key:"setScale",value:function(e){this.uniforms.scale.value=e}},{key:"getKernel",value:function(){return null}},{key:"kernel",get:function(){return this.uniforms.kernel.value},set:function(e){this.uniforms.kernel.value=e}},{key:"setKernel",value:function(e){this.kernel=e}},{key:"setTexelSize",value:function(e,t){this.uniforms.texelSize.value.set(e,t,.5*e,.5*t)}},{key:"setSize",value:function(e,t){var n=1/e,r=1/t;this.uniforms.texelSize.value.set(n,r,.5*n,.5*r)}}]),n}(A.ShaderMaterial),br=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.call(this,{name:"CopyMaterial",uniforms:{inputBuffer:new A.Uniform(null),opacity:new A.Uniform(1)},blending:A.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <colorspace_fragment>\n#include <dithering_fragment>\n}",vertexShader:vn})).fragmentShader=gr(e.fragmentShader),e}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"getOpacity",value:function(e){return this.uniforms.opacity.value}},{key:"setOpacity",value:function(e){this.uniforms.opacity.value=e}}]),n}(A.ShaderMaterial),xr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,f.Z)(this,n),t.call(this,{name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new A.Uniform(null),normalBuffer:new A.Uniform(null),texelSize:new A.Uniform(new A.Vector2)},blending:A.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\n#ifdef DOWNSAMPLE_NORMALS\nuniform lowp sampler2D normalBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}int findBestDepth(const in highp float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;highp float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){highp float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);\n#ifdef DOWNSAMPLE_NORMALS\nhighp vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);\n#else\nhighp vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));\n#endif\ngl_FragColor=vec4(n[index],d[index]);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}"})}return(0,d.Z)(n,[{key:"depthBuffer",set:function(e){this.uniforms.depthBuffer.value=e}},{key:"depthPacking",set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.BasicDepthPacking;this.depthBuffer=e,this.depthPacking=t}},{key:"normalBuffer",set:function(e){this.uniforms.normalBuffer.value=e,null!==e?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}},{key:"setNormalBuffer",value:function(e){this.normalBuffer=e}},{key:"setTexelSize",value:function(e,t){this.uniforms.texelSize.value.set(e,t)}},{key:"setSize",value:function(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}}]),n}(A.ShaderMaterial),_r=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.call(this,{name:"DownsamplingMaterial",uniforms:{inputBuffer:new A.Uniform(null),texelSize:new A.Uniform(new A.Vector2)},blending:A.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}"})).fragmentShader=gr(e.fragmentShader),e}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setSize",value:function(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}}]),n}(A.ShaderMaterial),wr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,f.Z)(this,n),o=t.call(this,{name:"EffectMaterial",defines:{THREE_REVISION:A.REVISION.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new A.Uniform(null),depthBuffer:new A.Uniform(null),resolution:new A.Uniform(new A.Vector2),texelSize:new A.Uniform(new A.Vector2),cameraNear:new A.Uniform(.3),cameraFar:new A.Uniform(1e3),aspect:new A.Uniform(1),time:new A.Uniform(0)},blending:A.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),e&&o.setShaderParts(e),r&&o.setDefines(r),i&&o.setUniforms(i),o.copyCameraSettings(a),o}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"depthBuffer",get:function(){return this.uniforms.depthBuffer.value},set:function(e){this.uniforms.depthBuffer.value=e}},{key:"depthPacking",get:function(){return Number(this.defines.DEPTH_PACKING)},set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.BasicDepthPacking;this.depthBuffer=e,this.depthPacking=t}},{key:"setShaderData",value:function(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}},{key:"setShaderParts",value:function(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <colorspace_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(tr.FRAGMENT_HEAD,e.get(tr.FRAGMENT_HEAD)||"").replace(tr.FRAGMENT_MAIN_UV,e.get(tr.FRAGMENT_MAIN_UV)||"").replace(tr.FRAGMENT_MAIN_IMAGE,e.get(tr.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}".replace(tr.VERTEX_HEAD,e.get(tr.VERTEX_HEAD)||"").replace(tr.VERTEX_MAIN_SUPPORT,e.get(tr.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=gr(this.fragmentShader),this.needsUpdate=!0,this}},{key:"setDefines",value:function(e){var t,n=(0,v.Z)(e.entries());try{for(n.s();!(t=n.n()).done;){var r=t.value;this.defines[r[0]]=r[1]}}catch(i){n.e(i)}finally{n.f()}return this.needsUpdate=!0,this}},{key:"setUniforms",value:function(e){var t,n=(0,v.Z)(e.entries());try{for(n.s();!(t=n.n()).done;){var r=t.value;this.uniforms[r[0]]=r[1]}}catch(i){n.e(i)}finally{n.f()}return this}},{key:"setExtensions",value:function(e){this.extensions={};var t,n=(0,v.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.extensions[r]=!0}}catch(i){n.e(i)}finally{n.f()}return this}},{key:"encodeOutput",get:function(){return void 0!==this.defines.ENCODE_OUTPUT},set:function(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}},{key:"isOutputEncodingEnabled",value:function(e){return this.encodeOutput}},{key:"setOutputEncodingEnabled",value:function(e){this.encodeOutput=e}},{key:"time",get:function(){return this.uniforms.time.value},set:function(e){this.uniforms.time.value=e}},{key:"setDeltaTime",value:function(e){this.uniforms.time.value+=e}},{key:"adoptCameraSettings",value:function(e){this.copyCameraSettings(e)}},{key:"copyCameraSettings",value:function(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof A.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},{key:"setSize",value:function(e,t){var n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}}],[{key:"Section",get:function(){return tr}}]),n}(A.ShaderMaterial),Sr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,f.Z)(this,n),(e=t.call(this,{name:"LuminanceMaterial",defines:{THREE_REVISION:A.REVISION.replace(/\D+/g,"")},uniforms:{inputBuffer:new A.Uniform(null),threshold:new A.Uniform(0),smoothing:new A.Uniform(1),range:new A.Uniform(null)},blending:A.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:vn})).colorOutput=r,e.luminanceRange=i,e}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"setInputBuffer",value:function(e){this.uniforms.inputBuffer.value=e}},{key:"threshold",get:function(){return this.uniforms.threshold.value},set:function(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}},{key:"getThreshold",value:function(){return this.threshold}},{key:"setThreshold",value:function(e){this.threshold=e}},{key:"smoothing",get:function(){return this.uniforms.smoothing.value},set:function(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}},{key:"getSmoothingFactor",value:function(){return this.smoothing}},{key:"setSmoothingFactor",value:function(e){this.smoothing=e}},{key:"useThreshold",get:function(){return this.threshold>0||this.smoothing>0},set:function(e){}},{key:"colorOutput",get:function(){return void 0!==this.defines.COLOR},set:function(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}},{key:"isColorOutputEnabled",value:function(e){return this.colorOutput}},{key:"setColorOutputEnabled",value:function(e){this.colorOutput=e}},{key:"useRange",get:function(){return null!==this.luminanceRange},set:function(e){this.luminanceRange=null}},{key:"luminanceRange",get:function(){return this.uniforms.range.value},set:function(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}},{key:"getLuminanceRange",value:function(){return this.luminanceRange}},{key:"setLuminanceRange",value:function(e){this.luminanceRange=e}}]),n}(A.ShaderMaterial),Er=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.kernelSize,a=void 0===i?nr:i,o=r.offset,s=void 0===o?0:o,l=r.rotation,u=void 0===l?0:l,c=r.focusArea,d=void 0===c?.4:c,h=r.feather,p=void 0===h?.3:h;return(0,f.Z)(this,n),(e=t.call(this)).fragmentShader="#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;\n#include <colorspace_fragment>\n}",e.vertexShader="uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}",e.kernelSize=a,e.fragmentShader=gr(e.fragmentShader),e.uniforms.aspect=new A.Uniform(1),e.uniforms.rotation=new A.Uniform(new A.Vector2),e.uniforms.maskParams=new A.Uniform(new A.Vector4),e._offset=s,e._focusArea=d,e._feather=p,e.rotation=u,e.updateParams(),e}return(0,d.Z)(n,[{key:"updateParams",value:function(){var e=this.uniforms.maskParams.value,t=Math.max(this.focusArea,0),n=Math.max(t-this.feather,0);e.set(this.offset-t,this.offset-n,this.offset+t,this.offset+n)}},{key:"rotation",get:function(){return Math.acos(this.uniforms.rotation.value.x)},set:function(e){this.uniforms.rotation.value.set(Math.cos(e),Math.sin(e))}},{key:"offset",get:function(){return this._offset},set:function(e){this._offset=e,this.updateParams()}},{key:"focusArea",get:function(){return this._focusArea},set:function(e){this._focusArea=e,this.updateParams()}},{key:"feather",get:function(){return this._feather},set:function(e){this._feather=e,this.updateParams()}},{key:"setSize",value:function(e,t){(0,hn.Z)((0,pn.Z)(n.prototype),"setSize",this).call(this,e,t),this.uniforms.aspect.value=e/t}}]),n}(Ar),Cr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.call(this,{name:"UpsamplingMaterial",uniforms:{inputBuffer:new A.Uniform(null),supportBuffer:new A.Uniform(null),texelSize:new A.Uniform(new A.Vector2),radius:new A.Uniform(.85)},blending:A.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}"})).fragmentShader=gr(e.fragmentShader),e}return(0,d.Z)(n,[{key:"inputBuffer",set:function(e){this.uniforms.inputBuffer.value=e}},{key:"supportBuffer",set:function(e){this.uniforms.supportBuffer.value=e}},{key:"radius",get:function(){return this.uniforms.radius.value},set:function(e){this.uniforms.radius.value=e}},{key:"setSize",value:function(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}}]),n}(A.ShaderMaterial),Tr=new A.Camera,Mr=null;var Ir=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pass",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A.Scene,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tr;(0,f.Z)(this,e),this.name=t,this.renderer=null,this.scene=n,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}return(0,d.Z)(e,[{key:"renderToScreen",get:function(){return!this.rtt},set:function(e){if(this.rtt===e){var t=this.fullscreenMaterial;null!==t&&(t.needsUpdate=!0),this.rtt=!e}}},{key:"mainScene",set:function(e){}},{key:"mainCamera",set:function(e){}},{key:"setRenderer",value:function(e){this.renderer=e}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){this.enabled=e}},{key:"fullscreenMaterial",get:function(){return null!==this.screen?this.screen.material:null},set:function(e){var t=this.screen;null!==t?t.material=e:((t=new A.Mesh(function(){if(null===Mr){var e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(Mr=new A.BufferGeometry).setAttribute?(Mr.setAttribute("position",new A.BufferAttribute(e,3)),Mr.setAttribute("uv",new A.BufferAttribute(t,2))):(Mr.addAttribute("position",new A.BufferAttribute(e,3)),Mr.addAttribute("uv",new A.BufferAttribute(t,2)))}return Mr}(),e)).frustumCulled=!1,null===this.scene&&(this.scene=new A.Scene),this.scene.add(t),this.screen=t)}},{key:"getFullscreenMaterial",value:function(){return this.fullscreenMaterial}},{key:"setFullscreenMaterial",value:function(e){this.fullscreenMaterial=e}},{key:"getDepthTexture",value:function(){return null}},{key:"setDepthTexture",value:function(e){arguments.length>1&&void 0!==arguments[1]||A.BasicDepthPacking}},{key:"render",value:function(e,t,n,r,i){throw new Error("Render method not implemented!")}},{key:"setSize",value:function(e,t){}},{key:"initialize",value:function(e,t,n){}},{key:"dispose",value:function(){for(var t=0,n=Object.keys(this);t<n.length;t++){var r=n[t],i=this[r];(i instanceof A.WebGLRenderTarget||i instanceof A.Material||i instanceof A.Texture||i instanceof e)&&this[r].dispose()}}}]),e}(),kr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,f.Z)(this,n),(r=t.call(this,"CopyPass")).fullscreenMaterial=new br,r.needsSwap=!1,r.renderTarget=e,void 0===e&&(r.renderTarget=new A.WebGLRenderTarget(1,1,{minFilter:A.LinearFilter,magFilter:A.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),r.renderTarget.texture.name="CopyPass.Target"),r.autoResize=i,r}return(0,d.Z)(n,[{key:"resize",get:function(){return this.autoResize},set:function(e){this.autoResize=e}},{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"setAutoResizeEnabled",value:function(e){this.autoResize=e}},{key:"render",value:function(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}},{key:"initialize",value:function(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==A.UnsignedByteType?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":vr(e)===Kn&&mr(this.renderTarget.texture,Kn))}}]),n}(Ir),Br=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.minLuminance,o=void 0===a?.01:a,s=i.adaptationRate,l=void 0===s?1:s;(0,f.Z)(this,n),(r=t.call(this,"AdaptiveLuminancePass")).fullscreenMaterial=new mn,r.needsSwap=!1,r.renderTargetPrevious=new A.WebGLRenderTarget(1,1,{minFilter:A.NearestFilter,magFilter:A.NearestFilter,depthBuffer:!1}),r.renderTargetPrevious.texture.name="Luminance.Previous";var u=r.fullscreenMaterial;return u.luminanceBuffer0=r.renderTargetPrevious.texture,u.luminanceBuffer1=e,u.minLuminance=o,u.adaptationRate=l,r.renderTargetAdapted=r.renderTargetPrevious.clone(),r.renderTargetAdapted.texture.name="Luminance.Adapted",r.copyPass=new kr(r.renderTargetPrevious,!1),r}return(0,d.Z)(n,[{key:"texture",get:function(){return this.renderTargetAdapted.texture}},{key:"getTexture",value:function(){return this.renderTargetAdapted.texture}},{key:"mipLevel1x1",set:function(e){this.fullscreenMaterial.mipLevel1x1=e}},{key:"adaptationRate",get:function(){return this.fullscreenMaterial.adaptationRate},set:function(e){this.fullscreenMaterial.adaptationRate=e}},{key:"render",value:function(e,t,n,r,i){this.fullscreenMaterial.deltaTime=r,e.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),e.render(this.scene,this.camera),this.copyPass.render(e,this.renderTargetAdapted)}}]),n}(Ir),Rr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.call(this,"ClearMaskPass",null,null)).needsSwap=!1,e}return(0,d.Z)(n,[{key:"render",value:function(e,t,n,r,i){var a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}}]),n}(Ir),Pr=new A.Color,Dr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,f.Z)(this,n),(e=t.call(this,"ClearPass",null,null)).needsSwap=!1,e.color=r,e.depth=i,e.stencil=a,e.overrideClearColor=null,e.overrideClearAlpha=-1,e}return(0,d.Z)(n,[{key:"setClearFlags",value:function(e,t,n){this.color=e,this.depth=t,this.stencil=n}},{key:"getOverrideClearColor",value:function(){return this.overrideClearColor}},{key:"setOverrideClearColor",value:function(e){this.overrideClearColor=e}},{key:"getOverrideClearAlpha",value:function(){return this.overrideClearAlpha}},{key:"setOverrideClearAlpha",value:function(e){this.overrideClearAlpha=e}},{key:"render",value:function(e,t,n,r,i){var a=this.overrideClearColor,o=this.overrideClearAlpha,s=e.getClearAlpha(),l=null!==a,u=o>=0;l?(e.getClearColor(Pr),e.setClearColor(a,u?o:s)):u&&e.setClearAlpha(o),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(Pr,s):u&&e.setClearAlpha(s)}}]),n}(Ir),Lr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,f.Z)(this,n),(i=t.call(this,"RenderPass",e,r)).needsSwap=!1,i.clearPass=new Dr,i.overrideMaterialManager=null===a?null:new Jr(a),i.ignoreBackground=!1,i.skipShadowMapUpdate=!1,i.selection=null,i}return(0,d.Z)(n,[{key:"mainScene",set:function(e){this.scene=e}},{key:"mainCamera",set:function(e){this.camera=e}},{key:"renderToScreen",get:function(){return(0,hn.Z)((0,pn.Z)(n.prototype),"renderToScreen",this)},set:function(e){dn((0,pn.Z)(n.prototype),"renderToScreen",e,this,!0),this.clearPass.renderToScreen=e}},{key:"overrideMaterial",get:function(){var e=this.overrideMaterialManager;return null!==e?e.material:null},set:function(e){var t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new Jr(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}},{key:"getOverrideMaterial",value:function(){return this.overrideMaterial}},{key:"setOverrideMaterial",value:function(e){this.overrideMaterial=e}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}},{key:"getSelection",value:function(){return this.selection}},{key:"setSelection",value:function(e){this.selection=e}},{key:"isBackgroundDisabled",value:function(){return this.ignoreBackground}},{key:"setBackgroundDisabled",value:function(e){this.ignoreBackground=e}},{key:"isShadowMapDisabled",value:function(){return this.skipShadowMapUpdate}},{key:"setShadowMapDisabled",value:function(e){this.skipShadowMapUpdate=e}},{key:"getClearPass",value:function(){return this.clearPass}},{key:"render",value:function(e,t,n,r,i){var a=this.scene,o=this.camera,s=this.selection,l=o.layers.mask,u=a.background,c=e.shadowMap.autoUpdate,f=this.renderToScreen?null:t;null!==s&&o.layers.set(s.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(f),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,a,o):e.render(a,o),o.layers.mask=l,a.background=u,e.shadowMap.autoUpdate=c}}]),n}(Ir),Nr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.normalBuffer,a=void 0===i?null:i,o=r.resolutionScale,s=void 0===o?.5:o,l=r.width,u=void 0===l?$r.AUTO_SIZE:l,c=r.height,d=void 0===c?$r.AUTO_SIZE:c,h=r.resolutionX,p=void 0===h?u:h,v=r.resolutionY,m=void 0===v?d:v;(0,f.Z)(this,n),e=t.call(this,"DepthDownsamplingPass");var g=new xr;g.normalBuffer=a,e.fullscreenMaterial=g,e.needsDepthTexture=!0,e.needsSwap=!1,e.renderTarget=new A.WebGLRenderTarget(1,1,{minFilter:A.NearestFilter,magFilter:A.NearestFilter,depthBuffer:!1,type:A.FloatType}),e.renderTarget.texture.name="DepthDownsamplingPass.Target",e.renderTarget.texture.generateMipmaps=!1;var y=e.resolution=new $r((0,$t.Z)(e),p,m,s);return y.addEventListener("change",(function(t){return e.setSize(y.baseWidth,y.baseHeight)})),e}return(0,d.Z)(n,[{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"getResolution",value:function(){return this.resolution}},{key:"setDepthTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.BasicDepthPacking;this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t}},{key:"render",value:function(e,t,n,r,i){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,t){var n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(e,t)}},{key:"initialize",value:function(e,t,n){var r=e.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}}]),n}(Ir);new Float32Array([255/256/Math.pow(256,3),255/256/Math.pow(256,2),255/256/256,255/256]);function Fr(e,t,n){var r,i=(0,v.Z)(t);try{for(i.s();!(r=i.n()).done;){var a,o=r.value,s="$1"+e+o.charAt(0).toUpperCase()+o.slice(1),l=new RegExp("([^\\.])(\\b"+o+"\\b)","g"),u=(0,v.Z)(n.entries());try{for(u.s();!(a=u.n()).done;){var c=a.value;null!==c[1]&&n.set(c[0],c[1].replace(l,s))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){i.e(f)}finally{i.f()}}function Or(e,t,n){var r=t.getFragmentShader(),i=t.getVertexShader(),a=void 0!==r&&/mainImage/.test(r),o=void 0!==r&&/mainUv/.test(r);if(n.attributes|=t.getAttributes(),void 0===r)throw new Error("Missing fragment shader (".concat(t.name,")"));if(o&&0!==(n.attributes&er))throw new Error("Effects that transform UVs are incompatible with convolution effects (".concat(t.name,")"));if(!a&&!o)throw new Error("Could not find mainImage or mainUv function (".concat(t.name,")"));var s=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=n.shaderParts,u=l.get(tr.FRAGMENT_HEAD)||"",c=l.get(tr.FRAGMENT_MAIN_UV)||"",f=l.get(tr.FRAGMENT_MAIN_IMAGE)||"",d=l.get(tr.VERTEX_HEAD)||"",h=l.get(tr.VERTEX_MAIN_SUPPORT)||"",p=new Set,m=new Set;if(o&&(c+="\t".concat(e,"MainUv(UV);\n"),n.uvTransformation=!0),null!==i&&/mainSupport/.test(i)){var g=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);h+="\t".concat(e,"MainSupport("),h+=g?"vUv);\n":");\n";var y,A=(0,v.Z)(i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g));try{for(A.s();!(y=A.n()).done;){var b,x=y.value,_=(0,v.Z)(x[1].split(/\s*,\s*/));try{for(_.s();!(b=_.n()).done;){var w=b.value;n.varyings.add(w),p.add(w),m.add(w)}}catch(Q){_.e(Q)}finally{_.f()}}}catch(Q){A.e(Q)}finally{A.f()}var S,E=(0,v.Z)(i.matchAll(s));try{for(E.s();!(S=E.n()).done;){var C=S.value;m.add(C[1])}}catch(Q){E.e(Q)}finally{E.f()}}var T,M=(0,v.Z)(r.matchAll(s));try{for(M.s();!(T=M.n()).done;){var I=T.value;m.add(I[1])}}catch(Q){M.e(Q)}finally{M.f()}var k,B=(0,v.Z)(t.defines.keys());try{for(B.s();!(k=B.n()).done;){var R=k.value;m.add(R.replace(/\([\w\s,]*\)/g,""))}}catch(Q){B.e(Q)}finally{B.f()}var P,D=(0,v.Z)(t.uniforms.keys());try{for(D.s();!(P=D.n()).done;){var L=P.value;m.add(L)}}catch(Q){D.e(Q)}finally{D.f()}m.delete("while"),m.delete("for"),m.delete("if"),t.uniforms.forEach((function(t,r){return n.uniforms.set(e+r.charAt(0).toUpperCase()+r.slice(1),t)})),t.defines.forEach((function(t,r){return n.defines.set(e+r.charAt(0).toUpperCase()+r.slice(1),t)}));var N=new Map([["fragment",r],["vertex",i]]);Fr(e,m,n.defines),Fr(e,m,N),r=N.get("fragment"),i=N.get("vertex");var F=t.blendMode;if(n.blendModes.set(F.blendFunction,F),a){null!==t.inputColorSpace&&t.inputColorSpace!==n.colorSpace&&(f+=t.inputColorSpace===Kn?"color0 = LinearTosRGB(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),""!==t.outputColorSpace?n.colorSpace=t.outputColorSpace:null!==t.inputColorSpace&&(n.colorSpace=t.inputColorSpace);f+="".concat(e,"MainImage(color0, UV, "),0!==(n.attributes&$n)&&/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/.test(r)&&(f+="depth, ",n.readDepth=!0),f+="color1);\n\t";var O=e+"BlendOpacity";n.uniforms.set(O,F.opacity),f+="color0 = blend".concat(F.blendFunction,"(color0, color1, ").concat(O,");\n\n\t"),u+="uniform float ".concat(O,";\n\n")}if(u+=r+"\n",null!==i&&(d+=i+"\n"),l.set(tr.FRAGMENT_HEAD,u),l.set(tr.FRAGMENT_MAIN_UV,c),l.set(tr.FRAGMENT_MAIN_IMAGE,f),l.set(tr.VERTEX_HEAD,d),l.set(tr.VERTEX_MAIN_SUPPORT,h),null!==t.extensions){var U,z=(0,v.Z)(t.extensions);try{for(z.s();!(U=z.n()).done;){var G=U.value;n.extensions.add(G)}}catch(Q){z.e(Q)}finally{z.f()}}}var Ur=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;(0,f.Z)(this,n),(r=t.call(this,"EffectPass")).fullscreenMaterial=new wr(null,null,null,e),r.listener=function(e){return r.handleEvent(e)},r.effects=[];for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return r.setEffects(a),r.skipRendering=!1,r.minTime=1,r.maxTime=Number.POSITIVE_INFINITY,r.timeScale=1,r}return(0,d.Z)(n,[{key:"mainScene",set:function(e){var t,n=(0,v.Z)(this.effects);try{for(n.s();!(t=n.n()).done;){t.value.mainScene=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"mainCamera",set:function(e){this.fullscreenMaterial.copyCameraSettings(e);var t,n=(0,v.Z)(this.effects);try{for(n.s();!(t=n.n()).done;){t.value.mainCamera=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"encodeOutput",get:function(){return this.fullscreenMaterial.encodeOutput},set:function(e){this.fullscreenMaterial.encodeOutput=e}},{key:"dithering",get:function(){return this.fullscreenMaterial.dithering},set:function(e){var t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}},{key:"setEffects",value:function(e){var t,n=(0,v.Z)(this.effects);try{for(n.s();!(t=n.n()).done;){t.value.removeEventListener("change",this.listener)}}catch(a){n.e(a)}finally{n.f()}this.effects=e.sort((function(e,t){return t.attributes-e.attributes}));var r,i=(0,v.Z)(this.effects);try{for(i.s();!(r=i.n()).done;){r.value.addEventListener("change",this.listener)}}catch(a){i.e(a)}finally{i.f()}}},{key:"updateMaterial",value:function(){var e,t=new Yr,n=0,r=(0,v.Z)(this.effects);try{for(r.s();!(e=r.n()).done;){var a=e.value;if(a.blendMode.blendFunction===Cn)t.attributes|=a.getAttributes()&$n;else{if(0!==(t.attributes&a.getAttributes()&er))throw new Error("Convolution effects cannot be merged (".concat(a.name,")"));Or("e"+n++,a,t)}}}catch(A){r.e(A)}finally{r.f()}var o,s=t.shaderParts.get(tr.FRAGMENT_HEAD),l=t.shaderParts.get(tr.FRAGMENT_MAIN_IMAGE),u=t.shaderParts.get(tr.FRAGMENT_MAIN_UV),c=/\bblend\b/g,f=(0,v.Z)(t.blendModes.values());try{for(f.s();!(o=f.n()).done;){var d=o.value;s+=d.getShaderCode().replace(c,"blend".concat(d.blendFunction))+"\n"}}catch(A){f.e(A)}finally{f.f()}0!==(t.attributes&$n)?(t.readDepth&&(l="float depth = readDepth(UV);\n\n\t"+l),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,t.colorSpace===Kn&&(l+="color0 = sRGBToLinear(color0);\n\t"),t.uvTransformation?(u="vec2 transformedUv = vUv;\n"+u,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(tr.FRAGMENT_HEAD,s),t.shaderParts.set(tr.FRAGMENT_MAIN_IMAGE,l),t.shaderParts.set(tr.FRAGMENT_MAIN_UV,u);var h,p=(0,v.Z)(t.shaderParts);try{for(p.s();!(h=p.n()).done;){var m=(0,i.Z)(h.value,2),g=m[0],y=m[1];null!==y&&t.shaderParts.set(g,y.trim().replace(/^#/,"\n#"))}}catch(A){p.e(A)}finally{p.f()}this.skipRendering=0===n,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}},{key:"recompile",value:function(){this.updateMaterial()}},{key:"getDepthTexture",value:function(){return this.fullscreenMaterial.depthBuffer}},{key:"setDepthTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.BasicDepthPacking;this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;var n,r=(0,v.Z)(this.effects);try{for(r.s();!(n=r.n()).done;){n.value.setDepthTexture(e,t)}}catch(i){r.e(i)}finally{r.f()}}},{key:"render",value:function(e,t,n,r,i){var a,o=(0,v.Z)(this.effects);try{for(o.s();!(a=o.n()).done;){a.value.update(e,t,r)}}catch(l){o.e(l)}finally{o.f()}if(!this.skipRendering||this.renderToScreen){var s=this.fullscreenMaterial;s.inputBuffer=t.texture,s.time+=r*this.timeScale,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}},{key:"setSize",value:function(e,t){this.fullscreenMaterial.setSize(e,t);var n,r=(0,v.Z)(this.effects);try{for(r.s();!(n=r.n()).done;){n.value.setSize(e,t)}}catch(i){r.e(i)}finally{r.f()}}},{key:"initialize",value:function(e,t,n){this.renderer=e;var r,i=(0,v.Z)(this.effects);try{for(i.s();!(r=i.n()).done;){r.value.initialize(e,t,n)}}catch(a){i.e(a)}finally{i.f()}this.updateMaterial(),void 0!==n&&n!==A.UnsignedByteType&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},{key:"dispose",value:function(){(0,hn.Z)((0,pn.Z)(n.prototype),"dispose",this).call(this);var e,t=(0,v.Z)(this.effects);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.removeEventListener("change",this.listener),r.dispose()}}catch(i){t.e(i)}finally{t.f()}}},{key:"handleEvent",value:function(e){if("change"===e.type)this.recompile()}}]),n}(Ir),zr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.kernelSize,a=void 0===i?nr:i,o=r.resolutionScale,s=void 0===o?.5:o,l=r.width,u=void 0===l?$r.AUTO_SIZE:l,c=r.height,d=void 0===c?$r.AUTO_SIZE:c,h=r.resolutionX,p=void 0===h?u:h,v=r.resolutionY,m=void 0===v?d:v;(0,f.Z)(this,n),(e=t.call(this,"KawaseBlurPass")).renderTargetA=new A.WebGLRenderTarget(1,1,{depthBuffer:!1}),e.renderTargetA.texture.name="Blur.Target.A",e.renderTargetB=e.renderTargetA.clone(),e.renderTargetB.texture.name="Blur.Target.B";var g=e.resolution=new $r((0,$t.Z)(e),p,m,s);return g.addEventListener("change",(function(t){return e.setSize(g.baseWidth,g.baseHeight)})),e._blurMaterial=new Ar,e._blurMaterial.kernelSize=a,e.copyMaterial=new br,e}return(0,d.Z)(n,[{key:"getResolution",value:function(){return this.resolution}},{key:"blurMaterial",get:function(){return this._blurMaterial},set:function(e){this._blurMaterial=e}},{key:"dithering",get:function(){return this.copyMaterial.dithering},set:function(e){this.copyMaterial.dithering=e}},{key:"kernelSize",get:function(){return this.blurMaterial.kernelSize},set:function(e){this.blurMaterial.kernelSize=e}},{key:"width",get:function(){return this.resolution.width},set:function(e){this.resolution.preferredWidth=e}},{key:"height",get:function(){return this.resolution.height},set:function(e){this.resolution.preferredHeight=e}},{key:"scale",get:function(){return this.blurMaterial.scale},set:function(e){this.blurMaterial.scale=e}},{key:"getScale",value:function(){return this.blurMaterial.scale}},{key:"setScale",value:function(e){this.blurMaterial.scale=e}},{key:"getKernelSize",value:function(){return this.kernelSize}},{key:"setKernelSize",value:function(e){this.kernelSize=e}},{key:"getResolutionScale",value:function(){return this.resolution.scale}},{key:"setResolutionScale",value:function(e){this.resolution.scale=e}},{key:"render",value:function(e,t,n,r,i){var a=this.scene,o=this.camera,s=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,c=u.kernelSequence,f=t;this.fullscreenMaterial=u;for(var d=0,h=c.length;d<h;++d){var p=0===(1&d)?s:l;u.kernel=c[d],u.inputBuffer=f.texture,e.setRenderTarget(p),e.render(a,o),f=p}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=f.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(a,o)}},{key:"setSize",value:function(e,t){var n=this.resolution;n.setBaseSize(e,t);var r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(e,t)}},{key:"initialize",value:function(e,t,n){void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==A.UnsignedByteType?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):vr(e)===Kn&&(mr(this.renderTargetA.texture,Kn),mr(this.renderTargetB.texture,Kn)))}}],[{key:"AUTO_SIZE",get:function(){return $r.AUTO_SIZE}}]),n}(Ir),Gr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.renderTarget,a=r.luminanceRange,o=r.colorOutput,s=r.resolutionScale,l=void 0===s?1:s,u=r.width,c=void 0===u?$r.AUTO_SIZE:u,d=r.height,h=void 0===d?$r.AUTO_SIZE:d,p=r.resolutionX,v=void 0===p?c:p,m=r.resolutionY,g=void 0===m?h:m;(0,f.Z)(this,n),(e=t.call(this,"LuminancePass")).fullscreenMaterial=new Sr(o,a),e.needsSwap=!1,e.renderTarget=i,void 0===e.renderTarget&&(e.renderTarget=new A.WebGLRenderTarget(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="LuminancePass.Target");var y=e.resolution=new $r((0,$t.Z)(e),v,g,l);return y.addEventListener("change",(function(t){return e.setSize(y.baseWidth,y.baseHeight)})),e}return(0,d.Z)(n,[{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"getResolution",value:function(){return this.resolution}},{key:"render",value:function(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,t){var n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}},{key:"initialize",value:function(e,t,n){void 0!==n&&n!==A.UnsignedByteType&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}}]),n}(Ir),Qr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;return(0,f.Z)(this,n),(i=t.call(this,"MaskPass",e,r)).needsSwap=!1,i.clearPass=new Dr(!1,!1,!0),i.inverse=!1,i}return(0,d.Z)(n,[{key:"mainScene",set:function(e){this.scene=e}},{key:"mainCamera",set:function(e){this.camera=e}},{key:"inverted",get:function(){return this.inverse},set:function(e){this.inverse=e}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}},{key:"getClearPass",value:function(){return this.clearPass}},{key:"isInverted",value:function(){return this.inverted}},{key:"setInverted",value:function(e){this.inverted=e}},{key:"render",value:function(e,t,n,r,i){var a=e.getContext(),o=e.state.buffers,s=this.scene,l=this.camera,u=this.clearPass,c=this.inverted?0:1,f=1-c;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.stencil.setFunc(a.ALWAYS,c,4294967295),o.stencil.setClear(f),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,l)):(e.setRenderTarget(t),e.render(s,l),e.setRenderTarget(n),e.render(s,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(a.EQUAL,1,4294967295),o.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.stencil.setLocked(!0)}}]),n}(Ir),Zr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.call(this,"MipmapBlurPass")).needsSwap=!1,e.renderTarget=new A.WebGLRenderTarget(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="Upsampling.Mipmap0",e.downsamplingMipmaps=[],e.upsamplingMipmaps=[],e.downsamplingMaterial=new _r,e.upsamplingMaterial=new Cr,e.resolution=new A.Vector2,e}return(0,d.Z)(n,[{key:"texture",get:function(){return this.renderTarget.texture}},{key:"levels",get:function(){return this.downsamplingMipmaps.length},set:function(e){if(this.levels!==e){var t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(var n=0;n<e;++n){var r=t.clone();r.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(t);for(var i=1,a=e-1;i<a;++i){var o=t.clone();o.texture.name="Upsampling.Mipmap"+i,this.upsamplingMipmaps.push(o)}this.setSize(this.resolution.x,this.resolution.y)}}},{key:"radius",get:function(){return this.upsamplingMaterial.radius},set:function(e){this.upsamplingMaterial.radius=e}},{key:"render",value:function(e,t,n,r,i){var a=this.scene,o=this.camera,s=this.downsamplingMaterial,l=this.upsamplingMaterial,u=this.downsamplingMipmaps,c=this.upsamplingMipmaps,f=t;this.fullscreenMaterial=s;for(var d=0,h=u.length;d<h;++d){var p=u[d];s.setSize(f.width,f.height),s.inputBuffer=f.texture,e.setRenderTarget(p),e.render(a,o),f=p}this.fullscreenMaterial=l;for(var v=c.length-1;v>=0;--v){var m=c[v];l.setSize(f.width,f.height),l.inputBuffer=f.texture,l.supportBuffer=u[v].texture,e.setRenderTarget(m),e.render(a,o),f=m}}},{key:"setSize",value:function(e,t){var n=this.resolution;n.set(e,t);for(var r=n.width,i=n.height,a=0,o=this.downsamplingMipmaps.length;a<o;++a)r=Math.round(.5*r),i=Math.round(.5*i),this.downsamplingMipmaps[a].setSize(r,i),a<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[a].setSize(r,i)}},{key:"initialize",value:function(e,t,n){if(void 0!==n){var r,i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps),a=(0,v.Z)(i);try{for(a.s();!(r=a.n()).done;){r.value.texture.type=n}}catch(l){a.e(l)}finally{a.f()}if(n!==A.UnsignedByteType)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(vr(e)===Kn){var o,s=(0,v.Z)(i);try{for(s.s();!(o=s.n()).done;){mr(o.value.texture,Kn)}}catch(l){s.e(l)}finally{s.f()}}}}},{key:"dispose",value:function(){(0,hn.Z)((0,pn.Z)(n.prototype),"dispose",this).call(this);var e,t=(0,v.Z)(this.downsamplingMipmaps.concat(this.upsamplingMipmaps));try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(r){t.e(r)}finally{t.f()}}}]),n}(Ir),Hr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.renderTarget,s=a.resolutionScale,l=void 0===s?1:s,u=a.width,c=void 0===u?$r.AUTO_SIZE:u,d=a.height,h=void 0===d?$r.AUTO_SIZE:d,p=a.resolutionX,v=void 0===p?c:p,m=a.resolutionY,g=void 0===m?h:m;(0,f.Z)(this,n),(i=t.call(this,"NormalPass")).needsSwap=!1,i.renderPass=new Lr(e,r,new A.MeshNormalMaterial);var y=i.renderPass;y.ignoreBackground=!0,y.skipShadowMapUpdate=!0;var b=y.getClearPass();b.overrideClearColor=new A.Color(7829503),b.overrideClearAlpha=1,i.renderTarget=o,void 0===i.renderTarget&&(i.renderTarget=new A.WebGLRenderTarget(1,1,{minFilter:A.NearestFilter,magFilter:A.NearestFilter}),i.renderTarget.texture.name="NormalPass.Target");var x=i.resolution=new $r((0,$t.Z)(i),v,g,l);return x.addEventListener("change",(function(e){return i.setSize(x.baseWidth,x.baseHeight)})),i}return(0,d.Z)(n,[{key:"mainScene",set:function(e){this.renderPass.mainScene=e}},{key:"mainCamera",set:function(e){this.renderPass.mainCamera=e}},{key:"texture",get:function(){return this.renderTarget.texture}},{key:"getTexture",value:function(){return this.renderTarget.texture}},{key:"getResolution",value:function(){return this.resolution}},{key:"getResolutionScale",value:function(){return this.resolution.scale}},{key:"setResolutionScale",value:function(e){this.resolution.scale=e}},{key:"render",value:function(e,t,n,r,i){var a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a,a)}},{key:"setSize",value:function(e,t){var n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}}]),n}(Ir),jr=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.offset,a=void 0===i?0:i,o=r.rotation,s=void 0===o?0:o,l=r.focusArea,u=void 0===l?.4:l,c=r.feather,d=void 0===c?.3:c,h=r.kernelSize,p=void 0===h?nr:h,v=r.resolutionScale,m=void 0===v?.5:v,g=r.resolutionX,y=void 0===g?$r.AUTO_SIZE:g,A=r.resolutionY,b=void 0===A?$r.AUTO_SIZE:A;return(0,f.Z)(this,n),(e=t.call(this,{kernelSize:p,resolutionScale:m,resolutionX:y,resolutionY:b})).blurMaterial=new Er({kernelSize:p,offset:a,rotation:s,focusArea:u,feather:d}),e}return(0,d.Z)(n)}(zr),Vr=.001,Wr=function(){function e(){(0,f.Z)(this,e),this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}return(0,d.Z)(e,[{key:"autoReset",get:function(){return this._autoReset},set:function(e){"undefined"!==typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}},{key:"delta",get:function(){return this._delta*Vr}},{key:"fixedDelta",get:function(){return this._fixedDelta*Vr},set:function(e){this._fixedDelta=1e3*e}},{key:"elapsed",get:function(){return this._elapsed*Vr}},{key:"update",value:function(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==e?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}},{key:"reset",value:function(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}},{key:"handleEvent",value:function(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}},{key:"dispose",value:function(){this.autoReset=!1}}]),e}(),Xr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.depthBuffer,i=void 0===r||r,a=n.stencilBuffer,o=void 0!==a&&a,s=n.multisampling,l=void 0===s?0:s,u=n.frameBufferType;(0,f.Z)(this,e),this.renderer=null,this.inputBuffer=this.createBuffer(i,o,u,l),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new kr,this.depthTexture=null,this.passes=[],this.timer=new Wr,this.autoRenderToScreen=!0,this.setRenderer(t)}return(0,d.Z)(e,[{key:"multisampling",get:function(){return this.inputBuffer.samples||0},set:function(e){var t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}},{key:"getTimer",value:function(){return this.timer}},{key:"getRenderer",value:function(){return this.renderer}},{key:"setRenderer",value:function(e){if(this.renderer=e,null!==e){var t=e.getSize(new A.Vector2),n=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===A.UnsignedByteType&&vr(e)===Kn&&(mr(this.inputBuffer.texture,Kn),mr(this.outputBuffer.texture,Kn),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);var i,a=(0,v.Z)(this.passes);try{for(a.s();!(i=a.n()).done;){i.value.initialize(e,n,r)}}catch(o){a.e(o)}finally{a.f()}}}},{key:"replaceRenderer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(e),t&&null!==r&&(r.removeChild(n.domElement),r.appendChild(e.domElement)),n}},{key:"createDepthTexture",value:function(){var e=this.depthTexture=new A.DepthTexture;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=A.DepthStencilFormat,e.type=A.UnsignedInt248Type):e.type=A.UnsignedIntType,e}},{key:"deleteDepthTexture",value:function(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();var e,t=(0,v.Z)(this.passes);try{for(t.s();!(e=t.n()).done;){e.value.setDepthTexture(null)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"createBuffer",value:function(e,t,n,r){var i=this.renderer,a=null===i?new A.Vector2:i.getDrawingBufferSize(new A.Vector2),o={minFilter:A.LinearFilter,magFilter:A.LinearFilter,stencilBuffer:t,depthBuffer:e,type:n},s=new A.WebGLRenderTarget(a.width,a.height,o);return r>0&&(s.ignoreDepthForMultisampleCopy=!1,s.samples=r),n===A.UnsignedByteType&&vr(i)===Kn&&mr(s.texture,Kn),s.texture.name="EffectComposer.Buffer",s.texture.generateMipmaps=!1,s}},{key:"setMainScene",value:function(e){var t,n=(0,v.Z)(this.passes);try{for(n.s();!(t=n.n()).done;){t.value.mainScene=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"setMainCamera",value:function(e){var t,n=(0,v.Z)(this.passes);try{for(n.s();!(t=n.n()).done;){t.value.mainCamera=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"addPass",value:function(e,t){var n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new A.Vector2),a=r.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(i.width,i.height),e.initialize(r,a,o),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){var s,l=this.createDepthTexture(),u=(0,v.Z)(n);try{for(u.s();!(s=u.n()).done;)(e=s.value).setDepthTexture(l)}catch(c){u.e(c)}finally{u.f()}}else e.setDepthTexture(this.depthTexture)}},{key:"removePass",value:function(e){var t=this.passes,n=t.indexOf(e);if(-1!==n&&t.splice(n,1).length>0){if(null!==this.depthTexture){var r=t.reduce((function(e,t){return e||t.needsDepthTexture}),!1);r||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}},{key:"removeAllPasses",value:function(){var e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}},{key:"render",value:function(e){var t,n,r,i=this.renderer,a=this.copyPass,o=this.inputBuffer,s=this.outputBuffer,l=!1;void 0===e&&(this.timer.update(),e=this.timer.delta);var u,c=(0,v.Z)(this.passes);try{for(c.s();!(u=c.n()).done;){var f=u.value;f.enabled&&(f.render(i,o,s,e,l),f.needsSwap&&(l&&(a.renderToScreen=f.renderToScreen,t=i.getContext(),(n=i.state.buffers.stencil).setFunc(t.NOTEQUAL,1,4294967295),a.render(i,o,s,e,l),n.setFunc(t.EQUAL,1,4294967295)),r=o,o=s,s=r),f instanceof Qr?l=!0:f instanceof Rr&&(l=!1))}}catch(d){c.e(d)}finally{c.f()}}},{key:"setSize",value:function(e,t,n){var r=this.renderer,i=r.getSize(new A.Vector2);void 0!==e&&void 0!==t||(e=i.width,t=i.height),i.width===e&&i.height===t||r.setSize(e,t,n);var a=r.getDrawingBufferSize(new A.Vector2);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);var o,s=(0,v.Z)(this.passes);try{for(s.s();!(o=s.n()).done;){o.value.setSize(a.width,a.height)}}catch(l){s.e(l)}finally{s.f()}}},{key:"reset",value:function(){var e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}},{key:"dispose",value:function(){var e,t=(0,v.Z)(this.passes);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(n){t.e(n)}finally{t.f()}this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}}]),e}(),Yr=(0,d.Z)((function e(){(0,f.Z)(this,e),this.shaderParts=new Map([[tr.FRAGMENT_HEAD,null],[tr.FRAGMENT_MAIN_UV,null],[tr.FRAGMENT_MAIN_IMAGE,null],[tr.VERTEX_HEAD,null],[tr.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=qn,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Jn}));var Kr=!1,Jr=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,f.Z)(this,e),this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=function(e){if(e.isMesh){var n;if(e.material.flatShading)switch(e.material.side){case A.DoubleSide:n=t.materialsFlatShadedDoubleSide;break;case A.BackSide:n=t.materialsFlatShadedBackSide;break;default:n=t.materialsFlatShaded}else switch(e.material.side){case A.DoubleSide:n=t.materialsDoubleSide;break;case A.BackSide:n=t.materialsBackSide;break;default:n=t.materials}t.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++t.meshCount}}}return(0,d.Z)(e,[{key:"cloneMaterial",value:function(e){if(!(e instanceof A.ShaderMaterial))return e.clone();var t=e.uniforms,n=new Map;for(var r in t){var i=t[r].value;i.isRenderTargetTexture&&(t[r].value=null,n.set(r,i))}var a,o=e.clone(),s=(0,v.Z)(n);try{for(s.s();!(a=s.n()).done;){var l=a.value;t[l[0]].value=l[1],o.uniforms[l[0]].value=l[1]}}catch(u){s.e(u)}finally{s.f()}return o}},{key:"setMaterial",value:function(e){var t=this;if(this.disposeMaterials(),this.material=e,null!==e){for(var n=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)],r=0,i=n;r<i.length;r++){var a=i[r];a.uniforms=Object.assign({},e.uniforms),a.side=A.FrontSide}n[2].skinning=!0,this.materialsBackSide=n.map((function(n){var r=t.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.side=A.BackSide,r})),this.materialsDoubleSide=n.map((function(n){var r=t.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.side=A.DoubleSide,r})),this.materialsFlatShaded=n.map((function(n){var r=t.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r})),this.materialsFlatShadedBackSide=n.map((function(n){var r=t.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=A.BackSide,r})),this.materialsFlatShadedDoubleSide=n.map((function(n){var r=t.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=A.DoubleSide,r}))}}},{key:"render",value:function(e,t,n){var r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,Kr){var i=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);var a,o=(0,v.Z)(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;s[0].material=s[1]}}catch(u){o.e(u)}finally{o.f()}this.meshCount!==i.size&&i.clear()}else{var l=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=l}e.shadowMap.enabled=r}},{key:"disposeMaterials",value:function(){if(null!==this.material){var e,t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide),n=(0,v.Z)(t);try{for(n.s();!(e=n.n()).done;){e.value.dispose()}}catch(r){n.e(r)}finally{n.f()}}}},{key:"dispose",value:function(){this.originalMaterials.clear(),this.disposeMaterials()}}],[{key:"workaroundEnabled",get:function(){return Kr},set:function(e){Kr=e}}]),e}(),qr=-1,$r=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qr,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,f.Z)(this,n),(r=t.call(this)).resizable=e,r.baseSize=new A.Vector2(1,1),r.preferredSize=new A.Vector2(i,a),r.target=r.preferredSize,r.s=o,r.effectiveSize=new A.Vector2,r.addEventListener("change",(function(){return r.updateEffectiveSize()})),r.updateEffectiveSize(),r}return(0,d.Z)(n,[{key:"updateEffectiveSize",value:function(){var e=this.baseSize,t=this.preferredSize,n=this.effectiveSize,r=this.scale;t.width!==qr?n.width=t.width:t.height!==qr?n.width=Math.round(t.height*(e.width/Math.max(e.height,1))):n.width=Math.round(e.width*r),t.height!==qr?n.height=t.height:t.width!==qr?n.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):n.height=Math.round(e.height*r)}},{key:"width",get:function(){return this.effectiveSize.width},set:function(e){this.preferredWidth=e}},{key:"height",get:function(){return this.effectiveSize.height},set:function(e){this.preferredHeight=e}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"scale",get:function(){return this.s},set:function(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(qr),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getScale",value:function(){return this.scale}},{key:"setScale",value:function(e){this.scale=e}},{key:"baseWidth",get:function(){return this.baseSize.width},set:function(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getBaseWidth",value:function(){return this.baseWidth}},{key:"setBaseWidth",value:function(e){this.baseWidth=e}},{key:"baseHeight",get:function(){return this.baseSize.height},set:function(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getBaseHeight",value:function(){return this.baseHeight}},{key:"setBaseHeight",value:function(e){this.baseHeight=e}},{key:"setBaseSize",value:function(e,t){this.baseSize.width===e&&this.baseSize.height===t||(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"preferredWidth",get:function(){return this.preferredSize.width},set:function(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getPreferredWidth",value:function(){return this.preferredWidth}},{key:"setPreferredWidth",value:function(e){this.preferredWidth=e}},{key:"preferredHeight",get:function(){return this.preferredSize.height},set:function(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"getPreferredHeight",value:function(){return this.preferredHeight}},{key:"setPreferredHeight",value:function(e){this.preferredHeight=e}},{key:"setPreferredSize",value:function(e,t){this.preferredSize.width===e&&this.preferredSize.height===t||(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}},{key:"copy",value:function(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}}],[{key:"AUTO_SIZE",get:function(){return qr}}]),n}(A.EventDispatcher),ei=new Map([[gn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}"],[yn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}"],[An,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}"],[bn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[xn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}"],[_n,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}"],[wn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}"],[Sn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}"],[En,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}"],[Cn,null],[Tn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}"],[Mn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}"],[In,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}"],[kn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}"],[Bn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}"],[Rn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}"],[Pn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}"],[Dn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}"],[Ln,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}"],[Nn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}"],[Fn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[On,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}"],[Un,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}"],[zn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[Gn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}"],[Qn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}"],[Zn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}"],[Hn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[jn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}"],[Vn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}"],[Wn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[Xn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}"],[Yn,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}"]]),ti=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,f.Z)(this,n),(r=t.call(this))._blendFunction=e,r.opacity=new A.Uniform(i),r}return(0,d.Z)(n,[{key:"getOpacity",value:function(){return this.opacity.value}},{key:"setOpacity",value:function(e){this.opacity.value=e}},{key:"blendFunction",get:function(){return this._blendFunction},set:function(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}},{key:"getBlendFunction",value:function(){return this.blendFunction}},{key:"setBlendFunction",value:function(e){this.blendFunction=e}},{key:"getShaderCode",value:function(){return ei.get(this.blendFunction)}}]),n}(A.EventDispatcher),ni=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.attributes,s=void 0===o?qn:o,l=a.blendFunction,u=void 0===l?zn:l,c=a.defines,d=void 0===c?new Map:c,h=a.uniforms,p=void 0===h?new Map:h,v=a.extensions,m=void 0===v?null:v,g=a.vertexShader,y=void 0===g?null:g;return(0,f.Z)(this,n),(i=t.call(this)).name=e,i.renderer=null,i.attributes=s,i.fragmentShader=r,i.vertexShader=y,i.defines=d,i.uniforms=p,i.extensions=m,i.blendMode=new ti(u),i.blendMode.addEventListener("change",(function(e){return i.setChanged()})),i._inputColorSpace=Jn,i._outputColorSpace="",i}return(0,d.Z)(n,[{key:"inputColorSpace",get:function(){return this._inputColorSpace},set:function(e){this._inputColorSpace=e,this.setChanged()}},{key:"outputColorSpace",get:function(){return this._outputColorSpace},set:function(e){this._outputColorSpace=e,this.setChanged()}},{key:"mainScene",set:function(e){}},{key:"mainCamera",set:function(e){}},{key:"getName",value:function(){return this.name}},{key:"setRenderer",value:function(e){this.renderer=e}},{key:"getDefines",value:function(){return this.defines}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"getExtensions",value:function(){return this.extensions}},{key:"getBlendMode",value:function(){return this.blendMode}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){this.attributes=e,this.setChanged()}},{key:"getFragmentShader",value:function(){return this.fragmentShader}},{key:"setFragmentShader",value:function(e){this.fragmentShader=e,this.setChanged()}},{key:"getVertexShader",value:function(){return this.vertexShader}},{key:"setVertexShader",value:function(e){this.vertexShader=e,this.setChanged()}},{key:"setChanged",value:function(){this.dispatchEvent({type:"change"})}},{key:"setDepthTexture",value:function(e){arguments.length>1&&void 0!==arguments[1]||A.BasicDepthPacking}},{key:"update",value:function(e,t,n){}},{key:"setSize",value:function(e,t){}},{key:"initialize",value:function(e,t,n){}},{key:"dispose",value:function(){for(var e=0,t=Object.keys(this);e<t.length;e++){var n=t[e],r=this[n];(r instanceof A.WebGLRenderTarget||r instanceof A.Material||r instanceof A.Texture||r instanceof Ir)&&this[n].dispose()}}}]),n}(A.EventDispatcher),ri=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.blendFunction,a=void 0===i?jn:i,o=r.luminanceThreshold,s=void 0===o?.9:o,l=r.luminanceSmoothing,u=void 0===l?.025:l,c=r.mipmapBlur,d=void 0!==c&&c,h=r.intensity,p=void 0===h?1:h,v=r.radius,m=void 0===v?.85:v,g=r.levels,y=void 0===g?8:g,b=r.kernelSize,x=void 0===b?rr:b,_=r.resolutionScale,w=void 0===_?.5:_,S=r.width,E=void 0===S?$r.AUTO_SIZE:S,C=r.height,T=void 0===C?$r.AUTO_SIZE:C,M=r.resolutionX,I=void 0===M?E:M,k=r.resolutionY,B=void 0===k?T:k;(0,f.Z)(this,n),(e=t.call(this,"BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}",{blendFunction:a,uniforms:new Map([["map",new A.Uniform(null)],["intensity",new A.Uniform(p)]])})).renderTarget=new A.WebGLRenderTarget(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="Bloom.Target",e.blurPass=new zr({kernelSize:x}),e.luminancePass=new Gr({colorOutput:!0}),e.luminanceMaterial.threshold=s,e.luminanceMaterial.smoothing=u,e.mipmapBlurPass=new Zr,e.mipmapBlurPass.enabled=d,e.mipmapBlurPass.radius=m,e.mipmapBlurPass.levels=y,e.uniforms.get("map").value=d?e.mipmapBlurPass.texture:e.renderTarget.texture;var R=e.resolution=new $r((0,$t.Z)(e),I,B,w);return R.addEventListener("change",(function(t){return e.setSize(R.baseWidth,R.baseHeight)})),e}return(0,d.Z)(n,[{key:"texture",get:function(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}},{key:"getTexture",value:function(){return this.texture}},{key:"getResolution",value:function(){return this.resolution}},{key:"getBlurPass",value:function(){return this.blurPass}},{key:"getLuminancePass",value:function(){return this.luminancePass}},{key:"luminanceMaterial",get:function(){return this.luminancePass.fullscreenMaterial}},{key:"getLuminanceMaterial",value:function(){return this.luminancePass.fullscreenMaterial}},{key:"width",get:function(){return this.resolution.width},set:function(e){this.resolution.preferredWidth=e}},{key:"height",get:function(){return this.resolution.height},set:function(e){this.resolution.preferredHeight=e}},{key:"dithering",get:function(){return this.blurPass.dithering},set:function(e){this.blurPass.dithering=e}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(e){this.blurPass.kernelSize=e}},{key:"distinction",get:function(){return console.warn(this.name,"distinction was removed"),1},set:function(e){console.warn(this.name,"distinction was removed")}},{key:"intensity",get:function(){return this.uniforms.get("intensity").value},set:function(e){this.uniforms.get("intensity").value=e}},{key:"getIntensity",value:function(){return this.intensity}},{key:"setIntensity",value:function(e){this.intensity=e}},{key:"getResolutionScale",value:function(){return this.resolution.scale}},{key:"setResolutionScale",value:function(e){this.resolution.scale=e}},{key:"update",value:function(e,t,n){var r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,i.renderTarget):this.blurPass.render(e,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,r)}},{key:"setSize",value:function(e,t){var n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}},{key:"initialize",value:function(e,t,n){this.blurPass.initialize(e,t,n),this.luminancePass.initialize(e,t,n),this.mipmapBlurPass.initialize(e,t,n),void 0!==n&&(this.renderTarget.texture.type=n,vr(e)===Kn&&mr(this.renderTarget.texture,Kn))}}]),n}(ni),ii=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.blendFunction,a=void 0===i?Wn:i,o=r.brightness,s=void 0===o?0:o,l=r.contrast,u=void 0===l?0:l;return(0,f.Z)(this,n),(e=t.call(this,"BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",{blendFunction:a,uniforms:new Map([["brightness",new A.Uniform(s)],["contrast",new A.Uniform(u)]])})).inputColorSpace=Kn,e}return(0,d.Z)(n,[{key:"brightness",get:function(){return this.uniforms.get("brightness").value},set:function(e){this.uniforms.get("brightness").value=e}},{key:"getBrightness",value:function(){return this.brightness}},{key:"setBrightness",value:function(e){this.brightness=e}},{key:"contrast",get:function(){return this.uniforms.get("contrast").value},set:function(e){this.uniforms.get("contrast").value=e}},{key:"getContrast",value:function(){return this.contrast}},{key:"setContrast",value:function(e){this.contrast=e}}]),n}(ni),ai=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.blendFunction,a=r.bits,o=void 0===a?16:a;return(0,f.Z)(this,n),(e=t.call(this,"ColorDepthEffect","uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",{blendFunction:i,uniforms:new Map([["factor",new A.Uniform(1)]])})).bits=0,e.bitDepth=o,e}return(0,d.Z)(n,[{key:"bitDepth",get:function(){return this.bits},set:function(e){this.bits=e,this.uniforms.get("factor").value=Math.pow(2,e/3)}},{key:"getBitDepth",value:function(){return this.bitDepth}},{key:"setBitDepth",value:function(e){this.bitDepth=e}}]),n}(ni),oi=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.offset,a=void 0===i?new A.Vector2(.001,5e-4):i,o=r.radialModulation,s=void 0!==o&&o,l=r.modulationOffset,u=void 0===l?.15:l;return(0,f.Z)(this,n),(e=t.call(this,"ChromaticAberrationEffect","#ifdef RADIAL_MODULATION\nuniform float modulationOffset;\n#endif\nvarying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;\n#ifdef RADIAL_MODULATION\nconst vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}\n#else\nif(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}\n#endif\noutputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",{vertexShader:"uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",attributes:er,uniforms:new Map([["offset",new A.Uniform(a)],["modulationOffset",new A.Uniform(u)]])})).radialModulation=s,e}return(0,d.Z)(n,[{key:"offset",get:function(){return this.uniforms.get("offset").value},set:function(e){this.uniforms.get("offset").value=e}},{key:"radialModulation",get:function(){return this.defines.has("RADIAL_MODULATION")},set:function(e){e?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}},{key:"modulationOffset",get:function(){return this.uniforms.get("modulationOffset").value},set:function(e){this.uniforms.get("modulationOffset").value=e}},{key:"getOffset",value:function(){return this.offset}},{key:"setOffset",value:function(e){this.offset=e}}]),n}(ni),si=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.blendFunction,a=void 0===i?Wn:i,o=r.inverted,s=void 0!==o&&o;return(0,f.Z)(this,n),(e=t.call(this,"DepthEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\n#ifdef INVERTED\nvec3 color=vec3(1.0-depth);\n#else\nvec3 color=vec3(depth);\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:a,attributes:$n})).inverted=s,e}return(0,d.Z)(n,[{key:"inverted",get:function(){return this.defines.has("INVERTED")},set:function(e){this.inverted!==e&&(e?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}},{key:"isInverted",value:function(){return this.inverted}},{key:"setInverted",value:function(e){this.inverted=e}}]),n}(ni),li=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.blendFunction,a=r.angle,o=void 0===a?.5*Math.PI:a,s=r.scale,l=void 0===s?1:s;return(0,f.Z)(this,n),(e=t.call(this,"DotScreenEffect","uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",{blendFunction:i,uniforms:new Map([["angle",new A.Uniform(new A.Vector2)],["scale",new A.Uniform(l)]])})).angle=o,e}return(0,d.Z)(n,[{key:"angle",get:function(){return Math.acos(this.uniforms.get("angle").value.y)},set:function(e){this.uniforms.get("angle").value.set(Math.sin(e),Math.cos(e))}},{key:"getAngle",value:function(){return this.angle}},{key:"setAngle",value:function(e){this.angle=e}},{key:"scale",get:function(){return this.uniforms.get("scale").value},set:function(e){this.uniforms.get("scale").value=e}}]),n}(ni);new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]);new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]);ci(0,0,0,0),new Float32Array([0,0,0,0]),ci(0,0,0,1),new Float32Array([0,0,0,1]),ci(0,0,1,0),new Float32Array([0,0,1,0]),ci(0,0,1,1),new Float32Array([0,0,1,1]),ci(0,1,0,0),new Float32Array([0,1,0,0]),ci(0,1,0,1),new Float32Array([0,1,0,1]),ci(0,1,1,0),new Float32Array([0,1,1,0]),ci(0,1,1,1),new Float32Array([0,1,1,1]),ci(1,0,0,0),new Float32Array([1,0,0,0]),ci(1,0,0,1),new Float32Array([1,0,0,1]),ci(1,0,1,0),new Float32Array([1,0,1,0]),ci(1,0,1,1),new Float32Array([1,0,1,1]),ci(1,1,0,0),new Float32Array([1,1,0,0]),ci(1,1,0,1),new Float32Array([1,1,0,1]),ci(1,1,1,0),new Float32Array([1,1,1,0]),ci(1,1,1,1),new Float32Array([1,1,1,1]);function ui(e,t,n){return e+(t-e)*n}function ci(e,t,n,r){var i=ui(e,t,.75),a=ui(n,r,.75);return ui(i,a,.875)}var fi=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.blendFunction,a=void 0===i?Wn:i,o=r.hue,s=void 0===o?0:o,l=r.saturation,u=void 0===l?0:l;return(0,f.Z)(this,n),(e=t.call(this,"HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:a,uniforms:new Map([["hue",new A.Uniform(new A.Vector3)],["saturation",new A.Uniform(u)]])})).hue=s,e}return(0,d.Z)(n,[{key:"saturation",get:function(){return this.uniforms.get("saturation").value},set:function(e){this.uniforms.get("saturation").value=e}},{key:"getSaturation",value:function(){return this.saturation}},{key:"setSaturation",value:function(e){this.saturation=e}},{key:"hue",get:function(){var e=this.uniforms.get("hue").value;return Math.acos((3*e.x-1)/2)},set:function(e){var t=Math.sin(e),n=Math.cos(e);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3)}},{key:"getHue",value:function(){return this.hue}},{key:"setHue",value:function(e){this.hue=e}}]),n}(ni),di=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.blendFunction,a=void 0===i?jn:i,o=r.premultiply,s=void 0!==o&&o;return(0,f.Z)(this,n),(e=t.call(this,"NoiseEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",{blendFunction:a})).premultiply=s,e}return(0,d.Z)(n,[{key:"premultiply",get:function(){return this.defines.has("PREMULTIPLY")},set:function(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}},{key:"isPremultiplied",value:function(){return this.premultiply}},{key:"setPremultiplied",value:function(e){this.premultiply=e}}]),n}(ni),hi=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.blendFunction,a=void 0===i?Gn:i,o=r.density,s=void 0===o?1.25:o,l=r.scrollSpeed,u=void 0===l?0:l;return(0,f.Z)(this,n),(e=t.call(this,"ScanlineEffect","uniform float count;\n#ifdef SCROLL\nuniform float scrollSpeed;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;\n#ifdef SCROLL\ny+=time*scrollSpeed;\n#endif\nvec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}",{blendFunction:a,uniforms:new Map([["count",new A.Uniform(0)],["scrollSpeed",new A.Uniform(0)]])})).resolution=new A.Vector2,e.d=s,e.scrollSpeed=u,e}return(0,d.Z)(n,[{key:"density",get:function(){return this.d},set:function(e){this.d=e,this.setSize(this.resolution.width,this.resolution.height)}},{key:"getDensity",value:function(){return this.density}},{key:"setDensity",value:function(e){this.density=e}},{key:"scrollSpeed",get:function(){return this.uniforms.get("scrollSpeed").value},set:function(e){this.uniforms.get("scrollSpeed").value=e,0===e?this.defines.delete("SCROLL")&&this.setChanged():this.defines.has("SCROLL")||(this.defines.set("SCROLL","1"),this.setChanged())}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.uniforms.get("count").value=Math.round(t*this.density)}}]),n}(ni),pi=.5*Math.PI,vi=new A.Vector3,mi=new A.Vector3,gi=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A.Vector3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.speed,s=void 0===o?2:o,l=a.maxRadius,u=void 0===l?1:l,c=a.waveSize,d=void 0===c?.2:c,h=a.amplitude,p=void 0===h?.05:h;return(0,f.Z)(this,n),(r=t.call(this,"ShockWaveEffect","uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",{vertexShader:"uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",uniforms:new Map([["active",new A.Uniform(!1)],["center",new A.Uniform(new A.Vector2(.5,.5))],["cameraDistance",new A.Uniform(1)],["size",new A.Uniform(1)],["radius",new A.Uniform(-d)],["maxRadius",new A.Uniform(u)],["waveSize",new A.Uniform(d)],["amplitude",new A.Uniform(p)]])})).position=i,r.speed=s,r.camera=e,r.screenPosition=r.uniforms.get("center").value,r.time=0,r.active=!1,r}return(0,d.Z)(n,[{key:"mainCamera",set:function(e){this.camera=e}},{key:"amplitude",get:function(){return this.uniforms.get("amplitude").value},set:function(e){this.uniforms.get("amplitude").value=e}},{key:"waveSize",get:function(){return this.uniforms.get("waveSize").value},set:function(e){this.uniforms.get("waveSize").value=e}},{key:"maxRadius",get:function(){return this.uniforms.get("maxRadius").value},set:function(e){this.uniforms.get("maxRadius").value=e}},{key:"epicenter",get:function(){return this.position},set:function(e){this.position=e}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(e){this.position=e}},{key:"getSpeed",value:function(){return this.speed}},{key:"setSpeed",value:function(e){this.speed=e}},{key:"explode",value:function(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}},{key:"update",value:function(e,t,n){var r=this.position,i=this.camera,a=this.uniforms,o=a.get("active");if(this.active){var s=a.get("waveSize").value;i.getWorldDirection(vi),mi.copy(i.position).sub(r),o.value=vi.angleTo(mi)>pi,o.value&&(a.get("cameraDistance").value=i.position.distanceTo(r),vi.copy(r).project(i),this.screenPosition.set(.5*(vi.x+1),.5*(vi.y+1))),this.time+=n*this.speed;var l=this.time-s;a.get("radius").value=l,l>=2*(a.get("maxRadius").value+s)&&(this.active=!1,o.value=!1)}}}]),n}(ni),yi=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.blendFunction;e.intensity;return(0,f.Z)(this,n),t.call(this,"SepiaEffect","uniform vec3 weightsR;uniform vec3 weightsG;uniform vec3 weightsB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,weightsR),dot(inputColor.rgb,weightsG),dot(inputColor.rgb,weightsB));outputColor=vec4(color,inputColor.a);}",{blendFunction:r,uniforms:new Map([["weightsR",new A.Uniform(new A.Vector3(.393,.769,.189))],["weightsG",new A.Uniform(new A.Vector3(.349,.686,.168))],["weightsB",new A.Uniform(new A.Vector3(.272,.534,.131))]])})}return(0,d.Z)(n,[{key:"intensity",get:function(){return this.blendMode.opacity.value},set:function(e){this.blendMode.opacity.value=e}},{key:"getIntensity",value:function(){return this.intensity}},{key:"setIntensity",value:function(e){this.intensity=e}},{key:"weightsR",get:function(){return this.uniforms.get("weightsR").value}},{key:"weightsG",get:function(){return this.uniforms.get("weightsG").value}},{key:"weightsB",get:function(){return this.uniforms.get("weightsB").value}}]),n}(ni),Ai=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.blendFunction,a=r.offset,o=void 0===a?0:a,s=r.rotation,l=void 0===s?0:s,u=r.focusArea,c=void 0===u?.4:u,d=r.feather,h=void 0===d?.3:d,p=r.kernelSize,v=void 0===p?nr:p,m=r.resolutionScale,g=void 0===m?.5:m,y=r.resolutionX,b=void 0===y?$r.AUTO_SIZE:y,x=r.resolutionY,_=void 0===x?$r.AUTO_SIZE:x;(0,f.Z)(this,n),(e=t.call(this,"TiltShiftEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}",{vertexShader:"uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}",blendFunction:i,uniforms:new Map([["rotation",new A.Uniform(new A.Vector2)],["maskParams",new A.Uniform(new A.Vector2)],["map",new A.Uniform(null)]])}))._offset=o,e._focusArea=c,e._feather=h,e.renderTarget=new A.WebGLRenderTarget(1,1,{depthBuffer:!1}),e.renderTarget.texture.name="TiltShift.Target",e.uniforms.get("map").value=e.renderTarget.texture,e.blurPass=new jr({kernelSize:v,resolutionScale:g,resolutionX:b,resolutionY:_,offset:o,rotation:l,focusArea:c,feather:h});var w=e.resolution=new $r((0,$t.Z)(e),b,_,g);return w.addEventListener("change",(function(t){return e.setSize(w.baseWidth,w.baseHeight)})),e.rotation=l,e.updateParams(),e}return(0,d.Z)(n,[{key:"updateParams",value:function(){var e=this.uniforms.get("maskParams").value,t=Math.max(this.focusArea-this.feather,0);e.set(this.offset-t,this.offset+t)}},{key:"rotation",get:function(){return Math.acos(this.uniforms.get("rotation").value.x)},set:function(e){this.uniforms.get("rotation").value.set(Math.cos(e),Math.sin(e)),this.blurPass.blurMaterial.rotation=e}},{key:"offset",get:function(){return this._offset},set:function(e){this._offset=e,this.blurPass.blurMaterial.offset=e,this.updateParams()}},{key:"focusArea",get:function(){return this._focusArea},set:function(e){this._focusArea=e,this.blurPass.blurMaterial.focusArea=e,this.updateParams()}},{key:"feather",get:function(){return this._feather},set:function(e){this._feather=e,this.blurPass.blurMaterial.feather=e,this.updateParams()}},{key:"bias",get:function(){return 0},set:function(e){}},{key:"update",value:function(e,t,n){this.blurPass.render(e,t,this.renderTarget)}},{key:"setSize",value:function(e,t){var n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n)}},{key:"initialize",value:function(e,t,n){this.blurPass.initialize(e,t,n),void 0!==n&&(this.renderTarget.texture.type=n,vr(e)===Kn&&mr(this.renderTarget.texture,Kn))}}]),n}(ni),bi=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.blendFunction,a=void 0===i?Wn:i,o=r.adaptive,s=void 0!==o&&o,l=r.mode,u=void 0===l?s?or:lr:l,c=r.resolution,d=void 0===c?256:c,h=r.maxLuminance,p=void 0===h?4:h,v=r.whitePoint,m=void 0===v?p:v,g=r.middleGrey,y=void 0===g?.6:g,b=r.minLuminance,x=void 0===b?.01:b,_=r.averageLuminance,w=void 0===_?1:_,S=r.adaptationRate,E=void 0===S?1:S;return(0,f.Z)(this,n),(e=t.call(this,"ToneMappingEffect","#include <tonemapping_pars_fragment>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\nuniform float whitePoint;\n#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2\nuniform float middleGrey;\n#if TONE_MAPPING_MODE == 2\nuniform lowp sampler2D luminanceBuffer;\n#else\nuniform float averageLuminance;\n#endif\nvec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);\n#if TONE_MAPPING_MODE == 2\nfloat lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));\n#else\nfloat lumAvg=averageLuminance;\n#endif\nfloat lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}\n#elif TONE_MAPPING_MODE == 5\n#define A 0.15\n#define B 0.50\n#define C 0.10\n#define D 0.20\n#define E 0.02\n#define F 0.30\nvec3 Uncharted2Helper(const in vec3 x){return((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}vec3 Uncharted2ToneMapping(vec3 color){color*=toneMappingExposure;return clamp(Uncharted2Helper(color)/Uncharted2Helper(vec3(whitePoint)),0.0,1.0);}\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\n#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2\noutputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);\n#elif TONE_MAPPING_MODE == 5\noutputColor=vec4(Uncharted2ToneMapping(inputColor.rgb),inputColor.a);\n#else\noutputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);\n#endif\n}",{blendFunction:a,uniforms:new Map([["luminanceBuffer",new A.Uniform(null)],["maxLuminance",new A.Uniform(p)],["whitePoint",new A.Uniform(m)],["middleGrey",new A.Uniform(y)],["averageLuminance",new A.Uniform(w)]])})).renderTargetLuminance=new A.WebGLRenderTarget(1,1,{minFilter:A.LinearMipmapLinearFilter,depthBuffer:!1}),e.renderTargetLuminance.texture.generateMipmaps=!0,e.renderTargetLuminance.texture.name="Luminance",e.luminancePass=new Gr({renderTarget:e.renderTargetLuminance}),e.adaptiveLuminancePass=new Br(e.luminancePass.texture,{minLuminance:x,adaptationRate:E}),e.uniforms.get("luminanceBuffer").value=e.adaptiveLuminancePass.texture,e.resolution=d,e.mode=u,e}return(0,d.Z)(n,[{key:"mode",get:function(){return Number(this.defines.get("TONE_MAPPING_MODE"))},set:function(e){if(this.mode!==e){switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",e.toFixed(0)),e){case ir:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case sr:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case lr:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel")}this.adaptiveLuminancePass.enabled=e===or,this.setChanged()}}},{key:"getMode",value:function(){return this.mode}},{key:"setMode",value:function(e){this.mode=e}},{key:"whitePoint",get:function(){return this.uniforms.get("whitePoint").value},set:function(e){this.uniforms.get("whitePoint").value=e}},{key:"middleGrey",get:function(){return this.uniforms.get("middleGrey").value},set:function(e){this.uniforms.get("middleGrey").value=e}},{key:"averageLuminance",get:function(){return this.uniforms.get("averageLuminance").value},set:function(e){this.uniforms.get("averageLuminance").value=e}},{key:"adaptiveLuminanceMaterial",get:function(){return this.adaptiveLuminancePass.fullscreenMaterial}},{key:"getAdaptiveLuminanceMaterial",value:function(){return this.adaptiveLuminanceMaterial}},{key:"resolution",get:function(){return this.luminancePass.resolution.width},set:function(e){var t=Math.max(0,Math.ceil(Math.log2(e))),n=Math.pow(2,t);this.luminancePass.resolution.setPreferredSize(n,n),this.adaptiveLuminanceMaterial.mipLevel1x1=t}},{key:"getResolution",value:function(){return this.resolution}},{key:"setResolution",value:function(e){this.resolution=e}},{key:"adaptive",get:function(){return this.mode===or},set:function(e){this.mode=e?or:ar}},{key:"adaptationRate",get:function(){return this.adaptiveLuminanceMaterial.adaptationRate},set:function(e){this.adaptiveLuminanceMaterial.adaptationRate=e}},{key:"distinction",get:function(){return console.warn(this.name,"distinction was removed."),1},set:function(e){console.warn(this.name,"distinction was removed.")}},{key:"update",value:function(e,t,n){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(e,t),this.adaptiveLuminancePass.render(e,null,null,n))}},{key:"initialize",value:function(e,t,n){this.adaptiveLuminancePass.initialize(e,t,n)}}]),n}(ni),xi=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.blendFunction,i=e.technique,a=void 0===i?ur:i,o=(e.eskil,e.offset),s=void 0===o?.5:o,l=e.darkness,u=void 0===l?.5:l;return(0,f.Z)(this,n),t.call(this,"VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:r,defines:new Map([["VIGNETTE_TECHNIQUE",a.toFixed(0)]]),uniforms:new Map([["offset",new A.Uniform(s)],["darkness",new A.Uniform(u)]])})}return(0,d.Z)(n,[{key:"technique",get:function(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))},set:function(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}},{key:"eskil",get:function(){return this.technique===cr},set:function(e){this.technique=e?cr:ur}},{key:"getTechnique",value:function(){return this.technique}},{key:"setTechnique",value:function(e){this.technique=e}},{key:"offset",get:function(){return this.uniforms.get("offset").value},set:function(e){this.uniforms.get("offset").value=e}},{key:"getOffset",value:function(){return this.offset}},{key:"setOffset",value:function(e){this.offset=e}},{key:"darkness",get:function(){return this.uniforms.get("darkness").value},set:function(e){this.uniforms.get("darkness").value=e}},{key:"getDarkness",value:function(){return this.darkness}},{key:"setDarkness",value:function(e){this.darkness=e}}]),n}(ni),_i=["blendFunction","opacity"],wi=function(e,n){return void 0===n&&(n=zn),(0,t.forwardRef)((function(r,i){var a=r.blendFunction,o=r.opacity,s=y(r,_i),l=ke((function(e){return e.invalidate})),u=(0,t.useMemo)((function(){return new e(s)}),[s]);return(0,t.useLayoutEffect)((function(){u.blendMode.blendFunction=a||0===a?a:n,void 0!==o&&(u.blendMode.opacity.value=o),l()}),[a,u.blendMode,o]),t.createElement("primitive",{ref:i,object:u,dispose:null})}))},Si=function(e,n){var r=e[n];return(0,t.useMemo)((function(){if(r instanceof A.Vector2)return(new A.Vector2).set(r.x,r.y);if(Array.isArray(r)){var e=(0,i.Z)(r,2),t=e[0],n=e[1];return(new A.Vector2).set(t,n)}}),[r])},Ei=wi(ri,gn),Ci=(wi(ii),(0,t.forwardRef)((function(e,n){var r=Si(e,"offset"),i=(0,t.useMemo)((function(){return new oi((0,c.Z)((0,c.Z)({},e),{},{offset:r}))}),[r,e]);return t.createElement("primitive",{ref:n,object:i,dispose:null})}))),Ti=(wi(ai),wi(si),(0,t.createContext)(null)),Mi=t.memo((0,t.forwardRef)((function(e,n){var r=e.children,a=e.camera,o=e.scene,s=e.resolutionScale,l=e.enabled,u=void 0===l||l,c=e.renderPriority,f=void 0===c?1:c,d=e.autoClear,h=void 0===d||d,p=e.depthBuffer,v=e.disableNormalPass,y=e.stencilBuffer,b=e.multisampling,x=void 0===b?8:b,_=e.frameBufferType,w=void 0===_?A.HalfFloatType:_,S=ke(),E=S.gl,C=S.scene,T=S.camera,M=S.size;o=o||C,a=a||T;var I=(0,t.useMemo)((function(){var e=(0,zt.b33)(),t=new Xr(E,{depthBuffer:p,stencilBuffer:y,multisampling:x>0&&e?x:0,frameBufferType:w});t.addPass(new Lr(o,a));var n=null,r=null;return v||((r=new Hr(o,a)).enabled=!1,t.addPass(r),void 0!==s&&e&&((n=new Nr({normalBuffer:r.texture,resolutionScale:s})).enabled=!1,t.addPass(n))),[t,r,n]}),[a,E,p,y,x,w,o,v,s]),k=(0,i.Z)(I,3),B=k[0],R=k[1],P=k[2];(0,t.useEffect)((function(){return null==B?void 0:B.setSize(M.width,M.height)}),[B,M]),Be((function(e,t){u&&(E.autoClear=h,B.render(t))}),u?f:0);var D=(0,t.useRef)(null);(0,t.useLayoutEffect)((function(){var e;return D.current&&D.current.__r3f&&B&&((e=(0,m.Z)(Ur,[a].concat((0,g.Z)(D.current.__r3f.objects)))).renderToScreen=!0,B.addPass(e),R&&(R.enabled=!0),P&&(P.enabled=!0)),function(){e&&(null==B||B.removePass(e)),R&&(R.enabled=!1),P&&(P.enabled=!1)}}),[B,r,a,R,P]);var L=(0,t.useMemo)((function(){return{composer:B,normalPass:R,downSamplingPass:P,resolutionScale:s,camera:a,scene:o}}),[B,R,P,s,a,o]);return(0,t.useImperativeHandle)(n,(function(){return B}),[B]),t.createElement(Ti.Provider,{value:L},t.createElement("group",{ref:D},r))})));wi(li),wi(fi),wi(di,_n);wi(hi,Gn),wi(yi),wi(bi);var Ii=wi(xi),ki=(wi(gi),wi(Ai,gn),null),Bi="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Ri(e,t,n){return function(r){n&&n(r),e&&(ki||(ki=new zt._wu),ki.setDecoderPath("string"===typeof e?e:Bi),r.setDRACOLoader(ki)),t&&r.setMeshoptDecoder("function"===typeof zt.z$f?(0,zt.z$f)():zt.z$f)}}function Pi(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;return De(zt.EPV,e,Ri(t,n,r))}Pi.preload=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;return De.preload(zt.EPV,e,Ri(t,n,r))},Pi.clear=function(e){return De.clear(zt.EPV,e)},Pi.setDecoderPath=function(e){Bi=e};var Di=function(e){return e===Object(e)&&!Array.isArray(e)&&"function"!==typeof e};function Li(e,n){var r=ke((function(e){return e.gl})),i=De(A.TextureLoader,Di(e)?Object.values(e):e);if((0,t.useLayoutEffect)((function(){null==n||n(i)}),[n]),(0,t.useEffect)((function(){"initTexture"in r&&(Array.isArray(i)?i:[i]).forEach(r.initTexture)}),[r,i]),Di(e)){var a=Object.keys(e),o={};return a.forEach((function(e){return Object.assign(o,(0,Xe.Z)({},e,i[a.indexOf(e)]))})),o}return i}Li.preload=function(e){return De.preload(A.TextureLoader,e)},Li.clear=function(e){return De.clear(A.TextureLoader,e)};var Ni=n(184);function Fi(e){var n=Pi("/cybertruck.glb"),r=n.nodes,i=n.materials,a=Li("Scratch.png");return(0,t.useEffect)((function(){i["back_lights.001"].toneMapped=!1,i["back_lights.001"].emissiveIntensity=6,i["back_lights.001"].color=new A.Color("#FE1111"),i["back_lights.001"].emissive=new A.Color("#FE1111"),i["headlights.001"].color=new A.Color("white"),i["headlights.001"].emissive=new A.Color("white"),i["headlights.001"].toneMapped=!1,i["headlights.001"].emissiveIntensity=1.5,i["body.001"].roughnessMap=a,Object.values(i).forEach((function(e,t){e.envMapIntensity=.3}))}),[i]),(0,Ni.jsxs)("group",(0,c.Z)((0,c.Z)({},e),{},{dispose:null,children:[(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_4.geometry,material:i["body.001"],position:[-.002,.763,-.034]}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_5.geometry,material:i["headlights.001"],position:[0,1.075,1.47]}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_6.geometry,material:i["black_glass.001"],position:[0,1.192,-.116]}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_7.geometry,material:i["back_lights.001"],position:[0,1.073,-2.424]}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_8.geometry,material:i["glass.001"],position:[0,1.25,.239]}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_9.geometry,material:i["Material.002"],position:[0,.529,.022]}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_10.geometry,material:i["plate.001"],position:[-.002,.514,-2.364]}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_11.geometry,material:i["metal_planks.001"],position:[0,1.215,-1.564]}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_13.geometry,material:i["Material.002"],position:[.782,.354,1.652],rotation:[-2.805,.412,-1.859],scale:.151}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_14.geometry,material:i["rubber.001"],position:[.75,.355,1.658],rotation:[-2.805,.412,-1.859],scale:.151}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_15.geometry,material:i["rubber_grey.001"],position:[.741,.356,1.658],rotation:[-2.805,.412,-1.859],scale:.151}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_17.geometry,material:i["Material.002"],position:[.782,.354,-1.508],rotation:[-2.805,.412,-1.859],scale:.151}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_18.geometry,material:i["rubber.001"],position:[.75,.355,-1.501],rotation:[-2.805,.412,-1.859],scale:.151}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_19.geometry,material:i["rubber_grey.001"],position:[.741,.356,-1.502],rotation:[-2.805,.412,-1.859],scale:.151}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_21.geometry,material:i["Material.002"],position:[-.804,.381,1.652],rotation:[2.805,-.412,1.283],scale:.151}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_22.geometry,material:i["rubber.001"],position:[-.772,.38,1.658],rotation:[2.805,-.412,1.283],scale:.151}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_23.geometry,material:i["rubber_grey.001"],position:[-.764,.379,1.658],rotation:[2.805,-.412,1.283],scale:.151}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_25.geometry,material:i["Material.002"],position:[-.804,.381,-1.508],rotation:[2.805,-.412,1.283],scale:.151}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_26.geometry,material:i["rubber.001"],position:[-.772,.38,-1.501],rotation:[2.805,-.412,1.283],scale:.151}),(0,Ni.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Object_27.geometry,material:i["rubber_grey.001"],position:[-.764,.379,-1.502],rotation:[2.805,-.412,1.283],scale:.151})]}))}Pi.preload("/cybertruck.glb");var Oi=n(4165),Ui=n(5861),zi=n(4164);function Gi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)}))}}var Qi=["children"],Zi=["children"],Hi=t.forwardRef((function(e,n){var r=e.children,i=y(e,Qi);return t.Children.toArray(r).some(Wi)?t.createElement(t.Fragment,null,t.Children.map(r,(function(e){return Wi(e)?t.createElement(ji,Ye({},i,{ref:n}),e.props.children):e}))):t.createElement(ji,Ye({},i,{ref:n}),r)}));Hi.displayName="Slot";var ji=t.forwardRef((function(e,n){var r=e.children,i=y(e,Zi);return t.isValidElement(r)?t.cloneElement(r,(0,c.Z)((0,c.Z)({},function(e,t){var n=(0,c.Z)({},t),r=function(){var r=e[i],a=t[i];/^on[A-Z]/.test(i)?n[i]=function(){null==a||a.apply(void 0,arguments),null==r||r.apply(void 0,arguments)}:"style"===i?n[i]=(0,c.Z)((0,c.Z)({},r),a):"className"===i&&(n[i]=[r,a].filter(Boolean).join(" "))};for(var i in t)r();return(0,c.Z)((0,c.Z)({},e),n)}(i,r.props)),{},{ref:Gi(n,r.ref)})):t.Children.count(r)>1?t.Children.only(null):null}));ji.displayName="SlotClone";var Vi=function(e){var n=e.children;return t.createElement(t.Fragment,null,n)};function Wi(e){return t.isValidElement(e)&&e.type===Vi}var Xi=["asChild"],Yi=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((function(e,n){return(0,c.Z)((0,c.Z)({},e),{},(0,Xe.Z)({},n,t.forwardRef((function(e,r){var i=e.asChild,a=y(e,Xi),o=i?Hi:n;return t.useEffect((function(){window[Symbol.for("radix-ui")]=!0}),[]),t.createElement(o,Ye({},a,{ref:r}))}))))}),{}),Ki=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:function(){},Ji=["containerRef","style"],qi=t.forwardRef((function(e,n){var r,a,o=e.containerRef,s=e.style,l=y(e,Ji),u=null!==(r=null==o?void 0:o.current)&&void 0!==r?r:null===globalThis||void 0===globalThis||null===(a=globalThis.document)||void 0===a?void 0:a.body,f=t.useState({}),d=(0,i.Z)(f,2)[1];return Ki((function(){d({})}),[]),u?zi.createPortal(t.createElement(Yi.div,Ye({"data-radix-portal":""},l,{ref:n,style:u===document.body?(0,c.Z)({position:"absolute",top:0,left:0,zIndex:2147483647},s):void 0})),u):null})),$i=qi,ea=Object.prototype.hasOwnProperty;function ta(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&ta(e[r],t[r]););return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(ea.call(e,n)&&++r&&!ea.call(t,n))return!1;if(!(n in t)||!ta(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}function na(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var ra=function(e,t,n,r){this.name=e,this.fn=t,this.args=n,this.modifiers=r};function ia(e,t){return void 0===t&&(t="simple"),"object"===typeof e?e[t]:e}function aa(e,t,n){if(e.length){var r=e.shift(),i=aa(e,t,n);return r.perform(i,n)}return ia(t)}function oa(e,t,n){if(e.length){var r=e.shift(),i=oa(e,t,n);return r.performAsync(i,n)}return function(e){return Promise.resolve(ia(t,"async")(e))}}ra.prototype._test=function(e){var t=this.fn;try{aa(this.modifiers.slice(),t,this)(e)}catch(n){t=function(){return!1}}try{return aa(this.modifiers.slice(),t,this)(e)}catch(r){return!1}},ra.prototype._check=function(e){try{aa(this.modifiers.slice(),this.fn,this)(e)}catch(t){if(aa(this.modifiers.slice(),(function(e){return e}),this)(!1))return}if(!aa(this.modifiers.slice(),this.fn,this)(e))throw null},ra.prototype._testAsync=function(e){var t=this;return new Promise((function(n,r){oa(t.modifiers.slice(),t.fn,t)(e).then((function(t){t?n(e):r(null)})).catch((function(e){return r(e)}))}))};var sa=function(e,t,n){this.name=e,this.perform=t,this.performAsync=n},la=function(e){function t(n,r,i,a){for(var o=[],s=arguments.length-4;s-- >0;)o[s]=arguments[s+4];e.call(this,o),e.captureStackTrace&&e.captureStackTrace(this,t),this.rule=n,this.value=r,this.cause=i,this.target=a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ua=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.chain=e,this.nextRuleModifiers=t};function ca(e,t,n,r){if(t.length){var i=t.shift();i._testAsync(e).then((function(){ca(e,t,n,r)}),(function(t){r(new la(i,e,t))}))}else n(e)}ua.prototype._applyRule=function(e,t){var n=this;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return n.chain.push(new ra(t,e.apply(n,r),r,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}},ua.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new sa(t,e.simple,e.async)),this},ua.prototype._clone=function(){return new ua(this.chain.slice(),this.nextRuleModifiers.slice())},ua.prototype.test=function(e){return this.chain.every((function(t){return t._test(e)}))},ua.prototype.testAll=function(e){var t=[];return this.chain.forEach((function(n){try{n._check(e)}catch(r){t.push(new la(n,e,r))}})),t},ua.prototype.check=function(e){this.chain.forEach((function(t){try{t._check(e)}catch(n){throw new la(t,e,n)}}))},ua.prototype.testAsync=function(e){var t=this;return new Promise((function(n,r){ca(e,t.chain.slice(),n,r)}))};var fa=function(e,t){return!(!t||"string"!==typeof e||0!==e.trim().length)||(void 0===e||null===e)};function da(){return"undefined"!==typeof Proxy?pa(new ua):va(new ua)}var ha={};function pa(e){return new Proxy(e,{get:function(t,n){if(n in t)return t[n];var r=pa(e._clone());return n in ma?r._applyModifier(ma[n],n):n in ha?r._applyRule(ha[n],n):n in Aa?r._applyRule(Aa[n],n):void 0}})}function va(e){var t=function(e,t){return Object.keys(e).forEach((function(n){t[n]=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return va(t._clone())._applyRule(e[n],n).apply(void 0,r)}})),t},n=t(Aa,e),r=t(ha,n);return Object.keys(ma).forEach((function(e){Object.defineProperty(r,e,{get:function(){return va(r._clone())._applyModifier(ma[e],e)}})})),r}da.extend=function(e){Object.assign(ha,e)},da.clearCustomRules=function(){ha={}};var ma={not:{simple:function(e){return function(t){return!e(t)}},async:function(e){return function(t){return Promise.resolve(e(t)).then((function(e){return!e})).catch((function(){return!0}))}}},some:{simple:function(e){return function(t){return ya(t).some((function(t){try{return e(t)}catch(n){return!1}}))}},async:function(e){return function(t){return Promise.all(ya(t).map((function(t){try{return e(t).catch((function(){return!1}))}catch(n){return!1}}))).then((function(e){return e.some(Boolean)}))}}},every:{simple:function(e){return function(t){return!1!==t&&ya(t).every(e)}},async:function(e){return function(t){return Promise.all(ya(t).map(e)).then((function(e){return e.every(Boolean)}))}}},strict:{simple:function(e,t){return function(n){return ga(t)&&n&&"object"===typeof n?Object.keys(t.args[0]).length===Object.keys(n).length&&e(n):e(n)}},async:function(e,t){return function(n){return Promise.resolve(e(n)).then((function(e){return ga(t)&&n&&"object"===typeof n?Object.keys(t.args[0]).length===Object.keys(n).length&&e:e})).catch((function(){return!1}))}}}};function ga(e){return e&&"schema"===e.name&&e.args.length>0&&"object"===typeof e.args[0]}function ya(e){return"string"===typeof e?e.split(""):e}var Aa={equal:function(e){return function(t){return t==e}},exact:function(e){return function(t){return t===e}},number:function(e){return void 0===e&&(e=!0),function(t){return"number"===typeof t&&(e||isFinite(t))}},integer:function(){return function(e){return(Number.isInteger||xa)(e)}},numeric:function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},string:function(){return ba("string")},boolean:function(){return ba("boolean")},undefined:function(){return ba("undefined")},null:function(){return ba("null")},array:function(){return ba("array")},object:function(){return ba("object")},instanceOf:function(e){return function(t){return t instanceof e}},pattern:function(e){return function(t){return e.test(t)}},lowercase:function(){return function(e){return"boolean"===typeof e||e===e.toLowerCase()&&""!==e.trim()}},uppercase:function(){return function(e){return e===e.toUpperCase()&&""!==e.trim()}},vowel:function(){return function(e){return/^[aeiou]+$/i.test(e)}},consonant:function(){return function(e){return/^(?=[^aeiou])([a-z]+)$/i.test(e)}},first:function(e){return function(t){return t[0]==e}},last:function(e){return function(t){return t[t.length-1]==e}},empty:function(){return function(e){return 0===e.length}},length:function(e,t){return function(n){return n.length>=e&&n.length<=(t||e)}},minLength:function(e){return function(t){return t.length>=e}},maxLength:function(e){return function(t){return t.length<=e}},negative:function(){return function(e){return e<0}},positive:function(){return function(e){return e>=0}},between:function(e,t){return function(n){return n>=e&&n<=t}},range:function(e,t){return function(n){return n>=e&&n<=t}},lessThan:function(e){return function(t){return t<e}},lessThanOrEqual:function(e){return function(t){return t<=e}},greaterThan:function(e){return function(t){return t>e}},greaterThanOrEqual:function(e){return function(t){return t>=e}},even:function(){return function(e){return e%2===0}},odd:function(){return function(e){return e%2!==0}},includes:function(e){return function(t){return~t.indexOf(e)}},schema:function(e){return function(e){return{simple:function(t){var n=[];if(Object.keys(e).forEach((function(r){var i=e[r];try{i.check((t||{})[r])}catch(a){a.target=r,n.push(a)}})),n.length>0)throw n;return!0},async:function(t){var n=[],r=Object.keys(e).map((function(r){return e[r].testAsync((t||{})[r]).catch((function(e){e.target=r,n.push(e)}))}));return Promise.all(r).then((function(){if(n.length>0)throw n;return!0}))}}}(e)},passesAnyOf:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t){return e.some((function(e){return e.test(t)}))}},optional:function(e,t){return void 0===t&&(t=!1),{simple:function(n){return fa(n,t)||void 0===e.check(n)},async:function(n){return fa(n,t)||e.testAsync(n)}}}};function ba(e){return function(t){return Array.isArray(t)&&"array"===e||null===t&&"null"===e||typeof t===e}}function xa(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}var _a=da,wa=["variants","compoundVariants","defaultVariants"],Sa=["css"],Ea=["css"],Ca="colors",Ta="sizes",Ma="space",Ia={gap:Ma,gridGap:Ma,columnGap:Ma,gridColumnGap:Ma,rowGap:Ma,gridRowGap:Ma,inset:Ma,insetBlock:Ma,insetBlockEnd:Ma,insetBlockStart:Ma,insetInline:Ma,insetInlineEnd:Ma,insetInlineStart:Ma,margin:Ma,marginTop:Ma,marginRight:Ma,marginBottom:Ma,marginLeft:Ma,marginBlock:Ma,marginBlockEnd:Ma,marginBlockStart:Ma,marginInline:Ma,marginInlineEnd:Ma,marginInlineStart:Ma,padding:Ma,paddingTop:Ma,paddingRight:Ma,paddingBottom:Ma,paddingLeft:Ma,paddingBlock:Ma,paddingBlockEnd:Ma,paddingBlockStart:Ma,paddingInline:Ma,paddingInlineEnd:Ma,paddingInlineStart:Ma,top:Ma,right:Ma,bottom:Ma,left:Ma,scrollMargin:Ma,scrollMarginTop:Ma,scrollMarginRight:Ma,scrollMarginBottom:Ma,scrollMarginLeft:Ma,scrollMarginX:Ma,scrollMarginY:Ma,scrollMarginBlock:Ma,scrollMarginBlockEnd:Ma,scrollMarginBlockStart:Ma,scrollMarginInline:Ma,scrollMarginInlineEnd:Ma,scrollMarginInlineStart:Ma,scrollPadding:Ma,scrollPaddingTop:Ma,scrollPaddingRight:Ma,scrollPaddingBottom:Ma,scrollPaddingLeft:Ma,scrollPaddingX:Ma,scrollPaddingY:Ma,scrollPaddingBlock:Ma,scrollPaddingBlockEnd:Ma,scrollPaddingBlockStart:Ma,scrollPaddingInline:Ma,scrollPaddingInlineEnd:Ma,scrollPaddingInlineStart:Ma,fontSize:"fontSizes",background:Ca,backgroundColor:Ca,backgroundImage:Ca,borderImage:Ca,border:Ca,borderBlock:Ca,borderBlockEnd:Ca,borderBlockStart:Ca,borderBottom:Ca,borderBottomColor:Ca,borderColor:Ca,borderInline:Ca,borderInlineEnd:Ca,borderInlineStart:Ca,borderLeft:Ca,borderLeftColor:Ca,borderRight:Ca,borderRightColor:Ca,borderTop:Ca,borderTopColor:Ca,caretColor:Ca,color:Ca,columnRuleColor:Ca,fill:Ca,outline:Ca,outlineColor:Ca,stroke:Ca,textDecorationColor:Ca,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Ta,minBlockSize:Ta,maxBlockSize:Ta,inlineSize:Ta,minInlineSize:Ta,maxInlineSize:Ta,width:Ta,minWidth:Ta,maxWidth:Ta,height:Ta,minHeight:Ta,maxHeight:Ta,flexBasis:Ta,gridTemplateColumns:Ta,gridTemplateRows:Ta,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},ka=function(e,t){return"function"==typeof t?{"()":Function.prototype.toString.call(t)}:t},Ba=function(){var e=Object.create(null);return function(t,n){for(var r=function(e){return JSON.stringify(e,ka)}(t),i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];return r in e?e[r]:e[r]=n.apply(void 0,[t].concat(a))}},Ra=Symbol.for("sxs.internal"),Pa=function(e,t){return Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))},Da=function(e){for(var t in e)return!0;return!1},La=Object.prototype.hasOwnProperty,Na=function(e){return e.includes("-")?e:e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))},Fa=/\s+(?![^()]*\))/,Oa=function(e){return function(t){return e.apply(void 0,(0,g.Z)("string"==typeof t?String(t).split(Fa):[t]))}},Ua={appearance:function(e){return{WebkitAppearance:e,appearance:e}},backfaceVisibility:function(e){return{WebkitBackfaceVisibility:e,backfaceVisibility:e}},backdropFilter:function(e){return{WebkitBackdropFilter:e,backdropFilter:e}},backgroundClip:function(e){return{WebkitBackgroundClip:e,backgroundClip:e}},boxDecorationBreak:function(e){return{WebkitBoxDecorationBreak:e,boxDecorationBreak:e}},clipPath:function(e){return{WebkitClipPath:e,clipPath:e}},content:function(e){return{content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:'"'.concat(e,'"')}},hyphens:function(e){return{WebkitHyphens:e,hyphens:e}},maskImage:function(e){return{WebkitMaskImage:e,maskImage:e}},maskSize:function(e){return{WebkitMaskSize:e,maskSize:e}},tabSize:function(e){return{MozTabSize:e,tabSize:e}},textSizeAdjust:function(e){return{WebkitTextSizeAdjust:e,textSizeAdjust:e}},userSelect:function(e){return{WebkitUserSelect:e,userSelect:e}},marginBlock:Oa((function(e,t){return{marginBlockStart:e,marginBlockEnd:t||e}})),marginInline:Oa((function(e,t){return{marginInlineStart:e,marginInlineEnd:t||e}})),maxSize:Oa((function(e,t){return{maxBlockSize:e,maxInlineSize:t||e}})),minSize:Oa((function(e,t){return{minBlockSize:e,minInlineSize:t||e}})),paddingBlock:Oa((function(e,t){return{paddingBlockStart:e,paddingBlockEnd:t||e}})),paddingInline:Oa((function(e,t){return{paddingInlineStart:e,paddingInlineEnd:t||e}}))},za=/([\d.]+)([^]*)/,Ga=function(e,t){return e.length?e.reduce((function(e,n){return e.push.apply(e,(0,g.Z)(t.map((function(e){return e.includes("&")?e.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(e)?":is(".concat(n,")"):n):n+" "+e})))),e}),[]):t},Qa=function(e,t){return e in Za&&"string"==typeof t?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(function(t,n,r,i){return n+("stretch"===r?"-moz-available".concat(i,";").concat(Na(e),":").concat(n,"-webkit-fill-available"):"-moz-fit-content".concat(i,";").concat(Na(e),":").concat(n,"fit-content"))+i})):String(t)},Za={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Ha=function(e){return e?e+"-":""},ja=function(e,t,n){return e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(function(e,r,i,a,o){return"$"==a==!!i?e:(r||"--"==a?"calc(":"")+"var(--"+("$"===a?Ha(t)+(o.includes("$")?"":Ha(n))+o.replace(/\$/g,"-"):o)+")"+(r||"--"==a?"*"+(r||"")+(i||"1")+")":"")}))},Va=/\s*,\s*(?![^()]*\))/,Wa=Object.prototype.toString,Xa=function(e,t,n,r,a){var o,s,l;!function e(t,n,u){var c,f;(function t(d){for(c in d){var h,p=64===c.charCodeAt(0),m=p&&Array.isArray(d[c])?d[c]:[d[c]],y=(0,v.Z)(m);try{for(y.s();!(h=y.n()).done;){f=h.value;var A=/[A-Z]/.test(C=c)?C:C.replace(/-[^]/g,(function(e){return e[1].toUpperCase()})),b="object"==typeof f&&f&&f.toString===Wa&&(!r.utils[A]||!n.length);if(A in r.utils&&!b){var x=r.utils[A];if(x!==s){s=x,t(x(f)),s=null;continue}}else if(A in Ua){var _=Ua[A];if(_!==l){l=_,t(_(f)),l=null;continue}}if(p&&(E=c.slice(1)in r.media?"@media "+r.media[c.slice(1)]:c,c=E.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(function(e,t,n,r,a,o){var s=za.test(t),l=.0625*(s?-1:1),u=s?[r,t]:[t,r],c=(0,i.Z)(u,2),f=c[0],d=c[1];return"("+("="===n[0]?"":">"===n[0]===s?"max-":"min-")+f+":"+("="!==n[0]&&1===n.length?d.replace(za,(function(e,t,r){return Number(t)+l*(">"===n?1:-1)+r})):d)+(a?") and ("+(">"===a[0]?"min-":"max-")+f+":"+(1===a.length?o.replace(za,(function(e,t,n){return Number(t)+l*(">"===a?-1:1)+n})):o):"")+")"}))),b){var w=p?u.concat(c):(0,g.Z)(u),S=p?(0,g.Z)(n):Ga(n,c.split(Va));void 0!==o&&a(Ya.apply(void 0,(0,g.Z)(o))),o=void 0,e(f,S,w)}else void 0===o&&(o=[[],n,u]),c=p||36!==c.charCodeAt(0)?c:"--".concat(Ha(r.prefix)).concat(c.slice(1).replace(/\$/g,"-")),f=b?f:"number"==typeof f?f&&A in Ka?String(f)+"px":String(f):ja(Qa(A,null==f?"":f),r.prefix,r.themeMap[A]),o[0].push("".concat(p?"".concat(c," "):"".concat(Na(c),":")).concat(f))}}catch(T){y.e(T)}finally{y.f()}}var E,C})(t),void 0!==o&&a(Ya.apply(void 0,(0,g.Z)(o))),o=void 0}(e,t,n)},Ya=function(e,t,n){return"".concat(n.map((function(e){return"".concat(e,"{")})).join("")).concat(t.length?"".concat(t.join(","),"{"):"").concat(e.join(";")).concat(t.length?"}":"").concat(Array(n.length?n.length+1:0).join("}"))},Ka={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},Ja=function(e){return String.fromCharCode(e+(e>25?39:97))},qa=function(e){return function(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Ja(t%52)+n;return Ja(t%52)+n}(function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e}(5381,JSON.stringify(e))>>>0)},$a=["themed","global","styled","onevar","resonevar","allvar","inline"],eo=function(e){if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch(e){return!1}},to=function(e){var t=e.group,n=t.cssRules.length;e.apply=function(e){try{t.insertRule(e,n),++n}catch(e){}}},no=Symbol(),ro=Ba(),io=function(e,t){return ro(e,(function(){return function(){for(var n={type:null,composers:new Set},r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];for(var o=0,s=i;o<s.length;o++){var l=s[o];if(null!=l)if(l[Ra]){null==n.type&&(n.type=l[Ra].type);var u,c=(0,v.Z)(l[Ra].composers);try{for(c.s();!(u=c.n()).done;){var f=u.value;n.composers.add(f)}}catch(d){c.e(d)}finally{c.f()}}else l.constructor!==Object||l.$$typeof?null==n.type&&(n.type=l):n.composers.add(ao(l,e))}return null==n.type&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),oo(e,n,t)}}))},ao=function(e,t){var n,r,i=e.variants,a=e.compoundVariants,o=e.defaultVariants,s=y(e,wa),l="".concat(Ha(t.prefix),"c-").concat(qa(s)),u=[],c=[],f=Object.create(null),d=[];for(var h in o)f[h]=String(o[h]);if("object"==typeof i&&i)for(var p in i){n=f,r=p,La.call(n,r)||(f[p]="undefined");var m=i[p];for(var g in m){var A=(0,Xe.Z)({},p,String(g));"undefined"===String(g)&&d.push(p);var b=m[g],x=[A,b,!Da(b)];u.push(x)}}if("object"==typeof a&&a){var _,w=(0,v.Z)(a);try{for(w.s();!(_=w.n()).done;){var S=_.value,E=S.css,C=y(S,Sa);for(var T in E="object"==typeof E&&E||{},C)C[T]=String(C[T]);var M=[C,E,!Da(E)];c.push(M)}}catch(I){w.e(I)}finally{w.f()}}return[l,s,u,c,f,d]},oo=function(e,t,n){var r,a=so(t.composers),o=(0,i.Z)(a,4),s=o[0],l=o[1],u=o[2],f=o[3],d="function"==typeof t.type||t.type.$$typeof?function(e){function t(){for(var n=0;n<t[no].length;n++){var r=(0,i.Z)(t[no][n],2),a=r[0],o=r[1];e.rules[a].apply(o)}return t[no]=[],null}return t[no]=[],t.rules={},$a.forEach((function(e){return t.rules[e]={apply:function(n){return t[no].push([e,n])}}})),t}(n):null,h=(d||n).rules,p=".".concat(s).concat(l.length>1?":where(.".concat(l.slice(1).join("."),")"):""),m=function(r){var a=r="object"==typeof r&&r||uo,o=a.css,m=y(a,Ea),A={};for(var b in u)if(delete m[b],b in r){var x=r[b];"object"==typeof x&&x?A[b]=(0,c.Z)({"@initial":u[b]},x):(x=String(x),A[b]="undefined"!==x||f.has(b)?x:u[b])}else A[b]=u[b];var _,w=new Set((0,g.Z)(l)),S=(0,v.Z)(t.composers);try{for(S.s();!(_=S.n()).done;){var E=(0,i.Z)(_.value,4),C=E[0],T=E[1],M=E[2],I=E[3];n.rules.styled.cache.has(C)||(n.rules.styled.cache.add(C),Xa(T,[".".concat(C)],[],e,(function(e){h.styled.apply(e)})));var k,B=lo(M,A,e.media),R=lo(I,A,e.media,!0),P=(0,v.Z)(B);try{for(P.s();!(k=P.n()).done;){var D=k.value;if(void 0!==D){var L,N=(0,v.Z)(D);try{var F=function(){var t=(0,i.Z)(L.value,3),r=t[0],a=t[1],o=t[2],s="".concat(C,"-").concat(qa(a),"-").concat(r);w.add(s);var l=(o?n.rules.resonevar:n.rules.onevar).cache,u=o?h.resonevar:h.onevar;l.has(s)||(l.add(s),Xa(a,[".".concat(s)],[],e,(function(e){u.apply(e)})))};for(N.s();!(L=N.n()).done;)F()}catch(q){N.e(q)}finally{N.f()}}}}catch(q){P.e(q)}finally{P.f()}var O,U=(0,v.Z)(R);try{for(U.s();!(O=U.n()).done;){var z=O.value;if(void 0!==z){var G,Q=(0,v.Z)(z);try{for(Q.s();!(G=Q.n()).done;){var Z=(0,i.Z)(G.value,2),H=Z[0],j=Z[1],V="".concat(C,"-").concat(qa(j),"-").concat(H);w.add(V),n.rules.allvar.cache.has(V)||(n.rules.allvar.cache.add(V),Xa(j,[".".concat(V)],[],e,(function(e){h.allvar.apply(e)})))}}catch(q){Q.e(q)}finally{Q.f()}}}}catch(q){U.e(q)}finally{U.f()}}}catch(q){S.e(q)}finally{S.f()}if("object"==typeof o&&o){var W="".concat(s,"-i").concat(qa(o),"-css");w.add(W),n.rules.inline.cache.has(W)||(n.rules.inline.cache.add(W),Xa(o,[".".concat(W)],[],e,(function(e){h.inline.apply(e)})))}var X,Y=(0,v.Z)(String(r.className||"").trim().split(/\s+/));try{for(Y.s();!(X=Y.n()).done;){var K=X.value;K&&w.add(K)}}catch(q){Y.e(q)}finally{Y.f()}var J=m.className=(0,g.Z)(w).join(" ");return{type:t.type,className:J,selector:p,props:m,toString:function(){return J},deferredInjector:d}};return Pa(m,(r={className:s,selector:p},(0,Xe.Z)(r,Ra,t),(0,Xe.Z)(r,"toString",(function(){return n.rules.styled.cache.has(s)||m(),s})),r))},so=function(e){var t,n="",r=[],a={},o=[],s=(0,v.Z)(e);try{for(s.s();!(t=s.n()).done;){var l=(0,i.Z)(t.value,6),u=l[0],c=l[4],f=l[5];for(var d in""===n&&(n=u),r.push(u),o.push.apply(o,(0,g.Z)(f)),c){var h=c[d];(void 0===a[d]||"undefined"!==h||f.includes(h))&&(a[d]=h)}}}catch(p){s.e(p)}finally{s.f()}return[n,r,a,new Set(o)]},lo=function(e,t,n,r){var a,o=[],s=(0,v.Z)(e);try{e:for(s.s();!(a=s.n()).done;){var l=(0,i.Z)(a.value,3),u=l[0],c=l[1];if(!l[2]){var f=void 0,d=0,h=!1;for(f in u){var p=u[f],m=t[f];if(m!==p){if("object"!=typeof m||!m)continue e;var g=void 0,y=void 0,A=0;for(var b in m){if(p===String(m[b])){if("@initial"!==b){var x=b.slice(1);(y=y||[]).push(x in n?n[x]:b.replace(/^@media ?/,"")),h=!0}d+=A,g=!0}++A}if(y&&y.length&&(c=(0,Xe.Z)({},"@media "+y.join(", "),c)),!g)continue e}}(o[d]=o[d]||[]).push([r?"cv":"".concat(f,"-").concat(u[f]),c,h])}}}catch(_){s.e(_)}finally{s.f()}return o},uo={},co=Ba(),fo=function(e,t){return co(e,(function(){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(){for(var n=0,i=r;n<i.length;n++){var a=i[n],o=qa(a="object"==typeof a&&a||{});if(!t.rules.global.cache.has(o)){if(t.rules.global.cache.add(o),"@import"in a){var s,l=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1,u=(0,v.Z)([].concat(a["@import"]));try{for(u.s();!(s=u.n()).done;){var c=s.value;c=c.includes('"')||c.includes("'")?c:'"'.concat(c,'"'),t.sheet.insertRule("@import ".concat(c,";"),l++)}}catch(f){u.e(f)}finally{u.f()}delete a["@import"]}Xa(a,[],[],e,(function(e){t.rules.global.apply(e)}))}}return""};return Pa(a,{toString:a})}}))},ho=Ba(),po=function(e,t){return ho(e,(function(){return function(n){var r="".concat(Ha(e.prefix),"k-").concat(qa(n)),i=function(){if(!t.rules.global.cache.has(r)){t.rules.global.cache.add(r);var i=[];Xa(n,[],[],e,(function(e){return i.push(e)}));var a="@keyframes ".concat(r,"{").concat(i.join(""),"}");t.rules.global.apply(a)}return r};return Pa(i,{get name(){return i()},toString:i})}}))},vo=function(){function e(t,n,r,i){(0,f.Z)(this,e),this.token=null==t?"":String(t),this.value=null==n?"":String(n),this.scale=null==r?"":String(r),this.prefix=null==i?"":String(i)}return(0,d.Z)(e,[{key:"computedValue",get:function(){return"var("+this.variable+")"}},{key:"variable",get:function(){return"--"+Ha(this.prefix)+Ha(this.scale)+this.token}},{key:"toString",value:function(){return this.computedValue}}]),e}(),mo=Ba(),go=function(e,t){return mo(e,(function(){return function(n,r){r="object"==typeof n&&n||Object(r);var i=".".concat(n=(n="string"==typeof n?n:"")||"".concat(Ha(e.prefix),"t-").concat(qa(r))),a={},o=[];for(var s in r)for(var l in a[s]={},r[s]){var u="--".concat(Ha(e.prefix)).concat(s,"-").concat(l),f=ja(String(r[s][l]),e.prefix,s);a[s][l]=new vo(l,f,s,e.prefix),o.push("".concat(u,":").concat(f))}var d=function(){if(o.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);var i="".concat(r===e.theme?":root,":"",".").concat(n,"{").concat(o.join(";"),"}");t.rules.themed.apply(i)}return n};return(0,c.Z)((0,c.Z)({},a),{},{get className(){return d()},selector:i,toString:d})}}))},yo=Ba(),Ao=Ba(),bo=function(e){var n=function(e){var t=!1,n=yo(e,(function(e){t=!0;var n="prefix"in(e="object"==typeof e&&e||{})?String(e.prefix):"",r="object"==typeof e.media&&e.media||{},i="object"==typeof e.root?e.root||null:globalThis.document||null,a="object"==typeof e.theme&&e.theme||{},o={prefix:n,media:r,theme:a,themeMap:"object"==typeof e.themeMap&&e.themeMap||(0,c.Z)({},Ia),utils:"object"==typeof e.utils&&e.utils||{}},s=function(e){var t,n=function(){var e=t.sheet.cssRules;return[].map.call(e,(function(n,r){var i=n.cssText,a="";if(i.startsWith("--sxs"))return"";if(e[r-1]&&(a=e[r-1].cssText).startsWith("--sxs")){if(!n.cssRules.length)return"";for(var o in t.rules)if(t.rules[o].group===n)return"--sxs{--sxs:".concat((0,g.Z)(t.rules[o].cache).join(" "),"}").concat(i);return n.cssRules.length?"".concat(a).concat(i):""}return i})).join("")};return function r(){if(t){var i=t,a=i.rules,o=i.sheet;if(!o.deleteRule){for(;3===Object(Object(o.cssRules)[0]).type;)o.cssRules.splice(0,1);o.cssRules=[]}for(var s in a)delete a[s]}var l,u=Object(e).styleSheets||[],c=(0,v.Z)(u);try{for(c.s();!(l=c.n()).done;){var f=l.value;if(eo(f)){for(var d=0,h=f.cssRules;h[d];++d){var p=Object(h[d]);if(1===p.type){var m=Object(h[d+1]);if(4===m.type){++d;var g=p.cssText;if(g.startsWith("--sxs")){var y=g.slice(14,-3).trim().split(/\s+/),A=$a[y[0]];A&&(t||(t={sheet:f,reset:r,rules:{},toString:n}),t.rules[A]={group:m,index:d,cache:new Set(y)})}}}}if(t)break}}}catch(T){c.e(T)}finally{c.f()}t||(t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:function e(t,n){return{type:n,cssRules:[],insertRule:function(t,n){this.cssRules.splice(n,0,e(t,{import:3,undefined:1}[(t.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===t?"@media{".concat([].map.call(this.cssRules,(function(e){return e.cssText})).join(""),"}"):t}}}("","text/css"),rules:{},reset:r,toString:n});for(var b=t,x=b.sheet,_=b.rules,w=$a.length-1;w>=0;--w){var S=$a[w];if(!_[S]){var E=$a[w+1],C=_[E]?_[E].index:x.cssRules.length;x.insertRule("@media{}",C),x.insertRule("--sxs{--sxs:".concat(w,"}"),C),_[S]={group:x.cssRules[C+1],index:C,cache:new Set([w])}}to(_[S])}}(),t}(i),l={css:io(o,s),globalCss:fo(o,s),keyframes:po(o,s),createTheme:go(o,s),reset:function(){s.reset(),l.theme.toString()},theme:{},sheet:s,config:o,prefix:n,getCssText:s.toString,toString:s.toString};return String(l.theme=l.createTheme(a)),l}));return t||n.reset(),n}(e);return n.styled=function(e){var n=e.config,r=e.sheet;return Ao(n,(function(){var e=io(n,r);return function(){var n=e.apply(void 0,arguments),r=n[Ra].type,i=t.forwardRef((function(e,i){var a=e&&e.as||r,o=n(e),s=o.props,l=o.deferredInjector;return delete s.as,s.ref=i,l?t.createElement(t.Fragment,null,t.createElement(a,s),t.createElement(l,null)):t.createElement(a,s)}));return i.className=n.className,i.displayName="Styled.".concat(r.displayName||r.name||r),i.selector=n.selector,i.toString=function(){return n.selector},i[Ra]=n[Ra],i}}))}(n),n};var xo=function(e,t){return void 0===e&&(e=t),Array.isArray(e)?e:[e,e]},_o=function(e,t){return[e[0]+t[0],e[1]+t[1]]},wo=function(e,t){return[e[0]-t[0],e[1]-t[1]]},So=function(e,t){e[0]+=t[0],e[1]+=t[1]};function Eo(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function Co(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-Eo(t-e,n-t,r)+t:e>n?+Eo(e-n,n-t,r)+n:e}function To(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Mo(e,t,n){return(t=To(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){Mo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bo={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Ro(e){return e?e[0].toUpperCase()+e.slice(1):""}var Po=["enter","leave"];function Do(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Bo[e],i=r&&r[t]||t;return"on"+Ro(e)+Ro(i)+(function(){var e=arguments.length>1?arguments[1]:void 0;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!Po.includes(e)}(n,i)?"Capture":"")}var Lo=["gotpointercapture","lostpointercapture"];function No(e){var t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));var r=Lo.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function Fo(e){return"touches"in e}function Oo(e){return Fo(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function Uo(e){return Fo(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function zo(e){return function(e){return Array.from(e.touches).filter((function(t){var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((function(e){return e.identifier}))}function Go(e){var t=Uo(e);return Fo(e)?t.identifier:t.pointerId}function Qo(e){var t=Uo(e);return[t.clientX,t.clientY]}function Zo(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}return e}function Ho(){}function jo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?Ho:1===t.length?t[0]:function(){for(var e,n=0,r=t;n<r.length;n++){e=r[n].apply(this,arguments)||e}return e}}function Vo(e,t){return Object.assign({},t,e||{})}var Wo=function(){function e(t,n,r){(0,f.Z)(this,e),this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}return(0,d.Z)(e,[{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(e){this.ctrl.state[this.key]=e}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}},{key:"reset",value:function(){var e=this.state,t=this.shared,n=this.ingKey,r=this.args;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}},{key:"start",value:function(e){var t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?Zo(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}},{key:"computeValues",value:function(e){var t=this.state;t._values=e,t.values=this.config.transform(e)}},{key:"computeInitial",value:function(){var e=this.state;e._initial=e._values,e.initial=e.values}},{key:"compute",value:function(e){var t=this.state,n=this.config,r=this.shared;t.args=this.args;var a=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){var t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){var n=e.shiftKey,r=e.altKey,i=e.metaKey,a=e.ctrlKey;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a})}return t}(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){var o=t._delta.map(Math.abs);So(t._distance,o)}this.axisIntent&&this.axisIntent(e);var s=(0,i.Z)(t._movement,2),l=s[0],u=s[1],c=(0,i.Z)(n.threshold,2),f=c[0],d=c[1],h=t._step,p=t.values;if(n.hasCustomTransform?(!1===h[0]&&(h[0]=Math.abs(l)>=f&&p[0]),!1===h[1]&&(h[1]=Math.abs(u)>=d&&p[1])):(!1===h[0]&&(h[0]=Math.abs(l)>=f&&Math.sign(l)*f),!1===h[1]&&(h[1]=Math.abs(u)>=d&&Math.sign(u)*d)),t.intentional=!1!==h[0]||!1!==h[1],t.intentional){var v=[0,0];if(n.hasCustomTransform){var m=(0,i.Z)(p,2),g=m[0],y=m[1];v[0]=!1!==h[0]?g-h[0]:0,v[1]=!1!==h[1]?y-h[1]:0}else v[0]=!1!==h[0]?l-h[0]:0,v[1]=!1!==h[1]?u-h[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(v);var A=t.offset,b=t._active&&!t._blocked||t.active;b&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=Zo(n.bounds,t)),this.setup&&this.setup()),t.movement=v,this.computeOffset()));var x=(0,i.Z)(t.offset,2),_=x[0],w=x[1],S=(0,i.Z)(t._bounds,2),E=(0,i.Z)(S[0],2),C=E[0],T=E[1],M=(0,i.Z)(S[1],2),I=M[0],k=M[1];t.overflow=[_<C?-1:_>T?1:0,w<I?-1:w>k?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);var B=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){var r=(0,i.Z)(t,2),a=r[0],o=r[1],s=(0,i.Z)(n,2),l=s[0],u=s[1],c=(0,i.Z)(e,2),f=(0,i.Z)(c[0],2),d=f[0],h=f[1],p=(0,i.Z)(c[1],2),v=p[0],m=p[1];return[Co(a,d,h,l),Co(o,v,m,u)]}(t._bounds,t.offset,B),t.delta=wo(t.offset,A),this.computeMovement(),b&&(!t.last||a>32)){t.delta=wo(t.offset,A);var R=t.delta.map(Math.abs);So(t.distance,R),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[R[0]/a,R[1]/a],t.timeDelta=a)}}}},{key:"emit",value:function(){var e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),!e._blocked&&e.intentional||e._force||n.triggerAllEvents){var r=this.handler(ko(ko(ko({},t),e),{},(0,Xe.Z)({},this.aliasKey,e.values)));void 0!==r&&(e.memo=r)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}}]),e}();var Xo=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,f.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),Mo((0,$t.Z)(e),"aliasKey","xy"),e}return(0,d.Z)(n,[{key:"reset",value:function(){(0,hn.Z)((0,pn.Z)(n.prototype),"reset",this).call(this),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=_o(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=wo(this.state.offset,this.state.lastOffset)}},{key:"axisIntent",value:function(e){var t=this.state,n=this.config;if(!t.axis&&e){var r="object"===typeof n.axisThreshold?n.axisThreshold[Oo(e)]:n.axisThreshold;t.axis=function(e,t){var n=(0,i.Z)(e,2),r=n[0],a=n[1],o=Math.abs(r),s=Math.abs(a);return o>s&&o>t?"x":s>o&&s>t?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}},{key:"restrictToAxis",value:function(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}]),n}(Wo),Yo=function(e){return e},Ko={enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},eventOptions:function(e,t,n){return ko(ko({},n.shared.eventOptions),e)},preventDefault:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},triggerAllEvents:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},rubberband:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return xo(e)}},from:function(e){return"function"===typeof e?e:null!=e?xo(e):void 0},transform:function(e,t,n){var r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||Yo},threshold:function(e){return xo(e,0)}};var Jo=ko(ko({},Ko),{},{axis:function(e,t,n){var r=n.axis;if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},bounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return function(t){return Jo.bounds(e(t))};if("current"in e)return function(){return e.current};if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;var t=e.left,n=void 0===t?-1/0:t,r=e.right,i=void 0===r?1/0:r,a=e.top,o=void 0===a?-1/0:a,s=e.bottom;return[[n,i],[o,void 0===s?1/0:s]]}}),qo={ArrowRight:function(e){return[e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowLeft:function(e){return[-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowUp:function(e){return[0,-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]},ArrowDown:function(e){return[0,e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]}},$o=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,f.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),Mo((0,$t.Z)(e),"ingKey","dragging"),e}return(0,d.Z)(n,[{key:"reset",value:function(){(0,hn.Z)((0,pn.Z)(n.prototype),"reset",this).call(this);var e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}},{key:"setup",value:function(){var e=this.state;if(e._bounds instanceof HTMLElement){var t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=Jo.bounds(r)}}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout((function(){e.compute(),e.emit()}),0))}},{key:"setActive",value:function(){this.state._active=this.state._pointerActive||this.state._keyboardActive}},{key:"clean",value:function(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,(0,hn.Z)((0,pn.Z)(n.prototype),"clean",this).call(this)}},{key:"pointerDown",value:function(e){var t=this.config,n=this.state;if(null==e.buttons||(Array.isArray(t.pointerButtons)?t.pointerButtons.includes(e.buttons):-1===t.pointerButtons||t.pointerButtons===e.buttons)){var r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=Go(e),n._pointerActive=!0,this.computeValues(Qo(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==Oo(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}}},{key:"startPointerDrag",value:function(e){var t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}},{key:"pointerMove",value:function(e){var t=this.state,n=this.config;if(t._pointerActive){var r=Go(e);if(void 0===t._pointerId||r===t._pointerId){var i=Qo(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=wo(i,t._values),this.computeValues(i)),So(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}}}},{key:"pointerUp",value:function(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(w){0}var t=this.state,n=this.config;if(t._active&&t._pointerActive){var r=Go(e);if(void 0===t._pointerId||r===t._pointerId){this.state._pointerActive=!1,this.setActive(),this.compute(e);var a=(0,i.Z)(t._distance,2),o=a[0],s=a[1];if(t.tap=o<=n.tapsThreshold&&s<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{var l=(0,i.Z)(t._delta,2),u=l[0],c=l[1],f=(0,i.Z)(t._movement,2),d=f[0],h=f[1],p=(0,i.Z)(n.swipe.velocity,2),v=p[0],m=p[1],g=(0,i.Z)(n.swipe.distance,2),y=g[0],A=g[1],b=n.swipe.duration;if(t.elapsedTime<b){var x=Math.abs(u/t.timeDelta),_=Math.abs(c/t.timeDelta);x>v&&Math.abs(d)>y&&(t.swipe[0]=Math.sign(u)),_>m&&Math.abs(h)>A&&(t.swipe[1]=Math.sign(c))}}this.emit()}}}},{key:"pointerClick",value:function(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}},{key:"setupPointer",value:function(e){var t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}},{key:"pointerClean",value:function(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}},{key:"preventScroll",value:function(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}},{key:"setupScrollPrevention",value:function(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"===typeof e.persist&&e.persist()}(e);var t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}},{key:"setupDelayTrigger",value:function(e){var t=this;this.state._delayed=!0,this.timeoutStore.add("dragDelay",(function(){t.state._step=[0,0],t.startPointerDrag(e)}),this.config.delay)}},{key:"keyDown",value:function(e){var t=qo[e.key];if(t){var n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,So(n._movement,n._delta),this.compute(e),this.emit()}}},{key:"keyUp",value:function(e){e.key in qo&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}]),n}(Xo);var es="undefined"!==typeof window&&window.document&&window.document.createElement;function ts(){return es&&"ontouchstart"in window}var ns={isBrowser:es,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:ts(),touchscreen:ts()||es&&window.navigator.maxTouchPoints>1,pointer:es&&"onpointerdown"in window,pointerLock:es&&"exitPointerLock"in window.document},rs={mouse:0,touch:0,pen:8},is=ko(ko({},Jo),{},{device:function(e,t,n){var r=n.pointer,i=void 0===r?{}:r,a=i.touch,o=void 0!==a&&a,s=i.lock,l=void 0!==s&&s,u=i.mouse,c=void 0!==u&&u;return this.pointerLock=l&&ns.pointerLock,ns.touch&&o?"touch":this.pointerLock?"mouse":ns.pointer&&!c?"pointer":ns.touch?"touch":"mouse"},preventScrollAxis:function(e,t,n){var r=n.preventScroll;if(this.preventScrollDelay="number"===typeof r?r:r||void 0===r&&e?250:void 0,ns.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture:function(e,t,n){var r=n.pointer,i=void 0===r?{}:r,a=i.capture,o=void 0===a||a,s=i.buttons,l=void 0===s?1:s,u=i.keys,c=void 0===u||u;return this.pointerButtons=l,this.keys=c,!this.pointerLock&&"pointer"===this.device&&o},threshold:function(e,t,n){var r=n.filterTaps,i=void 0!==r&&r,a=n.tapsThreshold,o=void 0===a?3:a,s=n.axis,l=xo(e,i?o:(void 0===s?void 0:s)?1:0);return this.filterTaps=i,this.tapsThreshold=o,l},swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.velocity,n=void 0===t?.5:t,r=e.distance,i=void 0===r?50:r,a=e.duration,o=void 0===a?250:a;return{velocity:this.transform(xo(n)),distance:this.transform(xo(i)),duration:o}},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:function(e){return e?ko(ko({},rs),e):rs},keyboardDisplacement:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:10}});ko(ko({},Ko),{},{device:function(e,t,n){var r=n.shared,i=n.pointer,a=(void 0===i?{}:i).touch,o=void 0!==a&&a;if(r.target&&!ns.touch&&ns.gesture)return"gesture";if(ns.touch&&o)return"touch";if(ns.touchscreen){if(ns.pointer)return"pointer";if(ns.touch)return"touch"}},bounds:function(e,t,n){var r=n.scaleBounds,i=void 0===r?{}:r,a=n.angleBounds,o=void 0===a?{}:a,s=function(e){var t=Vo(Zo(i,e),{min:-1/0,max:1/0});return[t.min,t.max]},l=function(e){var t=Vo(Zo(o,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof i&&"function"!==typeof o?[s(),l()]:function(e){return[s(e),l(e)]}},threshold:function(e,t,n){this.lockDirection="lock"===n.axis;var r=xo(e,this.lockDirection?[.1,3]:0);return r},modifierKey:function(e){return void 0===e?"ctrlKey":e},pinchOnWheel:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),ko(ko({},Jo),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),ko(ko({},Jo),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}});var as=new Map,os=new Map;var ss={key:"drag",engine:$o,resolver:is};function ls(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var us={target:function(e){if(e)return function(){return"current"in e?e.current:e}},enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:ns.isBrowser?window:void 0})),eventOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.passive,n=void 0===t||t,r=e.capture;return{passive:n,capture:void 0!==r&&r}},transform:function(e){return e}},cs=["target","eventOptions","window","enabled","transform"];function fs(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={},r=0,a=Object.entries(t);r<a.length;r++){var o=(0,i.Z)(a[r],2),s=o[0],l=o[1];switch(typeof l){case"function":n[s]=l.call(n,e[s],s,e);break;case"object":n[s]=fs(e[s],l);break;case"boolean":l&&(n[s]=e[s])}}return n}var ds=function(){function e(t,n){(0,f.Z)(this,e),Mo(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}return(0,d.Z)(e,[{key:"add",value:function(e,t,n,r,i){var a=this._listeners,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Bo[e];return e+(n&&n[t]||t)}(t,n),s=ko(ko({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(o,r,s);var l=function t(){e.removeEventListener(o,r,s),a.delete(t)};return a.add(l),l}},{key:"clean",value:function(){this._listeners.forEach((function(e){return e()})),this._listeners.clear()}}]),e}(),hs=function(){function e(){(0,f.Z)(this,e),Mo(this,"_timeouts",new Map)}return(0,d.Z)(e,[{key:"add",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];this._timeouts.set(e,(n=window).setTimeout.apply(n,[t,r].concat(a)))}},{key:"remove",value:function(e){var t=this._timeouts.get(e);t&&window.clearTimeout(t)}},{key:"clean",value:function(){this._timeouts.forEach((function(e){window.clearTimeout(e)})),this._timeouts.clear()}}]),e}(),ps=function(){function e(t){(0,f.Z)(this,e),Mo(this,"gestures",new Set),Mo(this,"_targetEventStore",new ds(this)),Mo(this,"gestureEventStores",{}),Mo(this,"gestureTimeoutStores",{}),Mo(this,"handlers",{}),Mo(this,"config",{}),Mo(this,"pointerIds",new Set),Mo(this,"touchIds",new Set),Mo(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&vs(e,"drag");t.wheel&&vs(e,"wheel");t.scroll&&vs(e,"scroll");t.move&&vs(e,"move");t.pinch&&vs(e,"pinch");t.hover&&vs(e,"hover")}(this,t)}return(0,d.Z)(e,[{key:"setEventIds",value:function(e){return Fo(e)?(this.touchIds=new Set(zo(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}},{key:"applyHandlers",value:function(e,t){this.handlers=e,this.nativeHandlers=t}},{key:"applyConfig",value:function(e,t){this.config=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e,i=r.target,a=r.eventOptions,o=r.window,s=r.enabled,l=r.transform,u=ls(r,cs);if(n.shared=fs({target:i,eventOptions:a,window:o,enabled:s,transform:l},us),t){var c=os.get(t);n[t]=fs(ko({shared:n.shared},u),c)}else for(var f in u){var d=os.get(f);d&&(n[f]=fs(ko({shared:n.shared},u[f]),d))}return n}(e,t,this.config)}},{key:"clean",value:function(){this._targetEventStore.clean();var e,t=(0,v.Z)(this.gestures);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(r){t.e(r)}finally{t.f()}}},{key:"effect",value:function(){var e=this;return this.config.shared.target&&this.bind(),function(){return e._targetEventStore.clean()}}},{key:"bind",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,a=this.config.shared,o={};if(!a.target||(i=a.target())){if(a.enabled){var s,l=(0,v.Z)(this.gestures);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=this.config[u],f=ms(o,c.eventOptions,!!i);if(c.enabled)new(as.get(u))(this,n,u).bind(f)}}catch(w){l.e(w)}finally{l.f()}var d=ms(o,a.eventOptions,!!i),h=function(t){d(t,"",(function(r){return e.nativeHandlers[t](ko(ko({},e.state.shared),{},{event:r,args:n}))}),void 0,!0)};for(var p in this.nativeHandlers)h(p)}for(var m in o)o[m]=jo.apply(void 0,(0,g.Z)(o[m]));if(!i)return o;for(var y in o){var A=No(y),b=A.device,x=A.capture,_=A.passive;this._targetEventStore.add(i,b,"",o[y],{capture:x,passive:_})}}}}]),e}();function vs(e,t){e.gestures.add(t),e.gestureEventStores[t]=new ds(e,t),e.gestureTimeoutStores[t]=new hs}var ms=function(e,t,n){return function(r,i,a){var o,s,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=null!==(o=l.capture)&&void 0!==o?o:t.capture,f=null!==(s=l.passive)&&void 0!==s?s:t.passive,d=u?r:Do(r,i,c);n&&f&&(d+="Passive"),e[d]=e[d]||[],e[d].push(a)}};function gs(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=t.useMemo((function(){return new ps(e)}),[]);if(a.applyHandlers(e,i),a.applyConfig(n,r),t.useEffect(a.effect.bind(a)),t.useEffect((function(){return a.clean.bind(a)}),[]),void 0===n.target)return a.bind.bind(a)}function ys(e,t){var n;return n=ss,as.set(n.key,n.engine),os.set(n.key,n.resolver),gs({drag:e},t||{},"drag")}var As=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:function(){},bs=r["useId".toString()]||function(){},xs=0;function _s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)}))}}function ws(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useCallback(_s.apply(void 0,n),n)}var Ss=["children"],Es=["children"],Cs=t.forwardRef((function(e,n){var r=e.children,i=y(e,Ss);return t.Children.toArray(r).some(Is)?t.createElement(t.Fragment,null,t.Children.map(r,(function(e){return Is(e)?t.createElement(Ts,Ye({},i,{ref:n}),e.props.children):e}))):t.createElement(Ts,Ye({},i,{ref:n}),r)}));Cs.displayName="Slot";var Ts=t.forwardRef((function(e,n){var r=e.children,i=y(e,Es);return t.isValidElement(r)?t.cloneElement(r,(0,c.Z)((0,c.Z)({},function(e,t){var n=(0,c.Z)({},t),r=function(){var r=e[i],a=t[i];/^on[A-Z]/.test(i)?n[i]=function(){null==a||a.apply(void 0,arguments),null==r||r.apply(void 0,arguments)}:"style"===i?n[i]=(0,c.Z)((0,c.Z)({},r),a):"className"===i&&(n[i]=[r,a].filter(Boolean).join(" "))};for(var i in t)r();return(0,c.Z)((0,c.Z)({},e),n)}(i,r.props)),{},{ref:_s(n,r.ref)})):t.Children.count(r)>1?t.Children.only(null):null}));Ts.displayName="SlotClone";var Ms=function(e){var n=e.children;return t.createElement(t.Fragment,null,n)};function Is(e){return t.isValidElement(e)&&e.type===Ms}var ks,Bs=["asChild"],Rs=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((function(e,n){return(0,c.Z)((0,c.Z)({},e),{},(0,Xe.Z)({},n,t.forwardRef((function(e,r){var i=e.asChild,a=y(e,Bs),o=i?Cs:n;return t.useEffect((function(){window[Symbol.for("radix-ui")]=!0}),[]),e.as&&console.error(Ps),t.createElement(o,Ye({},a,{ref:r}))}))))}),{}),Ps="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",Ds=t.forwardRef((function(e,n){return t.createElement(Rs.span,Ye({},e,{ref:n,style:(0,c.Z)((0,c.Z)({},e.style),{},{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"})}))})),Ls=Ds,Ns=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:function(){},Fs=["containerRef","style"],Os=t.forwardRef((function(e,n){var r,a,o=e.containerRef,s=e.style,l=y(e,Fs),u=null!==(r=null==o?void 0:o.current)&&void 0!==r?r:null===globalThis||void 0===globalThis||null===(a=globalThis.document)||void 0===a?void 0:a.body,f=t.useState({}),d=(0,i.Z)(f,2)[1];return Ns((function(){d({})}),[]),u?zi.createPortal(t.createElement(Rs.div,Ye({"data-radix-portal":""},l,{ref:n,style:u===document.body?(0,c.Z)({position:"absolute",top:0,left:0,zIndex:2147483647},s):void 0})),u):null})),Us=["children","width","height"],zs=t.forwardRef((function(e,n){var r=e.children,i=e.width,a=void 0===i?10:i,o=e.height,s=void 0===o?5:o,l=y(e,Us);return t.createElement(Rs.svg,Ye({},l,{ref:n,width:a,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?r:t.createElement("polygon",{points:"0,0 30,0 15,10"}))})),Gs=zs;function Qs(e){var n=t.useState(void 0),r=(0,i.Z)(n,2),a=r[0],o=r[1];return t.useEffect((function(){if(e){var t=new ResizeObserver((function(t){if(Array.isArray(t)&&t.length){var n,r,i=t[0];if("borderBoxSize"in i){var a=i.borderBoxSize,s=Array.isArray(a)?a[0]:a;n=s.inlineSize,r=s.blockSize}else{var l=e.getBoundingClientRect();n=l.width,r=l.height}o({width:n,height:r})}}));return t.observe(e,{box:"border-box"}),function(){o(void 0),t.unobserve(e)}}}),[e]),a}var Zs=new Map;function Hs(){var e=[];Zs.forEach((function(t,n){var r,i,a=n.getBoundingClientRect();i=a,((r=t.rect).width!==i.width||r.height!==i.height||r.top!==i.top||r.right!==i.right||r.bottom!==i.bottom||r.left!==i.left)&&(t.rect=a,e.push(t))})),e.forEach((function(e){e.callbacks.forEach((function(t){return t(e.rect)}))})),ks=requestAnimationFrame(Hs)}function js(e){var n=t.useState(),r=(0,i.Z)(n,2),a=r[0],o=r[1];return t.useEffect((function(){if(e){var t=function(e,t){var n=Zs.get(e);return void 0===n?(Zs.set(e,{rect:{},callbacks:[t]}),1===Zs.size&&(ks=requestAnimationFrame(Hs))):(n.callbacks.push(t),t(e.getBoundingClientRect())),function(){var n=Zs.get(e);if(void 0!==n){var r=n.callbacks.indexOf(t);r>-1&&n.callbacks.splice(r,1),0===n.callbacks.length&&(Zs.delete(e),0===Zs.size&&cancelAnimationFrame(ks))}}}(e,o);return function(){o(void 0),t()}}}),[e]),a}var Vs=["scope","children"];function Ws(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[],i=function(){var n=r.map((function(e){return t.createContext(e)}));return function(r){var i=(null==r?void 0:r[e])||n;return t.useMemo((function(){return(0,Xe.Z)({},"__scope".concat(e),(0,c.Z)((0,c.Z)({},r),{},(0,Xe.Z)({},e,i)))}),[r,i])}};return i.scopeName=e,[function(n,i){var a=t.createContext(i),o=r.length;function s(n){var r=n.scope,i=n.children,s=y(n,Vs),l=(null==r?void 0:r[e][o])||a,u=t.useMemo((function(){return s}),Object.values(s));return t.createElement(l.Provider,{value:u},i)}return r=[].concat((0,g.Z)(r),[i]),s.displayName=n+"Provider",[s,function(r,s){var l=(null==s?void 0:s[e][o])||a,u=t.useContext(l);if(u)return u;if(void 0!==i)return i;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},Xs.apply(void 0,[i].concat((0,g.Z)(n)))]}function Xs(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(1===n.length)return i;var a=function(){var e=n.map((function(e){return{useScope:e(),scopeName:e.scopeName}}));return function(n){var r=e.reduce((function(e,t){var r=t.useScope,i=t.scopeName;return(0,c.Z)((0,c.Z)({},e),r(n)["__scope".concat(i)])}),{});return t.useMemo((function(){return(0,Xe.Z)({},"__scope".concat(i.scopeName),r)}),[r])}};return a.scopeName=i.scopeName,a}function Ys(e,t,n){var r=e["x"===n?"left":"top"],i="x"===n?"width":"height",a=e[i],o=t[i];return{before:r-o,start:r,center:r+(a-o)/2,end:r+a-o,after:r+a}}function Ks(e){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:"translate3d(".concat(Math.round(e.x+window.scrollX),"px, ").concat(Math.round(e.y+window.scrollY),"px, 0)")}}function Js(e,t,n,r,i){var a="top"===t||"bottom"===t,o=i?i.width:0,s=i?i.height:0,l=o/2+r,u="",c="";return a?(u={start:"".concat(l,"px"),center:"center",end:e.width-l+"px"}[n],c="top"===t?"".concat(e.height+s,"px"):-s+"px"):(u="left"===t?"".concat(e.width+s,"px"):-s+"px",c={start:"".concat(l,"px"),center:"center",end:e.height-l+"px"}[n]),"".concat(u," ").concat(c)}var qs={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},$s={position:"absolute",opacity:0};function el(e){var t,n=e.popperSize,r=e.arrowSize,i=e.arrowOffset,a=e.side,o=e.align,s=(n.width-r.width)/2,l=(n.height-r.width)/2,u={top:0,right:90,bottom:180,left:-90}[a],c=Math.max(r.width,r.height),f=(t={width:"".concat(c,"px"),height:"".concat(c,"px"),transform:"rotate(".concat(u,"deg)"),willChange:"transform",position:"absolute"},(0,Xe.Z)(t,a,"100%"),(0,Xe.Z)(t,"direction",function(e,t){return("top"!==e&&"right"!==e||"end"!==t)&&("bottom"!==e&&"left"!==e||"end"===t)?"ltr":"rtl"}(a,o)),t);return"top"!==a&&"bottom"!==a||("start"===o&&(f.left="".concat(i,"px")),"center"===o&&(f.left="".concat(s,"px")),"end"===o&&(f.right="".concat(i,"px"))),"left"!==a&&"right"!==a||("start"===o&&(f.top="".concat(i,"px")),"center"===o&&(f.top="".concat(l,"px")),"end"===o&&(f.bottom="".concat(i,"px"))),f}function tl(e){return{top:"bottom",right:"left",bottom:"top",left:"right"}[e]}function nl(e,t){return{top:e.top<t.top,right:e.right>t.right,bottom:e.bottom>t.bottom,left:e.left<t.left}}var rl=["__scopePopper","virtualRef"],il=["__scopePopper","side","sideOffset","align","alignOffset","collisionTolerance","avoidCollisions"],al=["__scopePopper","offset"],ol=Ws("Popper"),sl=(0,i.Z)(ol,2),ll=sl[0],ul=sl[1],cl=ll("Popper"),fl=(0,i.Z)(cl,2),dl=fl[0],hl=fl[1],pl=t.forwardRef((function(e,n){var r=e.__scopePopper,i=e.virtualRef,a=y(e,rl),o=hl("PopperAnchor",r),s=t.useRef(null),l=ws(n,s);return t.useEffect((function(){o.onAnchorChange((null==i?void 0:i.current)||s.current)})),i?null:t.createElement(Rs.div,Ye({},a,{ref:l}))})),vl=ll("PopperContent"),ml=(0,i.Z)(vl,2),gl=ml[0],yl=ml[1],Al=t.forwardRef((function(e,n){var r=e.__scopePopper,a=e.side,o=void 0===a?"bottom":a,s=e.sideOffset,l=e.align,u=void 0===l?"center":l,f=e.alignOffset,d=e.collisionTolerance,h=e.avoidCollisions,p=void 0===h||h,v=y(e,il),m=hl("PopperContent",r),g=t.useState(),A=(0,i.Z)(g,2),b=A[0],x=A[1],_=js(m.anchor),w=t.useState(null),S=(0,i.Z)(w,2),E=S[0],C=S[1],T=Qs(E),M=t.useState(null),I=(0,i.Z)(M,2),k=I[0],B=I[1],R=Qs(k),P=ws(n,(function(e){return C(e)})),D=function(){var e=t.useState(void 0),n=(0,i.Z)(e,2),r=n[0],a=n[1];return t.useEffect((function(){var e;function t(){a({width:window.innerWidth,height:window.innerHeight})}function n(){window.clearTimeout(e),e=window.setTimeout(t,100)}return t(),window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[]),r}(),L=function(e){var t=e.anchorRect,n=e.popperSize,r=e.arrowSize,i=e.arrowOffset,a=void 0===i?0:i,o=e.side,s=e.sideOffset,l=void 0===s?0:s,u=e.align,f=e.alignOffset,d=void 0===f?0:f,h=e.shouldAvoidCollisions,p=void 0===h||h,v=e.collisionBoundariesRect,m=e.collisionTolerance,g=void 0===m?0:m;if(!t||!n||!v)return{popperStyles:qs,arrowStyles:$s};var y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,a=i?i.height:0,o=Ys(t,e,"x"),s=Ys(t,e,"y"),l=s.before-n-a,u=s.after+n+a,c=o.before-n-a,f=o.after+n+a;return{top:{start:{x:o.start+r,y:l},center:{x:o.center,y:l},end:{x:o.end-r,y:l}},right:{start:{x:f,y:s.start+r},center:{x:f,y:s.center},end:{x:f,y:s.end-r}},bottom:{start:{x:o.start+r,y:u},center:{x:o.center,y:u},end:{x:o.end-r,y:u}},left:{start:{x:c,y:s.start+r},center:{x:c,y:s.center},end:{x:c,y:s.end-r}}}}(n,t,l,d,r),A=y[o][u];if(!1===p){var b=Ks(A),x=$s;return r&&(x=el({popperSize:n,arrowSize:r,arrowOffset:a,side:o,align:u})),{popperStyles:(0,c.Z)((0,c.Z)({},b),{},{"--radix-popper-transform-origin":Js(n,o,u,a,r)}),arrowStyles:x,placedSide:o,placedAlign:u}}var _,w,S=DOMRect.fromRect((0,c.Z)((0,c.Z)({},n),A)),E=(_=v,w=g,DOMRect.fromRect({width:_.width-2*w,height:_.height-2*w,x:_.left+w,y:_.top+w})),C=nl(S,E),T=y[tl(o)][u],M=function(e,t,n){var r=tl(e);return t[e]&&!n[r]?r:e}(o,C,nl(DOMRect.fromRect((0,c.Z)((0,c.Z)({},n),T)),E)),I=function(e,t,n,r,i){var a="top"===n||"bottom"===n,o=a?"left":"top",s=a?"right":"bottom",l=a?"width":"height",u=t[l]>e[l];return"start"!==r&&"center"!==r||!(i[o]&&u||i[s]&&!u)?"end"!==r&&"center"!==r||!(i[s]&&u||i[o]&&!u)?r:"start":"end"}(n,t,o,u,C),k=Ks(y[M][I]),B=$s;return r&&(B=el({popperSize:n,arrowSize:r,arrowOffset:a,side:M,align:I})),{popperStyles:(0,c.Z)((0,c.Z)({},k),{},{"--radix-popper-transform-origin":Js(n,M,I,a,r)}),arrowStyles:B,placedSide:M,placedAlign:I}}({anchorRect:_,popperSize:T,arrowSize:R,arrowOffset:b,side:o,sideOffset:s,align:u,alignOffset:f,shouldAvoidCollisions:p,collisionBoundariesRect:D?DOMRect.fromRect((0,c.Z)((0,c.Z)({},D),{},{x:0,y:0})):void 0,collisionTolerance:d}),N=L.popperStyles,F=L.arrowStyles,O=L.placedSide,U=L.placedAlign,z=void 0!==O;return t.createElement("div",{style:N,"data-radix-popper-content-wrapper":""},t.createElement(gl,{scope:r,arrowStyles:F,onArrowChange:B,onArrowOffsetChange:x},t.createElement(Rs.div,Ye({"data-side":O,"data-align":U},v,{style:(0,c.Z)((0,c.Z)({},v.style),{},{animation:z?void 0:"none"}),ref:P}))))})),bl=t.forwardRef((function(e,n){var r=e.__scopePopper,i=e.offset,a=y(e,al),o=yl("PopperArrow",r),s=o.onArrowOffsetChange;return t.useEffect((function(){return s(i)}),[s,i]),t.createElement("span",{style:(0,c.Z)((0,c.Z)({},o.arrowStyles),{},{pointerEvents:"none"})},t.createElement("span",{ref:o.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},t.createElement(Gs,Ye({},a,{ref:n,style:(0,c.Z)((0,c.Z)({},a.style),{},{display:"block"})}))))})),xl=function(e){var n=e.__scopePopper,r=e.children,a=t.useState(null),o=(0,i.Z)(a,2),s=o[0],l=o[1];return t.createElement(dl,{scope:n,anchor:s,onAnchorChange:l},r)},_l=pl,wl=Al,Sl=bl,El=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:function(){};function Cl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)}))}}function Tl(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useCallback(Cl.apply(void 0,n),n)}var Ml=function(e){var n=e.present,r=e.children,a=function(e){var n=t.useState(),r=(0,i.Z)(n,2),a=r[0],o=r[1],s=t.useRef({}),l=t.useRef(e),u=t.useRef("none"),c=function(e,n){return t.useReducer((function(e,t){var r=n[e][t];return null!=r?r:e}),e)}(e?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),f=(0,i.Z)(c,2),d=f[0],h=f[1];return t.useEffect((function(){var e=Il(s.current);u.current="mounted"===d?e:"none"}),[d]),El((function(){var t=s.current,n=l.current;if(n!==e){var r=u.current,i=Il(t);if(e)h("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))h("UNMOUNT");else{h(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}l.current=e}}),[e,h]),El((function(){if(a){var e=function(e){var t=Il(s.current).includes(e.animationName);e.target===a&&t&&h("ANIMATION_END")},t=function(e){e.target===a&&(u.current=Il(s.current))};return a.addEventListener("animationstart",t),a.addEventListener("animationcancel",e),a.addEventListener("animationend",e),function(){a.removeEventListener("animationstart",t),a.removeEventListener("animationcancel",e),a.removeEventListener("animationend",e)}}}),[a,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:t.useCallback((function(e){e&&(s.current=getComputedStyle(e)),o(e)}),[])}}(n),o="function"==typeof r?r({present:a.isPresent}):t.Children.only(r),s=Tl(a.ref,o.ref);return"function"==typeof r||a.isPresent?t.cloneElement(o,{ref:s}):null};function Il(e){return(null==e?void 0:e.animationName)||"none"}function kl(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current}function Bl(e){var n=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e})),t.useMemo((function(){return function(){for(var e,t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return null===(t=n.current)||void 0===t?void 0:(e=t).call.apply(e,[n].concat(i))}}),[])}(e);t.useEffect((function(){var e=function(e){"Escape"===e.key&&n(e)};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[n])}function Rl(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e})),t.useMemo((function(){return function(){for(var e,t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return null===(t=n.current)||void 0===t?void 0:(e=t).call.apply(e,[n].concat(i))}}),[])}function Pl(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkForDefaultPrevented,r=void 0===n||n;return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}Ml.displayName="Presence";var Dl=["__scopeTooltip"],Ll=["forceMount"],Nl=["__scopeTooltip","children","aria-label","portalled"],Fl=["__scopeTooltip"],Ol=Ws("Tooltip",[ul]),Ul=(0,i.Z)(Ol,2),zl=Ul[0],Gl=(Ul[1],ul()),Ql=zl("TooltipProvider",{isOpenDelayed:!0,delayDuration:700,onOpen:function(){},onClose:function(){}}),Zl=(0,i.Z)(Ql,2),Hl=(Zl[0],Zl[1]),jl=zl("Tooltip"),Vl=(0,i.Z)(jl,2),Wl=Vl[0],Xl=Vl[1],Yl=t.forwardRef((function(e,n){var r=e.__scopeTooltip,i=y(e,Dl),a=Xl("TooltipTrigger",r),o=Gl(r),s=ws(n,a.onTriggerChange),l=t.useRef(!1),u=t.useCallback((function(){return l.current=!1}),[]);return t.useEffect((function(){return function(){return document.removeEventListener("mouseup",u)}}),[u]),t.createElement(_l,Ye({asChild:!0},o),t.createElement(Rs.button,Ye({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},i,{ref:s,onMouseEnter:Pl(e.onMouseEnter,a.onTriggerEnter),onMouseLeave:Pl(e.onMouseLeave,a.onClose),onMouseDown:Pl(e.onMouseDown,(function(){a.onClose(),l.current=!0,document.addEventListener("mouseup",u,{once:!0})})),onFocus:Pl(e.onFocus,(function(){l.current||a.onOpen()})),onBlur:Pl(e.onBlur,a.onClose),onClick:Pl(e.onClick,a.onClose)})))})),Kl=t.forwardRef((function(e,n){var r=e.forceMount,i=y(e,Ll),a=Xl("TooltipContent",e.__scopeTooltip);return t.createElement(Ml,{present:r||a.open},t.createElement(Jl,Ye({ref:n},i)))})),Jl=t.forwardRef((function(e,n){var r=e.__scopeTooltip,i=e.children,a=e["aria-label"],o=e.portalled,s=void 0===o||o,l=y(e,Nl),u=Xl("TooltipContent",r),f=Gl(r),d=s?Os:t.Fragment,h=u.onClose;return Bl((function(){return h()})),t.useEffect((function(){return document.addEventListener("tooltip.open",h),function(){return document.removeEventListener("tooltip.open",h)}}),[h]),t.createElement(d,null,t.createElement($l,{__scopeTooltip:r}),t.createElement(wl,Ye({"data-state":u.stateAttribute},f,l,{ref:n,style:(0,c.Z)((0,c.Z)({},l.style),{},{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"})}),t.createElement(Ms,null,i),t.createElement(Ls,{id:u.contentId,role:"tooltip"},a||i)))})),ql=t.forwardRef((function(e,n){var r=e.__scopeTooltip,i=y(e,Fl),a=Gl(r);return t.createElement(Sl,Ye({},a,i,{ref:n}))}));function $l(e){var n=e.__scopeTooltip,r=Xl("CheckTriggerMoved",n),i=js(r.trigger),a=null==i?void 0:i.left,o=kl(a),s=null==i?void 0:i.top,l=kl(s),u=r.onClose;return t.useEffect((function(){(void 0!==o&&o!==a||void 0!==l&&l!==s)&&u()}),[u,o,l,a,s]),null}var eu,tu,nu,ru,iu,au=function(e){var n=e.__scopeTooltip,r=e.children,a=e.open,o=e.defaultOpen,s=void 0!==o&&o,l=e.onOpenChange,u=e.delayDuration,c=Hl("Tooltip",n),f=Gl(n),d=t.useState(null),h=(0,i.Z)(d,2),p=h[0],v=h[1],m=function(e){var n=t.useState(bs()),r=(0,i.Z)(n,2),a=r[0],o=r[1];return As((function(){e||o((function(e){return null!=e?e:String(xs++)}))}),[e]),e||(a?"radix-".concat(a):"")}(),g=t.useRef(0),y=null!=u?u:c.delayDuration,A=t.useRef(!1),b=c.onOpen,x=c.onClose,_=function(e){var n=e.prop,r=e.defaultProp,a=e.onChange,o=void 0===a?function(){}:a,s=function(e){var n=e.defaultProp,r=e.onChange,a=t.useState(n),o=(0,i.Z)(a,1)[0],s=t.useRef(o),l=Rl(r);return t.useEffect((function(){s.current!==o&&(l(o),s.current=o)}),[o,s,l]),a}({defaultProp:r,onChange:o}),l=(0,i.Z)(s,2),u=l[0],c=l[1],f=void 0!==n,d=f?n:u,h=Rl(o);return[d,t.useCallback((function(e){if(f){var t="function"==typeof e?e(n):e;t!==n&&h(t)}else c(e)}),[f,n,c,h])]}({prop:a,defaultProp:s,onChange:function(e){e&&(document.dispatchEvent(new CustomEvent("tooltip.open")),b()),null==l||l(e)}}),w=(0,i.Z)(_,2),S=w[0],E=void 0!==S&&S,C=w[1],T=t.useMemo((function(){return E?A.current?"delayed-open":"instant-open":"closed"}),[E]),M=t.useCallback((function(){window.clearTimeout(g.current),A.current=!1,C(!0)}),[C]),I=t.useCallback((function(){window.clearTimeout(g.current),g.current=window.setTimeout((function(){A.current=!0,C(!0)}),y)}),[y,C]);return t.useEffect((function(){return function(){return window.clearTimeout(g.current)}}),[]),t.createElement(xl,f,t.createElement(Wl,{scope:n,contentId:m,open:E,stateAttribute:T,trigger:p,onTriggerChange:v,onTriggerEnter:t.useCallback((function(){c.isOpenDelayed?I():M()}),[c.isOpenDelayed,I,M]),onOpen:t.useCallback(M,[M]),onClose:t.useCallback((function(){window.clearTimeout(g.current),C(!1),x()}),[C,x])},r))},ou=Yl,su=Kl,lu=ql;function uu(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}!function(e){e[e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",e[e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",e[e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",e[e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",e[e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",e[e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",e[e.THEME_ERROR=6]="THEME_ERROR",e[e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",e[e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",e[e.EMPTY_KEY=9]="EMPTY_KEY"}(iu||(iu={}));var cu=(eu={},(0,Xe.Z)(eu,iu.UNSUPPORTED_INPUT,(function(e,t){return["An input with type `".concat(e,"` input was found at path `").concat(t,"` but it's not supported yet.")]})),(0,Xe.Z)(eu,iu.NO_COMPONENT_FOR_TYPE,(function(e,t){return["Type `".concat(e,"` found at path `").concat(t,"` can't be displayed in panel because no component supports it yet.")]})),(0,Xe.Z)(eu,iu.UNKNOWN_INPUT,(function(e,t){return["input at path `".concat(e,"` is not recognized."),t]})),(0,Xe.Z)(eu,iu.DUPLICATE_KEYS,(function(e,t,n){return["Key `".concat(e,"` of path `").concat(t,"` already exists at path `").concat(n,"`. Even nested keys need to be unique. Rename one of the keys.")]})),(0,Xe.Z)(eu,iu.ALREADY_REGISTERED_TYPE,(function(e){return["Type ".concat(e," has already been registered. You can't register a component with the same type.")]})),(0,Xe.Z)(eu,iu.CLIPBOARD_ERROR,(function(e){return["Error copying the value",e]})),(0,Xe.Z)(eu,iu.THEME_ERROR,(function(e,t){return["Error accessing the theme `".concat(e,".").concat(t,"` value.")]})),(0,Xe.Z)(eu,iu.PATH_DOESNT_EXIST,(function(e){return["Error getting the value at path `".concat(e,"`. There is probably an error in your `render` function.")]})),(0,Xe.Z)(eu,iu.PATH_DOESNT_EXIST,(function(e){return["Error accessing the value at path `".concat(e,"`")]})),(0,Xe.Z)(eu,iu.INPUT_TYPE_OVERRIDE,(function(e,t,n){return["Input at path `".concat(e,"` already exists with type: `").concat(t,"`. Its type cannot be overridden with type `").concat(n,"`.")]})),(0,Xe.Z)(eu,iu.EMPTY_KEY,(function(){return["Keys can not be empty, if you want to hide a label use whitespace."]})),eu);function fu(e,t){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o=u(cu[t].apply(cu,i)),s=o[0],l=o.slice(1);(n=console)[e].apply(n,["LEVA: "+s].concat((0,g.Z)(l)))}var du=fu.bind(null,"warn"),hu=fu.bind(null,"log"),pu=["value"],vu=["schema"],mu=["value"],gu=[],yu={};function Au(e){var t,n=e.value,r=uu(e,pu),i=(0,v.Z)(gu);try{for(i.s();!(t=i.n()).done;){var a=(0,t.value)(n,r);if(a)return a}}catch(o){i.e(o)}finally{i.f()}}function bu(e,t){var n=t.schema,r=uu(t,vu);e in yu?du(iu.ALREADY_REGISTERED_TYPE,e):(gu.push((function(t,r){return n(t,r)&&e})),yu[e]=r)}function xu(e,t,n,r){var i=yu[e].normalize;return i?i(t,n,r):"object"===typeof t&&"value"in t?{value:t.value,settings:uu(t,mu)}:{value:t}}function _u(e,t,n){var r=yu[e].format;return r?r(t,n):t}function wu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Su(Object(n),!0).forEach((function(t){wu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cu=function(e,t,n){return e>n?n:e<t?t:e},Tu=function(e){if(""===e||"number"===typeof e)return e;try{var t=Ou(e);if(!isNaN(t))return t}catch(n){}return parseFloat(e)},Mu=Math.log(10);function Iu(e){var t=Math.abs(+String(e).replace(".",""));if(0===t)return.01;for(;0!==t&&t%10===0;)t/=10;var n=Math.floor(Math.log(t)/Mu)+1,r=Math.floor(Math.log10(Math.abs(e))),i=Math.pow(10,r-n);return Math.max(i,.001)}var ku=function(e,t,n){return n===t?0:(Cu(e,t,n)-t)/(n-t)},Bu=function(e,t,n){return e*(n-t)+t},Ru=/\(([0-9+\-*/^ .]+)\)/,Pu=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,Du=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,Lu=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,Nu=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,Fu=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Ou(e){if(isNaN(Number(e))){if(Ru.test(e)){var t=e.replace(Ru,(function(e,t){return String(Ou(t))}));return Ou(t)}if(Pu.test(e))return Ou(e.replace(Pu,(function(e,t,n){return String(Math.pow(Number(t),Number(n)))})));if(Du.test(e)){var n=e.replace(Du,(function(e,t,n){return String(Number(t)*Number(n))}));return Ou(n)}if(Lu.test(e)){var r=e.replace(Lu,(function(e,t,n){if(0!=n)return String(Number(t)/Number(n));throw new Error("Division by zero")}));return Ou(r)}if(Nu.test(e)){var i=e.replace(Nu,(function(e,t,n){return String(Number(t)+Number(n))}));return Ou(i)}if(Fu.test(e)){var a=e.replace(Fu,(function(e,t,n){return String(Number(t)-Number(n))}));return Ou(a)}return Number(e)}return Number(e)}function Uu(e){return"[object Object]"===Object.prototype.toString.call(e)}var zu,Gu,Qu=function(e){return Uu(e)&&0===Object.keys(e).length};!function(e){e.BUTTON="BUTTON",e.BUTTON_GROUP="BUTTON_GROUP",e.MONITOR="MONITOR",e.FOLDER="FOLDER"}(zu||(zu={})),function(e){e.SELECT="SELECT",e.IMAGE="IMAGE",e.NUMBER="NUMBER",e.COLOR="COLOR",e.STRING="STRING",e.BOOLEAN="BOOLEAN",e.INTERVAL="INTERVAL",e.VECTOR3D="VECTOR3D",e.VECTOR2D="VECTOR2D"}(Gu||(Gu={}));var Zu=["type","__customInput"],Hu=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],ju=["type"];function Vu(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if("object"!==typeof e||Array.isArray(e))return{type:a,input:e,options:Eu({key:t,label:t,optional:!1,disabled:!1,order:0},i)};if("__customInput"in e){var o=e.type;return Vu(e.__customInput,t,uu(e,Zu),o)}var s=e.render,l=e.label,u=e.optional,c=e.order,f=void 0===c?0:c,d=e.disabled,h=e.hint,p=e.onChange,v=e.onEditStart,m=e.onEditEnd,g=e.transient,y=uu(e,Hu),A=Eu({render:s,key:t,label:null!==l&&void 0!==l?l:t,hint:h,transient:null!==g&&void 0!==g?g:!!p,onEditStart:v,onEditEnd:m,disabled:d,optional:u,order:f},i),b=y.type,x=uu(y,ju);return(b=null!==a&&void 0!==a?a:b)in zu?{type:b,input:x,options:A}:{type:b,input:a&&Uu(x)&&"value"in x?x.value:Qu(x)?void 0:x,options:Eu(Eu({},A),{},{onChange:p,optional:null!==(n=A.optional)&&void 0!==n&&n,disabled:null!==(r=A.disabled)&&void 0!==r&&r})}}function Wu(e,t,n,r){var i=Vu(e,t),a=i.type,o=i.input,s=i.options;if(a)return a in zu?i:{type:a,input:xu(a,o,n,r),options:s};var l=Au(o);return l?{type:l,input:xu(l,o,n,r),options:s}:!!(l=Au({value:o}))&&{type:l,input:xu(l,{value:o},n,r),options:s}}function Xu(e,t,n,r,i){var a=e.value,o=e.type,s=e.settings;e.value=Ku({type:o,value:a,settings:s},t,n,r),e.fromPanel=i}var Yu=function(e,t,n){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=n};function Ku(e,t,n,r){var i,a=e.type,o=e.value,s=e.settings,l="SELECT"!==a&&"function"===typeof t?t(o):t;try{i=function(e,t,n,r,i,a){var o=yu[e].sanitize;return o?o(t,n,r,i,a):t}(a,l,s,o,n,r)}catch(u){throw new Yu("The value `".concat(t,"` did not result in a correct value."),o,u)}return ta(i,o)?o:i}var Ju=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;return function(){var i=this,a=arguments,o=n&&!r,s=function(){return e.apply(i,a)};window.clearTimeout(r),r=window.setTimeout(s,t),o&&s()}},qu=function(e){return e.shiftKey?5:e.altKey?.2:1};var $u=["value"],ec=["min","max"],tc=function(e,t){var n=t.min,r=void 0===n?-1/0:n,i=t.max,a=void 0===i?1/0:i,o=t.suffix,s=parseFloat(e);if(""===e||isNaN(s))throw Error("Invalid number");var l=Cu(s,r,a);return o?l+o:l},nc=function(e){var t=e.value,n=uu(e,$u),r=n.min,i=void 0===r?-1/0:r,a=n.max,o=void 0===a?1/0:a,s=uu(n,ec),l=parseFloat(t),u="string"===typeof t?t.substring((""+l).length):void 0;l=Cu(l,i,o);var c=n.step;c||(Number.isFinite(i)?c=Number.isFinite(o)?+(Math.abs(o-i)/100).toPrecision(1):+(Math.abs(l-i)/100).toPrecision(1):Number.isFinite(o)&&(c=+(Math.abs(o-l)/100).toPrecision(1)));var f=c?10*Iu(c):Iu(l);return{value:u?l+u:l,settings:Eu({initialValue:l,step:c=c||f/10,pad:Math.round(Cu(Math.log10(1/f),0,2)),min:i,max:o,suffix:u},s)}},rc=function(e,t){var n=t.step,r=t.initialValue;return r+Math.round((e-r)/n)*n},ic=Object.freeze({__proto__:null,schema:function(e){if("number"===typeof e)return!0;if("string"===typeof e){var t=parseFloat(e);return!isNaN(t)&&e.substring((""+t).length).trim().length<4}return!1},sanitize:tc,format:function(e,t){var n=t.pad,r=void 0===n?0:n,i=t.suffix,a=parseFloat(e).toFixed(r);return i?a+i:a},normalize:nc,sanitizeStep:rc});function ac(){return ac=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ac.apply(this,arguments)}var oc=(0,t.createContext)({});function sc(){return(0,t.useContext)(oc)}var lc=(0,t.createContext)(null),uc=(0,t.createContext)(null),cc=(0,t.createContext)(null);function fc(){return(0,t.useContext)(uc)}function dc(e,t){var n=e.split(" "),r=(0,i.Z)(n,2),a=r[0],o=r[1],s={};return"none"!==a&&(s.boxShadow="".concat(t.inset?"inset ":"","0 0 0 $borderWidths").concat([t.key]," $colors").concat("default"!==a&&a||t.borderColor)),o&&(s.backgroundColor=o),s}var hc={$inputStyle:function(){return function(e){return dc(e,{key:"$input",borderColor:"$highlight1",inset:!0})}},$focusStyle:function(){return function(e){return dc(e,{key:"$focus",borderColor:"$accent2"})}},$hoverStyle:function(){return function(e){return dc(e,{key:"$hover",borderColor:"$accent1",inset:!0})}},$activeStyle:function(){return function(e){return dc(e,{key:"$active",borderColor:"$accent1",inset:!0})}}},pc=bo({prefix:"leva",theme:{colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}},utils:Eu(Eu({},hc),{},{$flex:function(){return{display:"flex",alignItems:"center"}},$flexCenter:function(){return{display:"flex",alignItems:"center",justifyContent:"center"}},$reset:function(){return{outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}},$draggable:function(){return{touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}},$focus:function(e){return{"&:focus":hc.$focusStyle()(e)}},$focusWithin:function(e){return{"&:focus-within":hc.$focusStyle()(e)}},$hover:function(e){return{"&:hover":hc.$hoverStyle()(e)}},$active:function(e){return{"&:active":hc.$activeStyle()(e)}}})}),vc=pc.styled,mc=(pc.css,pc.createTheme,pc.globalCss),gc=(pc.keyframes,mc({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}}));function yc(e,n){var r=(0,t.useContext)(lc).theme;if(!(e in r)||!(n in r[e]))return du(iu.THEME_ERROR,e,n),"";for(var i=n;;){var a=r[e][i];if("string"!==typeof a||"$"!==a.charAt(0))return a;i=a.substr(1)}}var Ac=vc("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),bc=vc("div",(0,Xe.Z)({$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none"},"& + ".concat(Ac),{paddingLeft:0})),xc=vc(bc,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),_c=vc("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),wc=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],Sc=["onUpdate"];function Ec(e){var n=e.innerLabel,r=e.value,i=e.onUpdate,a=e.onChange,o=e.onKeyDown,s=e.type,l=e.id,u=e.inputType,c=void 0===u?"text":u,f=e.rows,d=void 0===f?0:f,h=uu(e,wc),p=sc(),v=p.id,m=p.emitOnEditStart,g=p.emitOnEditEnd,y=p.disabled,A=l||v,b=(0,t.useRef)(null),x=d>0,_=x?"textarea":"input",w=(0,t.useCallback)((function(e){return function(t){var n=t.currentTarget.value;e(n)}}),[]);t.useEffect((function(){var e=b.current,t=w((function(e){i(e),g()}));return null===e||void 0===e||e.addEventListener("blur",t),function(){return null===e||void 0===e?void 0:e.removeEventListener("blur",t)}}),[w,i,g]);var S=(0,t.useCallback)((function(e){"Enter"===e.key&&w(i)(e)}),[w,i]),E=Object.assign({as:_},x?{rows:d}:{},h);return t.createElement(_c,{textArea:x},n&&"string"===typeof n?t.createElement(bc,null,n):n,t.createElement(Ac,ac({levaType:s,ref:b,id:A,type:c,autoComplete:"off",spellCheck:"false",value:r,onChange:w(a),onFocus:function(){return m()},onKeyPress:S,onKeyDown:o,disabled:y},E)))}function Cc(e){var n=e.onUpdate,r=uu(e,Sc),i=(0,t.useCallback)((function(e){return n(Tu(e))}),[n]),a=(0,t.useCallback)((function(e){var t="ArrowUp"===e.key?1:"ArrowDown"===e.key?-1:0;if(t){e.preventDefault();var r=e.altKey?.1:e.shiftKey?10:1;n((function(e){return parseFloat(e)+t*r}))}}),[n]);return t.createElement(Ec,ac({},r,{onUpdate:i,onKeyDown:a,type:"number"}))}var Tc=vc("div",{}),Mc=vc("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),Ic=vc("div",(tu={$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"}},(0,Xe.Z)(tu,"&:hover + ".concat(Mc,"::after"),{opacity:.6}),(0,Xe.Z)(tu,"".concat(Tc,":hover > & + ").concat(Mc,"::after"),{opacity:.6}),(0,Xe.Z)(tu,"".concat(Tc,":hover > & > svg"),{opacity:1}),tu)),kc=vc("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:(0,Xe.Z)({"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"}},"> ".concat(Tc,":not(:first-of-type)"),{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"})}}}),Bc=vc("div",(nu={position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2"},(0,Xe.Z)(nu,"".concat(kc," > &"),{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}}),(0,Xe.Z)(nu,"variants",{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}),nu)),Rc=vc(Bc,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),Pc=vc("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),Dc=vc("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),Lc=vc("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),Nc=vc("div",{opacity:1,variants:{disabled:{true:(0,Xe.Z)({opacity:.6,pointerEvents:"none"},"& ".concat(Lc),{pointerEvents:"auto"})}}}),Fc=vc("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),Oc=vc("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),Uc=vc(lu,{fill:"$toolTipBackground"});function zc(e){var n=e.children,r=(0,t.useContext)(lc).className;return t.createElement($i,{className:r},n)}var Gc=["align"];function Qc(){var e=sc(),n=e.id,r=e.disable,i=e.disabled;return t.createElement(t.Fragment,null,t.createElement(Dc,{id:n+"__disable",type:"checkbox",checked:!i,onChange:function(){return r(!i)}}),t.createElement("label",{htmlFor:n+"__disable"}))}function Zc(e){var n=sc(),r=n.id,i=n.optional,a=n.hint,o=e.htmlFor||(r?{htmlFor:r}:null),s=a||"string"!==typeof e.children?null:{title:e.children};return t.createElement(t.Fragment,null,i&&t.createElement(Qc,null),void 0!==a?t.createElement(au,null,t.createElement(ou,{asChild:!0},t.createElement(Lc,ac({},o,e))),t.createElement(su,{side:"top",sideOffset:2},t.createElement(Oc,null,a,t.createElement(Uc,null)))):t.createElement(Lc,ac({},o,s,e)))}function Hc(e){var n=e.align,r=uu(e,Gc),a=sc(),o=a.value,s=a.label,l=a.key,u=a.disabled,c=!(0,t.useContext)(cc).hideCopyButton&&void 0!==l,f=(0,t.useState)(!1),d=(0,i.Z)(f,2),h=d[0],p=d[1],v=function(){var e=(0,Ui.Z)((0,Oi.Z)().mark((function e(){return(0,Oi.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(JSON.stringify((0,Xe.Z)({},l,null!==o&&void 0!==o?o:"")));case 3:p(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),du(iu.CLIPBOARD_ERROR,(0,Xe.Z)({},l,o));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return t.createElement(Pc,{align:n,onPointerLeave:function(){return p(!1)}},t.createElement(Zc,r),c&&!u&&t.createElement("div",{title:"Click to copy ".concat("string"===typeof s?s:l," value")},h?t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},t.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),t.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):t.createElement("svg",{onClick:v,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},t.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),t.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}var jc=["toggled"],Vc=vc("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Wc(e){var n=e.toggled,r=uu(e,jc);return t.createElement(Vc,ac({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(".concat(n?0:-90,"deg)")}},r),t.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}var Xc=["input"];function Yc(e){var n=e.input,r=uu(e,Xc);return n?t.createElement(Rc,r):t.createElement(Bc,r)}function Kc(e){var n=e.value,r=e.type,a=e.settings,o=e.setValue,s=(0,t.useState)(_u(r,n,a)),l=(0,i.Z)(s,2),u=l[0],c=l[1],f=(0,t.useRef)(n),d=(0,t.useRef)(a);d.current=a;var h=(0,t.useCallback)((function(e){return c(_u(r,e,d.current))}),[r]),p=(0,t.useCallback)((function(e){try{o(e)}catch(r){var t=r.type,n=r.previousValue;if("LEVA_ERROR"!==t)throw r;h(n)}}),[h,o]);return(0,t.useEffect)((function(){ta(n,f.current)||h(n),f.current=n}),[n,h]),{displayValue:u,onChange:c,onUpdate:p}}function Jc(e,t){var n=sc(),r=n.emitOnEditStart,i=n.emitOnEditEnd;return ys((function(t){t.first&&(document.body.classList.add("leva__panel__dragged"),null===r||void 0===r||r());var n=e(t);return t.last&&(document.body.classList.remove("leva__panel__dragged"),null===i||void 0===i||i()),n}),t)}function qc(){var e=(0,t.useRef)(null),n=(0,t.useRef)({x:0,y:0}),r=(0,t.useCallback)((function(t){Object.assign(n.current,t),e.current&&(e.current.style.transform="translate3d(".concat(n.current.x,"px, ").concat(n.current.y,"px, 0)"))}),[]);return[e,r]}var $c=["__refCount"],ef=function(e,t){return e[t]?uu(e[t],$c):null};var tf=vc("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),nf=vc("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),rf=vc("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),af=vc("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),of=vc("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function sf(e){var n=e.value,r=e.min,a=e.max,o=e.onDrag,s=e.step,l=e.initialValue,u=(0,t.useRef)(null),c=(0,t.useRef)(null),f=(0,t.useRef)(0),d=yc("sizes","scrubberWidth"),h=Jc((function(e){var t=e.event,h=e.first,p=(0,i.Z)(e.xy,1)[0],v=(0,i.Z)(e.movement,1)[0],m=e.memo;if(h){var g=u.current.getBoundingClientRect(),y=g.width,A=g.left;f.current=y-parseFloat(d),m=(null===t||void 0===t?void 0:t.target)===c.current?n:Bu((p-A)/y,r,a)}var b=m+Bu(v/f.current,0,a-r);return o(rc(b,{step:s,initialValue:l})),m})),p=ku(n,r,a);return t.createElement(af,ac({ref:u},h()),t.createElement(nf,null,t.createElement(of,{style:{left:0,right:"".concat(100*(1-p),"%")}})),t.createElement(rf,{ref:c,style:{left:"calc(".concat(p," * (100% - ").concat(d,"))")}}))}var lf=t.memo((function(e){var n=e.label,r=e.onUpdate,a=e.step,o=e.innerLabelTrim,s=(0,t.useState)(!1),l=(0,i.Z)(s,2),u=l[0],c=l[1],f=Jc((function(e){var t=e.active,n=(0,i.Z)(e.delta,1)[0],o=e.event,s=e.memo,l=void 0===s?0:s;return c(t),l+=n/2,Math.abs(l)>=1&&(r((function(e){return parseFloat(e)+Math.floor(l)*a*qu(o)})),l=0),l}));return t.createElement(xc,ac({dragging:u,title:n.length>1?n:""},f()),n.slice(0,o))}));function uf(e){var n=e.label,r=e.id,i=e.displayValue,a=e.onUpdate,o=e.onChange,s=e.settings,l=e.innerLabelTrim,u=void 0===l?1:l,c=u>0&&t.createElement(lf,{label:n,step:s.step,onUpdate:a,innerLabelTrim:u});return t.createElement(Cc,{id:r,value:String(i),onUpdate:a,onChange:o,innerLabel:c})}var cf=ic.sanitizeStep,ff=Eu({component:function(){var e=sc(),n=e.label,r=e.value,i=e.onUpdate,a=e.settings,o=e.id,s=a.min,l=a.max!==1/0&&s!==-1/0;return t.createElement(Yc,{input:!0},t.createElement(Hc,null,n),t.createElement(tf,{hasRange:l},l&&t.createElement(sf,ac({value:parseFloat(r),onDrag:i},a)),t.createElement(uf,ac({},e,{id:o,label:"value",innerLabelTrim:l?0:1}))))}},uu(ic,["sanitizeStep"])),df=Object.freeze({__proto__:null,schema:function(e,t){return _a().schema({options:_a().passesAnyOf(_a().object(),_a().array())}).test(t)},sanitize:function(e,t){if(t.values.indexOf(e)<0)throw Error("Selected value doesn't match Select options");return e},format:function(e,t){return t.values.indexOf(e)},normalize:function(e){var t,n,r=e.value,i=e.options;return Array.isArray(i)?(n=i,t=i.map((function(e){return String(e)}))):(n=Object.values(i),t=Object.keys(i)),"value"in e?n.includes(r)||(t.unshift(String(r)),n.unshift(r)):r=n[0],Object.values(i).includes(r)||(i[String(r)]=r),{value:r,settings:{keys:t,values:n}}}}),hf=vc("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),pf=vc("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),vf=vc("div",(ru={display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer"},(0,Xe.Z)(ru,"".concat(pf,":focus + &"),{$focusStyle:""}),(0,Xe.Z)(ru,"".concat(pf,":hover + &"),{$hoverStyle:""}),ru));function mf(e){var n=e.displayValue,r=e.value,i=e.onUpdate,a=e.id,o=e.settings,s=e.disabled,l=o.keys,u=o.values,c=(0,t.useRef)();return r===u[n]&&(c.current=l[n]),t.createElement(hf,null,t.createElement(pf,{id:a,value:n,onChange:function(e){return i(u[Number(e.currentTarget.value)])},disabled:s},l.map((function(e,n){return t.createElement("option",{key:e,value:n},e)}))),t.createElement(vf,null,c.current),t.createElement(Wc,{toggled:!0}))}var gf=Eu({component:function(){var e=sc(),n=e.label,r=e.value,i=e.displayValue,a=e.onUpdate,o=e.id,s=e.disabled,l=e.settings;return t.createElement(Yc,{input:!0},t.createElement(Hc,null,n),t.createElement(mf,{id:o,value:r,displayValue:i,onUpdate:a,settings:l,disabled:s}))}},df),yf=Object.freeze({__proto__:null,schema:function(e){return _a().string().test(e)},sanitize:function(e){if("string"!==typeof e)throw Error("Invalid string");return e},normalize:function(e){var t=e.value,n=e.editable,r=void 0===n||n,i=e.rows,a=void 0!==i&&i;return{value:t,settings:{editable:r,rows:"number"===typeof a?a:a?5:0}}}}),Af=["displayValue","onUpdate","onChange","editable"],bf=vc("div",{whiteSpace:"pre-wrap"});function xf(e){var n=e.displayValue,r=e.onUpdate,i=e.onChange,a=e.editable,o=void 0===a||a,s=uu(e,Af);return o?t.createElement(Ec,ac({value:n,onUpdate:r,onChange:i},s)):t.createElement(bf,null,n)}var _f=Eu({component:function(){var e=sc(),n=e.label,r=e.settings,i=e.displayValue,a=e.onUpdate,o=e.onChange;return t.createElement(Yc,{input:!0},t.createElement(Hc,null,n),t.createElement(xf,ac({displayValue:i,onUpdate:a,onChange:o},r)))}},yf),wf=Object.freeze({__proto__:null,schema:function(e){return _a().boolean().test(e)},sanitize:function(e){if("boolean"!==typeof e)throw Error("Invalid boolean");return e}}),Sf=vc("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Ef(e){var n=e.value,r=e.onUpdate,i=e.id,a=e.disabled;return t.createElement(Sf,null,t.createElement("input",{id:i,type:"checkbox",checked:n,onChange:function(e){return r(e.currentTarget.checked)},disabled:a}),t.createElement("label",{htmlFor:i},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}var Cf=Eu({component:function(){var e=sc(),n=e.label,r=e.value,i=e.onUpdate,a=e.disabled,o=e.id;return t.createElement(Yc,{input:!0},t.createElement(Hc,null,n),t.createElement(Ef,{value:r,onUpdate:i,id:o,disabled:a}))}},wf),Tf=["locked"];function Mf(e){var n=e.value,r=e.id,i=e.valueKey,a=e.settings,o=e.onUpdate,s=e.innerLabelTrim,l=(0,t.useRef)(n[i]);l.current=n[i];var u=(0,t.useCallback)((function(e){return o((0,Xe.Z)({},i,Ku({type:"NUMBER",value:l.current,settings:a},e)))}),[o,a,i]),c=Kc({type:"NUMBER",value:n[i],settings:a,setValue:u});return t.createElement(uf,{id:r,label:i,value:n[i],displayValue:c.displayValue,onUpdate:c.onUpdate,onChange:c.onChange,settings:a,innerLabelTrim:s})}var If=vc("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function kf(e){var n=e.locked,r=uu(e,Tf);return t.createElement("svg",ac({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),n?t.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):t.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Bf(e){var n=e.value,r=e.onUpdate,i=e.settings,a=e.innerLabelTrim,o=sc(),s=o.id,l=o.setSettings,u=i.lock,c=i.locked;return t.createElement(If,{withLock:u},u&&t.createElement(kf,{locked:c,onClick:function(){return l({locked:!c})}}),Object.keys(n).map((function(e,o){return t.createElement(Mf,{id:0===o?s:"".concat(s,".").concat(e),key:e,valueKey:e,value:n,settings:i[e],onUpdate:r,innerLabelTrim:a})})))}var Rf=function(e,t){var n={},r=0,a=1/0;for(var o in Object.entries(e).forEach((function(e){var o=(0,i.Z)(e,2),s=o[0],l=o[1];n[s]=nc(Eu({value:l},t[s])).settings,r=Math.max(r,n[s].step),a=Math.min(a,n[s].pad)})),n){var s=t[o]||{},l=s.step,u=s.min,c=s.max;isFinite(l)||isFinite(u)&&isFinite(c)||(n[o].step=r,n[o].pad=a)}return n},Pf=["lock"],Df=["value"];function Lf(e){var t=_a().array().length(e).every.number();return function(n){return t.test(n)||function(t){if(!t||"object"!==typeof t)return!1;var n=Object.values(t);return n.length===e&&n.every((function(e){return isFinite(e)}))}(n)}}function Nf(e,t,n){return function(e){return Array.isArray(e)?"array":"object"}(e)===t?e:"array"===t?Object.values(e):function(e,t){return e.reduce((function(e,n,r){return Object.assign(e,(0,Xe.Z)({},t[r],n))}),{})}(e,n)}var Ff=function(e){return!!e&&("step"in e||"min"in e||"max"in e)};function Of(e){return{schema:Lf(e.length),normalize:function(t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=t.lock,i=void 0!==r&&r,a=uu(t,Pf),o=Array.isArray(e)?"array":"object",s="object"===o?Object.keys(e):n,l=Nf(e,"object",s),u=Ff(a)?s.reduce((function(e,t){return Object.assign(e,(0,Xe.Z)({},t,a))}),{}):a;return{value:"array"===o?e:l,settings:Eu(Eu({},Rf(l,u)),{},{format:o,keys:s,lock:i,locked:!1})}}(t.value,uu(t,Df),e)},format:function(e,t){return function(e,t){return Nf(e,"object",t.keys)}(e,t)},sanitize:function(e,t,n){return function(e,t,n){var r=Nf(e,"object",t.keys);for(var i in r)r[i]=tc(r[i],t[i]);var a=Object.keys(r),o={};if(a.length===t.keys.length)o=r;else{var s=Nf(n,"object",t.keys);if(1===a.length&&t.locked){var l=a[0],u=r[l],c=s[l],f=0!==c?u/c:1;for(var d in s)d===l?o[l]=u:o[d]=s[d]*f}else o=Eu(Eu({},s),r)}return Nf(o,t.format,t.keys)}(e,t,n)}}}var Uf={grad:.9,turn:360,rad:360/(2*Math.PI)},zf=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},Gf=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},Qf=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},Zf=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Hf=function(e){return{r:Qf(e.r,0,255),g:Qf(e.g,0,255),b:Qf(e.b,0,255),a:Qf(e.a)}},jf=function(e){return{r:Gf(e.r),g:Gf(e.g),b:Gf(e.b),a:Gf(e.a,3)}},Vf=/^#([0-9a-f]{3,8})$/i,Wf=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Xf=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=Math.max(t,n,r),o=a-Math.min(t,n,r),s=o?a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o:0;return{h:60*(s<0?s+6:s),s:a?o/a*100:0,v:a/255*100,a:i}},Yf=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),o=r*(1-n),s=r*(1-(t-a)*n),l=r*(1-(1-t+a)*n),u=a%6;return{r:255*[r,s,o,o,l,r][u],g:255*[l,r,r,s,o,o][u],b:255*[o,o,l,r,r,s][u],a:i}},Kf=function(e){return{h:Zf(e.h),s:Qf(e.s,0,100),l:Qf(e.l,0,100),a:Qf(e.a)}},Jf=function(e){return{h:Gf(e.h),s:Gf(e.s),l:Gf(e.l),a:Gf(e.a,3)}},qf=function(e){return Yf((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},$f=function(e){return{h:(t=Xf(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},ed=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,td=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nd=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rd=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,id={string:[[function(e){var t=Vf.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?Gf(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?Gf(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=nd.exec(e)||rd.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Hf({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=ed.exec(e)||td.exec(e);if(!t)return null;var n,r,i=Kf({h:(n=t[1],r=t[2],void 0===r&&(r="deg"),Number(n)*(Uf[r]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return qf(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=void 0===i?1:i;return zf(t)&&zf(n)&&zf(r)?Hf({r:Number(t),g:Number(n),b:Number(r),a:Number(a)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a,a=void 0===i?1:i;if(!zf(t)||!zf(n)||!zf(r))return null;var o=Kf({h:Number(t),s:Number(n),l:Number(r),a:Number(a)});return qf(o)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,i=e.a,a=void 0===i?1:i;if(!zf(t)||!zf(n)||!zf(r))return null;var o=function(e){return{h:Zf(e.h),s:Qf(e.s,0,100),v:Qf(e.v,0,100),a:Qf(e.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(a)});return Yf(o)},"hsv"]]},ad=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},od=function(e){return"string"==typeof e?ad(e.trim(),id.string):"object"==typeof e&&null!==e?ad(e,id.object):[null,void 0]},sd=function(e,t){var n=$f(e);return{h:n.h,s:Qf(n.s+100*t,0,100),l:n.l,a:n.a}},ld=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},ud=function(e,t){var n=$f(e);return{h:n.h,s:n.s,l:Qf(n.l+100*t,0,100),a:n.a}},cd=function(){function e(e){this.parsed=od(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return Gf(ld(this.rgba),2)},e.prototype.isDark=function(){return ld(this.rgba)<.5},e.prototype.isLight=function(){return ld(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=jf(this.rgba)).r,n=e.g,r=e.b,a=(i=e.a)<1?Wf(Gf(255*i)):"","#"+Wf(t)+Wf(n)+Wf(r)+a;var e,t,n,r,i,a},e.prototype.toRgb=function(){return jf(this.rgba)},e.prototype.toRgbString=function(){return t=(e=jf(this.rgba)).r,n=e.g,r=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+r+", "+i+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,i},e.prototype.toHsl=function(){return Jf($f(this.rgba))},e.prototype.toHslString=function(){return t=(e=Jf($f(this.rgba))).h,n=e.s,r=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+i+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,i},e.prototype.toHsv=function(){return e=Xf(this.rgba),{h:Gf(e.h),s:Gf(e.s),v:Gf(e.v),a:Gf(e.a,3)};var e},e.prototype.invert=function(){return fd({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),fd(sd(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),fd(sd(this.rgba,-e))},e.prototype.grayscale=function(){return fd(sd(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),fd(ud(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),fd(ud(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?fd({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Gf(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=$f(this.rgba);return"number"==typeof e?fd({h:e,s:t.s,l:t.l,a:t.a}):Gf(t.h)},e.prototype.isEqual=function(e){return this.toHex()===fd(e).toHex()},e}(),fd=function(e){return e instanceof cd?e:new cd(e)},dd=[];function hd(){return(hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pd(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}function vd(e){var n=(0,t.useRef)(e),r=(0,t.useRef)((function(e){n.current&&n.current(e)}));return n.current=e,r.current}var md=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},gd=function(e){return"touches"in e},yd=function(e){return e&&e.ownerDocument.defaultView||self},Ad=function(e,t,n){var r=e.getBoundingClientRect(),i=gd(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:md((i.pageX-(r.left+yd(e).pageXOffset))/r.width),top:md((i.pageY-(r.top+yd(e).pageYOffset))/r.height)}},bd=function(e){!gd(e)&&e.preventDefault()},xd=t.memo((function(e){var n=e.onMove,r=e.onKey,i=pd(e,["onMove","onKey"]),a=(0,t.useRef)(null),o=vd(n),s=vd(r),l=(0,t.useRef)(null),u=(0,t.useRef)(!1),c=(0,t.useMemo)((function(){var e=function(e){bd(e),(gd(e)?e.touches.length>0:e.buttons>0)&&a.current?o(Ad(a.current,e,l.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=u.current,i=yd(a.current),o=n?i.addEventListener:i.removeEventListener;o(r?"touchmove":"mousemove",e),o(r?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,r=a.current;if(r&&(bd(t),!function(e,t){return t&&!gd(e)}(t,u.current)&&r)){if(gd(t)){u.current=!0;var i=t.changedTouches||[];i.length&&(l.current=i[0].identifier)}r.focus(),o(Ad(r,t,l.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),s({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[s,o]),f=c[0],d=c[1],h=c[2];return(0,t.useEffect)((function(){return h}),[h]),t.createElement("div",hd({},i,{onTouchStart:f,onMouseDown:f,className:"react-colorful__interactive",ref:a,onKeyDown:d,tabIndex:0,role:"slider"}))})),_d=function(e){return e.filter(Boolean).join(" ")},wd=function(e){var n=e.color,r=e.left,i=e.top,a=void 0===i?.5:i,o=_d(["react-colorful__pointer",e.className]);return t.createElement("div",{className:o,style:{top:100*a+"%",left:100*r+"%"}},t.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:n}}))},Sd=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},Ed=(Math.PI,function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:Sd(e.h),s:Sd(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:Sd(i/2),a:Sd(r,2)}}),Cd=function(e){var t=Ed(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},Td=function(e){var t=Ed(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},Md=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),o=r*(1-n),s=r*(1-(t-a)*n),l=r*(1-(1-t+a)*n),u=a%6;return{r:Sd(255*[r,s,o,o,l,r][u]),g:Sd(255*[l,r,r,s,o,o][u]),b:Sd(255*[o,o,l,r,r,s][u]),a:Sd(i,2)}},Id=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=Math.max(t,n,r),o=a-Math.min(t,n,r),s=o?a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o:0;return{h:Sd(60*(s<0?s+6:s)),s:Sd(a?o/a*100:0),v:Sd(a/255*100),a:i}},kd=t.memo((function(e){var n=e.hue,r=e.onChange,i=_d(["react-colorful__hue",e.className]);return t.createElement("div",{className:i},t.createElement(xd,{onMove:function(e){r({h:360*e.left})},onKey:function(e){r({h:md(n+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":Sd(n),"aria-valuemax":"360","aria-valuemin":"0"},t.createElement(wd,{className:"react-colorful__hue-pointer",left:n/360,color:Cd({h:n,s:100,v:100,a:1})})))})),Bd=t.memo((function(e){var n=e.hsva,r=e.onChange,i={backgroundColor:Cd({h:n.h,s:100,v:100,a:1})};return t.createElement("div",{className:"react-colorful__saturation",style:i},t.createElement(xd,{onMove:function(e){r({s:100*e.left,v:100-100*e.top})},onKey:function(e){r({s:md(n.s+100*e.left,0,100),v:md(n.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Sd(n.s)+"%, Brightness "+Sd(n.v)+"%"},t.createElement(wd,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:Cd(n)})))})),Rd=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0};function Pd(e,n,r){var i=vd(r),a=(0,t.useState)((function(){return e.toHsva(n)})),o=a[0],s=a[1],l=(0,t.useRef)({color:n,hsva:o});(0,t.useEffect)((function(){if(!e.equal(n,l.current.color)){var t=e.toHsva(n);l.current={hsva:t,color:n},s(t)}}),[n,e]),(0,t.useEffect)((function(){var t;Rd(o,l.current.hsva)||e.equal(t=e.fromHsva(o),l.current.color)||(l.current={hsva:o,color:t},i(t))}),[o,e,i]);var u=(0,t.useCallback)((function(e){s((function(t){return Object.assign({},t,e)}))}),[]);return[o,u]}var Dd,Ld="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,Nd=new Map,Fd=function(e){Ld((function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!Nd.has(t)){var r=t.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',Nd.set(t,r);var i=Dd||n.nc;i&&r.setAttribute("nonce",i),t.head.appendChild(r)}}),[])},Od=function(e){var n=e.className,r=e.colorModel,i=e.color,a=void 0===i?r.defaultColor:i,o=e.onChange,s=pd(e,["className","colorModel","color","onChange"]),l=(0,t.useRef)(null);Fd(l);var u=Pd(r,a,o),c=u[0],f=u[1],d=_d(["react-colorful",n]);return t.createElement("div",hd({},s,{ref:l,className:d}),t.createElement(Bd,{hsva:c,onChange:f}),t.createElement(kd,{hue:c.h,onChange:f,className:"react-colorful__last-control"}))},Ud=function(e){var n=e.className,r=e.hsva,i=e.onChange,a={backgroundImage:"linear-gradient(90deg, "+Td(Object.assign({},r,{a:0}))+", "+Td(Object.assign({},r,{a:1}))+")"},o=_d(["react-colorful__alpha",n]),s=Sd(100*r.a);return t.createElement("div",{className:o},t.createElement("div",{className:"react-colorful__alpha-gradient",style:a}),t.createElement(xd,{onMove:function(e){i({a:e.left})},onKey:function(e){i({a:md(r.a+e.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},t.createElement(wd,{className:"react-colorful__alpha-pointer",left:r.a,color:Td(r)})))},zd=function(e){var n=e.className,r=e.colorModel,i=e.color,a=void 0===i?r.defaultColor:i,o=e.onChange,s=pd(e,["className","colorModel","color","onChange"]),l=(0,t.useRef)(null);Fd(l);var u=Pd(r,a,o),c=u[0],f=u[1],d=_d(["react-colorful",n]);return t.createElement("div",hd({},s,{ref:l,className:d}),t.createElement(Bd,{hsva:c,onChange:f}),t.createElement(kd,{hue:c.h,onChange:f}),t.createElement(Ud,{hsva:c,onChange:f,className:"react-colorful__last-control"}))},Gd={defaultColor:{r:0,g:0,b:0,a:1},toHsva:Id,fromHsva:Md,equal:Rd},Qd=function(e){return t.createElement(zd,hd({},e,{colorModel:Gd}))},Zd={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return Id({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(t=Md(e)).r,g:t.g,b:t.b};var t},equal:Rd},Hd=function(e){return t.createElement(Od,hd({},e,{colorModel:Zd}))},jd=n(2007),Vd=n.n(jd);function Wd(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function Xd(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;function Yd(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function Kd(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Yd(arguments[t]));return e}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Jd=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function qd(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=Jd.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var $d=[".DS_Store","Thumbs.db"];function eh(e){return"object"===typeof e&&null!==e}function th(e){return ah(e.target.files).map((function(e){return qd(e)}))}function nh(e){return Wd(this,void 0,void 0,(function(){return Xd(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return qd(e)}))]}}))}))}function rh(e,t){return Wd(this,void 0,void 0,(function(){var n;return Xd(this,(function(r){switch(r.label){case 0:return null===e?[2,[]]:e.items?(n=ah(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(oh))]):[3,2];case 1:return[2,ih(sh(r.sent()))];case 2:return[2,ih(ah(e.files).map((function(e){return qd(e)})))]}}))}))}function ih(e){return e.filter((function(e){return-1===$d.indexOf(e.name)}))}function ah(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function oh(e){if("function"!==typeof e.webkitGetAsEntry)return lh(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?ch(t):lh(e)}function sh(e){return e.reduce((function(e,t){return Kd(e,Array.isArray(t)?sh(t):[t])}),[])}function lh(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=qd(t);return Promise.resolve(n)}function uh(e){return Wd(this,void 0,void 0,(function(){return Xd(this,(function(t){return[2,e.isDirectory?ch(e):fh(e)]}))}))}function ch(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function i(){var a=this;t.readEntries((function(t){return Wd(a,void 0,void 0,(function(){var a,o,s;return Xd(this,(function(l){switch(l.label){case 0:if(t.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return a=l.sent(),e(a),[3,4];case 3:return o=l.sent(),n(o),[3,4];case 4:return[3,6];case 5:s=Promise.all(t.map(uh)),r.push(s),i(),l.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function fh(e){return Wd(this,void 0,void 0,(function(){return Xd(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=qd(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var dh=n(9998);function hh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ph(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hh(Object(n),!0).forEach((function(t){vh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return gh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yh="file-invalid-type",Ah="file-too-large",bh="file-too-small",xh="too-many-files",_h=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:yh,message:"File type must be ".concat(t)}},wh=function(e){return{code:Ah,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},Sh=function(e){return{code:bh,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},Eh={code:xh,message:"Too many files"};function Ch(e,t){var n="application/x-moz-file"===e.type||(0,dh.Z)(e,t);return[n,n?null:_h(t)]}function Th(e,t,n){if(Mh(e.size))if(Mh(t)&&Mh(n)){if(e.size>n)return[!1,wh(n)];if(e.size<t)return[!1,Sh(t)]}else{if(Mh(t)&&e.size<t)return[!1,Sh(t)];if(Mh(n)&&e.size>n)return[!1,wh(n)]}return[!0,null]}function Mh(e){return void 0!==e&&null!==e}function Ih(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function kh(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function Bh(e){e.preventDefault()}function Rh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some((function(t){return!Ih(e)&&t&&t.apply(void 0,[e].concat(r)),Ih(e)}))}}function Ph(e){return e="string"===typeof e?e.split(","):e,[{description:"everything",accept:Array.isArray(e)?e.filter((function(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)})).reduce((function(e,t){return ph(ph({},e),{},vh({},t,[]))}),{}):{}}]}var Dh=["children"],Lh=["open"],Nh=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Fh=["refKey","onChange","onClick"];function Oh(e){return function(e){if(Array.isArray(e))return Gh(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||zh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zh(e,t){if(e){if("string"===typeof e)return Gh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gh(e,t):void 0}}function Gh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qh(Object(n),!0).forEach((function(t){Hh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jh(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Vh=(0,t.forwardRef)((function(e,n){var r=e.children,i=Yh(jh(e,Dh)),a=i.open,o=jh(i,Lh);return(0,t.useImperativeHandle)(n,(function(){return{open:a}}),[a]),t.createElement(t.Fragment,null,r(Zh(Zh({},o),{},{open:a})))}));Vh.displayName="Dropzone";var Wh={disabled:!1,getFilesFromEvent:function(e){return Wd(this,void 0,void 0,(function(){return Xd(this,(function(t){return eh(e)&&eh(e.dataTransfer)?[2,rh(e.dataTransfer,e.type)]:function(e){return eh(e)&&eh(e.target)}(e)?[2,th(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,nh(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Vh.defaultProps=Wh,Vh.propTypes={children:Vd().func,accept:Vd().oneOfType([Vd().string,Vd().arrayOf(Vd().string)]),multiple:Vd().bool,preventDropOnDocument:Vd().bool,noClick:Vd().bool,noKeyboard:Vd().bool,noDrag:Vd().bool,noDragEventsBubbling:Vd().bool,minSize:Vd().number,maxSize:Vd().number,maxFiles:Vd().number,disabled:Vd().bool,getFilesFromEvent:Vd().func,onFileDialogCancel:Vd().func,onFileDialogOpen:Vd().func,useFsAccessApi:Vd().bool,onDragEnter:Vd().func,onDragLeave:Vd().func,onDragOver:Vd().func,onDrop:Vd().func,onDropAccepted:Vd().func,onDropRejected:Vd().func,validator:Vd().func};var Xh={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function Yh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Zh(Zh({},Wh),e),r=n.accept,i=n.disabled,a=n.getFilesFromEvent,o=n.maxSize,s=n.minSize,l=n.multiple,u=n.maxFiles,c=n.onDragEnter,f=n.onDragLeave,d=n.onDragOver,h=n.onDrop,p=n.onDropAccepted,v=n.onDropRejected,m=n.onFileDialogCancel,g=n.onFileDialogOpen,y=n.useFsAccessApi,A=n.preventDropOnDocument,b=n.noClick,x=n.noKeyboard,_=n.noDrag,w=n.noDragEventsBubbling,S=n.validator,E=(0,t.useMemo)((function(){return"function"===typeof g?g:Jh}),[g]),C=(0,t.useMemo)((function(){return"function"===typeof m?m:Jh}),[m]),T=(0,t.useRef)(null),M=(0,t.useRef)(null),I=Uh((0,t.useReducer)(Kh,Xh),2),k=I[0],B=I[1],R=k.isFocused,P=k.isFileDialogActive,D=k.draggedFiles,L=(0,t.useRef)("undefined"!==typeof window&&window.isSecureContext&&y&&"showOpenFilePicker"in window),N=function(){!L.current&&P&&setTimeout((function(){M.current&&(M.current.files.length||(B({type:"closeDialog"}),C()))}),300)};(0,t.useEffect)((function(){return window.addEventListener("focus",N,!1),function(){window.removeEventListener("focus",N,!1)}}),[M,P,C,L]);var F=(0,t.useRef)([]),O=function(e){T.current&&T.current.contains(e.target)||(e.preventDefault(),F.current=[])};(0,t.useEffect)((function(){return A&&(document.addEventListener("dragover",Bh,!1),document.addEventListener("drop",O,!1)),function(){A&&(document.removeEventListener("dragover",Bh),document.removeEventListener("drop",O))}}),[T,A]);var U=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),q(e),F.current=[].concat(Oh(F.current),[e.target]),kh(e)&&Promise.resolve(a(e)).then((function(t){Ih(e)&&!w||(B({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e))}))}),[a,c,w]),z=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),q(e);var t=kh(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&d&&d(e),!1}),[d,w]),G=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),q(e);var t=F.current.filter((function(e){return T.current&&T.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),F.current=t,t.length>0||(B({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),kh(e)&&f&&f(e))}),[T,f,w]),Q=(0,t.useCallback)((function(e,t){var n=[],i=[];e.forEach((function(e){var t=Uh(Ch(e,r),2),a=t[0],l=t[1],u=Uh(Th(e,s,o),2),c=u[0],f=u[1],d=S?S(e):null;if(a&&c&&!d)n.push(e);else{var h=[l,f];d&&(h=h.concat(d)),i.push({file:e,errors:h.filter((function(e){return e}))})}})),(!l&&n.length>1||l&&u>=1&&n.length>u)&&(n.forEach((function(e){i.push({file:e,errors:[Eh]})})),n.splice(0)),B({acceptedFiles:n,fileRejections:i,type:"setFiles"}),h&&h(n,i,t),i.length>0&&v&&v(i,t),n.length>0&&p&&p(n,t)}),[B,l,r,s,o,u,h,p,v,S]),Z=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),q(e),F.current=[],kh(e)&&Promise.resolve(a(e)).then((function(t){Ih(e)&&!w||Q(t,e)})),B({type:"reset"})}),[a,Q,w]),H=(0,t.useCallback)((function(){if(L.current){B({type:"openDialog"}),E();var e={multiple:l,types:Ph(r)};window.showOpenFilePicker(e).then((function(e){return a(e)})).then((function(e){Q(e,null),B({type:"closeDialog"})})).catch((function(e){!function(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)&&(L.current=!1,M.current&&(M.current.value=null,M.current.click())):(C(e),B({type:"closeDialog"}))}))}else M.current&&(B({type:"openDialog"}),E(),M.current.value=null,M.current.click())}),[B,E,C,y,Q,r,l]),j=(0,t.useCallback)((function(e){T.current&&T.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),H()))}),[T,H]),V=(0,t.useCallback)((function(){B({type:"focus"})}),[]),W=(0,t.useCallback)((function(){B({type:"blur"})}),[]),X=(0,t.useCallback)((function(){b||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?H():setTimeout(H,0))}),[b,H]),Y=function(e){return i?null:e},K=function(e){return x?null:Y(e)},J=function(e){return _?null:Y(e)},q=function(e){w&&e.stopPropagation()},$=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.role,a=e.onKeyDown,o=e.onFocus,s=e.onBlur,l=e.onClick,u=e.onDragEnter,c=e.onDragOver,f=e.onDragLeave,d=e.onDrop,h=jh(e,Nh);return Zh(Zh(Hh({onKeyDown:K(Rh(a,j)),onFocus:K(Rh(o,V)),onBlur:K(Rh(s,W)),onClick:Y(Rh(l,X)),onDragEnter:J(Rh(u,U)),onDragOver:J(Rh(c,z)),onDragLeave:J(Rh(f,G)),onDrop:J(Rh(d,Z)),role:"string"===typeof r&&""!==r?r:"button"},n,T),i||x?{}:{tabIndex:0}),h)}}),[T,j,V,W,X,U,z,G,Z,x,_,i]),ee=(0,t.useCallback)((function(e){e.stopPropagation()}),[]),te=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.onChange,a=e.onClick,o=jh(e,Fh);return Zh(Zh({},Hh({accept:r,multiple:l,type:"file",style:{display:"none"},onChange:Y(Rh(i,Z)),onClick:Y(Rh(a,ee)),tabIndex:-1},n,M)),o)}}),[M,r,l,Z,i]),ne=D.length,re=ne>0&&function(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,a=e.multiple,o=e.maxFiles;return!(!a&&t.length>1||a&&o>=1&&t.length>o)&&t.every((function(e){var t=mh(Ch(e,n),1)[0],a=mh(Th(e,r,i),1)[0];return t&&a}))}({files:D,accept:r,minSize:s,maxSize:o,multiple:l,maxFiles:u}),ie=ne>0&&!re;return Zh(Zh({},k),{},{isDragAccept:re,isDragReject:ie,isFocused:R&&!i,getRootProps:$,getInputProps:te,rootRef:T,inputRef:M,open:Y(H)})}function Kh(e,t){switch(t.type){case"focus":return Zh(Zh({},e),{},{isFocused:!0});case"blur":return Zh(Zh({},e),{},{isFocused:!1});case"openDialog":return Zh(Zh({},Xh),{},{isFileDialogActive:!0});case"closeDialog":return Zh(Zh({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive,r=t.draggedFiles;return Zh(Zh({},e),{},{draggedFiles:r,isDragActive:n});case"setFiles":return Zh(Zh({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Zh({},Xh);default:return e}}function Jh(){}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var qh,$h,ep=n(8089),tp=n.n(ep),np=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(".")};function rp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=(0,t.useRef)(null),r=(0,t.useRef)(null),a=(0,t.useState)(!1),o=(0,i.Z)(a,2),s=o[0],l=o[1],u=(0,t.useCallback)((function(){return l(!0)}),[]),c=(0,t.useCallback)((function(){return l(!1)}),[]);return(0,t.useLayoutEffect)((function(){if(s){var t=n.current.getBoundingClientRect(),i=t.bottom,a=t.top,o=t.left,l=i+r.current.getBoundingClientRect().height>window.innerHeight-40?"up":"down";r.current.style.position="fixed",r.current.style.zIndex="10000",r.current.style.left=o+"px","down"===l?r.current.style.top=i+e+"px":r.current.style.bottom=window.innerHeight-a+e+"px"}}),[e,s]),{popinRef:n,wrapperRef:r,shown:s,show:u,hide:c}}!function(e){e.forEach((function(e){dd.indexOf(e)<0&&(e(cd,id),dd.push(e))}))}([function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var a={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,o,s=r[this.toHex()];if(s)return s;if(null==t?void 0:t.closest){var l=this.toRgb(),u=1/0,c="black";if(!a.length)for(var f in n)a[f]=new e(n[f]).toRgb();for(var d in n){var h=(i=l,o=a[d],Math.pow(i.r-o.r,2)+Math.pow(i.g-o.g,2)+Math.pow(i.b-o.b,2));h<u&&(u=h,c=d)}return c}},t.string.push([function(t){var r=t.toLowerCase(),i="transparent"===r?"#0000":n[r];return i?new e(i).toRgb():null},"name"])}]);var ip={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};_a.extend({color:function(){return function(e){return fd(e).isValid()}}});function ap(e,t){var n=t.format,r=t.hasAlpha,i=t.isString,a=e[ip[n]+(i&&"hex"!==n?"String":"")]();return"object"!==typeof a||r?a:function(e,t){var n=Eu({},e);return t.forEach((function(t){return t in e&&delete n[t]})),n}(a,["a"])}var op=function(e,t){var n=fd(e);if(!n.isValid())throw Error("Invalid color");return ap(n,t)},sp=Object.freeze({__proto__:null,schema:function(e){return _a().color().test(e)},sanitize:op,format:function(e,t){return ap(fd(e),Eu(Eu({},t),{},{isString:!0,format:"hex"}))},normalize:function(e){var t=e.value,n=function(e){return od(e)[1]}(t),r={format:"name"===n?"hex":n,hasAlpha:"object"===typeof t?"a"in t:"hex"===n&&8===t.length||/^(rgba)|(hsla)|(hsva)/.test(t),isString:"string"===typeof t};return{value:op(t,r),settings:r}}}),lp=vc("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:'url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')',$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),up=vc("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),cp=vc("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function fp(e,t){return"rgb"!==t?fd(e).toRgb():e}function dp(e){var n=e.value,r=e.displayValue,a=e.settings,o=e.onUpdate,s=sc(),l=s.emitOnEditStart,u=s.emitOnEditEnd,c=a.format,f=a.hasAlpha,d=rp(),h=d.popinRef,p=d.wrapperRef,v=d.shown,m=d.show,g=d.hide,y=(0,t.useRef)(0),A=(0,t.useState)((function(){return fp(n,c)})),b=(0,i.Z)(A,2),x=b[0],_=b[1],w=f?Qd:Hd,S=function(){g(),u(),window.clearTimeout(y.current)};return(0,t.useEffect)((function(){return function(){return window.clearTimeout(y.current)}}),[]),t.createElement(t.Fragment,null,t.createElement(lp,{ref:h,active:v,onClick:function(){return _(fp(n,c)),m(),void l()},style:{color:r}}),v&&t.createElement(zc,null,t.createElement(Fc,{onPointerUp:S}),t.createElement(cp,{ref:p,onMouseEnter:function(){return window.clearTimeout(y.current)},onMouseLeave:function(e){return 0===e.buttons&&void(y.current=window.setTimeout(S,500))}},t.createElement(w,{color:x,onChange:o}))))}var hp=Eu({component:function(){var e=sc(),n=e.value,r=e.displayValue,i=e.label,a=e.onChange,o=e.onUpdate,s=e.settings;return t.createElement(Yc,{input:!0},t.createElement(Hc,null,i),t.createElement(up,null,t.createElement(dp,{value:n,displayValue:r,onChange:a,onUpdate:o,settings:s}),t.createElement(Ec,{value:r,onChange:a,onUpdate:o})))}},sp);var pp=Eu({component:function(){var e=sc(),n=e.label,r=e.displayValue,i=e.onUpdate,a=e.settings;return t.createElement(Yc,{input:!0},t.createElement(Hc,null,n),t.createElement(Bf,{value:r,settings:a,onUpdate:i}))}},Of(["x","y","z"])),vp=vc("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),mp=vc("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function gp(e){var n=e.value,r=e.settings,a=e.onUpdate,o=(0,t.useRef)(),s=(0,t.useRef)(0),l=(0,t.useRef)(0),u=(0,t.useRef)(1),c=(0,t.useState)(!1),f=(0,i.Z)(c,2),d=f[0],h=f[1],p=(0,t.useState)(!1),v=(0,i.Z)(p,2),m=v[0],g=v[1],y=qc(),A=(0,i.Z)(y,2),b=A[0],x=A[1],_=(0,t.useRef)(null),w=(0,t.useRef)(null);(0,t.useLayoutEffect)((function(){if(d){var e=_.current.getBoundingClientRect(),t=e.top,n=e.left,r=e.width,i=e.height;w.current.style.left=n+r/2+"px",w.current.style.top=t+i/2+"px"}}),[d]);var S=(0,i.Z)(r.keys,2),E=S[0],C=S[1],T="invertY"===r.joystick?1:-1,M=r[E].step,I=r[C].step,k=yc("sizes","joystickWidth"),B=yc("sizes","joystickHeight"),R=.8*parseFloat(k)/2,P=.8*parseFloat(B)/2,D=(0,t.useCallback)((function(){o.current||(g(!0),s.current&&x({x:s.current*R}),l.current&&x({y:l.current*-P}),o.current=window.setInterval((function(){a((function(e){var t,n,r=M*s.current*u.current,i=T*I*l.current*u.current;return Array.isArray(e)?(t={},(0,Xe.Z)(t,E,e[0]+r),(0,Xe.Z)(t,C,e[1]+i),t):(n={},(0,Xe.Z)(n,E,e[E]+r),(0,Xe.Z)(n,C,e[C]+i),n)}))}),16))}),[R,P,a,x,M,I,E,C,T]),L=(0,t.useCallback)((function(){window.clearTimeout(o.current),o.current=void 0,g(!1)}),[]);(0,t.useEffect)((function(){function e(e){u.current=qu(e)}return window.addEventListener("keydown",e),window.addEventListener("keyup",e),function(){window.clearTimeout(o.current),window.removeEventListener("keydown",e),window.removeEventListener("keyup",e)}}),[]);var N=Jc((function(e){var t=e.first,r=e.active,o=(0,i.Z)(e.delta,2),c=o[0],f=o[1],d=(0,i.Z)(e.movement,2),p=d[0],v=d[1];t&&h(!0);var m=Cu(p,-R,R),g=Cu(v,-P,P);s.current=Math.abs(p)>Math.abs(m)?Math.sign(p-m):0,l.current=Math.abs(v)>Math.abs(g)?Math.sign(g-v):0;var y,A=n[E],b=n[C];r?(s.current||(A+=c*M*u.current,x({x:m})),l.current||(b-=T*f*I*u.current,x({y:g})),s.current||l.current?D():L(),a((y={},(0,Xe.Z)(y,E,A),(0,Xe.Z)(y,C,b),y))):(h(!1),s.current=0,l.current=0,x({x:0,y:0}),L())}));return t.createElement(vp,ac({ref:_},N()),d&&t.createElement(zc,null,t.createElement(mp,{ref:w,isOutOfBounds:m},t.createElement("div",null),t.createElement("span",{ref:b}))))}var yp=vc("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});var Ap=["joystick"],bp=Of(["x","y"]),xp=Eu(Eu({component:function(){var e=sc(),n=e.label,r=e.displayValue,i=e.onUpdate,a=e.settings;return t.createElement(Yc,{input:!0},t.createElement(Hc,null,n),t.createElement(yp,{withJoystick:!!a.joystick},a.joystick&&t.createElement(gp,{value:r,settings:a,onUpdate:i}),t.createElement(Bf,{value:r,settings:a,onUpdate:i})))}},bp),{},{normalize:function(e){var t=e.joystick,n=void 0===t||t,r=uu(e,Ap),i=bp.normalize(r);return{value:i.value,settings:Eu(Eu({},i.settings),{},{joystick:n})}}}),_p=Object.freeze({__proto__:null,sanitize:function(e){if(void 0!==e){if(e instanceof File)try{return URL.createObjectURL(e)}catch(t){return}if("string"===typeof e&&0===e.indexOf("blob:"))return e;throw Error("Invalid image format [undefined | blob |\xa0File].")}},schema:function(e,t){return"object"===typeof t&&"image"in t},normalize:function(e){return{value:e.image}}}),wp=vc("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Sp=vc("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Ep=vc("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Cp=vc("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Tp=vc("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Mp=vc("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});var Ip=Eu({component:function(){var e=sc(),n=e.label,r=e.value,i=e.onUpdate,a=e.disabled,o=rp(),s=o.popinRef,l=o.wrapperRef,u=o.shown,c=o.show,f=o.hide,d=(0,t.useCallback)((function(e){e.length&&i(e[0])}),[i]),h=(0,t.useCallback)((function(e){e.stopPropagation(),i(void 0)}),[i]),p=Yh({maxFiles:1,accept:"image/*",onDrop:d,disabled:a}),v=p.getRootProps,m=p.getInputProps,g=p.isDragAccept;return t.createElement(Yc,{input:!0},t.createElement(Hc,null,n),t.createElement(wp,null,t.createElement(Ep,{ref:s,hasImage:!!r,onPointerDown:function(){return!!r&&c()},onPointerUp:f,style:{backgroundImage:r?"url(".concat(r,")"):"none"}}),u&&!!r&&t.createElement(zc,null,t.createElement(Fc,{onPointerUp:f,style:{cursor:"pointer"}}),t.createElement(Cp,{ref:l,style:{backgroundImage:"url(".concat(r,")")}})),t.createElement(Sp,v({isDragAccept:g}),t.createElement("input",m()),t.createElement(Tp,null,g?"drop image":"click or drop")),t.createElement(Mp,{onClick:h,disabled:!r})))}},_p),kp=_a().number(),Bp=function(e){return{min:e[0],max:e[1]}},Rp=function(e,t,n){var r=(0,i.Z)(t.bounds,2),a=r[0],o=r[1],s=Array.isArray(e)?Bp(e):e,l=Eu(Eu({},{min:n[0],max:n[1]}),s),u=l.min,c=l.max;return[Cu(Number(u),a,Math.max(a,c)),Cu(Number(c),Math.min(o,u),o)]},Pp=Object.freeze({__proto__:null,schema:function(e,t){return _a().array().length(2).every.number().test(e)&&_a().schema({min:kp,max:kp}).test(t)},format:Bp,sanitize:Rp,normalize:function(e){var t=e.value,n=e.min,r=e.max,i={min:n,max:r},a=[n,r],o=Eu(Eu({},Rf(Bp(t),{min:i,max:i})),{},{bounds:a});return{value:Rp(Bp(t),o,t),settings:o}}}),Dp=["value","bounds","onDrag"],Lp=["bounds"],Np=vc("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Fp(e){var n=e.value,r=(0,i.Z)(e.bounds,2),a=r[0],o=r[1],s=e.onDrag,l=uu(e,Dp),u=(0,t.useRef)(null),c=(0,t.useRef)(null),f=(0,t.useRef)(null),d=(0,t.useRef)(0),h=yc("sizes","scrubberWidth"),p=Jc((function(e){var t=e.event,r=e.first,p=(0,i.Z)(e.xy,1)[0],v=(0,i.Z)(e.movement,1)[0],m=e.memo,g=void 0===m?{}:m;if(r){var y=u.current.getBoundingClientRect(),A=y.width,b=y.left;d.current=A-parseFloat(h);var x=(null===t||void 0===t?void 0:t.target)===c.current||(null===t||void 0===t?void 0:t.target)===f.current;g.pos=Bu((p-b)/A,a,o);var _=Math.abs(g.pos-n.min)-Math.abs(g.pos-n.max);g.key=_<0||0===_&&g.pos<=n.min?"min":"max",x&&(g.pos=n[g.key])}var w=g.pos+Bu(v/d.current,0,o-a);return s((0,Xe.Z)({},g.key,cf(w,l[g.key]))),g})),v="calc(".concat(ku(n.min,a,o)," * (100% - ").concat(h," - 8px) + 4px)"),m="calc(".concat(1-ku(n.max,a,o)," * (100% - ").concat(h," - 8px) + 4px)");return t.createElement(af,ac({ref:u},p()),t.createElement(nf,null,t.createElement(of,{style:{left:v,right:m}})),t.createElement(rf,{position:"left",ref:c,style:{left:v}}),t.createElement(rf,{position:"right",ref:f,style:{right:m}}))}var Op=Eu({component:function(){var e=sc(),n=e.label,r=e.displayValue,i=e.onUpdate,a=e.settings,o=uu(a,Lp);return t.createElement(t.Fragment,null,t.createElement(Yc,{input:!0},t.createElement(Hc,null,n),t.createElement(Np,null,t.createElement(Fp,ac({value:r},a,{onDrag:i})),t.createElement(Bf,{value:r,settings:o,onUpdate:i,innerLabelTrim:0}))))}},Pp),Up=["type","value"],zp=["onChange","transient","onEditStart","onEditEnd"],Gp=function(){var e,t=this,n=w((e=function(){return{data:{}}},function(t,n,r){var i=r.subscribe;return r.subscribe=function(e,t,n){var a=e;if(t){var o=(null==n?void 0:n.equalityFn)||Object.is,s=e(r.getState());a=function(n){var r=e(n);if(!o(s,r)){var i=s;t(s=r,i)}},(null==n?void 0:n.fireImmediately)&&t(s,s)}return i(a)},e(t,n,r)})),r=function(){var e=new Map;return{on:function(t,n){var r=e.get(t);void 0===r&&(r=new Set,e.set(t,r)),r.add(n)},off:function(t,n){var r=e.get(t);void 0!==r&&(r.delete(n),0===r.size&&e.delete(t))},emit:function(t){var n=e.get(t);if(void 0!==n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o,s=(0,v.Z)(n);try{for(s.s();!(o=s.n()).done;)o.value.apply(void 0,i)}catch(l){s.e(l)}finally{s.f()}}}}}();this.storeId="_"+Math.random().toString(36).substr(2,9),this.useStore=n;var a={},o=new Set;this.getVisiblePaths=function(){var e=t.getData(),n=Object.keys(e),r=[];Object.entries(a).forEach((function(e){var a=(0,i.Z)(e,2),o=a[0],s=a[1];s.render&&n.some((function(e){return 0===e.indexOf(o)}))&&!s.render(t.get)&&r.push(o+".")}));var s=[];return o.forEach((function(n){n in e&&e[n].__refCount>0&&r.every((function(e){return-1===n.indexOf(e)}))&&(!e[n].render||e[n].render(t.get))&&s.push(n)})),s},this.setOrderedPaths=function(e){e.forEach((function(e){return o.add(e)}))},this.orderPaths=function(e){return t.setOrderedPaths(e),e},this.disposePaths=function(e){n.setState((function(t){var n=t.data;return e.forEach((function(e){if(e in n){var t=n[e];t.__refCount--,0===t.__refCount&&t.type in zu&&delete n[e]}})),{data:n}}))},this.dispose=function(){n.setState((function(){return{data:{}}}))},this.getFolderSettings=function(e){return a[e]||{}},this.getData=function(){return n.getState().data},this.addData=function(e,t){n.setState((function(n){var r=n.data;return Object.entries(e).forEach((function(e){var n=(0,i.Z)(e,2),a=n[0],o=n[1],s=r[a];if(s){var l=o.type,u=(o.value,uu(o,Up));l!==s.type?du(iu.INPUT_TYPE_OVERRIDE,l):((0===s.__refCount||t)&&Object.assign(s,u),s.__refCount++)}else r[a]=Eu(Eu({},o),{},{__refCount:1})})),{data:r}}))},this.setValueAtPath=function(e,r,i){n.setState((function(n){var a=n.data;return Xu(a[e],r,e,t,i),{data:a}}))},this.setSettingsAtPath=function(e,t){n.setState((function(n){var r=n.data;return r[e].settings=Eu(Eu({},r[e].settings),t),{data:r}}))},this.disableInputAtPath=function(e,t){n.setState((function(n){var r=n.data;return r[e].disabled=t,{data:r}}))},this.set=function(e,t){n.setState((function(n){var r=n.data;return Object.entries(e).forEach((function(e){var n=(0,i.Z)(e,2),a=n[0],o=n[1];try{Xu(r[a],o,void 0,void 0,t)}catch(s){0}})),{data:r}}))},this.getInput=function(e){try{return t.getData()[e]}catch(n){du(iu.PATH_DOESNT_EXIST,e)}},this.get=function(e){var n;return null===(n=t.getInput(e))||void 0===n?void 0:n.value},this.emitOnEditStart=function(e){r.emit("onEditStart:".concat(e),t.get(e),e,Eu(Eu({},t.getInput(e)),{},{get:t.get}))},this.emitOnEditEnd=function(e){r.emit("onEditEnd:".concat(e),t.get(e),e,Eu(Eu({},t.getInput(e)),{},{get:t.get}))},this.subscribeToEditStart=function(e,t){var n="onEditStart:".concat(e);return r.on(n,t),function(){return r.off(n,t)}},this.subscribeToEditEnd=function(e,t){var n="onEditEnd:".concat(e);return r.on(n,t),function(){return r.off(n,t)}};var s=function e(t,n,r){var o={};return Object.entries(t).forEach((function(t){var s=(0,i.Z)(t,2),l=s[0],u=s[1];if(""===l)return du(iu.EMPTY_KEY);var c=np(n,l);if(u.type===zu.FOLDER){var f=e(u.schema,c,r);Object.assign(o,f),c in a||(a[c]=u.settings)}else if(l in r)du(iu.DUPLICATE_KEYS,l,c,r[l].path);else{var d=Wu(u,l,c,o);if(d){var h=d.type,p=d.options,v=d.input,m=p.onChange,g=p.transient,y=p.onEditStart,A=p.onEditEnd,b=uu(p,zp);o[c]=Eu(Eu(Eu({type:h},b),v),{},{fromPanel:!0}),r[l]={path:c,onChange:m,transient:g,onEditStart:y,onEditEnd:A}}else du(iu.UNKNOWN_INPUT,c,u)}})),o};this.getDataFromSchema=function(e){var t={};return[s(e,"",t),t]}};new Gp;var Qp=function(e){return"__levaInput"in e},Zp=["type","label","path","valueKey","value","settings","setValue","disabled"];function Hp(e){var n=e.type,r=e.label,i=e.path,a=e.valueKey,o=e.value,s=e.settings,l=e.setValue,u=e.disabled,c=uu(e,Zp),f=Kc({type:n,value:o,settings:s,setValue:l}),d=f.displayValue,h=f.onChange,p=f.onUpdate,v=yu[n].component;return v?t.createElement(oc.Provider,{value:Eu({key:a,path:i,id:""+i,label:r,displayValue:d,value:o,onChange:h,onUpdate:p,settings:s,setValue:l,disabled:u},c)},t.createElement(Nc,{disabled:u},t.createElement(v,null))):(du(iu.NO_COMPONENT_FOR_TYPE,n,i),null)}var jp=vc("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});var Vp=vc("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Wp=vc("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}});var Xp=vc("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"});var Yp=(0,t.forwardRef)((function(e,n){var r=e.initialValue,a=yc("colors","highlight3"),o=yc("colors","elevation2"),s=yc("colors","highlight1"),l=(0,t.useMemo)((function(){return[fd(s).alpha(.4).toRgbString(),fd(s).alpha(.1).toRgbString()]}),[s]),u=(0,i.Z)(l,2),c=u[0],f=u[1],d=(0,t.useRef)([r]),h=(0,t.useRef)(r),p=(0,t.useRef)(r),v=(0,t.useRef)(),m=(0,t.useCallback)((function(e,t){if(e){for(var n=e.width,r=e.height,i=new Path2D,s=n/100,l=.05*r,u=0;u<d.current.length;u++){var v=s*u,m=r-ku(d.current[u],h.current,p.current)*(r-2*l)-l;i.lineTo(v,m)}t.clearRect(0,0,n,r);var g=new Path2D(i);g.lineTo(s*(d.current.length+1),r),g.lineTo(0,r),g.lineTo(0,0);var y=t.createLinearGradient(0,0,0,r);y.addColorStop(0,c),y.addColorStop(1,f),t.fillStyle=y,t.fill(g),t.strokeStyle=o,t.lineJoin="round",t.lineWidth=14,t.stroke(i),t.strokeStyle=a,t.lineWidth=2,t.stroke(i)}}),[a,o,c,f]),g=function(e){var n=(0,t.useRef)(null),r=(0,t.useRef)(null),i=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var t=Ju((function(){n.current.width=n.current.offsetWidth*window.devicePixelRatio,n.current.height=n.current.offsetHeight*window.devicePixelRatio,e(n.current,r.current)}),250);return window.addEventListener("resize",t),i.current||(t(),i.current=!0),function(){return window.removeEventListener("resize",t)}}),[e]),(0,t.useEffect)((function(){r.current=n.current.getContext("2d")}),[]),[n,r]}(m),y=(0,i.Z)(g,2),A=y[0],b=y[1];return(0,t.useImperativeHandle)(n,(function(){return{frame:function(e){(void 0===h.current||e<h.current)&&(h.current=e),(void 0===p.current||e>p.current)&&(p.current=e),function(e,t){e.push(t),e.length>100&&e.shift()}(d.current,e),v.current=requestAnimationFrame((function(){return m(A.current,b.current)}))}}}),[A,b,m]),(0,t.useEffect)((function(){return function(){return cancelAnimationFrame(v.current)}}),[]),t.createElement(Xp,{ref:A})})),Kp=function(e){return Number.isFinite(e)?e.toPrecision(2):e.toString()},Jp=(0,t.forwardRef)((function(e,n){var r=e.initialValue,a=(0,t.useState)(Kp(r)),o=(0,i.Z)(a,2),s=o[0],l=o[1];return(0,t.useImperativeHandle)(n,(function(){return{frame:function(e){return l(Kp(e))}}}),[]),t.createElement("div",null,s)}));function qp(e){return"function"===typeof e?e():e.current}var $p=["type","label","key"],ev=(qh={},(0,Xe.Z)(qh,zu.BUTTON,(function(e){var n=e.onClick,r=e.settings,i=e.label,a=fc();return t.createElement(Yc,null,t.createElement(jp,{disabled:r.disabled,onClick:function(){return n(a.get)}},i))})),(0,Xe.Z)(qh,zu.BUTTON_GROUP,(function(e){var n=function(e){var t=e.label,n=e.opts,r="string"===typeof t&&""===t.trim()?null:t,i=n;return"object"===typeof n.opts&&(void 0!==i.label&&(r=n.label),i=n.opts),{label:r,opts:i}}(e),r=n.label,a=n.opts,o=fc();return t.createElement(Yc,{input:!!r},r&&t.createElement(Hc,null,r),t.createElement(Vp,null,Object.entries(a).map((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1];return t.createElement(Wp,{key:r,onClick:function(){return a(o.get)}},r)}))))})),(0,Xe.Z)(qh,zu.MONITOR,(function(e){var n=e.label,r=e.objectOrFn,i=e.settings,a=(0,t.useRef)(),o=(0,t.useRef)(qp(r));return(0,t.useEffect)((function(){var e=window.setInterval((function(){var e;document.hidden||null===(e=a.current)||void 0===e||e.frame(qp(r))}),i.interval);return function(){return window.clearInterval(e)}}),[r,i.interval]),t.createElement(Yc,{input:!0},t.createElement(Hc,{align:"top"},n),i.graph?t.createElement(Yp,{ref:a,initialValue:o.current}):t.createElement(Jp,{ref:a,initialValue:o.current}))})),qh),tv=t.memo((function(e){var n=e.path,r=function(e){var n=fc(),r=(0,t.useState)(ef(n.getData(),e)),a=(0,i.Z)(r,2),o=a[0],s=a[1],l=(0,t.useCallback)((function(t){return n.setValueAtPath(e,t,!0)}),[e,n]),u=(0,t.useCallback)((function(t){return n.setSettingsAtPath(e,t)}),[e,n]),c=(0,t.useCallback)((function(t){return n.disableInputAtPath(e,t)}),[e,n]),f=(0,t.useCallback)((function(){return n.emitOnEditStart(e)}),[e,n]),d=(0,t.useCallback)((function(){return n.emitOnEditEnd(e)}),[e,n]);return(0,t.useEffect)((function(){s(ef(n.getData(),e));var t=n.useStore.subscribe((function(t){return ef(t.data,e)}),s,{equalityFn:na});return function(){return t()}}),[n,e]),[o,{set:l,setSettings:u,disable:c,storeId:n.storeId,emitOnEditStart:f,emitOnEditEnd:d}]}(n),a=(0,i.Z)(r,2),o=a[0],s=a[1],l=s.set,u=s.setSettings,c=s.disable,f=s.storeId,d=s.emitOnEditStart,h=s.emitOnEditEnd;if(!o)return null;var p=o.type,v=o.label,m=o.key,g=uu(o,$p);if(p in zu){var y=ev[p];return t.createElement(y,ac({label:v,path:n},g))}return p in yu?t.createElement(Hp,ac({key:f+n,type:p,label:v,storeId:f,path:n,valueKey:m,setValue:l,setSettings:u,disable:c,emitOnEditStart:d,emitOnEditEnd:h},g)):(hu(iu.UNSUPPORTED_INPUT,p,n),null)}));function nv(e){var n=e.toggle,r=e.toggled,i=e.name;return t.createElement(Ic,{onClick:function(){return n()}},t.createElement(Wc,{toggled:r}),t.createElement("div",null,i))}var rv=function(e){var n=e.name,r=e.path,a=e.tree,o=fc(),s=np(r,n),l=o.getFolderSettings(s),u=l.collapsed,c=l.color,f=(0,t.useState)(!u),d=(0,i.Z)(f,2),h=d[0],p=d[1],v=(0,t.useRef)(null),m=yc("colors","folderWidgetColor"),g=yc("colors","folderTextColor");return(0,t.useLayoutEffect)((function(){v.current.style.setProperty("--leva-colors-folderWidgetColor",c||m),v.current.style.setProperty("--leva-colors-folderTextColor",c||g)}),[c,m,g]),t.createElement(Tc,{ref:v},t.createElement(nv,{name:n,toggled:h,toggle:function(){return p((function(e){return!e}))}}),t.createElement(iv,{parent:s,tree:a,toggled:h}))},iv=t.memo((function(e){var n=e.isRoot,r=void 0!==n&&n,a=e.fill,o=void 0!==a&&a,s=e.flat,l=void 0!==s&&s,u=e.parent,c=e.tree,f=e.toggled,d=function(e){var n=(0,t.useRef)(null),r=(0,t.useRef)(null),i=(0,t.useRef)(!0);return(0,t.useLayoutEffect)((function(){e||(n.current.style.height="0px",n.current.style.overflow="hidden")}),[]),(0,t.useEffect)((function(){if(!i.current){var t,a=n.current,o=function(){e&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),r.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",o,{once:!0});var s=r.current.getBoundingClientRect().height;return a.style.height=s+"px",e||(a.style.overflow="hidden",t=window.setTimeout((function(){return a.style.height="0px"}),50)),function(){a.removeEventListener("transitionend",o),clearTimeout(t)}}i.current=!1}),[e]),{wrapperRef:n,contentRef:r}}(f),h=d.wrapperRef,p=d.contentRef,v=fc(),m=function(e){var t,n=(0,i.Z)(e,2),r=n[0],a=n[1];return(Qp(a)?null===(t=v.getInput(a.path))||void 0===t?void 0:t.order:v.getFolderSettings(np(u,r)).order)||0},g=Object.entries(c).sort((function(e,t){return m(e)-m(t)}));return t.createElement(Mc,{ref:h,isRoot:r,fill:o,flat:l},t.createElement(kc,{ref:p,isRoot:r,toggled:f},g.map((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1];return Qp(a)?t.createElement(tv,{key:a.path,valueKey:a.valueKey,path:a.path}):t.createElement(rv,{key:r,name:r,path:u,tree:a})}))))})),av=vc("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:(0,Xe.Z)({},"".concat(Rc),{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"})},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),ov=vc("i",{$flexCenter:"",width:40,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),sv=vc("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),lv=vc("div",($h={$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md"},(0,Xe.Z)($h,"> ".concat(ov),{height:30}),(0,Xe.Z)($h,"variants",{toggled:{true:{height:30},false:{height:0}}}),$h)),uv=vc("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),cv=vc("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:40}}}}),fv=t.forwardRef((function(e,n){var r=e.setFilter,a=e.toggle,o=(0,t.useState)(""),s=(0,i.Z)(o,2),l=s[0],u=s[1],c=(0,t.useMemo)((function(){return Ju(r,250)}),[r]);return(0,t.useEffect)((function(){c(l)}),[l,c]),t.createElement(t.Fragment,null,t.createElement(uv,{ref:n,value:l,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:function(e){return e.stopPropagation()},onChange:function(e){var t=e.currentTarget.value;a(!0),u(t)}}),t.createElement(ov,{onClick:function(){return r(""),void u("")},style:{visibility:l?"visible":"hidden"}},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},t.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))}));function dv(e){var n=e.setFilter,r=e.onDrag,a=e.onDragStart,o=e.onDragEnd,s=e.toggle,l=e.toggled,u=e.title,c=e.drag,f=e.filterEnabled,d=e.from,h=(0,t.useState)(!1),p=(0,i.Z)(h,2),v=p[0],m=p[1],g=(0,t.useRef)(null);(0,t.useEffect)((function(){var e,t;v?null===(e=g.current)||void 0===e||e.focus():null===(t=g.current)||void 0===t||t.blur()}),[v]);var y=Jc((function(e){var t=(0,i.Z)(e.offset,2),n=t[0],s=t[1],l=e.first,u=e.last;r({x:n,y:s}),l&&a({x:n,y:s}),u&&o({x:n,y:s})}),{filterTaps:!0,from:function(e){var t=(0,i.Z)(e.offset,2),n=t[0],r=t[1];return[(null===d||void 0===d?void 0:d.x)||n,(null===d||void 0===d?void 0:d.y)||r]}});return(0,t.useEffect)((function(){var e=function(e){"L"===e.key&&e.shiftKey&&e.metaKey&&m((function(e){return!e}))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),t.createElement(t.Fragment,null,t.createElement(sv,{mode:c?"drag":void 0},t.createElement(ov,{active:!l,onClick:function(){return s()}},t.createElement(Wc,{toggled:l,width:12,height:8})),t.createElement(cv,ac({},c?y():{},{drag:c,filterEnabled:f}),void 0===u&&c?t.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},t.createElement("circle",{cx:"2",cy:"2",r:"2"}),t.createElement("circle",{cx:"14",cy:"2",r:"2"}),t.createElement("circle",{cx:"26",cy:"2",r:"2"}),t.createElement("circle",{cx:"2",cy:"12",r:"2"}),t.createElement("circle",{cx:"14",cy:"12",r:"2"}),t.createElement("circle",{cx:"26",cy:"12",r:"2"})):u),f&&t.createElement(ov,{active:v,onClick:function(){return m((function(e){return!e}))}},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},t.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),t.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),t.createElement(lv,{toggled:v},t.createElement(fv,{ref:g,setFilter:n,toggle:s})))}t.memo((function(e){var n,r,a=e.store,o=e.rootClass,s=e.fill,l=void 0!==s&&s,u=e.flat,c=void 0!==u&&u,f=e.neverHide,d=void 0!==f&&f,h=e.oneLineLabels,p=void 0!==h&&h,v=e.titleBar,m=void 0===v?{title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0}:v,g=e.hideCopyButton,y=void 0!==g&&g,A=e.toggled,b=e.setToggle,x=function(e){var n=(0,t.useState)(e.getVisiblePaths()),r=(0,i.Z)(n,2),a=r[0],o=r[1];return(0,t.useEffect)((function(){o(e.getVisiblePaths());var t=e.useStore.subscribe(e.getVisiblePaths,o,{equalityFn:na});return function(){return t()}}),[e]),a}(a),_=(0,t.useState)(""),w=(0,i.Z)(_,2),S=w[0],E=w[1],C=(0,t.useMemo)((function(){return function(e,t){var n={},r=t?t.toLowerCase():null;return e.forEach((function(e){var t=function(e){var t=e.split(".");return[t.pop(),t.join(".")||void 0]}(e),a=(0,i.Z)(t,2),o=a[0],s=a[1];(!r||o.toLowerCase().indexOf(r)>-1)&&tp()(n,s,(0,Xe.Z)({},o,{__levaInput:!0,path:e}))})),n}(x,S)}),[x,S]),T=qc(),M=(0,i.Z)(T,2),I=M[0],k=M[1],B=d||x.length>0,R="object"===typeof m&&m.title||void 0,P="object"!==typeof m||(null===(n=m.drag)||void 0===n||n),D="object"!==typeof m||(null===(r=m.filter)||void 0===r||r),L="object"===typeof m&&m.position||void 0,N="object"===typeof m&&m.onDrag||void 0,F="object"===typeof m&&m.onDragStart||void 0,O="object"===typeof m&&m.onDragEnd||void 0;return t.useEffect((function(){k({x:null===L||void 0===L?void 0:L.x,y:null===L||void 0===L?void 0:L.y})}),[L,k]),gc(),t.createElement(cc.Provider,{value:{hideCopyButton:y}},t.createElement(av,{ref:I,className:o,fill:l,flat:c,oneLineLabels:p,hideTitleBar:!m,style:{display:B?"block":"none"}},m&&t.createElement(dv,{onDrag:function(e){k(e),null===N||void 0===N||N(e)},onDragStart:function(e){return null===F||void 0===F?void 0:F(e)},onDragEnd:function(e){return null===O||void 0===O?void 0:O(e)},setFilter:E,toggle:function(e){return b((function(t){return null!==e&&void 0!==e?e:!t}))},toggled:A,title:R,drag:P,filterEnabled:D,from:L}),B&&t.createElement(uc.Provider,{value:a},t.createElement(iv,{isRoot:!0,fill:l,flat:c,tree:C,toggled:A}))))}));bu(Gu.SELECT,gf),bu(Gu.IMAGE,Ip),bu(Gu.NUMBER,ff),bu(Gu.COLOR,hp),bu(Gu.STRING,_f),bu(Gu.BOOLEAN,Cf),bu(Gu.INTERVAL,Op),bu(Gu.VECTOR3D,pp),bu(Gu.VECTOR2D,xp);var hv,pv,vv=n(6209),mv=Object.create,gv=Object.defineProperty,yv=Object.defineProperties,Av=Object.getOwnPropertyDescriptor,bv=Object.getOwnPropertyDescriptors,xv=Object.getOwnPropertyNames,_v=Object.getOwnPropertySymbols,wv=Object.getPrototypeOf,Sv=Object.prototype.hasOwnProperty,Ev=Object.prototype.propertyIsEnumerable,Cv=function(e,t,n){return t in e?gv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Tv=function(e,t){for(var n in t||(t={}))Sv.call(t,n)&&Cv(e,n,t[n]);if(_v){var r,i=(0,v.Z)(_v(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Ev.call(t,n)&&Cv(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},Mv=function(e,t){return yv(e,bv(t))},Iv=function(e,t){var n={};for(var r in e)Sv.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&_v){var i,a=(0,v.Z)(_v(e));try{for(a.s();!(i=a.n()).done;){r=i.value;t.indexOf(r)<0&&Ev.call(e,r)&&(n[r]=e[r])}}catch(o){a.e(o)}finally{a.f()}}return n},kv=function(e){return function(e,t,n){if(t&&"object"===typeof t||"function"===typeof t){var r,i=(0,v.Z)(xv(t));try{var a=function(){var i=r.value;Sv.call(e,i)||"default"===i||gv(e,i,{get:function(){return t[i]},enumerable:!(n=Av(t,i))||n.enumerable})};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}return e}((t=gv(null!=e?mv(wv(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0}),gv(t,"__esModule",{value:!0})),e);var t}((hv={"../../node_modules/zustand/vanilla.js":function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t,n=new Set,r=function(e,r){var i="function"===typeof e?e(t):e;if(i!==t){var a=t;t=r?i:Object.assign({},t,i),n.forEach((function(e){return e(t,a)}))}},i=function(){return t},a={setState:r,getState:i,subscribe:function(e,r,a){return r||a?function(e,r,a){void 0===r&&(r=i),void 0===a&&(a=Object.is);var o=r(t);function s(){var n=r(t);if(!a(o,n)){var i=o;e(o=n,i)}}return n.add(s),function(){return n.delete(s)}}(e,r,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(r,i,a),a}}},function(){return pv||(0,hv[Object.keys(hv)[0]])((pv={exports:{}}).exports,pv),pv.exports})()),Bv=new WeakSet,Rv=(0,kv.default)((function(e,t){return{sheet:null,editorObject:null,scene:null,gl:null,helpersRoot:new A.Group,editables:{},canvasName:"default",sceneSnapshot:null,editablesSnapshot:null,initialEditorCamera:{},init:function(n,r){e({scene:n,gl:r}),t().createSnapshot()},addEditable:function(t,n){e((function(e){return{editables:Mv(Tv({},e.editables),(0,Xe.Z)({},t,n))}}))},removeEditable:function(t){e((function(e){var n=Tv({},e.editables);return delete n[t],{editables:n}}))},createSnapshot:function(){e((function(e){var t,n;return{sceneSnapshot:null!=(n=null==(t=e.scene)?void 0:t.clone())?n:null,editablesSnapshot:e.editables}}))},setSnapshotProxyObject:function(t,n){e((function(e){return{editablesSnapshot:Mv(Tv({},e.editablesSnapshot),(0,Xe.Z)({},n,Mv(Tv({},e.editablesSnapshot[n]),{proxyObject:t})))}}))}}}));var Pv=function(e){return function(t){e.forEach((function(e){"function"===typeof e?e(t):null!=e&&(e.current=t)}))}};var Dv=(0,t.createContext)(void 0),Lv=function(){return function(){var e=(0,t.useContext)(Dv);if(!e)throw new Error("No sheet found. You need to add a <SheetProvider> higher up in the tree. https://docs.theatrejs.com/r3f.html#sheetprovider");return e}().sheet},Nv=function(e){var n=e.sheet,r=e.children,i=ke((function(e){return{scene:e.scene,gl:e.gl}})),a=i.scene,o=i.gl;return(0,t.useEffect)((function(){if(!n||"Theatre_Sheet_PublicAPI"!==n.type)throw new Error("sheet in <Wrapper sheet={sheet}> has an invalid value")}),[n]),(0,t.useLayoutEffect)((function(){!function(e){var t=e.gl,n=e.scene;(0,Rv.getState().init)(n,t)}({gl:o,scene:a})}),[a,o]),t.createElement(Dv.Provider,{value:{sheet:n}},r)};function Fv(e){return"number"===typeof e&&isFinite(e)}var Ov=function(e){return e?{x:e[0],y:e[1],z:e[2]}:{x:0,y:0,z:0}},Uv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ov(),n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).nudgeMultiplier,r=void 0===n?.01:n;return{parse:function(n){var r,i=n[e],a=i?Array.isArray(i)?Ov(i):Fv(i)?{x:i,y:i,z:i}:(r=i,["x","y","z"].every((function(e){return Fv(r[e])}))?{x:i.x,y:i.y,z:i.z}:(vv.notify.warning('Invalid value for vector prop "'.concat(e,'"'),"Couldn't make sense of `".concat(e,"={").concat(JSON.stringify(i),"}`, falling back to `").concat(e,"={").concat(JSON.stringify([t.x,t.y,t.z]),"}`.\n\nTo fix this, make sure the prop is set to either a number, an array of numbers, or a three.js Vector3 object.")),t)):t;return["x","y","z"].forEach((function(t){n["".concat(e,"-").concat(t)]&&(a[t]=n["".concat(e,"-").concat(t)])})),a},apply:function(t,n){n[e].set(t.x,t.y,t.z)},type:(0,Xe.Z)({},e,{x:vv.types.number(t.x,{nudgeMultiplier:r}),y:vv.types.number(t.y,{nudgeMultiplier:r}),z:vv.types.number(t.z,{nudgeMultiplier:r})})}},zv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).nudgeMultiplier,r=void 0===n?.01:n;return{parse:function(n){var r;return null!=(r=n[e])?r:t},apply:function(t,n){n[e]=t},type:(0,Xe.Z)({},e,vv.types.number(t,{nudgeMultiplier:r}))}},Gv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A.Color(0,0,0);return{parse:function(n){var r;return Mv(Tv({},null!=(r=n[e])?r:t),{a:1})},apply:function(t,n){n[e].setRGB(t.r,t.g,t.b)},type:(0,Xe.Z)({},e,vv.types.rgba(Mv(Tv({},t),{a:1})))}},Qv=function(e,t){return Mv(Tv({},e),{props:Tv(Tv({},e.props),t)})},Zv={props:{position:Uv("position"),rotation:Uv("rotation"),scale:Uv("scale",Ov([1,1,1]))},useTransformControls:!0,icon:"cube",createHelper:function(e){return new A.BoxHelper(e,Vv)}},Hv=Mv(Tv({},Qv(Zv,{intensity:zv("intensity",1),distance:zv("distance"),decay:zv("decay"),color:Gv("color",new A.Color("white"))})),{dimensionless:!0}),jv=Mv(Tv({},Qv(Zv,{near:zv("near",.1,{nudgeMultiplier:.1}),far:zv("far",2e3,{nudgeMultiplier:.1})})),{updateObject:function(e){e.updateProjectionMatrix()},icon:"camera",dimensionless:!0,createHelper:function(e){return new A.CameraHelper(e)}}),Vv="#40AAA4",Wv={group:Mv(Tv({},Zv),{icon:"collection",createHelper:function(e){return new A.BoxHelper(e,Vv)}}),mesh:Mv(Tv({},Zv),{icon:"cube",createHelper:function(e){return new A.BoxHelper(e,Vv)}}),spotLight:Mv(Tv({},Qv(Hv,{angle:zv("angle",0,{nudgeMultiplier:.001}),penumbra:zv("penumbra",0,{nudgeMultiplier:.001})})),{icon:"spotLight",createHelper:function(e){return new A.SpotLightHelper(e,Vv)}}),directionalLight:Mv(Tv({},Qv(Zv,{intensity:zv("intensity",1),color:Gv("color",new A.Color("white"))})),{icon:"sun",dimensionless:!0,createHelper:function(e){return new A.DirectionalLightHelper(e,1,Vv)}}),pointLight:Mv(Tv({},Hv),{icon:"lightBulb",createHelper:function(e){return new A.PointLightHelper(e,1,Vv)}}),ambientLight:{props:{intensity:zv("intensity",1),color:Gv("color",new A.Color("white"))},useTransformControls:!1,icon:"lightBulb"},hemisphereLight:{props:{intensity:zv("intensity",1),color:Gv("color",new A.Color("white")),groundColor:Gv("groundColor",new A.Color("white"))},useTransformControls:!1,icon:"lightBulb"},perspectiveCamera:Qv(jv,{fov:zv("fov",50,{nudgeMultiplier:.1}),zoom:zv("zoom",1)}),orthographicCamera:jv,points:Zv,line:Zv,lineLoop:Zv,lineSegments:Zv,fog:{props:{color:Gv("color"),near:zv("near",1,{nudgeMultiplier:.1}),far:zv("far",1e3,{nudgeMultiplier:.1})},useTransformControls:!1,icon:"cloud"}},Xv=(Rv.getState().createSnapshot,(0,t.createContext)(void 0)),Yv=function(e){var n=function(n,r){if("primitive"!==n&&!r)throw new Error("You must provide the type of the component you're creating an editable for. For example: editable(MyComponent, 'mesh').");return(0,t.forwardRef)((function(a,o){var s=a,l=s.theatreKey,u=s.visible,c=s.editableType,f=s.additionalProps,d=s.objRef,h=Iv(s,["theatreKey","visible","editableType","additionalProps","objRef"]);if("string"!==typeof l)throw new Error("No valid theatreKey was provided to the editable component. theatreKey must be a string. Received: ".concat(l));if("primitive"===n&&!c)throw new Error("When using the primitive component, you must provide the editableType prop. Received: ".concat(c));var p=null!=r?r:c,v=(0,t.useRef)(),m=Lv(),y=function(){var e;return null==(e=(0,t.useContext)(Xv))?void 0:e.rafDriver}(),A=(0,t.useState)(void 0),b=(0,i.Z)(A,2),x=b[0],_=b[1],w=(0,t.useMemo)((function(){return e=Mv(Tv({},m.address),{objectKey:l}),"".concat(e.sheetId,":").concat(e.sheetInstanceId,":").concat(e.objectKey);var e}),[m,l]),S=ke((function(e){return e.invalidate}));return(0,t.useEffect)((function(){if("perspectiveCamera"===n||"orthographicCamera"===n){var e=n.charAt(0).toUpperCase()+n.slice(1);vv.notify.warning("Possibly incorrect use of <e.".concat(n," />"),'You seem to have declared the camera "'.concat(l,'" simply as `<e.').concat(n," ... />`. This alone won't make r3f use it for rendering.\n\nThe easiest way to create a custom animatable `").concat(e,"` is to import it from `@react-three/drei`, and make it editable.\n```\nimport {").concat(e,"} from '@react-three/drei'\n\nconst EditableCamera =\n  editable(").concat(e,", '").concat(n,"')\n```\nThen you can use it in your JSX like any other editable component. Note the makeDefault prop exposed by drei, which makes r3f use it for rendering.\n```\n<EditableCamera\n  theatreKey=\"").concat(l,'"\n  makeDefault\n>\n```\n'))}}),[n,l]),(0,t.useLayoutEffect)((function(){if(m)if(x)m.object(l,Object.assign.apply(Object,[Tv({},f)].concat((0,g.Z)(Object.values(e[p].props).map((function(e){return e.type}))))),{reconfigure:!0});else{var t=m.object(l,Object.assign.apply(Object,[Tv({},f)].concat((0,g.Z)(Object.values(e[p].props).map((function(e){return e.type}))))));Bv.add(t),_(t),d&&("function"===typeof d?d(t):d.current=t),Rv.getState().addEditable(w,{type:p,sheetObject:t,visibleOnlyInEditor:"editor"===u,objectConfig:e[p]})}}),[m,w,f]),(0,t.useLayoutEffect)((function(){x&&(x.initialValue=Object.fromEntries(Object.entries(e[p].props).map((function(e){var t=(0,i.Z)(e,2);return[t[0],t[1].parse(h)]}))))}),[x].concat((0,g.Z)(Object.keys(e[p].props).map((function(e){return h[e]}))))),(0,t.useLayoutEffect)((function(){if(x){var t=v.current,n=function(n){var r,a;Object.entries(e[p].props).forEach((function(e){var r=(0,i.Z)(e,2),a=r[0];return r[1].apply(n[a],t)})),null==(a=(r=e[p]).updateObject)||a.call(r,t),S()};n(x.value);var r=x.onValuesChange(n,y);return function(){r(),x.sheet.detachObject(l),Bv.delete(x),Rv.getState().removeEditable(w)}}}),[x,y]),t.createElement(n,Mv(Tv({ref:Pv([v,o])},h),{visible:"editor"!==u&&u,userData:{__editable:!0,__storeKey:w}}))}))},r=Mv(Tv({},Object.fromEntries(Object.keys(e).map((function(e){return[e,n(e,e)]})))),{primitive:n("primitive",null)});return Object.assign(n,r)}(Wv),Kv=Yv,Jv=(Kv((0,t.forwardRef)((function(e,n){var r=e,i=r.makeDefault,a=r.lookAt,o=Iv(r,["makeDefault","lookAt"]),s=ke((function(e){return e.set})),l=ke((function(e){return e.camera})),u=ke((function(e){return e.size})),c=(0,t.useRef)(null);return(0,t.useLayoutEffect)((function(){o.manual||(c.current.aspect=u.width/u.height)}),[u,o]),(0,t.useLayoutEffect)((function(){c.current.updateProjectionMatrix()})),(0,t.useLayoutEffect)((function(){if(i){var e=l;return s((function(){return{camera:c.current}})),function(){return s((function(){return{camera:e}}))}}}),[c,i,s]),Be((function(){var e;if(a&&c.current){c.current.lookAt(Array.isArray(a)?(0,m.Z)(A.Vector3,(0,g.Z)(a)):a.current?a.current.position:a);var t=Rv.getState().editablesSnapshot;t&&(null==(e=t[c.current.userData.__storeKey].proxyObject)||e.rotation.copy(c.current.rotation))}})),(0,t.createElement)("perspectiveCamera",Tv({ref:Pv([c,n])},o))})),"perspectiveCamera"),Kv((0,t.forwardRef)((function(e,n){var r=e,i=r.makeDefault,a=r.lookAt,o=Iv(r,["makeDefault","lookAt"]),s=ke((function(e){return e.set})),l=ke((function(e){return e.camera})),u=ke((function(e){return e.size})),c=(0,t.useRef)(null);return(0,t.useLayoutEffect)((function(){o.manual||c.current.updateProjectionMatrix()}),[u,o]),(0,t.useLayoutEffect)((function(){c.current.updateProjectionMatrix()})),(0,t.useLayoutEffect)((function(){if(i){var e=l;return s((function(){return{camera:c.current}})),function(){return s((function(){return{camera:e}}))}}}),[c,i,s]),Be((function(){var e;if(a&&c.current){c.current.lookAt(Array.isArray(a)?(0,m.Z)(A.Vector3,(0,g.Z)(a)):a.current?a.current.position:a);var t=Rv.getState().editablesSnapshot;t&&(null==(e=t[c.current.userData.__storeKey].proxyObject)||e.rotation.copy(c.current.rotation))}})),(0,t.createElement)("orthographicCamera",Tv({left:u.width/-2,right:u.width/2,top:u.height/2,bottom:u.height/-2,ref:Pv([c,n])},o))})),"orthographicCamera"),JSON.parse('{"sheetsById":{"Demo Sheet":{"staticOverrides":{"byObject":{"Camera":{"rotation":{"x":0,"y":0,"z":0}},"Torus1":{"rotation":{"x":-3.2,"y":0.6999999999999998,"z":-4.159999999999999},"scale":{"x":0.9300000000000004}},"truck":{"rotation":{"y":1.890000000000001,"x":-0.6600000000000001,"z":0.06000000000000005}},"Depthfield":{"Depthfield":{"visible":true}},"ColorChanging":{"ColorChanging":{"color":{"r":0.984313725490196,"g":0.5411764705882353,"b":0.2784313725490196,"a":1}}}}},"sequence":{"subUnitsPerUnit":30,"length":18.81,"type":"PositionalSequence","tracksByObject":{"Camera":{"trackData":{"7fctlwwzzH":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"position\\",\\"x\\"]","keyframes":[{"id":"LJZ3IDiJ-G","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"mEsglMlAMi":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"position\\",\\"y\\"]","keyframes":[{"id":"knWmmUZcFg","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"TWuSOtQJ9l":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"position\\",\\"z\\"]","keyframes":[{"id":"C-pj03-b1U","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"LcIG6n370c":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"rotation\\",\\"x\\"]","keyframes":[{"id":"7AIPcEsKYC","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"tEDTri4aDA":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"rotation\\",\\"y\\"]","keyframes":[{"id":"gfGTwQ1z8K","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"_Jn3fS9fs4":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"rotation\\",\\"z\\"]","keyframes":[{"id":"dtgJouHAaf","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"m2ahfdJtjY":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"scale\\",\\"x\\"]","keyframes":[]},"lCpN7qXbCM":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"scale\\",\\"y\\"]","keyframes":[]},"W-7Nre62Uc":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"scale\\",\\"z\\"]","keyframes":[]},"lSqF0FD2pg":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"near\\"]","keyframes":[]},"MWEQc4p8SU":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"far\\"]","keyframes":[]},"XoUMYkWhTp":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"fov\\"]","keyframes":[]},"B-QziJRAIl":{"type":"BasicKeyframedTrack","__debugName":"Camera:[\\"zoom\\"]","keyframes":[]}},"trackIdByPropPath":{"[\\"position\\",\\"x\\"]":"7fctlwwzzH","[\\"position\\",\\"y\\"]":"mEsglMlAMi","[\\"position\\",\\"z\\"]":"TWuSOtQJ9l","[\\"rotation\\",\\"x\\"]":"LcIG6n370c","[\\"rotation\\",\\"y\\"]":"tEDTri4aDA","[\\"rotation\\",\\"z\\"]":"_Jn3fS9fs4","[\\"scale\\",\\"x\\"]":"m2ahfdJtjY","[\\"scale\\",\\"y\\"]":"lCpN7qXbCM","[\\"scale\\",\\"z\\"]":"W-7Nre62Uc","[\\"near\\"]":"lSqF0FD2pg","[\\"far\\"]":"MWEQc4p8SU","[\\"fov\\"]":"XoUMYkWhTp","[\\"zoom\\"]":"B-QziJRAIl"}},"Torus1":{"trackData":{"3U_nDaxP73":{"type":"BasicKeyframedTrack","__debugName":"Torus1:[\\"position\\",\\"x\\"]","keyframes":[{"id":"psfPdwgdOk","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"W3Yf7x19dr","position":1.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"cBGQIn-qS4","position":2.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.07}]},"Ye2ZlTvycq":{"type":"BasicKeyframedTrack","__debugName":"Torus1:[\\"position\\",\\"y\\"]","keyframes":[{"id":"gr6dVOD904","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"bgIVpHRbyX","position":1.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"MLny0kNgSd","position":2.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.9400000000000002}]},"rKs_Uw49bI":{"type":"BasicKeyframedTrack","__debugName":"Torus1:[\\"position\\",\\"z\\"]","keyframes":[{"id":"A1JhzDXZ7p","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"17Am7QJ3Es","position":1.367,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"93E3IaAVU3","position":2.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":2.3245294578089215e-16}]}},"trackIdByPropPath":{"[\\"position\\",\\"x\\"]":"3U_nDaxP73","[\\"position\\",\\"y\\"]":"Ye2ZlTvycq","[\\"position\\",\\"z\\"]":"rKs_Uw49bI"}},"truck":{"trackData":{"YER9J80O5j":{"type":"BasicKeyframedTrack","__debugName":"truck:[\\"position\\",\\"x\\"]","keyframes":[]},"Fo2_mWchXU":{"type":"BasicKeyframedTrack","__debugName":"truck:[\\"position\\",\\"y\\"]","keyframes":[{"id":"ZYeNz4Mmz1","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"witXbvbS2S":{"type":"BasicKeyframedTrack","__debugName":"truck:[\\"position\\",\\"z\\"]","keyframes":[{"id":"I86uQtOHDT","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]}},"trackIdByPropPath":{"[\\"position\\",\\"x\\"]":"YER9J80O5j","[\\"position\\",\\"y\\"]":"Fo2_mWchXU","[\\"position\\",\\"z\\"]":"witXbvbS2S"}},"bottom":{"trackData":{"W-pwt9fF_c":{"type":"BasicKeyframedTrack","__debugName":"bottom:[\\"position\\",\\"x\\"]","keyframes":[{"id":"UlqvF9iabj","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"p7mAUfKZ8s","position":1.133,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"hDf0yW55AN":{"type":"BasicKeyframedTrack","__debugName":"bottom:[\\"position\\",\\"y\\"]","keyframes":[{"id":"sMs3RcBJwW","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"GfZDu0W9wb","position":0.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.6399999900517285},{"id":"DHzadk55uT","position":1.133,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.64},{"id":"yTiUw5Qkok","position":1.3,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.64},{"id":"PwcLF2r_KG","position":1.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.10999999999999996}]},"u5CpljiZNL":{"type":"BasicKeyframedTrack","__debugName":"bottom:[\\"position\\",\\"z\\"]","keyframes":[{"id":"ym93f1Ehjn","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"3hcuAkGAd3","position":1.133,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"-MLXK8mfCH":{"type":"BasicKeyframedTrack","__debugName":"bottom:[\\"rotation\\",\\"x\\"]","keyframes":[{"id":"bO8a1aeLyr","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"ULrHKObEyv","position":1.133,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"y6riI0CEoB","position":1.933,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"BAhOiz6XNY":{"type":"BasicKeyframedTrack","__debugName":"bottom:[\\"rotation\\",\\"y\\"]","keyframes":[{"id":"NHpj9lTePv","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"OkVDsHxopd","position":1.133,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"ZKX3EXh-uc","position":1.933,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"ClOvjDiXeN":{"type":"BasicKeyframedTrack","__debugName":"bottom:[\\"rotation\\",\\"z\\"]","keyframes":[{"id":"dDW3n7w8Uf","position":-0.6,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"Kfi38rNzir","position":0.533,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"A55Q9EzBWJ","position":1.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":3.1299336743061583}]},"yxTsZJbUWv":{"type":"BasicKeyframedTrack","__debugName":"bottom:[\\"scale\\",\\"x\\"]","keyframes":[]},"0DYA9klN9W":{"type":"BasicKeyframedTrack","__debugName":"bottom:[\\"scale\\",\\"y\\"]","keyframes":[]},"sHXEaJyG_e":{"type":"BasicKeyframedTrack","__debugName":"bottom:[\\"scale\\",\\"z\\"]","keyframes":[]}},"trackIdByPropPath":{"[\\"position\\",\\"x\\"]":"W-pwt9fF_c","[\\"position\\",\\"y\\"]":"hDf0yW55AN","[\\"position\\",\\"z\\"]":"u5CpljiZNL","[\\"rotation\\",\\"x\\"]":"-MLXK8mfCH","[\\"rotation\\",\\"y\\"]":"BAhOiz6XNY","[\\"rotation\\",\\"z\\"]":"ClOvjDiXeN","[\\"scale\\",\\"x\\"]":"yxTsZJbUWv","[\\"scale\\",\\"y\\"]":"0DYA9klN9W","[\\"scale\\",\\"z\\"]":"sHXEaJyG_e"}},"top":{"trackData":{"7HZRez3GZ4":{"type":"BasicKeyframedTrack","__debugName":"top:[\\"position\\",\\"x\\"]","keyframes":[{"id":"kJYdH6BZfY","position":1.633,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"4VexKu_I2P","position":2.167,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"kjym8uST9v","position":2.8,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"IBYrg70qx3":{"type":"BasicKeyframedTrack","__debugName":"top:[\\"position\\",\\"y\\"]","keyframes":[{"id":"FgQmTx5saj","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.0000000000000002},{"id":"30Glw_uDDb","position":1.633,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1},{"id":"z_J1uJBSry","position":2.2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.68},{"id":"NRaimIiWRd","position":2.7,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.6800000000000004},{"id":"kdFQU-eizm","position":3.2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.0199999999999998}]},"k7uMgaLoby":{"type":"BasicKeyframedTrack","__debugName":"top:[\\"position\\",\\"z\\"]","keyframes":[{"id":"3j84C3Lm9K","position":1.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"JtAz8-RiW1","position":2.167,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"OEmh5SW5Fu","position":2.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"dgb_12JNZ4":{"type":"BasicKeyframedTrack","__debugName":"top:[\\"rotation\\",\\"x\\"]","keyframes":[{"id":"LluK_X8w66","position":1.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"U_KYz_ZRau","position":2.2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"UkXt6l8CHL","position":2.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":3.139999999999997}]},"cR9fALT7qa":{"type":"BasicKeyframedTrack","__debugName":"top:[\\"rotation\\",\\"y\\"]","keyframes":[{"id":"3T4Is_CKtZ","position":1.7,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"XVdwdPKOd8","position":2.233,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"UmONPfjphn","position":2.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"Zs0xoAAzeS":{"type":"BasicKeyframedTrack","__debugName":"top:[\\"rotation\\",\\"z\\"]","keyframes":[{"id":"Nsdu1a8vI2","position":1.733,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"tPrRjAEs8l","position":2.233,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"BcudRlSV5f","position":2.867,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"nwSNBQoN5J":{"type":"BasicKeyframedTrack","__debugName":"top:[\\"scale\\",\\"x\\"]","keyframes":[]},"x773D-nKnZ":{"type":"BasicKeyframedTrack","__debugName":"top:[\\"scale\\",\\"y\\"]","keyframes":[]},"tcY539cLdL":{"type":"BasicKeyframedTrack","__debugName":"top:[\\"scale\\",\\"z\\"]","keyframes":[]}},"trackIdByPropPath":{"[\\"position\\",\\"x\\"]":"7HZRez3GZ4","[\\"position\\",\\"y\\"]":"IBYrg70qx3","[\\"position\\",\\"z\\"]":"k7uMgaLoby","[\\"rotation\\",\\"x\\"]":"dgb_12JNZ4","[\\"rotation\\",\\"y\\"]":"cR9fALT7qa","[\\"rotation\\",\\"z\\"]":"Zs0xoAAzeS","[\\"scale\\",\\"x\\"]":"nwSNBQoN5J","[\\"scale\\",\\"y\\"]":"x773D-nKnZ","[\\"scale\\",\\"z\\"]":"tcY539cLdL"}},"right":{"trackData":{"hKdfVFfOuE":{"type":"BasicKeyframedTrack","__debugName":"right:[\\"position\\",\\"x\\"]","keyframes":[{"id":"-n_c2X5QHI","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"yiWCZsUym9","position":2.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"dCisfNrhSz","position":3.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"Tol4adLEDo","position":4.133,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"8KujfQSBiL","position":4.633,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"UHEjSWDMCp":{"type":"BasicKeyframedTrack","__debugName":"right:[\\"position\\",\\"y\\"]","keyframes":[{"id":"rmCQU5xNtx","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4800000000000002},{"id":"kjN2Ld7Rxk","position":3.467,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4800000000000002},{"id":"FkXeOyD7VC","position":3.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4800000000000002},{"id":"N4kcwrlHkW","position":4.167,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4800000000000002},{"id":"M__4Q0DRP_","position":4.633,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4800000000000002}]},"UpQ1ILp5Na":{"type":"BasicKeyframedTrack","__debugName":"right:[\\"position\\",\\"z\\"]","keyframes":[{"id":"xdMk8rLUf7","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.53},{"id":"X12NacIHHB","position":3.467,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.53},{"id":"obk3WNhxac","position":3.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.3200000000000005},{"id":"lAepzcbS3v","position":4.133,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.3200000000000005},{"id":"MDFLMfqXiC","position":4.3,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.3200000000000005},{"id":"oT1uGqW1pt","position":4.533,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.53}]},"d6Zg71gJh-":{"type":"BasicKeyframedTrack","__debugName":"right:[\\"rotation\\",\\"x\\"]","keyframes":[{"id":"PryqufbSzn","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"QDonO7ev80","position":3.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"dDebJoJ24W","position":3.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"MiRp-v7A4u","position":4.167,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":3.0817055265989},{"id":"_L1Iiy5vO9","position":4.633,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":3.159999999999998}]},"7PPsvZqouY":{"type":"BasicKeyframedTrack","__debugName":"right:[\\"rotation\\",\\"y\\"]","keyframes":[{"id":"vmbBEOjP6b","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"CMDGJpbIoU","position":3.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"XI6Ip16JBk","position":3.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"k0UXxOJW3P","position":4.167,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"yGfOMb6r0G","position":4.633,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"ao9FFZVenq":{"type":"BasicKeyframedTrack","__debugName":"right:[\\"rotation\\",\\"z\\"]","keyframes":[{"id":"T1DUQNXUI0","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"IzErc39KA6","position":3.5,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"uTWXqXxOPz","position":3.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"QrzAU9EUy9","position":4.167,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"sgtI8G2I-w","position":4.633,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"HZ-hfQjyrC":{"type":"BasicKeyframedTrack","__debugName":"right:[\\"scale\\",\\"x\\"]","keyframes":[]},"eT_KCpDj7k":{"type":"BasicKeyframedTrack","__debugName":"right:[\\"scale\\",\\"y\\"]","keyframes":[]},"n7la0O2Nyo":{"type":"BasicKeyframedTrack","__debugName":"right:[\\"scale\\",\\"z\\"]","keyframes":[]}},"trackIdByPropPath":{"[\\"position\\",\\"x\\"]":"hKdfVFfOuE","[\\"position\\",\\"y\\"]":"UHEjSWDMCp","[\\"position\\",\\"z\\"]":"UpQ1ILp5Na","[\\"rotation\\",\\"x\\"]":"d6Zg71gJh-","[\\"rotation\\",\\"y\\"]":"7PPsvZqouY","[\\"rotation\\",\\"z\\"]":"ao9FFZVenq","[\\"scale\\",\\"x\\"]":"HZ-hfQjyrC","[\\"scale\\",\\"y\\"]":"eT_KCpDj7k","[\\"scale\\",\\"z\\"]":"n7la0O2Nyo"}},"left":{"trackData":{"J-G1J3RsNg":{"type":"BasicKeyframedTrack","__debugName":"left:[\\"position\\",\\"x\\"]","keyframes":[{"id":"TLpUJT74-_","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"dvN3djuTn9","position":4.533,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"j_9JbWpk_s","position":4.9,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"rsFjRMFHsk","position":5.467,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"X-zX9KZipB","position":5.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"ypnS708f-4":{"type":"BasicKeyframedTrack","__debugName":"left:[\\"position\\",\\"y\\"]","keyframes":[{"id":"ICV8-eqwWy","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4600000000000001},{"id":"d1ACGeQos_","position":4.533,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4600000000000001},{"id":"Uf11vid3jP","position":4.9,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4600000000000001},{"id":"hASOBwkysK","position":5.433,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4600000000000001},{"id":"VnY5Z0-uWi","position":5.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4600000000000001}]},"iA3uYlrVNv":{"type":"BasicKeyframedTrack","__debugName":"left:[\\"position\\",\\"z\\"]","keyframes":[{"id":"mfZNvKqucP","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.54},{"id":"oun2VQpLV-","position":4.533,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.54},{"id":"3AYqjszXkA","position":4.9,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.2200000000000004},{"id":"LXVzpy_YGP","position":5.433,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.2200000000000004},{"id":"lOz7PUl1yY","position":5.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.54}]},"iIzEaxofAA":{"type":"BasicKeyframedTrack","__debugName":"left:[\\"rotation\\",\\"x\\"]","keyframes":[{"id":"5DurqeYgq_","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.5700000000000003},{"id":"9n3YPiTVeE","position":4.533,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.5700000000000003},{"id":"X30BYqv4HC","position":4.9,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.5700000000000003},{"id":"4ciIcQekfi","position":5.433,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-4.71},{"id":"u0TVK9ywn9","position":5.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-4.71}]},"tO6-x5xQFW":{"type":"BasicKeyframedTrack","__debugName":"left:[\\"rotation\\",\\"y\\"]","keyframes":[{"id":"Q_UbHoigNQ","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"BD-T_oFvi7","position":4.533,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"qrI_Dm4kKZ","position":4.9,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"SB6-D70ZXK","position":5.433,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"RA-v7ocY7v","position":5.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"shhemvm10W":{"type":"BasicKeyframedTrack","__debugName":"left:[\\"rotation\\",\\"z\\"]","keyframes":[{"id":"s1fjC5iLKw","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"zNiDm3nz9o","position":4.533,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"HzlbTwsgVp","position":4.9,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"7AJXqDliia","position":5.433,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"j3gSq4d2SC","position":5.767,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"A_0RScxPce":{"type":"BasicKeyframedTrack","__debugName":"left:[\\"scale\\",\\"x\\"]","keyframes":[]},"Bj8PxlQ7WB":{"type":"BasicKeyframedTrack","__debugName":"left:[\\"scale\\",\\"y\\"]","keyframes":[]},"b_nWEA-KNH":{"type":"BasicKeyframedTrack","__debugName":"left:[\\"scale\\",\\"z\\"]","keyframes":[]}},"trackIdByPropPath":{"[\\"position\\",\\"x\\"]":"J-G1J3RsNg","[\\"position\\",\\"y\\"]":"ypnS708f-4","[\\"position\\",\\"z\\"]":"iA3uYlrVNv","[\\"rotation\\",\\"x\\"]":"iIzEaxofAA","[\\"rotation\\",\\"y\\"]":"tO6-x5xQFW","[\\"rotation\\",\\"z\\"]":"shhemvm10W","[\\"scale\\",\\"x\\"]":"A_0RScxPce","[\\"scale\\",\\"y\\"]":"Bj8PxlQ7WB","[\\"scale\\",\\"z\\"]":"b_nWEA-KNH"}},"watch":{"trackData":{"MLXzw1Tymw":{"type":"BasicKeyframedTrack","__debugName":"watch:[\\"position\\",\\"x\\"]","keyframes":[{"id":"EeXrIqEHlN","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"qzyg4t_1e0","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":20.819411740404277}]},"1WzHDGrwlE":{"type":"BasicKeyframedTrack","__debugName":"watch:[\\"position\\",\\"y\\"]","keyframes":[{"id":"oXbRBQb9oL","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"IgOOLXqNva","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.8000000000000003}]},"gkQ-dGI31X":{"type":"BasicKeyframedTrack","__debugName":"watch:[\\"position\\",\\"z\\"]","keyframes":[{"id":"Z8tzVGJ71n","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"thYc-Q6n_7","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-6.700840559704022}]},"cyzwoxwqO4":{"type":"BasicKeyframedTrack","__debugName":"watch:[\\"rotation\\",\\"x\\"]","keyframes":[{"id":"FReHRA4Xdk","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.5700000000000004},{"id":"QOA_KSV1X3","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4900000000000004}]},"gJr41W-c_E":{"type":"BasicKeyframedTrack","__debugName":"watch:[\\"rotation\\",\\"y\\"]","keyframes":[{"id":"6XI5J7LZH9","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.73},{"id":"NDuQa8H9nn","position":0.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.5480106306220198},{"id":"lQsxkvayu9","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.5600000000000007}]},"S9cvXoCenV":{"type":"BasicKeyframedTrack","__debugName":"watch:[\\"rotation\\",\\"z\\"]","keyframes":[{"id":"JEZW3yMdEl","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.16999999999999998},{"id":"bdn4m-UiqC","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.15999999999999998}]},"63c-AiOJoi":{"type":"BasicKeyframedTrack","__debugName":"watch:[\\"scale\\",\\"x\\"]","keyframes":[]},"PPyw79EzME":{"type":"BasicKeyframedTrack","__debugName":"watch:[\\"scale\\",\\"y\\"]","keyframes":[]},"-rJi3muOor":{"type":"BasicKeyframedTrack","__debugName":"watch:[\\"scale\\",\\"z\\"]","keyframes":[]}},"trackIdByPropPath":{"[\\"position\\",\\"x\\"]":"MLXzw1Tymw","[\\"position\\",\\"y\\"]":"1WzHDGrwlE","[\\"position\\",\\"z\\"]":"gkQ-dGI31X","[\\"rotation\\",\\"x\\"]":"cyzwoxwqO4","[\\"rotation\\",\\"y\\"]":"gJr41W-c_E","[\\"rotation\\",\\"z\\"]":"S9cvXoCenV","[\\"scale\\",\\"x\\"]":"63c-AiOJoi","[\\"scale\\",\\"y\\"]":"PPyw79EzME","[\\"scale\\",\\"z\\"]":"-rJi3muOor"}},"Iphone":{"trackData":{"rgLvB05cj6":{"type":"BasicKeyframedTrack","__debugName":"Iphone:[\\"position\\",\\"x\\"]","keyframes":[{"id":"5-MrDKEZMC","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-8.80999999999999},{"id":"JXfr5tp_TC","position":0.867,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-8.592906646732828},{"id":"TCJlG3DZoM","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"S91S8hEGYw","position":4.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":11.15}]},"5Ki1Rk-31p":{"type":"BasicKeyframedTrack","__debugName":"Iphone:[\\"position\\",\\"y\\"]","keyframes":[{"id":"ZzVqYQWouJ","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.5100000000000007},{"id":"foHtu9ObDC","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"Lq_sH-oK8N","position":4.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.1500000000000006}]},"s5J22OP3qQ":{"type":"BasicKeyframedTrack","__debugName":"Iphone:[\\"position\\",\\"z\\"]","keyframes":[{"id":"qADGn0zQ5g","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.2499999999999898},{"id":"noVsYAizW8","position":0.867,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.5488156303453714},{"id":"dAKGAGojCW","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"tNQ4jmuiUv","position":4.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.3600000000000008}]},"hDMAl2kr5E":{"type":"BasicKeyframedTrack","__debugName":"Iphone:[\\"rotation\\",\\"x\\"]","keyframes":[{"id":"-Pjr0pAq4s","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"fQeHfTi_fJ","position":3.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.14999999999999994}]},"Rqkats0yCQ":{"type":"BasicKeyframedTrack","__debugName":"Iphone:[\\"rotation\\",\\"y\\"]","keyframes":[{"id":"dwqNY9tZBI","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.5900000000000001},{"id":"KyPZKIa6_H","position":3.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.9506976810874489},{"id":"m5lY_PECGU","position":4.033,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.19999814039380184}]},"Gkht5d9QKS":{"type":"BasicKeyframedTrack","__debugName":"Iphone:[\\"rotation\\",\\"z\\"]","keyframes":[{"id":"Bvk923_wmt","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"g1Um7Tr1Uh","position":3.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.21995816505683136}]},"21GcFfIfI2":{"type":"BasicKeyframedTrack","__debugName":"Iphone:[\\"scale\\",\\"x\\"]","keyframes":[]},"VgL6UUwuLS":{"type":"BasicKeyframedTrack","__debugName":"Iphone:[\\"scale\\",\\"y\\"]","keyframes":[{"id":"XuYUxjhyiy","position":3.433,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.99}]},"JrbJVWTRUf":{"type":"BasicKeyframedTrack","__debugName":"Iphone:[\\"scale\\",\\"z\\"]","keyframes":[]}},"trackIdByPropPath":{"[\\"position\\",\\"x\\"]":"rgLvB05cj6","[\\"position\\",\\"y\\"]":"5Ki1Rk-31p","[\\"position\\",\\"z\\"]":"s5J22OP3qQ","[\\"rotation\\",\\"x\\"]":"hDMAl2kr5E","[\\"rotation\\",\\"y\\"]":"Rqkats0yCQ","[\\"rotation\\",\\"z\\"]":"Gkht5d9QKS","[\\"scale\\",\\"x\\"]":"21GcFfIfI2","[\\"scale\\",\\"y\\"]":"VgL6UUwuLS","[\\"scale\\",\\"z\\"]":"JrbJVWTRUf"}},"Headphone":{"trackData":{"p9Y_gMSmh6":{"type":"BasicKeyframedTrack","__debugName":"Headphone:[\\"position\\",\\"x\\"]","keyframes":[{"id":"khPQzBWVPe","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-11.569404518312497},{"id":"PJMQjQpCi0","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-15.414724417421999},{"id":"N1-EpXchOJ","position":4.1,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.05940451831250052},{"id":"L91No2zHjk","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":10.759999999999993}]},"UknQknN9GB":{"type":"BasicKeyframedTrack","__debugName":"Headphone:[\\"position\\",\\"y\\"]","keyframes":[{"id":"E3OmooALn4","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.2799999999999998},{"id":"LAk_IKK6yK","position":1.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.0298264261895962},{"id":"-fPlvBxmKG","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.2000035585225692},{"id":"QcIZyFVRGP","position":4.1,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.0500000000000005},{"id":"9xaQHmM76x","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.13999999999999993}]},"yhJ-DdBrYi":{"type":"BasicKeyframedTrack","__debugName":"Headphone:[\\"position\\",\\"z\\"]","keyframes":[{"id":"bONvZcl8Tz","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.3699999999999998},{"id":"y2SuuCysSj","position":1.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.194079676336703},{"id":"e5bbB7mx0U","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.20401852913052848},{"id":"fBaE4fOHrF","position":4.1,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"2lf1kcSs4f","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.4800000000000002}]},"4PT4MchLpB":{"type":"BasicKeyframedTrack","__debugName":"Headphone:[\\"rotation\\",\\"x\\"]","keyframes":[{"id":"xYXZS7UWE6","position":4.1,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.23},{"id":"vio3YtteCe","position":5.167,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.04698923810301915},{"id":"sZ3I2NMYAH","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.020000000000000073}]},"dIqSO-mB-B":{"type":"BasicKeyframedTrack","__debugName":"Headphone:[\\"rotation\\",\\"y\\"]","keyframes":[{"id":"rcGcpNVXqY","position":4.1,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.53},{"id":"gw-Xw7_XOP","position":5.2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.7675981000102535},{"id":"IPtE1bW2s2","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.10999999999999996}]},"5W2Vozd0d4":{"type":"BasicKeyframedTrack","__debugName":"Headphone:[\\"rotation\\",\\"z\\"]","keyframes":[{"id":"UV3B2ylI-U","position":4.1,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0},{"id":"2U8fNhGzfT","position":5.2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.23925768571135633},{"id":"WEADgncGIH","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.12000000000000001}]},"-TOwDNdQmN":{"type":"BasicKeyframedTrack","__debugName":"Headphone:[\\"scale\\",\\"x\\"]","keyframes":[]},"CG-ezmBTa_":{"type":"BasicKeyframedTrack","__debugName":"Headphone:[\\"scale\\",\\"y\\"]","keyframes":[]},"ZnGNj5Msxz":{"type":"BasicKeyframedTrack","__debugName":"Headphone:[\\"scale\\",\\"z\\"]","keyframes":[]}},"trackIdByPropPath":{"[\\"position\\",\\"x\\"]":"p9Y_gMSmh6","[\\"position\\",\\"y\\"]":"UknQknN9GB","[\\"position\\",\\"z\\"]":"yhJ-DdBrYi","[\\"rotation\\",\\"x\\"]":"4PT4MchLpB","[\\"rotation\\",\\"y\\"]":"dIqSO-mB-B","[\\"rotation\\",\\"z\\"]":"5W2Vozd0d4","[\\"scale\\",\\"x\\"]":"-TOwDNdQmN","[\\"scale\\",\\"y\\"]":"CG-ezmBTa_","[\\"scale\\",\\"z\\"]":"ZnGNj5Msxz"}},"Depthfield":{"trackData":{"jnfPx_84_8":{"type":"BasicKeyframedTrack","__debugName":"Depthfield:[\\"Depthfield\\",\\"visible\\"]","keyframes":[{"id":"7TiGGRwYx2","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":true}]}},"trackIdByPropPath":{"[\\"Depthfield\\",\\"visible\\"]":"jnfPx_84_8"}},"ColorChanging":{"trackData":{"_f5AY7k0Ca":{"type":"BasicKeyframedTrack","__debugName":"ColorChanging:[\\"ColorChanging\\",\\"color\\"]","keyframes":[{"id":"jTgF0CYQR0","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":{"r":0.9882352941176471,"g":0.7490196078431373,"b":0.611764705882353,"a":1}},{"id":"oboBsN3XWV","position":0.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":{"r":0.9882352941176471,"g":0.7450980392156863,"b":0.6078431372549019,"a":1}},{"id":"0rvTtcBtF-","position":0.867,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":{"r":0.9882352941176471,"g":0.7450980392156863,"b":0.6078431372549019,"a":1}},{"id":"psNWlQOxYb","position":1.267,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":{"r":0.7843137254901961,"g":0.7647058823529411,"b":0.7411764705882353,"a":1}},{"id":"rzArel2sPC","position":1.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":{"r":0.796078431372549,"g":0.792156862745098,"b":0.7843137254901961,"a":1}},{"id":"FI2UFfWbOj","position":2.9,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":{"r":0.792156862745098,"g":0.788235294117647,"b":0.7803921568627451,"a":1}},{"id":"ovJSVobIgl","position":3.333,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":{"r":0.9411764705882353,"g":0.8470588235294118,"b":0.8470588235294118,"a":1}},{"id":"PTb9fCEXOm","position":5.233,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":{"r":0.9411764705882353,"g":0.8509803921568627,"b":0.8509803921568627,"a":1}},{"id":"HRlk4zLB02","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":{"r":0.9411764705882353,"g":0.8470588235294118,"b":0.8470588235294118,"a":1}}]}},"trackIdByPropPath":{"[\\"ColorChanging\\",\\"color\\"]":"_f5AY7k0Ca"}},"Car-Animation":{"trackData":{"Gek7mFB5hQ":{"type":"BasicKeyframedTrack","__debugName":"Car-Animation:[\\"position\\",\\"x\\"]","keyframes":[{"id":"OScQAEKZRI","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"o_rlZXQR1W":{"type":"BasicKeyframedTrack","__debugName":"Car-Animation:[\\"position\\",\\"y\\"]","keyframes":[{"id":"dZit18i7Ab","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"sLEZwY7ftP":{"type":"BasicKeyframedTrack","__debugName":"Car-Animation:[\\"position\\",\\"z\\"]","keyframes":[{"id":"UCVMu9k5pV","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0}]},"1PRzRl8BIi":{"type":"BasicKeyframedTrack","__debugName":"Car-Animation:[\\"rotation\\",\\"x\\"]","keyframes":[{"id":"zUjrsrVXbA","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.34000000000000025}]},"PIvqghz6a1":{"type":"BasicKeyframedTrack","__debugName":"Car-Animation:[\\"rotation\\",\\"y\\"]","keyframes":[{"id":"aaPKtnsDU8","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.2100000000000002}]},"eRru7t_uE3":{"type":"BasicKeyframedTrack","__debugName":"Car-Animation:[\\"rotation\\",\\"z\\"]","keyframes":[{"id":"OHJchf_A9X","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.4299999999999987}]},"Gjjbdk3Dej":{"type":"BasicKeyframedTrack","__debugName":"Car-Animation:[\\"scale\\",\\"x\\"]","keyframes":[]},"PvahIKY3tA":{"type":"BasicKeyframedTrack","__debugName":"Car-Animation:[\\"scale\\",\\"y\\"]","keyframes":[]},"KEmjWrDx9C":{"type":"BasicKeyframedTrack","__debugName":"Car-Animation:[\\"scale\\",\\"z\\"]","keyframes":[]}},"trackIdByPropPath":{"[\\"position\\",\\"x\\"]":"Gek7mFB5hQ","[\\"position\\",\\"y\\"]":"o_rlZXQR1W","[\\"position\\",\\"z\\"]":"sLEZwY7ftP","[\\"rotation\\",\\"x\\"]":"1PRzRl8BIi","[\\"rotation\\",\\"y\\"]":"PIvqghz6a1","[\\"rotation\\",\\"z\\"]":"eRru7t_uE3","[\\"scale\\",\\"x\\"]":"Gjjbdk3Dej","[\\"scale\\",\\"y\\"]":"PvahIKY3tA","[\\"scale\\",\\"z\\"]":"KEmjWrDx9C"}},"Truck":{"trackData":{"JhT7UNODIt":{"type":"BasicKeyframedTrack","__debugName":"Truck:[\\"position\\",\\"x\\"]","keyframes":[{"id":"JBJ6gExH0W","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.3499999999999933},{"id":"fq_2wkOqbE","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":5.9067183338027},{"id":"k9VpcAqbEl","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-3.8189108256104287},{"id":"sBLP2ToHHQ","position":4,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.058949776953347355},{"id":"bBvZvrEFFz","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":4.950628453197395},{"id":"mtURSMj0Ma","position":7,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.0610728940276832},{"id":"u3aKAi4_3e","position":8,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.528799132799698},{"id":"E6T4qRIgTQ","position":9,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.49107289402768306},{"id":"1bHYM5Vl1R","position":9.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.38088516105811865},{"id":"P4ZxDOFzZc","position":10,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4210728940276833},{"id":"k9jWieVDVb","position":10.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4011131388958046},{"id":"fOqKEWHo5a","position":11.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":2.841097582188246},{"id":"0EwIZVmpX4","position":13.4,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-3.7789024178117527},{"id":"6QKCQWaZ9j","position":15.3,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.5810891605107413},{"id":"PmrBYgHDfD","position":16.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-15.619096979381556}]},"D5Twb1m2bK":{"type":"BasicKeyframedTrack","__debugName":"Truck:[\\"position\\",\\"y\\"]","keyframes":[{"id":"9SztaNWtqp","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":2.1099999999999977},{"id":"Y46AFZahjT","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.2102041343043146},{"id":"WR4rVV1F_F","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.07980640703232854},{"id":"Weq0wNDbWX","position":4,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.3000641507138402},{"id":"E-zXxTargF","position":5.933,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.2501299262484915},{"id":"hEmCxaeolG","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.7303617600721508},{"id":"pt4iact-TQ","position":7,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.1902907558157115},{"id":"yelcWNRGtl","position":8,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.20966363557334858},{"id":"n0L6Up6_gt","position":9,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.36967150476361677},{"id":"j8HLqKOtob","position":9.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.5709973754182538},{"id":"AJAYFUMrhC","position":10,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.4103282655688777},{"id":"Tcerfu923e","position":10.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.2103524376912375},{"id":"efmIT02Z-F","position":11.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.8996447877163751},{"id":"NBMIBYayDS","position":13.4,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.11964478771637531},{"id":"UOF4amU0CF","position":15.3,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.18964658246499913},{"id":"k_6h-dN-Uy","position":16.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.8804865783747804}]},"hYidgcLgPy":{"type":"BasicKeyframedTrack","__debugName":"Truck:[\\"position\\",\\"z\\"]","keyframes":[{"id":"9OXUjBeqs7","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.5099999999999911},{"id":"RR_XVY6qk-","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.5399590858469105},{"id":"LzuR-VFp0W","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.7387419945939934},{"id":"SQKEuscA-u","position":4,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.6405366025401282},{"id":"jX0EOXp8Xr","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.07080291214407651},{"id":"11hUpIJ1jK","position":9,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.44621021752063766},{"id":"Oa5WQG-7Tx","position":9.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.04076705241301511},{"id":"CQnw8uJHzp","position":10,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.13076705241301506},{"id":"JAzr9sUfvR","position":10.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.4989989352149433},{"id":"pAwafPnht3","position":11.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.008998935214943275},{"id":"fDPbaSqOSH","position":15.3,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.38899893521494333},{"id":"qHghZ_tvyt","position":16.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.1687914199864935}]},"RviC51MJxD":{"type":"BasicKeyframedTrack","__debugName":"Truck:[\\"rotation\\",\\"x\\"]","keyframes":[{"id":"rIp2KgPuob","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.42999999999999977},{"id":"Lv2ni-3q4l","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.26004149772195806},{"id":"mB6tX5RYCa","position":1.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.03999999999999988},{"id":"ru74lfNOZ7","position":4,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.39955663134829694},{"id":"pQ3fA1RodU","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.01999833527528578},{"id":"SxZLOUMFV7","position":9,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.14999833527528575},{"id":"T2-MUzrj1W","position":11.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.3799983352752857},{"id":"8L4ZX69D6n","position":13.4,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.17000364741661203},{"id":"cKe9m_LyL7","position":15.3,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.2799983352752858},{"id":"ho8UAIEppA","position":16.833,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.10003284096777164}]},"rGe1Q51U1f":{"type":"BasicKeyframedTrack","__debugName":"Truck:[\\"rotation\\",\\"y\\"]","keyframes":[{"id":"nVljnP68if","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-7.24},{"id":"eZQM7f08rk","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-6.680054450437588},{"id":"z_KBEEceYP","position":2,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-5.060152713159231},{"id":"h3zsWFEeN1","position":4,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-3.6100639335635023},{"id":"4t1bxNtLNC","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-1.2300979030029595},{"id":"le3x-6oNl-","position":7,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.9300979030029596},{"id":"8f5PrYisIr","position":8,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-0.5400979030029596},{"id":"iNI6GL2_dm","position":9,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.21985281273330962},{"id":"wAMmZ6ZNO6","position":9.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.4198215753692598},{"id":"yZoiQ6H-YW","position":10.067,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":2.829821575369259},{"id":"7YAgnQFQ7J","position":10.667,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":5.329028158606691},{"id":"Pq6JlP1Za5","position":11.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":6.689017543019928},{"id":"NlmC42I_er","position":13.4,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":1.299247672186718},{"id":"vvjbqywz7l","position":15.3,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":5.579008617846524}]},"YRbfd_yhXv":{"type":"BasicKeyframedTrack","__debugName":"Truck:[\\"rotation\\",\\"z\\"]","keyframes":[{"id":"_2exlcDU4j","position":0,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":-5.204170427930421e-17},{"id":"cWJIdwcUUm","position":1,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.09999810304793672},{"id":"I3oE5vE54y","position":5.967,"connectedRight":true,"handles":[0.5,1,0.5,0],"type":"bezier","value":0.010000735285215273}]},"LB326bw3Te":{"type":"BasicKeyframedTrack","__debugName":"Truck:[\\"scale\\",\\"x\\"]","keyframes":[]},"LFrEQHHFeK":{"type":"BasicKeyframedTrack","__debugName":"Truck:[\\"scale\\",\\"y\\"]","keyframes":[]},"sjEDgSHYso":{"type":"BasicKeyframedTrack","__debugName":"Truck:[\\"scale\\",\\"z\\"]","keyframes":[]}},"trackIdByPropPath":{"[\\"position\\",\\"x\\"]":"JhT7UNODIt","[\\"position\\",\\"y\\"]":"D5Twb1m2bK","[\\"position\\",\\"z\\"]":"hYidgcLgPy","[\\"rotation\\",\\"x\\"]":"RviC51MJxD","[\\"rotation\\",\\"y\\"]":"rGe1Q51U1f","[\\"rotation\\",\\"z\\"]":"YRbfd_yhXv","[\\"scale\\",\\"x\\"]":"LB326bw3Te","[\\"scale\\",\\"y\\"]":"LFrEQHHFeK","[\\"scale\\",\\"z\\"]":"sjEDgSHYso"}}}}}},"definitionVersion":"0.4.0","revisionHistory":["9HPNQmRogAilMFUI","eHLjVehJXQu5o3Xd","MTMF2JZahsqJd9Tt","d4ZFn-u8dS6zsVZk","tw37uedmBoDCQlWZ","F2TOzWPUIu39eyvO","pUSz2McuAtaw_1JM","lQyrVjmGbDrLZjz_","vDiK7thPpMNe-haT","0UM7oKUowaUjsmYR","nCEbyXhPybITppBT","0srNPcXCmwC6LxjY","qtM_FIvWypmvB6N0","yPkexGTB-_F_IhWf","w0w9vaKg66BqxnED","2ffNaOAw0PPFCuDa","ZfPohr2Fb2LzyeXi","rb3gN_1x0qjGskE8"]}')),qv=(0,vv.getProject)("Demo Project",{state:Jv}).sheet("Demo Sheet");function $v(e){(0,t.useEffect)((function(){}));var n=qv.object("Controls",{Controls:{focusDistance:.05,focalLength:.015,chromatic:{x:7e-4,y:7e-4},bloom:1,target:{x:0,y:0,z:0}}},{reconfigure:!0}),r=new t.useState(.05),a=(0,i.Z)(r,2),o=(a[0],a[1],(0,t.useRef)(),(0,t.useRef)()),s=(0,t.useRef)();return(0,t.useEffect)((function(){n.onValuesChange((function(e){s.current.offset.x=n.value.Controls.chromatic.x,s.current.offset.y=n.value.Controls.chromatic.y,o.current.intensity=n.value.Controls.bloom}))}),[]),Be((function(){})),(0,Ni.jsxs)(Mi,{disableNormalPass:!0,multisampling:8,children:[(0,Ni.jsx)(Ei,{ref:o,intensity:1,mipmapblur:!0,radius:.6,luminanceThreshold:.6,luminanceSmoothing:.9}),(0,Ni.jsx)(Ci,{ref:s,offset:[7e-4,7e-4]}),(0,Ni.jsx)(Ii,{eskil:!1,offset:.3,darkness:.4})]})}function em(){var e=Lv();Ut();if(6200){var n=0,r=0;Be((function(t,i){n=6200/16.5,r=(window.scrollY-0)/n+0,console.log(window.scrollY);e.sequence.position=A.MathUtils.damp(e.sequence.position,r,2.5,i)}))}(0,t.useEffect)((function(){}),[])}function tm(){return(0,Ni.jsx)(Ni.Fragment,{children:(0,Ni.jsxs)("main",{id:"main",className:"",children:[(0,Ni.jsx)("div",{className:"background",children:(0,Ni.jsx)(wt,{shadows:!0,gl:{preserveDrawingBuffer:!0,alpha:!0,antialias:!1},children:(0,Ni.jsxs)(Nv,{sheet:qv,children:[(0,Ni.jsx)(em,{}),(0,Ni.jsx)(Kv.mesh,{theatreKey:"Truck",children:(0,Ni.jsx)(Fi,{})}),(0,Ni.jsx)(qt,{files:"https://dl.polyhaven.org/file/ph-assets/HDRIs/hdr/1k/studio_small_09_1k.hdr"}),(0,Ni.jsx)("ambientLight",{intensity:.5}),(0,Ni.jsx)("pointLight",{intensity:.5}),(0,Ni.jsx)(sn,{temporal:!0,frames:100,color:"black",colorBlend:1.5,toneMapped:!0,alphaTest:.75,opacity:1.15,scale:15,children:(0,Ni.jsx)(ln,{intensity:Math.PI,amount:8,radius:6,ambient:.5,position:[5,5,-10],bias:.001})}),(0,Ni.jsx)($v,{})]})})}),(0,Ni.jsx)("section",{className:"vieew ",children:(0,Ni.jsxs)("div",{className:"vieew",children:[(0,Ni.jsx)("section",{className:"main-banner overlay bg-full vieew",id:"wrapper",style:{backgroundImage:"url(images/img01.jpg)"},children:(0,Ni.jsxs)("div",{className:"col-md-6 caption  text-center ",children:[(0,Ni.jsx)("span",{className:"title",children:"simple & "}),(0,Ni.jsxs)("h1",{className:"",children:[" I'M ",(0,Ni.jsx)("span",{className:"textcolor",children:" Hassaan Shahzad"})," "]}),(0,Ni.jsx)("span",{className:"sub-title  ",children:"you will get more than you expected"}),(0,Ni.jsx)("a",{href:"#",className:" btn ",children:"learn more"})]})}),(0,Ni.jsx)("section",{id:"about",className:"main-holder  ",children:(0,Ni.jsxs)("section",{className:"",children:[(0,Ni.jsx)("div",{className:"main-header bg-dark ",children:(0,Ni.jsx)("div",{className:"container",children:(0,Ni.jsxs)("div",{className:"row ",children:[(0,Ni.jsx)("div",{className:"col-xs-12 col-sm-4 text-right col-sm-push-8",children:(0,Ni.jsx)("h2",{className:"main-heading","data-heading":"01",children:"about"})}),(0,Ni.jsx)("div",{className:"col-xs-12  col-sm-8 text-right col-sm-pull-4",children:(0,Ni.jsx)("div",{className:"txt-wrap",children:(0,Ni.jsx)("p",{className:"tex",children:"I'm Hassaan Shahzad, your go-to web and 3D Developer of React Three Fiber. I specialize in crafting highly effective websites that engage your target audience. But I'm more than just a developer; I'm a Web3D Enthusiast and React Three Fiber Wizard . I create Interactive 3D Worlds \ud83c\udf1f using WebGL and React Three Fiber. Let's Build the Future in Pixels! \ud83d\ude80 #WebGL #reactthreefiber"})})})]})})}),(0,Ni.jsxs)("div",{className:"holder  ",children:[(0,Ni.jsx)("div",{className:"col col-md-6 tab-content overlay bg-full vieew",style:{backgroundImage:"url(truck.jpg)"}}),(0,Ni.jsx)("div",{class:"col col-md-6   tab-content overlay bg-full vieew",style:{backgroundImage:"url(images/img02.jpg)"},children:(0,Ni.jsx)("div",{id:"tab1",class:"active",children:(0,Ni.jsxs)("div",{class:"txt-holder text-center",children:[(0,Ni.jsx)("h3",{class:"heading text-uppercase",children:"who we are"}),(0,Ni.jsx)("p",{children:"Hassaan Shahzad, along with Haris Imran, Usman Anwar, and Hadhir Dar, is a dedicated team of web developers and designers. We specialize in creating immersive 3D web experiences using technologies like WebGL and React Three Fiber. Let's build the future in pixels! \ud83d\ude80 #WebGL #reactthreefiber"})]})})})]}),(0,Ni.jsxs)("div",{class:"holder",children:[(0,Ni.jsxs)("div",{class:"col col4",children:[(0,Ni.jsxs)("header",{class:"header",children:[(0,Ni.jsx)("h2",{class:"heading text-uppercase",children:"our best skills"}),(0,Ni.jsx)("p",{children:"What is new beginning in life? New beginnings means that you are allowing yourself to accept changes that might bring good things to you. New beginnings means that you are capable of knowing where you lacked in the past and using those example of failures to create a success ladder for your future self."})]}),(0,Ni.jsxs)("ul",{class:"progress-bar list-unstyled",id:"progress-bar",children:[(0,Ni.jsxs)("li",{children:[(0,Ni.jsx)("span",{class:"txt text-uppercase",children:"React Three Fiber"}),(0,Ni.jsx)("span",{class:"num",children:"91%"}),(0,Ni.jsx)("span",{class:"bar",children:(0,Ni.jsx)("span",{"data-percent":"91%",class:"over"})})]}),(0,Ni.jsxs)("li",{children:[(0,Ni.jsx)("span",{class:"txt text-uppercase",children:"Web Development"}),(0,Ni.jsx)("span",{class:"num",children:"92%"}),(0,Ni.jsx)("span",{class:"bar",children:(0,Ni.jsx)("span",{"data-percent":"92%",class:"over"})})]}),(0,Ni.jsxs)("li",{children:[(0,Ni.jsx)("span",{class:"txt text-uppercase",children:"Verge 3D"}),(0,Ni.jsx)("span",{class:"num",children:"81%"}),(0,Ni.jsx)("span",{class:"bar",children:(0,Ni.jsx)("span",{"data-percent":"81%",class:"over"})})]})]})]}),(0,Ni.jsx)("div",{class:"col col3 overlay bg-full vieew",style:{backgroundImage:"url(images/img03.jpg)"}})]})]})}),(0,Ni.jsxs)("section",{id:"features",class:"feature-sec",children:[(0,Ni.jsx)("div",{class:"main-header left-heading bg-dark",children:(0,Ni.jsx)("div",{class:"container",children:(0,Ni.jsxs)("div",{class:"row",children:[(0,Ni.jsx)("div",{class:"col-xs-12 col-sm-4",children:(0,Ni.jsx)("h2",{class:"main-heading","data-heading":"02",children:"features"})}),(0,Ni.jsx)("div",{class:"col-xs-12 col-sm-8",children:(0,Ni.jsx)("div",{class:"txt-wrap",children:(0,Ni.jsx)("p",{children:"\ud83c\udf10 React Three Fiber Wizard: I wield the magic of React Three Fiber to bring your ideas to life in the 3D realm. \ud83d\ude80 Web Development Expert: I'm Hassaan Shahzad, your trusted web developer and designer. Audience-Centric Design: I specialize in creating websites that perfectly align with your target audience's needs. 3D Enthusiast: Beyond traditional web development,"})})})]})})}),(0,Ni.jsxs)("div",{class:"tab-content vieew bg-color1 padding1",style:{backgroundImage:"url(truck.jpg)"},children:[(0,Ni.jsxs)("div",{class:"row",children:[(0,Ni.jsxs)("div",{class:"col-xs-12 ",children:[(0,Ni.jsx)("div",{className:"",children:(0,Ni.jsxs)("ul",{class:"list-unstyled tabset",children:[(0,Ni.jsx)("li",{class:"wow fadeInUp","data-wow-delay":"0.4s",children:(0,Ni.jsxs)("a",{class:"active",href:"#tab5",children:[(0,Ni.jsxs)("span",{class:"icon",children:[(0,Ni.jsx)("i",{class:"icon-layers"}),(0,Ni.jsx)("i",{class:"icon-layers"})]}),(0,Ni.jsx)("span",{class:"title",children:"web design"})]})}),(0,Ni.jsx)("li",{class:"wow fadeInUp","data-wow-delay":"0.5s",children:(0,Ni.jsxs)("a",{href:"#tab6",children:[(0,Ni.jsxs)("span",{class:"icon",children:[(0,Ni.jsx)("i",{class:"icon-layout"}),(0,Ni.jsx)("i",{class:"icon-layout"})]}),(0,Ni.jsx)("span",{class:"title",children:"development"})]})}),(0,Ni.jsx)("li",{class:"wow fadeInUp","data-wow-delay":"0.6s",children:(0,Ni.jsxs)("a",{href:"#tab7",children:[(0,Ni.jsxs)("span",{class:"icon",children:[(0,Ni.jsx)("i",{class:"icon-idea"}),(0,Ni.jsx)("i",{class:"icon-idea"})]}),(0,Ni.jsx)("span",{class:"title",children:"branding"})]})})]})}),(0,Ni.jsx)("div",{className:"col-md-6 "})]}),(0,Ni.jsx)("div",{className:"hei2"})]}),(0,Ni.jsx)("div",{class:"row",children:(0,Ni.jsxs)("div",{class:"col-xs-12 tab-content",children:[(0,Ni.jsxs)("div",{id:"tab5",children:[(0,Ni.jsxs)("div",{class:"text-wrap text-right",children:[(0,Ni.jsx)("h3",{class:"heading text-uppercase bg-color1",children:"free support"}),(0,Ni.jsx)("p",{className:"tex",children:"\ud83d\ude80 Enhanced Web Presence: I'm Hassaan Shahzad, your trusted web developer and designer, committed to improving your online presence. Immersive 3D Experiences: Beyond conventional design, I'm a Web3D Enthusiast, providing your audience with immersive 3D worlds."}),(0,Ni.jsxs)("ul",{class:"list-unstyled support-list",children:[(0,Ni.jsx)("li",{}),(0,Ni.jsx)("li",{}),(0,Ni.jsx)("li",{}),(0,Ni.jsx)("li",{}),(0,Ni.jsx)("li",{})]})]}),(0,Ni.jsx)("div",{className:"img-holder",children:(0,Ni.jsx)("img",{src:"images/img04.png",alt:"image description"})})]}),(0,Ni.jsxs)("div",{id:"tab6",className:"align-left",children:[(0,Ni.jsx)("div",{className:"img-holder",children:(0,Ni.jsx)("img",{src:"images/img04.png",alt:"image description"})}),(0,Ni.jsxs)("div",{className:"text-wrap",children:[(0,Ni.jsx)("h3",{className:"heading text-uppercase bg-color1",children:"free support"}),(0,Ni.jsx)("p",{className:"tex",children:" \ud83c\udf1fSeamless Interactivity: As a React Three Fiber Wizard, I create seamless interactivity and dynamic content for your projects. Cutting-Edge Web Design: Harnessing the power of WebGL, I push the boundaries of web design, keeping you at the forefront."}),(0,Ni.jsx)("ul",{className:"list-unstyled support-list"})]})]}),(0,Ni.jsxs)("div",{id:"tab7",children:[(0,Ni.jsxs)("div",{className:"text-wrap text-right",children:[(0,Ni.jsx)("h3",{className:"heading text-uppercase bg-color1",children:"free support"}),(0,Ni.jsx)("p",{className:"tex",children:" \ud83c\udf1fSeamless Interactivity: As a React Three Fiber Wizard, I create seamless interactivity and dynamic content for your projects. Cutting-Edge Web Design: Harnessing the power of WebGL, I push the boundaries of web design, keeping you at the forefront."}),(0,Ni.jsx)("ul",{className:"list-unstyled support-list"})]}),(0,Ni.jsx)("div",{className:"img-holder",children:(0,Ni.jsx)("img",{src:"images/img04.png",alt:"image description"})})]}),(0,Ni.jsxs)("div",{id:"tab8",className:"align-left",children:[(0,Ni.jsx)("div",{className:"img-holder",children:(0,Ni.jsx)("img",{src:"images/img04.png",alt:"image description"})}),(0,Ni.jsxs)("div",{className:"text-wrap",children:[(0,Ni.jsx)("h3",{className:"heading text-uppercase bg-color1",children:"free support"}),(0,Ni.jsx)("p",{className:"tex",children:" \ud83c\udf1fSeamless Interactivity: As a React Three Fiber Wizard, I create seamless interactivity and dynamic content for your projects. Cutting-Edge Web Design: Harnessing the power of WebGL, I push the boundaries of web design, keeping you at the forefront."}),(0,Ni.jsx)("ul",{className:"list-unstyled support-list"})]})]}),(0,Ni.jsx)("div",{id:"tab9"})]})})]})]}),(0,Ni.jsx)("section",{className:"client-sec overlay bg-full vieew",style:{backgroundImage:"url(images/img05.jpg)"},children:(0,Ni.jsxs)("div",{className:"container",children:[(0,Ni.jsx)("div",{className:"row",children:(0,Ni.jsx)("div",{className:"col-xs-12",children:(0,Ni.jsxs)("header",{className:"header text-right",children:[(0,Ni.jsx)("h2",{className:"heading text-uppercase",children:"our happy clients"}),(0,Ni.jsxs)("p",{children:["Lorem ipsum dolor sit amet, diam in vestibulum ornare eget integer, et ",(0,Ni.jsx)("br",{}),"erat. Aenean pede. In sit volutpat nunc vel per habitasse. Amet morbi ",(0,Ni.jsx)("br",{}),"amet malesuada et. Velit a neque condimentum, elementu."]})]})})}),(0,Ni.jsx)("div",{className:"row",children:(0,Ni.jsx)("div",{className:"col-xs-12",children:(0,Ni.jsxs)("ul",{className:"list-unstyled client-logo",children:[(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"#",children:(0,Ni.jsx)("img",{src:"images/logo01.jpg",alt:"LOGO"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"#",children:(0,Ni.jsx)("img",{src:"images/logo02.jpg",alt:"LOGO"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"#",children:(0,Ni.jsx)("img",{src:"images/logo03.jpg",alt:"LOGO"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"#",children:(0,Ni.jsx)("img",{src:"images/logo04.jpg",alt:"LOGO"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"#",children:(0,Ni.jsx)("img",{src:"images/logo05.jpg",alt:"LOGO"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"#",children:(0,Ni.jsx)("img",{src:"images/logo05.jpg",alt:"LOGO"})})})]})})})]})}),(0,Ni.jsxs)("section",{id:"works",className:"portfolio-sec",children:[(0,Ni.jsx)("div",{className:"main-header  ",style:{backgroundImage:"url(truck.jpg)"},children:(0,Ni.jsxs)("div",{className:"container",children:[(0,Ni.jsxs)("div",{className:"row",children:[(0,Ni.jsx)("div",{className:"col-xs-12 col-sm-4 text-right col-sm-push-8",children:(0,Ni.jsx)("h2",{className:"main-heading","data-heading":"03",children:"works"})}),(0,Ni.jsx)("div",{className:"col-xs-12 col-sm-8 text-right col-sm-pull-4",children:(0,Ni.jsx)("div",{className:"txt-wrap bg-color1 ",children:(0,Ni.jsxs)("p",{children:["Lorem ipsum dolor sit amet, ac aptent pellentesque ac, urna libero enim",(0,Ni.jsx)("br",{})," Malesuada ut pede wisi, vitae dapibus egestas, duis odio diam mollitia consequat",(0,Ni.jsx)("br",{})," elementum "]})})})]}),(0,Ni.jsx)("div",{className:"height2"})]})}),(0,Ni.jsxs)("div",{id:"masnory-container",children:[(0,Ni.jsxs)("div",{className:"col coll1 design",children:[(0,Ni.jsx)("img",{src:"images/img06.jpg",alt:"image description"}),(0,Ni.jsx)("div",{className:"box",children:(0,Ni.jsxs)("div",{className:"over text-center",children:[(0,Ni.jsx)("h3",{className:"heading text-uppercase",children:"creative elements"}),(0,Ni.jsx)("span",{className:"sub-title",children:"design"}),(0,Ni.jsx)("a",{href:"images/img06.jpg",className:"icon lightbox",children:(0,Ni.jsx)("i",{className:"fa fa-search-plus"})})]})})]}),(0,Ni.jsxs)("div",{className:"col coll2 illustrate",children:[(0,Ni.jsx)("img",{src:"images/img07.jpg",alt:"image description"}),(0,Ni.jsx)("div",{className:"box",children:(0,Ni.jsxs)("div",{className:"over text-center",children:[(0,Ni.jsx)("h3",{className:"heading text-uppercase",children:"creative elements"}),(0,Ni.jsx)("span",{className:"sub-title",children:"design"}),(0,Ni.jsx)("a",{href:"images/img07.jpg",className:"icon lightbox",children:(0,Ni.jsx)("i",{className:"fa fa-search-plus"})})]})})]}),(0,Ni.jsxs)("div",{className:"col coll2 design",children:[(0,Ni.jsx)("img",{src:"images/img08.jpg",alt:"image description"}),(0,Ni.jsx)("div",{className:"box",children:(0,Ni.jsxs)("div",{className:"over text-center",children:[(0,Ni.jsx)("h3",{className:"heading text-uppercase",children:"creative elements"}),(0,Ni.jsx)("span",{className:"sub-title",children:"design"}),(0,Ni.jsx)("a",{href:"images/img08.jpg",className:"icon lightbox",children:(0,Ni.jsx)("i",{className:"fa fa-search-plus"})})]})})]}),(0,Ni.jsxs)("div",{className:"col coll1 brand",children:[(0,Ni.jsx)("img",{src:"images/img09.jpg",alt:"image description"}),(0,Ni.jsx)("div",{className:"box",children:(0,Ni.jsxs)("div",{className:"over text-center",children:[(0,Ni.jsx)("h3",{className:"heading text-uppercase",children:"creative elements"}),(0,Ni.jsx)("span",{className:"sub-title",children:"design"}),(0,Ni.jsx)("a",{href:"images/img09.jpg",className:"icon lightbox",children:(0,Ni.jsx)("i",{className:"fa fa-search-plus"})})]})})]}),(0,Ni.jsxs)("div",{className:"col coll2 illustrate",children:[(0,Ni.jsx)("img",{src:"images/img10.jpg",alt:"image description"}),(0,Ni.jsx)("div",{className:"box",children:(0,Ni.jsxs)("div",{className:"over text-center",children:[(0,Ni.jsx)("h3",{className:"heading text-uppercase",children:"creative elements"}),(0,Ni.jsx)("span",{className:"sub-title",children:"design"}),(0,Ni.jsx)("a",{href:"images/img10.jpg",className:"icon lightbox",children:(0,Ni.jsx)("i",{className:"fa fa-search-plus"})})]})})]}),(0,Ni.jsxs)("div",{className:"col coll2 concept",children:[(0,Ni.jsx)("img",{src:"images/img11.jpg",alt:"image description"}),(0,Ni.jsx)("div",{className:"box",children:(0,Ni.jsxs)("div",{className:"over text-center",children:[(0,Ni.jsx)("h3",{className:"heading text-uppercase",children:"creative elements"}),(0,Ni.jsx)("span",{className:"sub-title",children:"design"}),(0,Ni.jsx)("a",{href:"images/img11.jpg",className:"icon lightbox",children:(0,Ni.jsx)("i",{className:"fa fa-search-plus"})})]})})]})]})]}),(0,Ni.jsx)("section",{className:"counter-sec overlay bg-full vieew",style:{backgroundImage:"url(truck.jpg)"},children:(0,Ni.jsxs)("div",{className:"container",children:[(0,Ni.jsx)("div",{className:"row",children:(0,Ni.jsx)("div",{className:"col-xs-12",children:(0,Ni.jsxs)("header",{className:"header",children:[(0,Ni.jsx)("h2",{className:"heading text-uppercase",children:"some fun facts"}),(0,Ni.jsx)("p",{children:"Thank you for taking the time to provide feedback on our work. We greatly appreciate your input, and it helps us to continuously improve and ensure your satisfaction. We're here to make your vision a reality, and we look forward to implementing your suggestions. Please feel free to reach out if you have any more thoughts or requests.."})]})})}),(0,Ni.jsx)("div",{className:"row",children:(0,Ni.jsx)("div",{className:"col-xs-12",children:(0,Ni.jsxs)("ul",{className:"list-unstyled counter-holder",children:[(0,Ni.jsxs)("li",{className:"text-center",children:[(0,Ni.jsx)("span",{className:"icon",children:(0,Ni.jsx)("i",{className:"icon-clock"})}),(0,Ni.jsx)("span",{className:"count",children:"3451"}),(0,Ni.jsx)("span",{className:"sub-title",children:"hours of work"})]}),(0,Ni.jsxs)("li",{className:"text-center",children:[(0,Ni.jsx)("span",{className:"icon",children:(0,Ni.jsx)("i",{className:"icon-projection"})}),(0,Ni.jsx)("span",{className:"count",children:"273"}),(0,Ni.jsx)("span",{className:"sub-title",children:"finished projects"})]}),(0,Ni.jsxs)("li",{className:"text-center",children:[(0,Ni.jsx)("span",{className:"icon",children:(0,Ni.jsx)("i",{className:"icon-handshake"})}),(0,Ni.jsx)("span",{className:"count",children:"554"}),(0,Ni.jsx)("span",{className:"sub-title",children:"satisfied clients"})]}),(0,Ni.jsxs)("li",{className:"text-center",children:[(0,Ni.jsx)("span",{className:"icon",children:(0,Ni.jsx)("i",{className:"icon-cup"})}),(0,Ni.jsx)("span",{className:"count",children:"2954"}),(0,Ni.jsx)("span",{className:"sub-title",children:"coffee cups"})]})]})})})]})}),(0,Ni.jsxs)("section",{id:"team",className:"team-sec",children:[(0,Ni.jsx)("div",{className:"main-header left-heading bg-dark margin ",style:{backgroundImage:"url(truck.jpg)"},children:(0,Ni.jsx)("div",{className:"container",children:(0,Ni.jsxs)("div",{className:"row",children:[(0,Ni.jsx)("div",{className:"col-xs-12 col-sm-4",children:(0,Ni.jsx)("h2",{className:"main-heading","data-heading":"04",children:"team"})}),(0,Ni.jsx)("div",{className:"col-xs-12 col-sm-8",children:(0,Ni.jsx)("div",{className:"txt-wrap",children:(0,Ni.jsxs)("p",{children:[(0,Ni.jsx)("strong",{className:"team1",children:"Hassaan Shahzad, along with Haris Imran, Usman Anwar, and Hadhir Dar,"})," is a dedicated team of web developers and designers. We specialize in creating immersive 3D web experiences using technologies like WebGL and React Three Fiber. Let's build the future in pixels! \ud83d\ude80 #WebGL #reactthreefiber"]})})})]})})}),(0,Ni.jsx)("div",{className:" team-holder bg-dark padding1 ",children:(0,Ni.jsxs)("div",{className:"row",children:[(0,Ni.jsx)("div",{className:"col-xs-12 col-sm-4",children:(0,Ni.jsx)("div",{className:"team",children:(0,Ni.jsxs)("div",{className:"vieew",children:[(0,Ni.jsx)("img",{src:"images/img13.jpg ",className:"vieew",alt:"image description"}),(0,Ni.jsxs)("div",{className:"over text-center",children:[(0,Ni.jsx)("h3",{className:"heading text-uppercase",children:(0,Ni.jsx)("a",{href:"#",children:"Haris"})}),(0,Ni.jsx)("span",{className:"sub-title",children:"React Three Fiber Dev"}),(0,Ni.jsxs)("ul",{className:"list-unstyled social-network",children:[(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"https://twitter.com/HassaanShaahzad",children:(0,Ni.jsx)("i",{className:"fa fa-twitter"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"https://www.facebook.com/3d.r3f.dev?mibextid=LQQJ4d",children:(0,Ni.jsx)("i",{className:"fa fa-facebook"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"https://instagram.com/r3f_webdev?igshid=NGVhN2U2NjQ0Yg%3D%3D&utm_source=qr",children:(0,Ni.jsx)("i",{className:"fa fa-instagram"})})})]})]})]})})}),(0,Ni.jsx)("div",{className:"col-xs-12 col-sm-4",children:(0,Ni.jsx)("div",{className:"team"})}),(0,Ni.jsx)("div",{className:"col-xs-12 col-sm-4",children:(0,Ni.jsxs)("div",{className:"team ",children:[(0,Ni.jsx)("img",{src:"images/img15.jpg ",className:"vieew",alt:"image description"}),(0,Ni.jsxs)("div",{className:"over text-center",children:[(0,Ni.jsx)("h3",{className:"heading text-uppercase",children:(0,Ni.jsx)("a",{href:"#",children:"Usman and Hashir"})}),(0,Ni.jsx)("span",{className:"sub-title",children:"web developer"}),(0,Ni.jsxs)("ul",{className:"list-unstyled social-network",children:[(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"https://twitter.com/HassaanShaahzad",children:(0,Ni.jsx)("i",{className:"fa fa-twitter"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"https://www.facebook.com/3d.r3f.dev?mibextid=LQQJ4d",children:(0,Ni.jsx)("i",{className:"fa fa-facebook"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"https://instagram.com/r3f_webdev?igshid=NGVhN2U2NjQ0Yg%3D%3D&utm_source=qr",children:(0,Ni.jsx)("i",{className:"fa fa-instagram"})})})]})]})]})})]})})]}),(0,Ni.jsxs)("section",{id:"contact",className:"contact-sec",children:[(0,Ni.jsx)("div",{className:"main-header left-heading bg-dark",children:(0,Ni.jsx)("div",{className:"container",children:(0,Ni.jsxs)("div",{className:"row",children:[(0,Ni.jsx)("div",{className:"col-xs-12 col-sm-4",children:(0,Ni.jsx)("h2",{className:"main-heading","data-heading":"06",children:"contact"})}),(0,Ni.jsx)("div",{className:"col-xs-12 col-sm-8",children:(0,Ni.jsx)("div",{className:"txt-wrap",children:(0,Ni.jsxs)("p",{children:[(0,Ni.jsx)("p",{className:"mail",children:"Email: hassaanshaahzad81@gmail.com"}),"Phone: +923443857571",(0,Ni.jsx)("p",{className:"team1",children:"You can also follow our work and stay updated with our latest projects through our social media channels:"}),(0,Ni.jsx)("i",{className:"fa fa-instagram"}),"Instagram: r3f_webdev",(0,Ni.jsx)("br",{}),(0,Ni.jsx)("i",{className:"fa fa-facebook"})," Facebook Page: R3f.webdev",(0,Ni.jsx)("br",{})]})})})]})})}),(0,Ni.jsx)("div",{className:"contact-holder overlay bg-full vieew",style:{backgroundImage:"url(images/img18.jpg)"},children:(0,Ni.jsx)("div",{className:"container",children:(0,Ni.jsx)("div",{className:"row",children:(0,Ni.jsxs)("div",{className:"col-xs-12",children:[(0,Ni.jsx)("h3",{className:"main-heading text-center text-uppercase",children:"say hello!"}),(0,Ni.jsxs)("ul",{className:"list-unstyled contact-list",children:[(0,Ni.jsxs)("li",{children:[(0,Ni.jsx)("i",{className:"icon icon-telephone"}),(0,Ni.jsxs)("span",{className:"tel",children:[(0,Ni.jsx)("a",{href:"tel:12345678910",children:"1 (234) 567 89 10"}),(0,Ni.jsx)("a",{href:"tel:00987654321",children:"0 (098) 765 43 21"})]})]}),(0,Ni.jsxs)("li",{children:[(0,Ni.jsx)("i",{className:"icon icon-worldwide"}),(0,Ni.jsxs)("span",{className:"mail",children:[(0,Ni.jsx)("a",{href:"www.oreatheme.html",children:"www.oreatheme.com"}),(0,Ni.jsx)("a",{href:"mailto:support@orea.com;",children:"support@orea.com"})]})]}),(0,Ni.jsxs)("li",{children:[(0,Ni.jsx)("i",{className:"icon icon-map"}),(0,Ni.jsxs)("address",{children:["370 Fifth Avenue, 32th floor,",(0,Ni.jsx)("br",{}),"New York, NY 20228, USA"]})]})]}),(0,Ni.jsxs)("form",{action:"https://htmlbeans.com/html/oreo/inc/process.php",className:"contact-form",children:[(0,Ni.jsxs)("div",{className:"col",children:[(0,Ni.jsx)("div",{className:"form-group",children:(0,Ni.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter Your Name",name:"name"})}),(0,Ni.jsx)("div",{className:"form-group",children:(0,Ni.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter Your Email",name:"email"})}),(0,Ni.jsx)("div",{className:"form-group",children:(0,Ni.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter Subject",name:"subject"})})]}),(0,Ni.jsxs)("div",{className:"col textarea",children:[(0,Ni.jsx)("label",{for:"message",children:"Your Message"}),(0,Ni.jsx)("textarea",{id:"message",name:"comment"}),(0,Ni.jsx)("button",{type:"submit",className:"btn btn4",id:"form-submit",children:"submit"})]})]}),(0,Ni.jsx)("div",{className:"done-message",children:(0,Ni.jsxs)("div",{className:"holder",children:[(0,Ni.jsx)("strong",{children:"Thank you!"})," We have received your message. "]})})]})})})}),(0,Ni.jsx)("div",{className:"panel-group overlay",id:"accordion",role:"tablist","aria-multiselectable":"true",children:(0,Ni.jsxs)("div",{className:"panel panel-default",children:[(0,Ni.jsx)("div",{className:"panel-heading text-center",role:"tab",id:"headingOne",children:(0,Ni.jsx)("h4",{className:"panel-title",children:(0,Ni.jsxs)("a",{className:"collapsed",role:"button","data-toggle":"collapse","data-parent":"#accordion",href:"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne",children:["find us on map ",(0,Ni.jsx)("i",{className:"fa fa-angle-double-down"})]})})}),(0,Ni.jsx)("div",{id:"collapseOne",className:"panel-collapse collapse",role:"tabpanel","aria-labelledby":"headingOne",children:(0,Ni.jsx)("div",{className:"panel-body",children:(0,Ni.jsx)("div",{className:"map","data-lat":"52.392363","data-lng":"1.480408","data-zoom":"8",children:(0,Ni.jsxs)("div",{className:"map-info",children:[(0,Ni.jsx)("h2",{children:"OREa"}),(0,Ni.jsx)("p",{children:"Lorem ipsum dolor sit amet..."})]})})})})]})})]})]})})]})})}function nm(){return(0,Ni.jsx)(Ni.Fragment,{children:(0,Ni.jsxs)("header",{id:"header",children:[(0,Ni.jsx)("div",{className:"bg-dark container-fluid",children:(0,Ni.jsxs)("div",{className:"top-nav text-right",children:[(0,Ni.jsx)("a",{href:"mailto:info@oreocompany.com",className:"mail",children:"hassaanshaahzad81@gmail.com"}),(0,Ni.jsxs)("ul",{className:"list-unstyled social-network",children:[(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"https://twitter.com/HassaanShaahzad",children:(0,Ni.jsx)("i",{className:"fa fa-twitter"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"https://www.facebook.com/3d.r3f.dev?mibextid=LQQJ4d",children:(0,Ni.jsx)("i",{className:"fa fa-facebook"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"https://instagram.com/r3f_webdev?igshid=NGVhN2U2NjQ0Yg%3D%3D&utm_source=qr",children:(0,Ni.jsx)("i",{className:"fa fa-instagram"})})})]})]})}),(0,Ni.jsxs)("div",{className:"container-fluid header-holder",children:[(0,Ni.jsx)("div",{className:"logo",children:(0,Ni.jsx)("a",{href:"#",children:(0,Ni.jsx)("img",{src:"images/logo.png",alt:"Orea"})})}),(0,Ni.jsx)("a",{href:"#",class:"nav-opener",children:(0,Ni.jsx)("i",{class:"fa fa-bars"})}),(0,Ni.jsx)("nav",{id:"nav",children:(0,Ni.jsxs)("ul",{className:"list-unstyled",children:[(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{className:"smooth",href:"#wrapper",children:"home"})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{className:"smooth",href:"#about",children:"about"})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{className:"smooth",href:"#features",children:"features"})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{className:"smooth",href:"#works",children:"works"})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{className:"smooth",href:"#team",children:"team"})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{className:"smooth",href:"#contact",children:"contact"})})]})})]})]})})}function rm(){return(0,Ni.jsx)(Ni.Fragment,{children:(0,Ni.jsx)("footer",{id:"footer",className:"",children:(0,Ni.jsx)("div",{className:"",children:(0,Ni.jsxs)("div",{className:"row ",children:[(0,Ni.jsx)("div",{className:"col-xs-12 col-sm-6 view5",children:(0,Ni.jsxs)("p",{children:["Copyright \xa9 2016 ",(0,Ni.jsx)("a",{href:"#",children:"Orea"}),". All Rights Reserved."]})}),(0,Ni.jsx)("div",{className:"col-xs-12 col-sm-6 view5",children:(0,Ni.jsxs)("ul",{className:"list-unstyled social-network",children:[(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"https://twitter.com/HassaanShaahzad",children:(0,Ni.jsx)("i",{className:"fa fa-twitter"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"https://www.facebook.com/3d.r3f.dev?mibextid=LQQJ4d",children:(0,Ni.jsx)("i",{className:"fa fa-facebook"})})}),(0,Ni.jsx)("li",{children:(0,Ni.jsx)("a",{href:"https://instagram.com/r3f_webdev?igshid=NGVhN2U2NjQ0Yg%3D%3D&utm_source=qr",children:(0,Ni.jsx)("i",{className:"fa fa-instagram"})})})]})})]})})})})}function im(){return(0,Ni.jsxs)(Ni.Fragment,{children:[(0,Ni.jsx)(nm,{}),(0,Ni.jsx)(tm,{}),(0,Ni.jsx)(rm,{})]})}var am=document.getElementById("root");(0,e.s)(am).render((0,Ni.jsx)(im,{}))}()})();
//# sourceMappingURL=main.10ae8324.js.map